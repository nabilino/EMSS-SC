/*!
 Infor Html Controls v3.2.0 
 Date: 14-03-2014 40:09:15 
 Revision: 5505 
 */ 
 /*
* Globalize
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses 
* http://jquery.org/license
*/

(function( window, undefined ) {

var Globalize,
	// private variables
	regexHex,
	regexInfinity,
	regexParseFloat,
	regexTrim,
	// private JavaScript utility functions
	arrayIndexOf,
	endsWith,
	extend,
	isArray,
	isFunction,
	isObject,
	startsWith,
	trim,
	truncate,
	zeroPad,
	// private Globalization utility functions
	appendPreOrPostMatch,
	expandFormat,
	formatDate,
	formatNumber,
	getTokenRegExp,
	getEra,
	getEraYear,
	parseExact,
	parseNegativePattern;

// Global variable (Globalize) or CommonJS module (globalize)
Globalize = function( cultureSelector ) {
	return new Globalize.prototype.init( cultureSelector );
};

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	module.exports = Globalize;
} else {
	// Export as global variable
	window.Globalize = Globalize;
}

Globalize.cultures = {};

Globalize.prototype = {
	constructor: Globalize,
	init: function( cultureSelector ) {
		this.cultures = Globalize.cultures;
		this.cultureSelector = cultureSelector;

		return this;
	}
};
Globalize.prototype.init.prototype = Globalize.prototype;

// 1.	 When defining a culture, all fields are required except the ones stated as optional.
// 2.	 Each culture should have a ".calendars" object with at least one calendar named "standard"
//		 which serves as the default calendar in use by that culture.
// 3.	 Each culture should have a ".calendar" object which is the current calendar being used,
//		 it may be dynamically changed at any time to one of the calendars in ".calendars".
Globalize.cultures[ "default" ] = {
	// A unique name for the culture in the form <language code>-<country/region code>
	name: "en",
	// the name of the culture in the english language
	englishName: "English",
	// the name of the culture in its own language
	nativeName: "English",
	// whether the culture uses right-to-left text
	isRTL: false,
	// "language" is used for so-called "specific" cultures.
	// For example, the culture "es-CL" means "Spanish, in Chili".
	// It represents the Spanish-speaking culture as it is in Chili,
	// which might have different formatting rules or even translations
	// than Spanish in Spain. A "neutral" culture is one that is not
	// specific to a region. For example, the culture "es" is the generic
	// Spanish culture, which may be a more generalized version of the language
	// that may or may not be what a specific culture expects.
	// For a specific culture like "es-CL", the "language" field refers to the
	// neutral, generic culture information for the language it is using.
	// This is not always a simple matter of the string before the dash.
	// For example, the "zh-Hans" culture is netural (Simplified Chinese).
	// And the "zh-SG" culture is Simplified Chinese in Singapore, whose lanugage
	// field is "zh-CHS", not "zh".
	// This field should be used to navigate from a specific culture to it's
	// more general, neutral culture. If a culture is already as general as it
	// can get, the language may refer to itself.
	language: "en",
	// numberFormat defines general number formatting rules, like the digits in
	// each grouping, the group separator, and how negative numbers are displayed.
	numberFormat: {
		// [negativePattern]
		// Note, numberFormat.pattern has no "positivePattern" unlike percent and currency,
		// but is still defined as an array for consistency with them.
		//   negativePattern: one of "(n)|-n|- n|n-|n -"
		pattern: [ "-n" ],
		// number of decimal places normally shown
		decimals: 2,
		// string that separates number groups, as in 1,000,000
		",": ",",
		// string that separates a number from the fractional portion, as in 1.99
		".": ".",
		// array of numbers indicating the size of each number group.
		// TODO: more detailed description and example
		groupSizes: [ 3 ],
		// symbol used for positive numbers
		"+": "+",
		// symbol used for negative numbers
		"-": "-",
		// symbol used for NaN (Not-A-Number)
		NaN: "NaN",
		// symbol used for Negative Infinity
		negativeInfinity: "-Infinity",
		// symbol used for Positive Infinity
		positiveInfinity: "Infinity",
		percent: {
			// [negativePattern, positivePattern]
			//   negativePattern: one of "-n %|-n%|-%n|%-n|%n-|n-%|n%-|-% n|n %-|% n-|% -n|n- %"
			//   positivePattern: one of "n %|n%|%n|% n"
			pattern: [ "-n %", "n %" ],
			// number of decimal places normally shown
			decimals: 2,
			// array of numbers indicating the size of each number group.
			// TODO: more detailed description and example
			groupSizes: [ 3 ],
			// string that separates number groups, as in 1,000,000
			",": ",",
			// string that separates a number from the fractional portion, as in 1.99
			".": ".",
			// symbol used to represent a percentage
			symbol: "%"
		},
		currency: {
			// [negativePattern, positivePattern]
			//   negativePattern: one of "($n)|-$n|$-n|$n-|(n$)|-n$|n-$|n$-|-n $|-$ n|n $-|$ n-|$ -n|n- $|($ n)|(n $)"
			//   positivePattern: one of "$n|n$|$ n|n $"
			pattern: [ "($n)", "$n" ],
			// number of decimal places normally shown
			decimals: 2,
			// array of numbers indicating the size of each number group.
			// TODO: more detailed description and example
			groupSizes: [ 3 ],
			// string that separates number groups, as in 1,000,000
			",": ",",
			// string that separates a number from the fractional portion, as in 1.99
			".": ".",
			// symbol used to represent currency
			symbol: "$"
		}
	},
	// calendars defines all the possible calendars used by this culture.
	// There should be at least one defined with name "standard", and is the default
	// calendar used by the culture.
	// A calendar contains information about how dates are formatted, information about
	// the calendar's eras, a standard set of the date formats,
	// translations for day and month names, and if the calendar is not based on the Gregorian
	// calendar, conversion functions to and from the Gregorian calendar.
	calendars: {
		standard: {
			// name that identifies the type of calendar this is
			name: "Gregorian_USEnglish",
			// separator of parts of a date (e.g. "/" in 11/05/1955)
			"/": "/",
			// separator of parts of a time (e.g. ":" in 05:44 PM)
			":": ":",
			// the first day of the week (0 = Sunday, 1 = Monday, etc)
			firstDay: 0,
			days: {
				// full day names
				names: [ "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" ],
				// abbreviated day names
				namesAbbr: [ "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat" ],
				// shortest day names
				namesShort: [ "Su", "Mo", "Tu", "We", "Th", "Fr", "Sa" ]
			},
			months: {
				// full month names (13 months for lunar calendards -- 13th month should be "" if not lunar)
				names: [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December", "" ],
				// abbreviated month names
				namesAbbr: [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec", "" ]
			},
			// AM and PM designators in one of these forms:
			// The usual view, and the upper and lower case versions
			//   [ standard, lowercase, uppercase ]
			// The culture does not use AM or PM (likely all standard date formats use 24 hour time)
			//   null
			AM: [ "AM", "am", "AM" ],
			PM: [ "PM", "pm", "PM" ],
			eras: [
				// eras in reverse chronological order.
				// name: the name of the era in this culture (e.g. A.D., C.E.)
				// start: when the era starts in ticks (gregorian, gmt), null if it is the earliest supported era.
				// offset: offset in years from gregorian calendar
				{
					"name": "A.D.",
					"start": null,
					"offset": 0
				}
			],
			// when a two digit year is given, it will never be parsed as a four digit
			// year greater than this year (in the appropriate era for the culture)
			// Set it as a full year (e.g. 2029) or use an offset format starting from
			// the current year: "+19" would correspond to 2029 if the current year 2010.
			twoDigitYearMax: 2079,
			// set of predefined date and time patterns used by the culture
			// these represent the format someone in this culture would expect
			// to see given the portions of the date that are shown.
			patterns: {
				// short date pattern
				d: "M/d/yyyy",
				// long date pattern
				D: "dddd, MMMM dd, yyyy",
				// short time pattern
				t: "h:mm tt",
				// long time pattern
				T: "h:mm:ss tt",
				// long date, short time pattern
				f: "dddd, MMMM dd, yyyy h:mm tt",
				// long date, long time pattern
				F: "dddd, MMMM dd, yyyy h:mm:ss tt",
				// month/day pattern
				M: "MMMM dd",
				// month/year pattern
				Y: "yyyy MMMM",
				// S is a sortable format that does not vary by culture
				S: "yyyy\u0027-\u0027MM\u0027-\u0027dd\u0027T\u0027HH\u0027:\u0027mm\u0027:\u0027ss"
			}
			// optional fields for each calendar:
			/*
			monthsGenitive:
				Same as months but used when the day preceeds the month.
				Omit if the culture has no genitive distinction in month names.
				For an explaination of genitive months, see http://blogs.msdn.com/michkap/archive/2004/12/25/332259.aspx
			convert:
				Allows for the support of non-gregorian based calendars. This convert object is used to
				to convert a date to and from a gregorian calendar date to handle parsing and formatting.
				The two functions:
					fromGregorian( date )
						Given the date as a parameter, return an array with parts [ year, month, day ]
						corresponding to the non-gregorian based year, month, and day for the calendar.
					toGregorian( year, month, day )
						Given the non-gregorian year, month, and day, return a new Date() object
						set to the corresponding date in the gregorian calendar.
			*/
		}
	},
	// For localized strings
	messages: {"AdditionalHelp":"Additional Help","AddNewTab":"Add New Tab","Alerts":"Alerts","ApplyFilter":"Apply Filter","Approve":"Approve","Attachments":"Attachments","Back":"Back","Basic":"Basic","Between":"Between","Book":"Book","Cancel":"Cancel","Checked":"Checked","ClearFilter":"Clear Filter","Close":"Close","CloseCancelChanges":"Close and Cancel Changes","CloseSaveChanges":"Close and Save Changes","CloseTab":"Close Tab","ColumnPersonalization":"Column Personalization","Comments":"Comments","Confirmation":"Confirmation","Contains":"Contains","CreateTab":"Create a new Tab","Cut":"Cut","Delete":"Delete","DiscardUndo":"Discard/Undo","DisplayDropDownList":"Display Dropdown list","Displaying":"Displaying: ","DocWord":"Document","DoesNotContain":"Does Not Contain","DoesNotEndWith":"Does Not End With","DoesNotEqual":"Does Not Equal","DoesNotStartWith":"Does not Start With","Download":"Download","Duplicate":"Duplicate","Edit":"Edit","EitherSelectedorNotSelected":"Either Selected or Not Selected","Email":"Email","EndsWith":"Ends With","EqualsStr":"Equals","ExpandCollapse":"Expand/Collapse","ExportFailed":"Export Failed","ExportToExcel":"Export to Excel","FileInUse":"Specified File is In Use","FileInUseDetail":"Close the file in the application where it is in use or specify a different file name.","Filter":"Filter","FilterMenu":"Filter Menu","FilterOptions":"Filter Options","FilterWithinResults":"Filter Within Results","First":"First","FirstView":"First View","Folder":"Folder","ForgotPassword":"Forgot your Password?","Forward":"Forward","GetMoreRows":"Get More Rows","GreaterThan":"Greater Than","GreaterThanOrEquals":"Greater Than or Equals","GridSettings":"Grid Settings","GroupSelection":"Group Selection","Help":"Help","HideColumn":"Hide Column","IsEmpty":"Is Empty","IsNotEmpty":"Is Not Empty","Last":"Last","LastView":"Last View","LaunchActivate":"Launch/Activate","LessThan":"Less Than","LessThanOrEquals":"Less Than or Equals","Links":"Links","ListTabs":"List all Tabs","LoadingItem":"Loading item ","Maintenance":"Maintenance","Menu":"Menu","New":"New","Next":"Next","NextView":"Next View","No":"No","NotChecked":"Not Checked","Notes":"Notes","NotSelected":"Not Selected","Of":" of ","Ok":"OK","Open":"Open","Password":"Password","Paste":"Paste","Phone":"Phone","PleaseWait":"Please Wait","Previous":"Previous","PreviousView":"Previous View","Print":"Print","Queries":"Queries","Redo":"Redo","Refresh":"Refresh","Reject":"Reject","RememberMe":"Remember me on this computer","Reports":"Reports","Reset":"Reset","Review":"Review","RunFilter":"Run Filter","RunJob":"Run Job","Save":"Save","SaveBeforeClosing":"Save Before Closing","SavedFilters":"Saved Filters","SaveSubmit":"Save/Submit","ScreenDesign":"Screen Design","Search":"Search","SelectContents":"Select Contents","SelectDate":"Select a Date","SelectDeselect":"Select / Deselect All","Selected":"Selected: ","ServerName":"Server Name","Settings":"Settings","ShowFilterRow":"Show Filter Row","SignIn":"Sign In","SortAscending":"Sort Ascending","SortDescending":"Sort Descending","Spreadsheet":"Spreadsheet","StartsWith":"Starts With","StatusIndicator":"Status Indicator","Tasks":"Tasks","Today":"Today","Translate":"Translate","UserID":"User ID","Utilities":"Utilities","Yes":"Yes","Page":"Page","Rows":"Rows","ShowingAll":"Showing All","SessionNavigation":"Session Navigation","ListAllMenuItems":"List All Menu Items","NoRecordsFound":"No Records Found","SearchTree":"Search Tree","Clear":"Clear","DrillDown":"Drill Down","Required":"This field is required","Available":"Available:","Add":"Add","MoveDown":"Move Down","MoveUp":"Move Up","Remove":"Remove","LastYear":"Last Year","NextMonth":"Next Month","NextWeek":"Next Week","NextYear":"Next Year","OneMonthAgo":"One Month Ago","OneWeekAgo":"One Week Ago","SixMonthsAgo":"Six Months Ago","Time":"Time","CannotBeSelected":"This row cannot be selected.","ResetToDefault":"Reset to Default Layout","CloseOtherTabs":"Close Other Tabs","EmailValidation":"Enter a valid e-mail address","UrlValidation":"Enter a valid URL","EndofResults":"End of Results","More":"More...","RecordsPerPage":"Records Per Page","Maximize":"Maximize","Minimize":"Minimize","CloseAllTabs":"Close All Tabs","QuickDates":"Quick Dates","Finish":"Finish","SetTextColor":"Set text color","AttachmentRules":"Attachment Rules","AutoRefresh":"Auto Refresh","BarChart":"Bar Chart","CopyMail":"Copy and Mail","CopyUrl":"Copy Url","DistributeHorizontally":"Distribute Horizontally","ExpandAll":"Expand All","Generate":"Generate","GenerateScript":"Generate Script","NoAttachments":"No Attachments","PieChart":"Pie Chart","QuickAccess":"Quick Access","RestoreUser":"Restore User","SaveConsolidate":"Save with local Consolidation","Screen Design":"ScreenDesign","SelectAll":"Select All","SpellCheck":"Spell Check","SubmitForApproval":"Submit For Approval","Timezone":"Timezone","Loading":"Loading...","NewNode":"New Node","RememberSettings":"Remember these settings","Company":"Company","Environment":"Environment","DontHaveAccount":"Don\u0027t have an account?","ResetPassword":"Reset my password","SignUpNow":"Sign up Now","SelectMonthYear":"Select Month and Year"}
};

Globalize.cultures[ "default" ].calendar = Globalize.cultures[ "default" ].calendars.standard;

Globalize.cultures[ "en" ] = Globalize.cultures[ "default" ];

Globalize.cultureSelector = "en";

//
// private variables
//

regexHex = /^0x[a-f0-9]+$/i;
regexInfinity = /^[+-]?infinity$/i;
regexParseFloat = /^[+-]?\d*\.?\d*(e[+-]?\d+)?$/;
regexTrim = /^\s+|\s+$/g;

//
// private JavaScript utility functions
//

arrayIndexOf = function( array, item ) {
	if ( array.indexOf ) {
		return array.indexOf( item );
	}
	for ( var i = 0, length = array.length; i < length; i++ ) {
		if ( array[i] === item ) {
			return i;
		}
	}
	return -1;
};

endsWith = function( value, pattern ) {
	return value.substr( value.length - pattern.length ) === pattern;
};

extend = function( ) {
	var options, name, src, copy, copyIsArray, clone,
		target = arguments[0] || {},
		i = 1,
		length = arguments.length,
		deep = false;

	// Handle a deep copy situation
	if ( typeof target === "boolean" ) {
		deep = target;
		target = arguments[1] || {};
		// skip the boolean and the target
		i = 2;
	}

	// Handle case when target is a string or something (possible in deep copy)
	if ( typeof target !== "object" && !isFunction(target) ) {
		target = {};
	}

	for ( ; i < length; i++ ) {
		// Only deal with non-null/undefined values
		if ( (options = arguments[ i ]) != null ) {
			// Extend the base object
			for ( name in options ) {
				src = target[ name ];
				copy = options[ name ];

				// Prevent never-ending loop
				if ( target === copy ) {
					continue;
				}

				// Recurse if we're merging plain objects or arrays
				if ( deep && copy && ( isObject(copy) || (copyIsArray = isArray(copy)) ) ) {
					if ( copyIsArray ) {
						copyIsArray = false;
						clone = src && isArray(src) ? src : [];

					} else {
						clone = src && isObject(src) ? src : {};
					}

					// Never move original objects, clone them
					target[ name ] = extend( deep, clone, copy );

				// Don't bring in undefined values
				} else if ( copy !== undefined ) {
					target[ name ] = copy;
				}
			}
		}
	}

	// Return the modified object
	return target;
};

isArray = Array.isArray || function( obj ) {
	return Object.prototype.toString.call( obj ) === "[object Array]";
};

isFunction = function( obj ) {
	return Object.prototype.toString.call( obj ) === "[object Function]";
};

isObject = function( obj ) {
	return Object.prototype.toString.call( obj ) === "[object Object]";
};

startsWith = function( value, pattern ) {
	return value.indexOf( pattern ) === 0;
};

trim = function( value ) {
	return ( value + "" ).replace( regexTrim, "" );
};

truncate = function( value ) {
	if ( isNaN( value ) ) {
		return NaN;
	}
	return Math[ value < 0 ? "ceil" : "floor" ]( value );
};

zeroPad = function( str, count, left ) {
	var l;
	for ( l = str.length; l < count; l += 1 ) {
		str = ( left ? ("0" + str) : (str + "0") );
	}
	return str;
};

//
// private Globalization utility functions
//

appendPreOrPostMatch = function( preMatch, strings ) {
	// appends pre- and post- token match strings while removing escaped characters.
	// Returns a single quote count which is used to determine if the token occurs
	// in a string literal.
	var quoteCount = 0,
		escaped = false;
	for ( var i = 0, il = preMatch.length; i < il; i++ ) {
		var c = preMatch.charAt( i );
		switch ( c ) {
			case "\'":
				if ( escaped ) {
					strings.push( "\'" );
				}
				else {
					quoteCount++;
				}
				escaped = false;
				break;
			case "\\":
				if ( escaped ) {
					strings.push( "\\" );
				}
				escaped = !escaped;
				break;
			default:
				strings.push( c );
				escaped = false;
				break;
		}
	}
	return quoteCount;
};

expandFormat = function( cal, format ) {
	// expands unspecified or single character date formats into the full pattern.
	format = format || "F";
	var pattern,
		patterns = cal.patterns,
		len = format.length;
	if ( len === 1 ) {
		pattern = patterns[ format ];
		if ( !pattern ) {
			throw "Invalid date format string \'" + format + "\'.";
		}
		format = pattern;
	}
	else if ( len === 2 && format.charAt(0) === "%" ) {
		// %X escape format -- intended as a custom format string that is only one character, not a built-in format.
		format = format.charAt( 1 );
	}
	return format;
};

formatDate = function( value, format, culture ) {
	var cal = culture.calendar,
		convert = cal.convert;

	if ( !format || !format.length || format === "i" ) {
		var ret;
		if ( culture && culture.name.length ) {
			if ( convert ) {
				// non-gregorian calendar, so we cannot use built-in toLocaleString()
				ret = formatDate( value, cal.patterns.F, culture );
			}
			else {
				var eraDate = new Date( value.getTime() ),
					era = getEra( value, cal.eras );
				eraDate.setFullYear( getEraYear(value, cal, era) );
				ret = eraDate.toLocaleString();
			}
		}
		else {
			ret = value.toString();
		}
		return ret;
	}

	var eras = cal.eras,
		sortable = format === "s";
	format = expandFormat( cal, format );

	// Start with an empty string
	ret = [];
	var hour,
		zeros = [ "0", "00", "000" ],
		foundDay,
		checkedDay,
		dayPartRegExp = /([^d]|^)(d|dd)([^d]|$)/g,
		quoteCount = 0,
		tokenRegExp = getTokenRegExp(),
		converted;

	function padZeros( num, c ) {
		var r, s = num + "";
		if ( c > 1 && s.length < c ) {
			r = ( zeros[c - 2] + s);
			return r.substr( r.length - c, c );
		}
		else {
			r = s;
		}
		return r;
	}

	function hasDay() {
		if ( foundDay || checkedDay ) {
			return foundDay;
		}
		foundDay = dayPartRegExp.test( format );
		checkedDay = true;
		return foundDay;
	}

	function getPart( date, part ) {
		if ( converted ) {
			return converted[ part ];
		}
		switch ( part ) {
			case 0: return date.getFullYear();
			case 1: return date.getMonth();
			case 2: return date.getDate();
		}
	}

	if ( !sortable && convert ) {
		converted = convert.fromGregorian( value );
	}

	for ( ; ; ) {
		// Save the current index
		var index = tokenRegExp.lastIndex,
			// Look for the next pattern
			ar = tokenRegExp.exec( format );

		// Append the text before the pattern (or the end of the string if not found)
		var preMatch = format.slice( index, ar ? ar.index : format.length );
		quoteCount += appendPreOrPostMatch( preMatch, ret );

		if ( !ar ) {
			break;
		}

		// do not replace any matches that occur inside a string literal.
		if ( quoteCount % 2 ) {
			ret.push( ar[0] );
			continue;
		}

		var current = ar[ 0 ],
			clength = current.length;

		switch ( current ) {
			case "ddd":
				//Day of the week, as a three-letter abbreviation
			case "dddd":
				// Day of the week, using the full name
				var names = ( clength === 3 ) ? cal.days.namesAbbr : cal.days.names;
				ret.push( names[value.getDay()] );
				break;
			case "d":
				// Day of month, without leading zero for single-digit days
			case "dd":
				// Day of month, with leading zero for single-digit days
				foundDay = true;
				ret.push(
					padZeros( getPart(value, 2), clength )
				);
				break;
			case "MMM":
				// Month, as a three-letter abbreviation
			case "MMMM":
				// Month, using the full name
				var part = getPart( value, 1 );
				ret.push(
					( cal.monthsGenitive && hasDay() )
					?
					cal.monthsGenitive[ clength === 3 ? "namesAbbr" : "names" ][ part ]
					:
					cal.months[ clength === 3 ? "namesAbbr" : "names" ][ part ]
				);
				break;
			case "M":
				// Month, as digits, with no leading zero for single-digit months
			case "MM":
				// Month, as digits, with leading zero for single-digit months
				ret.push(
					padZeros( getPart(value, 1) + 1, clength )
				);
				break;
			case "y":
				// Year, as two digits, but with no leading zero for years less than 10
			case "yy":
				// Year, as two digits, with leading zero for years less than 10
			case "yyyy":
				// Year represented by four full digits
				part = converted ? converted[ 0 ] : getEraYear( value, cal, getEra(value, eras), sortable );
				if ( clength < 4 ) {
					part = part % 100;
				}
				ret.push(
					padZeros( part, clength )
				);
				break;
			case "h":
				// Hours with no leading zero for single-digit hours, using 12-hour clock
			case "hh":
				// Hours with leading zero for single-digit hours, using 12-hour clock
				hour = value.getHours() % 12;
				if ( hour === 0 ) hour = 12;
				ret.push(
					padZeros( hour, clength )
				);
				break;
			case "H":
				// Hours with no leading zero for single-digit hours, using 24-hour clock
			case "HH":
				// Hours with leading zero for single-digit hours, using 24-hour clock
				ret.push(
					padZeros( value.getHours(), clength )
				);
				break;
			case "m":
				// Minutes with no leading zero for single-digit minutes
			case "mm":
				// Minutes with leading zero for single-digit minutes
				ret.push(
					padZeros( value.getMinutes(), clength )
				);
				break;
			case "s":
				// Seconds with no leading zero for single-digit seconds
			case "ss":
				// Seconds with leading zero for single-digit seconds
				ret.push(
					padZeros( value.getSeconds(), clength )
				);
				break;
			case "t":
				// One character am/pm indicator ("a" or "p")
			case "tt":
				// Multicharacter am/pm indicator
				part = value.getHours() < 12 ? ( cal.AM ? cal.AM[0] : " " ) : ( cal.PM ? cal.PM[0] : " " );
				ret.push( clength === 1 ? part.charAt(0) : part );
				break;
			case "f":
				// Deciseconds
			case "ff":
				// Centiseconds
			case "fff":
				// Milliseconds
				ret.push(
					padZeros( value.getMilliseconds(), 3 ).substr( 0, clength )
				);
				break;
			case "z":
				// Time zone offset, no leading zero
			case "zz":
				// Time zone offset with leading zero
				hour = value.getTimezoneOffset() / 60;
				ret.push(
					( hour <= 0 ? "+" : "-" ) + padZeros( Math.floor(Math.abs(hour)), clength )
				);
				break;
			case "zzz":
				// Time zone offset with leading zero
				hour = value.getTimezoneOffset() / 60;
				ret.push(
					( hour <= 0 ? "+" : "-" ) + padZeros( Math.floor(Math.abs(hour)), 2 )
					// Hard coded ":" separator, rather than using cal.TimeSeparator
					// Repeated here for consistency, plus ":" was already assumed in date parsing.
					+ ":" + padZeros( Math.abs(value.getTimezoneOffset() % 60), 2 )
				);
				break;
			case "g":
			case "gg":
				if ( cal.eras ) {
					ret.push(
						cal.eras[ getEra(value, eras) ].name
					);
				}
				break;
		case "/":
			ret.push( (cal["/"]==undefined ? "/" : cal["/"]) );
			break;
		default:
			throw "Invalid date format pattern \'" + current + "\'.";
			break;
		}
	}
	return ret.join( "" );
};

// formatNumber
(function() {
	var expandNumber;

	expandNumber = function( number, precision, formatInfo ) {
		var groupSizes = formatInfo.groupSizes,
			curSize = groupSizes[ 0 ],
			curGroupIndex = 1,
			factor = Math.pow( 10, precision ),
			rounded = Math.round( number * factor ) / factor;

		if ( !isFinite(rounded) ) {
			rounded = number;
		}
		number = rounded;

		var numberString = number+"",
			right = "",
			split = numberString.split( /e/i ),
			exponent = split.length > 1 ? parseInt( split[1], 10 ) : 0;
		numberString = split[ 0 ];
		split = numberString.split( "." );
		numberString = split[ 0 ];
		right = split.length > 1 ? split[ 1 ] : "";

		if ( exponent > 0 ) {
			right = zeroPad( right, exponent, false );
			numberString += right.slice( 0, exponent );
			right = right.substr( exponent );
		}
		else if ( exponent < 0 ) {
			exponent = -exponent;
			numberString = zeroPad( numberString, exponent + 1 );
			right = numberString.slice( -exponent, numberString.length ) + right;
			numberString = numberString.slice( 0, -exponent );
		}

		if ( precision > 0 ) {
			right = formatInfo[ "." ] +
				( (right.length > precision) ? right.slice(0, precision) : zeroPad(right, precision) );
		}
		else {
			right = "";
		}

		var stringIndex = numberString.length - 1,
			sep = formatInfo[ "," ],
			ret = "";

		while ( stringIndex >= 0 ) {
			if ( curSize === 0 || curSize > stringIndex ) {
				return numberString.slice( 0, stringIndex + 1 ) + ( ret.length ? (sep + ret + right) : right );
			}
			ret = numberString.slice( stringIndex - curSize + 1, stringIndex + 1 ) + ( ret.length ? (sep + ret) : "" );

			stringIndex -= curSize;

			if ( curGroupIndex < groupSizes.length ) {
				curSize = groupSizes[ curGroupIndex ];
				curGroupIndex++;
			}
		}

		return numberString.slice( 0, stringIndex + 1 ) + sep + ret + right;
	};

	formatNumber = function( value, format, culture ) {
		if ( !isFinite(value) ) {
			if ( value === Infinity ) {
				return culture.numberFormat.positiveInfinity;
			}
			if ( value === -Infinity ) {
				return culture.numberFormat.negativeInfinity;
			}
			return culture.numberFormat.NaN;
		}
		if ( !format || format === "i" ) {
			return culture.name.length ? value.toLocaleString() : value.toString();
		}
		format = format || "D";

		var nf = culture.numberFormat,
			number = Math.abs( value ),
			precision = -1,
			pattern;
		if ( format.length > 1 ) precision = parseInt( format.slice(1), 10 );

		var current = format.charAt( 0 ).toUpperCase(),
			formatInfo;

		switch ( current ) {
			case "D":
				pattern = "n";
				number = truncate( number );
				if ( precision !== -1 ) {
					number = zeroPad( "" + number, precision, true );
				}
				if ( value < 0 ) number = "-" + number;
				break;
			case "N":
				formatInfo = nf;
				// fall through
			case "C":
				formatInfo = formatInfo || nf.currency;
				// fall through
			case "P":
				formatInfo = formatInfo || nf.percent;
				pattern = value < 0 ? formatInfo.pattern[ 0 ] : ( formatInfo.pattern[1] || "n" );
				if ( precision === -1 ) precision = formatInfo.decimals;
				number = expandNumber( number * (current === "P" ? 100 : 1), precision, formatInfo );
				break;
			default:
				throw "Bad number format specifier: " + current;
		}

		var patternParts = /n|\$|-|%/g,
			ret = "";
		for ( ; ; ) {
			var index = patternParts.lastIndex,
				ar = patternParts.exec( pattern );

			ret += pattern.slice( index, ar ? ar.index : pattern.length );

			if ( !ar ) {
				break;
			}

			switch ( ar[0] ) {
				case "n":
					ret += number;
					break;
				case "$":
					ret += nf.currency.symbol;
					break;
				case "-":
					// don't make 0 negative
					if ( /[1-9]/.test(number) ) {
						ret += nf[ "-" ];
					}
					break;
				case "%":
					ret += nf.percent.symbol;
					break;
			}
		}

		return ret;
	};

}());

getTokenRegExp = function() {
	// regular expression for matching date and time tokens in format strings.
	return /\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;
};

getEra = function( date, eras ) {
	if ( !eras ) return 0;
	var start, ticks = date.getTime();
	for ( var i = 0, l = eras.length; i < l; i++ ) {
		start = eras[ i ].start;
		if ( start === null || ticks >= start ) {
			return i;
		}
	}
	return 0;
};

getEraYear = function( date, cal, era, sortable ) {
	var year = date.getFullYear();
	if ( !sortable && cal.eras ) {
		// convert normal gregorian year to era-shifted gregorian
		// year by subtracting the era offset
		year -= cal.eras[ era ].offset;
	}
	return year;
};

// parseExact
(function() {
	var expandYear,
		getDayIndex,
		getMonthIndex,
		getParseRegExp,
		outOfRange,
		toUpper,
		toUpperArray;

	expandYear = function( cal, year ) {
		// expands 2-digit year into 4 digits.
		if ( year < 100 ) {
			var now = new Date(),
				era = getEra( now ),
				curr = getEraYear( now, cal, era ),
				twoDigitYearMax = cal.twoDigitYearMax;
			twoDigitYearMax = typeof twoDigitYearMax === "string" ? new Date().getFullYear() % 100 + parseInt( twoDigitYearMax, 10 ) : twoDigitYearMax;
			year += curr - ( curr % 100 );
			if ( year > twoDigitYearMax ) {
				year -= 100;
			}
		}
		return year;
	};

	getDayIndex = function	( cal, value, abbr ) {
		var ret,
			days = cal.days,
			upperDays = cal._upperDays;
		if ( !upperDays ) {
			cal._upperDays = upperDays = [
				toUpperArray( days.names ),
				toUpperArray( days.namesAbbr ),
				toUpperArray( days.namesShort )
			];
		}
		value = toUpper( value );
		if ( abbr ) {
			ret = arrayIndexOf( upperDays[1], value );
			if ( ret === -1 ) {
				ret = arrayIndexOf( upperDays[2], value );
			}
		}
		else {
			ret = arrayIndexOf( upperDays[0], value );
		}
		return ret;
	};

	getMonthIndex = function( cal, value, abbr ) {
		var months = cal.months,
			monthsGen = cal.monthsGenitive || cal.months,
			upperMonths = cal._upperMonths,
			upperMonthsGen = cal._upperMonthsGen;
		if ( !upperMonths ) {
			cal._upperMonths = upperMonths = [
				toUpperArray( months.names ),
				toUpperArray( months.namesAbbr )
			];
			cal._upperMonthsGen = upperMonthsGen = [
				toUpperArray( monthsGen.names ),
				toUpperArray( monthsGen.namesAbbr )
			];
		}
		value = toUpper( value );
		var i = arrayIndexOf( abbr ? upperMonths[1] : upperMonths[0], value );
		if ( i < 0 ) {
			i = arrayIndexOf( abbr ? upperMonthsGen[1] : upperMonthsGen[0], value );
		}
		return i;
	};

	getParseRegExp = function( cal, format ) {
		// converts a format string into a regular expression with groups that
		// can be used to extract date fields from a date string.
		// check for a cached parse regex.
		var re = cal._parseRegExp;
		if ( !re ) {
			cal._parseRegExp = re = {};
		}
		else {
			var reFormat = re[ format ];
			if ( reFormat ) {
				return reFormat;
			}
		}

		// expand single digit formats, then escape regular expression characters.
		var expFormat = expandFormat( cal, format ).replace( /([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g, "\\\\$1" ),
			regexp = [ "^" ],
			groups = [],
			index = 0,
			quoteCount = 0,
			tokenRegExp = getTokenRegExp(),
			match;

		// iterate through each date token found.
		while ( (match = tokenRegExp.exec(expFormat)) !== null ) {
			var preMatch = expFormat.slice( index, match.index );
			index = tokenRegExp.lastIndex;

			// don't replace any matches that occur inside a string literal.
			quoteCount += appendPreOrPostMatch( preMatch, regexp );
			if ( quoteCount % 2 ) {
				regexp.push( match[0] );
				continue;
			}

			// add a regex group for the token.
			var m = match[ 0 ],
				len = m.length,
				add;
			switch ( m ) {
				case "dddd": case "ddd":
				case "MMMM": case "MMM":
				case "gg": case "g":
					add = "(\\D+)";
					break;
				case "tt": case "t":
					add = "(\\D*)";
					break;
				case "yyyy":
				case "fff":
				case "ff":
				case "f":
					add = "(\\d{" + len + "})";
					break;
				case "dd": case "d":
				case "MM": case "M":
				case "yy": case "y":
				case "HH": case "H":
				case "hh": case "h":
				case "mm": case "m":
				case "ss": case "s":
					add = "(\\d\\d?)";
					break;
				case "zzz":
					add = "([+-]?\\d\\d?:\\d{2})";
					break;
				case "zz": case "z":
					add = "([+-]?\\d\\d?)";
					break;
				case "/":
					add = "(\\" + (cal["/"]==undefined ? "/" : cal["/"]) + ")";
					break;
				default:
					throw "Invalid date format pattern \'" + m + "\'.";
					break;
			}
			if ( add ) {
				regexp.push( add );
			}
			groups.push( match[0] );
		}
		appendPreOrPostMatch( expFormat.slice(index), regexp );
		regexp.push( "$" );

		// allow whitespace to differ when matching formats.
		var regexpStr = regexp.join( "" ).replace( /\s+/g, "\\s+" ),
			parseRegExp = { "regExp": regexpStr, "groups": groups };

		// cache the regex for this format.
		return re[ format ] = parseRegExp;
	};

	outOfRange = function( value, low, high ) {
		return value < low || value > high;
	};

	toUpper = function( value ) {
		// "he-IL" has non-breaking space in weekday names.
		return value.split( "\u00A0" ).join( " " ).toUpperCase();
	};

	toUpperArray = function( arr ) {
		var results = [];
		for ( var i = 0, l = arr.length; i < l; i++ ) {
			results[ i ] = toUpper( arr[i] );
		}
		return results;
	};

	parseExact = function( value, format, culture ) {
		// try to parse the date string by matching against the format string
		// while using the specified culture for date field names.
		value = trim( value );
		var cal = culture.calendar,
			// convert date formats into regular expressions with groupings.
			// use the regexp to determine the input format and extract the date fields.
			parseInfo = getParseRegExp( cal, format ),
			match = new RegExp( parseInfo.regExp ).exec( value );
		if ( match === null ) {
			return null;
		}
		// found a date format that matches the input.
		var groups = parseInfo.groups,
			era = null, year = null, month = null, date = null, weekDay = null,
			hour = 0, hourOffset, min = 0, sec = 0, msec = 0, tzMinOffset = null,
			pmHour = false;
		// iterate the format groups to extract and set the date fields.
		for ( var j = 0, jl = groups.length; j < jl; j++ ) {
			var matchGroup = match[ j + 1 ];
			if ( matchGroup ) {
				var current = groups[ j ],
					clength = current.length,
					matchInt = parseInt( matchGroup, 10 );
				switch ( current ) {
					case "dd": case "d":
						// Day of month.
						date = matchInt;
						// check that date is generally in valid range, also checking overflow below.
						if ( outOfRange(date, 1, 31) ) return null;
						break;
					case "MMM": case "MMMM":
						month = getMonthIndex( cal, matchGroup, clength === 3 );
						if ( outOfRange(month, 0, 11) ) return null;
						break;
					case "M": case "MM":
						// Month.
						month = matchInt - 1;
						if ( outOfRange(month, 0, 11) ) return null;
						break;
					case "y": case "yy":
					case "yyyy":
						year = clength < 4 ? expandYear( cal, matchInt ) : matchInt;
						if ( outOfRange(year, 0, 9999) ) return null;
						break;
					case "h": case "hh":
						// Hours (12-hour clock).
						hour = matchInt;
						if ( hour === 12 ) hour = 0;
						if ( outOfRange(hour, 0, 11) ) return null;
						break;
					case "H": case "HH":
						// Hours (24-hour clock).
						hour = matchInt;
						if ( outOfRange(hour, 0, 23) ) return null;
						break;
					case "m": case "mm":
						// Minutes.
						min = matchInt;
						if ( outOfRange(min, 0, 59) ) return null;
						break;
					case "s": case "ss":
						// Seconds.
						sec = matchInt;
						if ( outOfRange(sec, 0, 59) ) return null;
						break;
					case "tt": case "t":
						// AM/PM designator.
						// see if it is standard, upper, or lower case PM. If not, ensure it is at least one of
						// the AM tokens. If not, fail the parse for this format.
						pmHour = cal.PM && ( matchGroup === cal.PM[0] || matchGroup === cal.PM[1] || matchGroup === cal.PM[2] );
						if (
							!pmHour && (
								!cal.AM || ( matchGroup !== cal.AM[0] && matchGroup !== cal.AM[1] && matchGroup !== cal.AM[2] )
							)
						) return null;
						break;
					case "f":
						// Deciseconds.
					case "ff":
						// Centiseconds.
					case "fff":
						// Milliseconds.
						msec = matchInt * Math.pow( 10, 3 - clength );
						if ( outOfRange(msec, 0, 999) ) return null;
						break;
					case "ddd":
						// Day of week.
					case "dddd":
						// Day of week.
						weekDay = getDayIndex( cal, matchGroup, clength === 3 );
						if ( outOfRange(weekDay, 0, 6) ) return null;
						break;
					case "zzz":
						// Time zone offset in +/- hours:min.
						var offsets = matchGroup.split( /:/ );
						if ( offsets.length !== 2 ) return null;
						hourOffset = parseInt( offsets[0], 10 );
						if ( outOfRange(hourOffset, -12, 13) ) return null;
						var minOffset = parseInt( offsets[1], 10 );
						if ( outOfRange(minOffset, 0, 59) ) return null;
						tzMinOffset = ( hourOffset * 60 ) + ( startsWith(matchGroup, "-") ? -minOffset : minOffset );
						break;
					case "z": case "zz":
						// Time zone offset in +/- hours.
						hourOffset = matchInt;
						if ( outOfRange(hourOffset, -12, 13) ) return null;
						tzMinOffset = hourOffset * 60;
						break;
					case "g": case "gg":
						var eraName = matchGroup;
						if ( !eraName || !cal.eras ) return null;
						eraName = trim( eraName.toLowerCase() );
						for ( var i = 0, l = cal.eras.length; i < l; i++ ) {
							if ( eraName === cal.eras[i].name.toLowerCase() ) {
								era = i;
								break;
							}
						}
						// could not find an era with that name
						if ( era === null ) return null;
						break;
				}
			}
		}
		var result = new Date(), defaultYear, convert = cal.convert;
		defaultYear = convert ? convert.fromGregorian( result )[ 0 ] : result.getFullYear();
		if ( year === null ) {
			year = defaultYear;
		}
		else if ( cal.eras ) {
			// year must be shifted to normal gregorian year
			// but not if year was not specified, its already normal gregorian
			// per the main if clause above.
			year += cal.eras[( era || 0 )].offset;
		}
		// set default day and month to 1 and January, so if unspecified, these are the defaults
		// instead of the current day/month.
		if ( month === null ) {
			month = 0;
		}
		if ( date === null ) {
			date = 1;
		}
		// now have year, month, and date, but in the culture's calendar.
		// convert to gregorian if necessary
		if ( convert ) {
			result = convert.toGregorian( year, month, date );
			// conversion failed, must be an invalid match
			if ( result === null ) return null;
		}
		else {
			// have to set year, month and date together to avoid overflow based on current date.
			result.setFullYear( year, month, date );
			// check to see if date overflowed for specified month (only checked 1-31 above).
			if ( result.getDate() !== date ) return null;
			// invalid day of week.
			if ( weekDay !== null && result.getDay() !== weekDay ) {
				return null;
			}
		}
		// if pm designator token was found make sure the hours fit the 24-hour clock.
		if ( pmHour && hour < 12 ) {
			hour += 12;
		}
		result.setHours( hour, min, sec, msec );
		if ( tzMinOffset !== null ) {
			// adjust timezone to utc before applying local offset.
			var adjustedMin = result.getMinutes() - ( tzMinOffset + result.getTimezoneOffset() );
			// Safari limits hours and minutes to the range of -127 to 127.	 We need to use setHours
			// to ensure both these fields will not exceed this range.	adjustedMin will range
			// somewhere between -1440 and 1500, so we only need to split this into hours.
			result.setHours( result.getHours() + parseInt(adjustedMin / 60, 10), adjustedMin % 60 );
		}
		return result;
	};
}());

parseNegativePattern = function( value, nf, negativePattern ) {
	var neg = nf[ "-" ],
		pos = nf[ "+" ],
		ret;
	switch ( negativePattern ) {
		case "n -":
			neg = " " + neg;
			pos = " " + pos;
			// fall through
		case "n-":
			if ( endsWith(value, neg) ) {
				ret = [ "-", value.substr(0, value.length - neg.length) ];
			}
			else if ( endsWith(value, pos) ) {
				ret = [ "+", value.substr(0, value.length - pos.length) ];
			}
			break;
		case "- n":
			neg += " ";
			pos += " ";
			// fall through
		case "-n":
			if ( startsWith(value, neg) ) {
				ret = [ "-", value.substr(neg.length) ];
			}
			else if ( startsWith(value, pos) ) {
				ret = [ "+", value.substr(pos.length) ];
			}
			break;
		case "(n)":
			if ( startsWith(value, "(") && endsWith(value, ")") ) {
				ret = [ "-", value.substr(1, value.length - 2) ];
			}
			break;
	}
	return ret || [ "", value ];
};

//
// public instance functions
//

Globalize.prototype.findClosestCulture = function( cultureSelector ) {
	return Globalize.findClosestCulture.call( this, cultureSelector );
};

Globalize.prototype.format = function( value, format, cultureSelector ) {
	return Globalize.format.call( this, value, format, cultureSelector );
};

Globalize.prototype.localize = function( key, cultureSelector ) {
	return Globalize.localize.call( this, key, cultureSelector );
};

Globalize.prototype.parseInt = function( value, radix, cultureSelector ) {
	return Globalize.parseInt.call( this, value, radix, cultureSelector );
};

Globalize.prototype.parseFloat = function( value, radix, cultureSelector ) {
	return Globalize.parseFloat.call( this, value, radix, cultureSelector );
};

Globalize.prototype.culture = function( cultureSelector ) {
	return Globalize.culture.call( this, cultureSelector );
};

//
// public singleton functions
//

Globalize.addCultureInfo = function( cultureName, baseCultureName, info ) {

	var base = {},
		isNew = false;

	if ( typeof cultureName !== "string" ) {
		// cultureName argument is optional string. If not specified, assume info is first
		// and only argument. Specified info deep-extends current culture.
		info = cultureName;
		cultureName = this.culture().name;
		base = this.cultures[ cultureName ];
	} else if ( typeof baseCultureName !== "string" ) {
		// baseCultureName argument is optional string. If not specified, assume info is second
		// argument. Specified info deep-extends specified culture.
		// If specified culture does not exist, create by deep-extending default
		info = baseCultureName;
		isNew = ( this.cultures[ cultureName ] == null );
		base = this.cultures[ cultureName ] || this.cultures[ "default" ];
	} else {
		// cultureName and baseCultureName specified. Assume a new culture is being created
		// by deep-extending an specified base culture
		isNew = true;
		base = this.cultures[ baseCultureName ];
	}

	this.cultures[ cultureName ] = extend(true, {},
		base,
		info
	);
	// Make the standard calendar the current culture if it's a new culture
	if ( isNew ) {
		this.cultures[ cultureName ].calendar = this.cultures[ cultureName ].calendars.standard;
	}
};

Globalize.findClosestCulture = function( name ) {
	var match;
	if ( !name ) {
		return this.findClosestCulture( this.cultureSelector ) || this.cultures[ "default" ];
	}
	if ( typeof name === "string" ) {
		name = name.split( "," );
	}
	if ( isArray(name) ) {
		var lang,
			cultures = this.cultures,
			list = name,
			i, l = list.length,
			prioritized = [];
		for ( i = 0; i < l; i++ ) {
			name = trim( list[i] );
			var pri, parts = name.split( ";" );
			lang = trim( parts[0] );
			if ( parts.length === 1 ) {
				pri = 1;
			}
			else {
				name = trim( parts[1] );
				if ( name.indexOf("q=") === 0 ) {
					name = name.substr( 2 );
					pri = parseFloat( name );
					pri = isNaN( pri ) ? 0 : pri;
				}
				else {
					pri = 1;
				}
			}
			prioritized.push({ lang: lang, pri: pri });
		}
		prioritized.sort(function( a, b ) {
			return a.pri < b.pri ? 1 : -1;
		});

		// exact match
		for ( i = 0; i < l; i++ ) {
			lang = prioritized[ i ].lang;
			match = cultures[ lang ];
			if ( match ) {
				return match;
			}
		}

		// neutral language match
		for ( i = 0; i < l; i++ ) {
			lang = prioritized[ i ].lang;
			do {
				var index = lang.lastIndexOf( "-" );
				if ( index === -1 ) {
					break;
				}
				// strip off the last part. e.g. en-US => en
				lang = lang.substr( 0, index );
				match = cultures[ lang ];
				if ( match ) {
					return match;
				}
			}
			while ( 1 );
		}

		// last resort: match first culture using that language
		for ( i = 0; i < l; i++ ) {
			lang = prioritized[ i ].lang;
			for ( var cultureKey in cultures ) {
				var culture = cultures[ cultureKey ];
				if ( culture.language == lang ) {
					return culture;
				}
			}
		}
	}
	else if ( typeof name === "object" ) {
		return name;
	}
	return match || null;
};

Globalize.format = function( value, format, cultureSelector ) {
	culture = this.findClosestCulture( cultureSelector );
	if (Object.prototype.toString.call(value) === '[object Date]') {	//its a date
		value = formatDate( value, format, culture );
	} else if ( typeof value === "number" ) {
		value = formatNumber( value, format, culture );
	}
	return value;
};

Globalize.localize = function( key, cultureSelector ) {
	return this.findClosestCulture( cultureSelector ).messages[ key ] ||
		this.cultures[ "default" ].messages[ key ];
};

Globalize.parseDate = function( value, formats, culture ) {
	culture = this.findClosestCulture( culture );

	var date, prop, patterns;
	if ( formats ) {
		if ( typeof formats === "string" ) {
			formats = [ formats ];
		}
		if ( formats.length ) {
			for ( var i = 0, l = formats.length; i < l; i++ ) {
				var format = formats[ i ];
				if ( format ) {
					date = parseExact( value, format, culture );
					if ( date ) {
						break;
					}
				}
			}
		}
	} else {
		patterns = culture.calendar.patterns;
		for ( prop in patterns ) {
			date = parseExact( value, patterns[prop], culture );
			if ( date ) {
				break;
			}
		}
	}

	return date || null;
};

Globalize.parseInt = function( value, radix, cultureSelector ) {
	return truncate( Globalize.parseFloat(value, radix, cultureSelector) );
};

Globalize.parseFloat = function( value, radix, cultureSelector ) {
	// radix argument is optional
	if ( typeof radix !== "number" ) {
		cultureSelector = radix;
		radix = 10;
	}

	var culture = this.findClosestCulture( cultureSelector );
	var ret = NaN,
		nf = culture.numberFormat;

	if ( value.indexOf(culture.numberFormat.currency.symbol) > -1 ) {
		// remove currency symbol
		value = value.replace( culture.numberFormat.currency.symbol, "" );
		// replace decimal seperator
		value = value.replace( culture.numberFormat.currency["."], culture.numberFormat["."] );
	}

	// trim leading and trailing whitespace
	value = trim( value );

	// allow infinity or hexidecimal
	if ( regexInfinity.test(value) ) {
		ret = parseFloat( value );
	}
	else if ( !radix && regexHex.test(value) ) {
		ret = parseInt( value, 16 );
	}
	else {

		// determine sign and number
		var signInfo = parseNegativePattern( value, nf, nf.pattern[0] ),
			sign = signInfo[ 0 ],
			num = signInfo[ 1 ];

		// #44 - try parsing as "(n)"
		if ( sign === "" && nf.pattern[0] !== "(n)" ) {
			signInfo = parseNegativePattern( value, nf, "(n)" );
			sign = signInfo[ 0 ];
			num = signInfo[ 1 ];
		}

		// try parsing as "-n"
		if ( sign === "" && nf.pattern[0] !== "-n" ) {
			signInfo = parseNegativePattern( value, nf, "-n" );
			sign = signInfo[ 0 ];
			num = signInfo[ 1 ];
		}

		sign = sign || "+";

		// determine exponent and number
		var exponent,
			intAndFraction,
			exponentPos = num.indexOf( "e" );
		if ( exponentPos < 0 ) exponentPos = num.indexOf( "E" );
		if ( exponentPos < 0 ) {
			intAndFraction = num;
			exponent = null;
		}
		else {
			intAndFraction = num.substr( 0, exponentPos );
			exponent = num.substr( exponentPos + 1 );
		}
		// determine decimal position
		var integer,
			fraction,
			decSep = nf[ "." ],
			decimalPos = intAndFraction.indexOf( decSep );
		if ( decimalPos < 0 ) {
			integer = intAndFraction;
			fraction = null;
		}
		else {
			integer = intAndFraction.substr( 0, decimalPos );
			fraction = intAndFraction.substr( decimalPos + decSep.length );
		}
		// handle groups (e.g. 1,000,000)
		var groupSep = nf[ "," ];
		integer = integer.split( groupSep ).join( "" );
		var altGroupSep = groupSep.replace( /\u00A0/g, " " );
		if ( groupSep !== altGroupSep ) {
			integer = integer.split( altGroupSep ).join( "" );
		}
		// build a natively parsable number string
		var p = sign + integer;
		if ( fraction !== null ) {
			p += "." + fraction;
		}
		if ( exponent !== null ) {
			// exponent itself may have a number patternd
			var expSignInfo = parseNegativePattern( exponent, nf, "-n" );
			p += "e" + ( expSignInfo[0] || "+" ) + expSignInfo[ 1 ];
		}
		if ( regexParseFloat.test(p) ) {
			ret = parseFloat( p );
		}
	}
	return ret;
};

Globalize.culture = function( cultureSelector ) {
	// setter
	if ( typeof cultureSelector !== "undefined" ) {
		this.cultureSelector = cultureSelector;
		if (Globalize.culture().isRTL) {
			$("html").attr("dir","rtl");
		} else {
			$("html").removeAttr("dir");
		}
		$("html").attr("lang",cultureSelector);
	}
	// getter
	return this.findClosestCulture( cultureSelector ) || this.culture[ "default" ];
};

$("html").attr("lang","en-US");

/*Parse the Utc Date String into Local Format or UTC Format*/
Globalize.parseUtcDate = function(value, toLocalTime, formats, culture) {
	var date = null;
	if (typeof value =="string" && value.substr(0,6)=="/Date(") {
		value  = value.substr(6).replace(")","").replace("/","")
	}
	
	if (typeof value =="string" && value.indexOf("T") > -1) {
		date = Globalize.parseDate(value, formats, culture);
	} else {
		date = new Date(parseInt(value));
	}

	if (date == null) {
		return null;
	}

	if (toLocalTime) {
		date.setMinutes(date.getMinutes() - date.getTimezoneOffset());
	} else {
		//date.setMinutes(date.getMinutes() + date.getTimezoneOffset());
		date = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds(), date.getUTCMilliseconds());
	}
	return date;
};

}( this ));
/*
* Collection of Shared Bindings for use in KnockOut
*/
$(function () {

	//only add this if knockout is present..
	if (typeof ko === "undefined") {
		return;
	}

	/* Provide the ability to translate and change text bindings on buttons.
	* Note: could also pass in a literal here: translate: 'SearchTreex'
	*/
	ko.bindingHandlers.translate = {
		setText: function(element, valueAccessor){
			var key = ko.utils.unwrapObservable(valueAccessor()),
				translatedText = Globalize.localize(key),
				text = (translatedText==undefined ? key  : translatedText);
			
			if ($(element).find(".innerText").length > 0) {
				$(element).find(".innerText").text(text);
			} else {
				$(element).text(text);
			}
		},
		init: function(element, valueAccessor) {
			ko.bindingHandlers.translate.setText(element, valueAccessor);
		},
		update: function(element, valueAccessor) {
		ko.bindingHandlers.translate.setText(element, valueAccessor);
		}
	};

	/* Provide the ability to bind the code value..
	*/
	ko.bindingHandlers.inforDropDownList = {
		init: function(element, valueAccessor, allBindingsAccessor, viewModel) {
			var opts = ko.utils.unwrapObservable(valueAccessor()),
				elem = $(element);
			
			//set the data
			ko.bindingHandlers.inforDropDownList.setData(elem, opts);
			
			//init the control
			if (opts.options) {
				elem.inforDropDownList(opts.options);
			} else if (!elem.data("uiInforDropDownList")) {
				elem.inforDropDownList();
			}
			
			//set the value
			if (opts.value) {
				elem.inforDropDownList("setCode", opts.value, true);
			}
			
			//Setup events
			ko.utils.registerEventHandler(element, "change", function() { 
				var value = valueAccessor().value;
				value($(this).val());
			});
		},
		update: function(element, valueAccessor, allBindingsAccessor, viewModel) {
			var opts = ko.utils.unwrapObservable(valueAccessor()),
				elem = $(element);
			
			if (opts.data) {
				ko.bindingHandlers.inforDropDownList.setData(elem, opts);
			}
			$(element).inforDropDownList("setCode", ko.utils.unwrapObservable(opts.value), true);
		},
		setData: function(elem, opts) {
			if (opts.data) {
				var data = ko.utils.unwrapObservable(opts.data);
				elem.empty();
				for (var i=0; i < data.length; i++) {
					var opt = $("<option></option").attr("value", (opts.optionsValue ? data[i][opts.optionsValue] : data[i].key)).html((opts.optionsText ? data[i][opts.optionsText] : data[i].name));
					elem.append(opt);
				}
			}
		}
	};
	
	ko.bindingHandlers.inforCheckbox = {
		init: function(element, valueAccessor, allBindingsAccessor, viewModel) {
			var opts = ko.utils.unwrapObservable(valueAccessor()),
				elem = $(element);
				
			//Setup events
			ko.utils.registerEventHandler(element, "change", function() { 
				var value = valueAccessor().value;
				value($(this).getValue());
			});
			
			//init the control
			if (!elem.data("uiInforCheckbox")) {
				setTimeout(function () {
					elem.inforCheckbox();
				},1);
			}
				
			//set the value
			if (opts.value) {
				elem.setValue(opts.value);
			}
		},
		update: function(element, valueAccessor, allBindingsAccessor, viewModel) {
			var opts = ko.utils.unwrapObservable(valueAccessor()),
				elem = $(element);
			elem.setValue(ko.utils.unwrapObservable(opts.value));
		}
	};
	
	ko.bindingHandlers.inforSlider = {
		init: function(element, valueAccessor, allBindingsAccessor, viewModel) {
			var opts = ko.utils.unwrapObservable(valueAccessor()),
				elem = $(element);
				
			//Setup events
			ko.utils.registerEventHandler(element, "slidechange", function(e, ui) { 
				var value = valueAccessor().value;
				value(ui.value);
			});
			
			//init the control
			if (opts.options) {
				elem.inforSlider(opts.options);
			} else if (!elem.data("uiInforSlider")) {
				elem.inforSlider();
			}
			
			//set the value
			if (opts.value) {
				elem.data("uiInforSlider").value(ko.utils.unwrapObservable(opts.value));
			}
		},
		update: function(element, valueAccessor, allBindingsAccessor, viewModel) {
			var opts = ko.utils.unwrapObservable(valueAccessor()),
				elem = $(element);
			
			elem.data("uiInforSlider").value(ko.utils.unwrapObservable(opts.value));
		}
	};
	
	ko.bindingHandlers.inforRadioButton = {
		init: function(element, valueAccessor, allBindingsAccessor, viewModel) {
			var opts = ko.utils.unwrapObservable(valueAccessor()),
				elem = $(element);
				
			//Setup events
			ko.utils.registerEventHandler(element, "change", function() { 
				var value = valueAccessor().value;
				value($(this).getValue());
			});
			
			//init the control
			if (!elem.data("uiIforRadioButton")) {
				elem.find("input").inforRadioButton();
			}
				
			//set the value
			if (opts.value) {
				elem.setValue(ko.utils.unwrapObservable(opts.value));
			}
		},
		update: function(element, valueAccessor, allBindingsAccessor, viewModel) {
			var opts = ko.utils.unwrapObservable(valueAccessor()),
				elem = $(element);
				
			elem.setValue(ko.utils.unwrapObservable(opts.value));
		}
	};
	
	/* Util to Copy a Binding from one object to another and optionally remove it*/
	ko.copyBinding = function( fromObject, toObject, binding, remove ) {
		//Get the attributes from the source object
		var attr = fromObject.attr("data-bind"),
			found = false;

		if (!attr)
			return;

		var seperated = attr.split(",");	//Separate them
		for (attr in seperated) {
			var attrPair = $.trim(seperated[attr]);
			if (attrPair.indexOf(binding+":")==0) {
				//found copy it
				var old = toObject.attr("data-bind");
				toObject.attr("data-bind",(old == undefined ? attrPair : old+","+attrPair));
				//remove it from the array
				delete seperated[attr];
				found = true;
			}
		}

		if (remove && found) {
			var newAttr =seperated.toString();
			if (newAttr.substring(newAttr.length-1)==",")
				newAttr = newAttr.substring(0, newAttr.length-1);

			newAttr = newAttr.replace(/,,/gi, ",");
			fromObject.attr("data-bind",newAttr);
		}
	}

});/*
* Collection of Plugins Shared across multiple plugins....
*/
(function($) {
/*
* $.timers - Timer abstractions for $
* Written by Blair Mitchelmore (blair DOT mitchelmore AT gmail DOT com)
* Licensed under the WTFPL (http://sam.zoy.org/wtfpl/).
* Date: 2009/10/16
*
* @author Blair Mitchelmore
* @version 1.2
*
**/
$.fn.extend({everyTime:function(a,b,c,d){return this.each(function(){$.timer.add(this,a,b,c,d)})},oneTime:function(a,b,c){return this.each(function(){$.timer.add(this,a,b,c,1)})},stopTime:function(a,b){return this.each(function(){$.timer.remove(this,a,b)})}});$.extend({timer:{global:[],guid:1,dataKey:"$.timer",regex:/^([0-9]+(?:\.[0-9]*)?)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(a){if(a==undefined||a==null)return null;var b=this.regex.exec($.trim(a.toString()));if(b[2]){var c=parseFloat(b[1]);var d=this.powers[b[2]]||1;return c*d}else{return a}},add:function(a,b,c,d,e){var f=0;if($.isFunction(c)){if(!e)e=d;d=c;c=b}b=$.timer.timeParse(b);if(typeof b!="number"||isNaN(b)||b<0)return;if(typeof e!="number"||isNaN(e)||e<0)e=0;e=e||0;var g=$.data(a,this.dataKey)||$.data(a,this.dataKey,{});if(!g[c])g[c]={};d.timerID=d.timerID||this.guid++;var h=function(){if(++f>e&&e!==0||d.call(a,f)===false)$.timer.remove(a,c,d)};h.timerID=d.timerID;if(!g[c][d.timerID])g[c][d.timerID]=window.setInterval(h,b);this.global.push(a)},remove:function(a,b,c){var d=$.data(a,this.dataKey),e;if(d){if(!b){for(b in d)this.remove(a,b,c)}else if(d[b]){if(c){if(c.timerID){window.clearInterval(d[b][c.timerID]);delete d[b][c.timerID]}}else{for(var c in d[b]){window.clearInterval(d[b][c]);delete d[b][c]}}for(e in d[b])break;if(!e){e=null;delete d[b]}}for(e in d)break;if(!e)$.removeData(a,this.dataKey)}}}});$(window).bind("unload",function(){$.each($.timer.global,function(a,b){$.timer.remove(b)})});

})($);


/*
* throttledresize: special jQuery event that happens at a reduced rate compared to "resize"
*
* latest version and complete README available on Github:
* https://github.com/louisremi/jquery-smartresize
*
* Copyright 2012 @louis_remi
* Licensed under the MIT license.
*
* This saved you an hour of work?
* Send me music http://www.amazon.co.uk/wishlist/HNTU0468LQON
*/
(function($) {

var $event = $.event,
	$special,
	dummy = {_:0},
	frame = 0,
	wasResized, animRunning;

$special = $event.special.throttledresize = {
	setup: function() {
		$( this ).on( "resize", $special.handler );
	},
	teardown: function() {
		$( this ).off( "resize", $special.handler );
	},
	handler: function( event, execAsap ) {
		// Save the context
		var context = this,
			args = arguments;

		wasResized = true;

		if ( !animRunning ) {
			setInterval(function(){
				frame++;

				if ( frame > $special.threshold && wasResized || execAsap ) {
					// set correct event type
					event.type = "throttledresize";
					$event.dispatch.apply( context, args );
					wasResized = false;
					frame = 0;
				}
				if ( frame > 9 ) {
					$(dummy).stop();
					animRunning = false;
					frame = 0;
				}
			}, 30);
			animRunning = true;
		}
	},
	threshold: 0
};

})(jQuery);

/*
* hoverIntent r6 // 2011.02.26 // $ 1.5.1+
* <http://cherne.net/brian/resources/$.hoverIntent.html>
*
* @param  f  onMouseOver function || An object with configuration options
* @param  g  onMouseOut function  || Nothing (use configuration options object)
* @author    Brian Cherne brian(at)cherne(dot)net
*/
(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev])}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev])};var handleHover=function(e){var ev=$.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t)}if(e.type=="mouseenter"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob)},cfg.timeout)}}};return this.bind('mouseenter',handleHover).bind('mouseleave',handleHover)}})($);

/*
* $ Hotkeys Plugin
* Copyright 2010, John Resig
* Dual licensed under the MIT or GPL Version 2 licenses.
*
* Based upon the plugin by Tzury Bar Yochay:
* http://github.com/tzuryby/hotkeys
*
* Original idea by:
* Binny V A, http://www.openjs.com/scripts/events/keyboard_shortcuts/
*/
(function($){

	$.hotkeys = {
		version: "0.8",

		specialKeys: {
			8: "backspace", 9: "tab", 13: "return", 16: "shift", 17: "ctrl", 18: "alt", 19: "pause",
			20: "capslock", 27: "esc", 32: "space", 33: "pageup", 34: "pagedown", 35: "end", 36: "home",
			37: "left", 38: "up", 39: "right", 40: "down", 45: "insert", 46: "del",
			96: "0", 97: "1", 98: "2", 99: "3", 100: "4", 101: "5", 102: "6", 103: "7",
			104: "8", 105: "9", 106: "*", 107: "+", 109: "-", 110: ".", 111 : "/",
			112: "f1", 113: "f2", 114: "f3", 115: "f4", 116: "f5", 117: "f6", 118: "f7", 119: "f8",
			120: "f9", 121: "f10", 122: "f11", 123: "f12", 144: "numlock", 145: "scroll", 191: "/", 224: "meta"
		},

		shiftNums: {
			"`": "~", "1": "!", "2": "@", "3": "#", "4": "$", "5": "%", "6": "^", "7": "&",
			"8": "*", "9": "(", "0": ")", "-": "_", "=": "+", ";": ": ", "'": "\"", ",": "<",
			".": ">",  "/": "?",  "\\": "|"
		}
	};

	function keyHandler( handleObj ) {
		// Only care when a possible input has been specified
		if ( typeof handleObj.data !== "string" ) {
			return;
		}

		var origHandler = handleObj.handler,
			keys = handleObj.data.toLowerCase().split(" ");

		handleObj.handler = function( event ) {
			// Don't fire in text-accepting inputs that we didn't directly bind to
			if ( this !== event.target && (/textarea|select/i.test( event.target.nodeName ) ||
				event.target.type === "text") ) {
				return;
			}

			// Keypress represents characters, not special keys
			var special = event.type !== "keypress" && $.hotkeys.specialKeys[ event.which ],
				character = String.fromCharCode( event.which ).toLowerCase(),
				modif = "", possible = {};

			// check combinations (alt|ctrl|shift+anything)
			if ( event.altKey && special !== "alt" ) {
				modif += "alt+";
			}

			if ( event.ctrlKey && special !== "ctrl" ) {
				modif += "ctrl+";
			}

			// TODO: Need to make sure this works consistently across platforms
			if ( event.metaKey && !event.ctrlKey && special !== "meta" ) {
				modif += "meta+";
			}

			if ( event.shiftKey && special !== "shift" ) {
				modif += "shift+";
			}

			if ( special ) {
				possible[ modif + special ] = true;

			} else {
				possible[ modif + character ] = true;
				possible[ modif + $.hotkeys.shiftNums[ character ] ] = true;

				// "$" can be triggered as "Shift+4" or "Shift+$" or just "$"
				if ( modif === "shift+" ) {
					possible[ $.hotkeys.shiftNums[ character ] ] = true;
				}
			}

			for ( var i = 0, l = keys.length; i < l; i++ ) {
				if ( possible[ keys[i] ] ) {
					return origHandler.apply( this, arguments );
				}
			}
		};
	}

	$.each([ "keydown", "keyup", "keypress" ], function() {
		$.event.special[ this ] = { add: keyHandler };
	});

})( $ );


/*
* hoverIntent r6 // 2011.02.26 // $ 1.5.1+
* <http://cherne.net/brian/resources/$.hoverIntent.html>
*
* @param  f  onMouseOver function || An object with configuration options
* @param  g  onMouseOut function  || Nothing (use configuration options object)
* @author    Brian Cherne brian(at)cherne(dot)net
*/
(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev])}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev])};var handleHover=function(e){var ev=$.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t)}if(e.type=="mouseenter"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob)},cfg.timeout)}}};return this.bind('mouseenter',handleHover).bind('mouseleave',handleHover)}})($);

/*
* Some Simple jQuery Functions
*/
(function($) {
	/*
	* Puts the cursor at the end of text in an input field.
	*/
	$.fn.putCursorAtEnd = function()
	{
		return this.each(function()
		{
			$(this).focus()

			// If this function exists...
			if (this.setSelectionRange)
			{
				// ... then use it
				// (Doesn't work in IE)

				// Double the length because Opera is inconsistent about whether a carriage return is one character or two. Sigh.
				var len = $(this).val().length * 2;
				this.setSelectionRange(len, len);
			}
			else
			{
				// ... otherwise replace the contents with itself
				// (Doesn't work in Google Chrome)
				$(this).val($(this).val());
			}

			// Scroll to the bottom, in case we're in a tall textarea
			// (Necessary for Firefox and Google Chrome)
			this.scrollTop = 999999;
		});
	};

	/*
	* Escape a String
	*/
	$.escape = function (str) {
		var entityMap = {
						"&": "&amp;",
						"<": "&lt;",
						">": "&gt;",
						'"': '&quot;',
						"'": '&#39;',
						"/": '&#x2F;'
					};

		return String(str).replace(/[&<>"'\/]/g, function (s) {
		return entityMap[s];
		});
	};

})($);

(function($) {
	/*
	* Cookie plugin
	*
	* Copyright (c) 2006 Klaus Hartl (stilbuero.de)
	* Dual licensed under the MIT and GPL licenses:
	* http://www.opensource.org/licenses/mit-license.php
	* http://www.gnu.org/licenses/gpl.html
	*
	*/
	$.cookie=function(name,value,options){if(typeof value!='undefined'){options=options||{};if(value===null){value='';options.expires=-1;}
	var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toUTCString)){var date;if(typeof options.expires=='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}
	expires='; expires='+date.toUTCString();}
	var path=options.path?'; path='+options.path:'';var domain=options.domain?'; domain='+options.domain:'';var secure=options.secure?'; secure':'';document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure].join('');}else{var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=$.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}
	return cookieValue;}};
	
	/*
	* Local Storage Get and Setters...
	*/
	
	if (typeof(Storage)!=="undefined") {	// Non-IE8 
		Storage.prototype.setObject = function(key, value) {
			this.setItem(key, JSON.stringify(value));
		}

		Storage.prototype.getObject = function(key) {
			var value = this.getItem(key);
			return value && JSON.parse(value);
		}
	}
	
	/*
	* Make an Iframe (or anything fx tabset) Fill from the top offset to bottom and handle the resize. Used in App nav for now.
	*/
	$.fn.fillToBottom = function () {
		return this.each(function ()
		{
			var $iFrame = $(this);
			//set the max height of this area to the bottom of the form and track any resize events...
			handleFrameResize($iFrame);
			$(window).on("throttledresize", function() {
				handleFrameResize($iFrame);
			});

			function handleFrameResize($frame) {
				var next = $frame.next(":visible").not(".inforFormButton"),
					maxHeight = $(window).height() - $frame.offset().top - next.height();	//the height of the nav

				$frame.css({ "border": "none" });
				if (next.hasClass("inforBottomFooter"))
					maxHeight -= 2;	//subtract 2 for the border

				$frame.height(maxHeight);
				$frame.width($(window).width());
			}
			$iFrame.show();
		});
	};
})(jQuery);

/* Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
* Licensed under the MIT License (LICENSE.txt).
*
* Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
* Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
* Thanks to: Seamus Leahy for adding deltaX and deltaY
*
* Version: 3.0.6
*
* Requires: 1.2.2+
*/
(function($) {

var types = ['DOMMouseScroll', 'mousewheel'];

if ($.event.fixHooks) {
	for ( var i=types.length; i; ) {
		$.event.fixHooks[ types[--i] ] = $.event.mouseHooks;
	}
}

$.event.special.mousewheel = {
	setup: function() {
		if ( this.addEventListener ) {
			for ( var i=types.length; i; ) {
				this.addEventListener( types[--i], handler, false );
			}
		} else {
			this.onmousewheel = handler;
		}
	},

	teardown: function() {
		if ( this.removeEventListener ) {
			for ( var i=types.length; i; ) {
				this.removeEventListener( types[--i], handler, false );
			}
		} else {
			this.onmousewheel = null;
		}
	}
};

$.fn.extend({
	mousewheel: function(fn) {
		return fn ? this.bind("mousewheel", fn) : this.trigger("mousewheel");
	},

	unmousewheel: function(fn) {
		return this.unbind("mousewheel", fn);
	}
});


function handler(event) {
	var orgEvent = event || window.event, args = [].slice.call( arguments, 1 ), delta = 0, deltaX = 0, deltaY = 0;
	event = $.event.fix(orgEvent);
	event.type = "mousewheel";

	// Old school scrollwheel delta
	if ( orgEvent.wheelDelta ) { delta = orgEvent.wheelDelta/120; }
	if ( orgEvent.detail     ) { delta = -orgEvent.detail/3; }

	// New school multidimensional scroll (touchpads) deltas
	deltaY = delta;

	// Gecko
	if ( orgEvent.axis !== undefined && orgEvent.axis === orgEvent.HORIZONTAL_AXIS ) {
		deltaY = 0;
		deltaX = -1*delta;
	}

	// Webkit
	if ( orgEvent.wheelDeltaY !== undefined ) { deltaY = orgEvent.wheelDeltaY/120; }
	if ( orgEvent.wheelDeltaX !== undefined ) { deltaX = -1*orgEvent.wheelDeltaX/120; }

	// Add event and delta to the front of the arguments
	args.unshift(event, delta, deltaX, deltaY);

	return ($.event.dispatch || $.event.handle).apply(this, args);
}

})(jQuery);

/*
* jquery.event.drag - v 2.2
* Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
* Open Source MIT License - http://threedubmedia.com/code/license
*/
(function( $ ){

// add the jquery instance method
$.fn.drag = function( str, arg, opts ){
	// figure out the event type
	var type = typeof str == "string" ? str : "",
	// figure out the event handler...
	fn = $.isFunction( str ) ? str : $.isFunction( arg ) ? arg : null;
	// fix the event type
	if ( type.indexOf("drag") !== 0 )
		type = "drag"+ type;
	// were options passed
	opts = ( str == fn ? arg : opts ) || {};
	// trigger or bind event handler
	return fn ? this.bind( type, opts, fn ) : this.trigger( type );
};

// local refs (increase compression)
var $event = $.event,
$special = $event.special,
// configure the drag special event
drag = $special.drag = {

	// these are the default settings
	defaults: {
		which: 1, // mouse button pressed to start drag sequence
		distance: 0, // distance dragged before dragstart
		not: ':input', // selector to suppress dragging on target elements
		handle: null, // selector to match handle target elements
		relative: false, // true to use "position", false to use "offset"
		drop: true, // false to suppress drop events, true or selector to allow
		click: false // false to suppress click events after dragend (no proxy)
	},

	// the key name for stored drag data
	datakey: "dragdata",

	// prevent bubbling for better performance
	noBubble: true,

	// count bound related events
	add: function( obj ){
		// read the interaction data
		var data = $.data( this, drag.datakey ),
		// read any passed options
		opts = obj.data || {};
		// count another realted event
		data.related += 1;
		// extend data options bound with this event
		// don't iterate "opts" in case it is a node
		$.each( drag.defaults, function( key, def ){
			if ( opts[ key ] !== undefined )
				data[ key ] = opts[ key ];
		});
	},

	// forget unbound related events
	remove: function(){
		$.data( this, drag.datakey ).related -= 1;
	},

	// configure interaction, capture settings
	setup: function(){
		// check for related events
		if ( $.data( this, drag.datakey ) )
			return;
		// initialize the drag data with copied defaults
		var data = $.extend({ related:0 }, drag.defaults );
		// store the interaction data
		$.data( this, drag.datakey, data );
		// bind the mousedown event, which starts drag interactions
		$event.add( this, "touchstart mousedown", drag.init, data );
		// prevent image dragging in IE...
		if ( this.attachEvent )
			this.attachEvent("ondragstart", drag.dontstart );
	},

	// destroy configured interaction
	teardown: function(){
		var data = $.data( this, drag.datakey ) || {};
		// check for related events
		if ( data.related )
			return;
		// remove the stored data
		$.removeData( this, drag.datakey );
		// remove the mousedown event
		$event.remove( this, "touchstart mousedown", drag.init );
		// enable text selection
		drag.textselect( true );
		// un-prevent image dragging in IE...
		if ( this.detachEvent )
			this.detachEvent("ondragstart", drag.dontstart );
	},

	// initialize the interaction
	init: function( event ){
		// sorry, only one touch at a time
		if ( drag.touched )
			return;
		// the drag/drop interaction data
		var dd = event.data, results;
		// check the which directive
		if ( event.which != 0 && dd.which > 0 && event.which != dd.which )
			return;
		// check for suppressed selector
		if ( $( event.target ).is( dd.not ) )
			return;
		// check for handle selector
		if ( dd.handle && !$( event.target ).closest( dd.handle, event.currentTarget ).length )
			return;

		drag.touched = event.type == 'touchstart' ? this : null;
		dd.propagates = 1;
		dd.mousedown = this;
		dd.interactions = [ drag.interaction( this, dd ) ];
		dd.target = event.target;
		dd.pageX = event.pageX;
		dd.pageY = event.pageY;
		dd.dragging = null;
		// handle draginit event...
		results = drag.hijack( event, "draginit", dd );
		// early cancel
		if ( !dd.propagates )
			return;
		// flatten the result set
		results = drag.flatten( results );
		// insert new interaction elements
		if ( results && results.length ){
			dd.interactions = [];
			$.each( results, function(){
				dd.interactions.push( drag.interaction( this, dd ) );
			});
		}
		// remember how many interactions are propagating
		dd.propagates = dd.interactions.length;
		// locate and init the drop targets
		if ( dd.drop !== false && $special.drop )
			$special.drop.handler( event, dd );
		// disable text selection
		drag.textselect( false );
		// bind additional events...
		if ( drag.touched )
			$event.add( drag.touched, "touchmove touchend", drag.handler, dd );
		else
			$event.add( document, "mousemove mouseup", drag.handler, dd );
		// helps prevent text selection or scrolling
		if ( !drag.touched || dd.live )
			return false;
	},

	// returns an interaction object
	interaction: function( elem, dd ){
		var offset = $( elem )[ dd.relative ? "position" : "offset" ]() || { top:0, left:0 };
		return {
			drag: elem,
			callback: new drag.callback(),
			droppable: [],
			offset: offset
		};
	},

	// handle drag-releatd DOM events
	handler: function( event ){
		// read the data before hijacking anything
		var dd = event.data;
		// handle various events
		switch ( event.type ){
			// mousemove, check distance, start dragging
			case !dd.dragging && 'touchmove':
				event.preventDefault();
			case !dd.dragging && 'mousemove':
				//  drag tolerance, x + y = distance
				if ( Math.pow(  event.pageX-dd.pageX, 2 ) + Math.pow(  event.pageY-dd.pageY, 2 ) < Math.pow( dd.distance, 2 ) )
					break; // distance tolerance not reached
				event.target = dd.target; // force target from "mousedown" event (fix distance issue)
				drag.hijack( event, "dragstart", dd ); // trigger "dragstart"
				if ( dd.propagates ) // "dragstart" not rejected
					dd.dragging = true; // activate interaction
			// mousemove, dragging
			case 'touchmove':
				event.preventDefault();
			case 'mousemove':
				if ( dd.dragging ){
					// trigger "drag"
					drag.hijack( event, "drag", dd );
					if ( dd.propagates ){
						// manage drop events
						if ( dd.drop !== false && $special.drop )
							$special.drop.handler( event, dd ); // "dropstart", "dropend"
						break; // "drag" not rejected, stop
					}
					event.type = "mouseup"; // helps "drop" handler behave
				}
			// mouseup, stop dragging
			case 'touchend':
			case 'mouseup':
			default:
				if ( drag.touched )
					$event.remove( drag.touched, "touchmove touchend", drag.handler ); // remove touch events
				else
					$event.remove( document, "mousemove mouseup", drag.handler ); // remove page events
				if ( dd.dragging ){
					if ( dd.drop !== false && $special.drop )
						$special.drop.handler( event, dd ); // "drop"
					drag.hijack( event, "dragend", dd ); // trigger "dragend"
				}
				drag.textselect( true ); // enable text selection
				// if suppressing click events...
				if ( dd.click === false && dd.dragging )
					$.data( dd.mousedown, "suppress.click", new Date().getTime() + 5 );
				dd.dragging = drag.touched = false; // deactivate element
				break;
		}
	},

	// re-use event object for custom events
	hijack: function( event, type, dd, x, elem ){
		// not configured
		if ( !dd )
			return;
		// remember the original event and type
		var orig = { event:event.originalEvent, type:event.type },
		// is the event drag related or drog related?
		mode = type.indexOf("drop") ? "drag" : "drop",
		// iteration vars
		result, i = x || 0, ia, $elems, callback,
		len = !isNaN( x ) ? x : dd.interactions.length;
		// modify the event type
		event.type = type;
		// remove the original event
		event.originalEvent = null;
		// initialize the results
		dd.results = [];
		// handle each interacted element
		do if ( ia = dd.interactions[ i ] ){
			// validate the interaction
			if ( type !== "dragend" && ia.cancelled )
				continue;
			// set the dragdrop properties on the event object
			callback = drag.properties( event, dd, ia );
			// prepare for more results
			ia.results = [];
			// handle each element
			$( elem || ia[ mode ] || dd.droppable ).each(function( p, subject ){
				// identify drag or drop targets individually
				callback.target = subject;
				// force propagtion of the custom event
				event.isPropagationStopped = function(){ return false; };
				// handle the event
				result = subject ? $event.dispatch.call( subject, event, callback ) : null;
				// stop the drag interaction for this element
				if ( result === false ){
					if ( mode == "drag" ){
						ia.cancelled = true;
						dd.propagates -= 1;
					}
					if ( type == "drop" ){
						ia[ mode ][p] = null;
					}
				}
				// assign any dropinit elements
				else if ( type == "dropinit" )
					ia.droppable.push( drag.element( result ) || subject );
				// accept a returned proxy element
				if ( type == "dragstart" )
					ia.proxy = $( drag.element( result ) || ia.drag )[0];
				// remember this result
				ia.results.push( result );
				// forget the event result, for recycling
				delete event.result;
				// break on cancelled handler
				if ( type !== "dropinit" )
					return result;
			});
			// flatten the results
			dd.results[ i ] = drag.flatten( ia.results );
			// accept a set of valid drop targets
			if ( type == "dropinit" )
				ia.droppable = drag.flatten( ia.droppable );
			// locate drop targets
			if ( type == "dragstart" && !ia.cancelled )
				callback.update();
		}
		while ( ++i < len )
		// restore the original event & type
		event.type = orig.type;
		event.originalEvent = orig.event;
		// return all handler results
		return drag.flatten( dd.results );
	},

	// extend the callback object with drag/drop properties...
	properties: function( event, dd, ia ){
		var obj = ia.callback;
		// elements
		obj.drag = ia.drag;
		obj.proxy = ia.proxy || ia.drag;
		// starting mouse position
		obj.startX = dd.pageX;
		obj.startY = dd.pageY;
		// current distance dragged
		obj.deltaX = event.pageX - dd.pageX;
		obj.deltaY = event.pageY - dd.pageY;
		// original element position
		obj.originalX = ia.offset.left;
		obj.originalY = ia.offset.top;
		// adjusted element position
		obj.offsetX = obj.originalX + obj.deltaX;
		obj.offsetY = obj.originalY + obj.deltaY;
		// assign the drop targets information
		obj.drop = drag.flatten( ( ia.drop || [] ).slice() );
		obj.available = drag.flatten( ( ia.droppable || [] ).slice() );
		return obj;
	},

	// determine is the argument is an element or jquery instance
	element: function( arg ){
		if ( arg && ( arg.jquery || arg.nodeType == 1 ) )
			return arg;
	},

	// flatten nested jquery objects and arrays into a single dimension array
	flatten: function( arr ){
		return $.map( arr, function( member ){
			return member && member.jquery ? $.makeArray( member ) :
				member && member.length ? drag.flatten( member ) : member;
		});
	},

	// toggles text selection attributes ON (true) or OFF (false)
	textselect: function( bool ){
		$( document )[ bool ? "unbind" : "bind" ]("selectstart", drag.dontstart )
			.css("MozUserSelect", bool ? "" : "none" );
		// .attr("unselectable", bool ? "off" : "on" )
		document.unselectable = bool ? "off" : "on";
	},

	// suppress "selectstart" and "ondragstart" events
	dontstart: function(){
		return false;
	},

	// a callback instance contructor
	callback: function(){}

};

// callback methods
drag.callback.prototype = {
	update: function(){
		if ( $special.drop && this.available.length )
			$.each( this.available, function( i ){
				$special.drop.locate( this, i );
			});
	}
};

// event fix hooks for touch events...
var touchHooks =
$event.fixHooks.touchstart =
$event.fixHooks.touchmove =
$event.fixHooks.touchend =
$event.fixHooks.touchcancel = {
	props: "clientX clientY pageX pageY screenX screenY".split( " " ),
	filter: function( event, orig ) {
		if ( orig ){
			var touched = ( orig.touches && orig.touches[0] )
				|| ( orig.changedTouches && orig.changedTouches[0] )
				|| null;
			// iOS webkit: touchstart, touchmove, touchend
			if ( touched )
				$.each( touchHooks.props, function( i, prop ){
					event[ prop ] = touched[ prop ];
				});
		}
		return event;
	}
};

// share the same special event configuration with related events...
$special.draginit = $special.dragstart = $special.dragend = drag;

})( jQuery );

/*
* jquery.event.drop - v 2.2
* Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
* Open Source MIT License - http://threedubmedia.com/code/license
*/
(function($){ // secure $ jQuery alias

// Events: drop, dropstart, dropend
// add the jquery instance method
$.fn.drop = function( str, arg, opts ){
	// figure out the event type
	var type = typeof str == "string" ? str : "",
	// figure out the event handler...
	fn = $.isFunction( str ) ? str : $.isFunction( arg ) ? arg : null;
	// fix the event type
	if ( type.indexOf("drop") !== 0 )
		type = "drop"+ type;
	// were options passed
	opts = ( str == fn ? arg : opts ) || {};
	// trigger or bind event handler
	return fn ? this.bind( type, opts, fn ) : this.trigger( type );
};

// DROP MANAGEMENT UTILITY
// returns filtered drop target elements, caches their positions
$.drop = function( opts ){
	opts = opts || {};
	// safely set new options...
	drop.multi = opts.multi === true ? Infinity :
		opts.multi === false ? 1 : !isNaN( opts.multi ) ? opts.multi : drop.multi;
	drop.delay = opts.delay || drop.delay;
	drop.tolerance = $.isFunction( opts.tolerance ) ? opts.tolerance :
		opts.tolerance === null ? null : drop.tolerance;
	drop.mode = opts.mode || drop.mode || 'intersect';
};

// local refs (increase compression)
var $event = $.event,
$special = $event.special,
// configure the drop special event
drop = $.event.special.drop = {

	// these are the default settings
	multi: 1, // allow multiple drop winners per dragged element
	delay: 20, // async timeout delay
	mode: 'overlap', // drop tolerance mode

	// internal cache
	targets: [],

	// the key name for stored drop data
	datakey: "dropdata",

	// prevent bubbling for better performance
	noBubble: true,

	// count bound related events
	add: function( obj ){
		// read the interaction data
		var data = $.data( this, drop.datakey );
		// count another realted event
		data.related += 1;
	},

	// forget unbound related events
	remove: function(){
		$.data( this, drop.datakey ).related -= 1;
	},

	// configure the interactions
	setup: function(){
		// check for related events
		if ( $.data( this, drop.datakey ) )
			return;
		// initialize the drop element data
		var data = {
			related: 0,
			active: [],
			anyactive: 0,
			winner: 0,
			location: {}
		};
		// store the drop data on the element
		$.data( this, drop.datakey, data );
		// store the drop target in internal cache
		drop.targets.push( this );
	},

	// destroy the configure interaction
	teardown: function(){
		var data = $.data( this, drop.datakey ) || {};
		// check for related events
		if ( data.related )
			return;
		// remove the stored data
		$.removeData( this, drop.datakey );
		// reference the targeted element
		var element = this;
		// remove from the internal cache
		drop.targets = $.grep( drop.targets, function( target ){
			return ( target !== element );
		});
	},

	// shared event handler
	handler: function( event, dd ){
		// local vars
		var results, $targets;
		// make sure the right data is available
		if ( !dd )
			return;
		// handle various events
		switch ( event.type ){
			// draginit, from $.event.special.drag
			case 'mousedown': // DROPINIT >>
			case 'touchstart': // DROPINIT >>
				// collect and assign the drop targets
				$targets =  $( drop.targets );
				if ( typeof dd.drop == "string" )
					$targets = $targets.filter( dd.drop );
				// reset drop data winner properties
				$targets.each(function(){
					var data = $.data( this, drop.datakey );
					data.active = [];
					data.anyactive = 0;
					data.winner = 0;
				});
				// set available target elements
				dd.droppable = $targets;
				// activate drop targets for the initial element being dragged
				$special.drag.hijack( event, "dropinit", dd );
				break;
			// drag, from $.event.special.drag
			case 'mousemove': // TOLERATE >>
			case 'touchmove': // TOLERATE >>
				drop.event = event; // store the mousemove event
				if ( !drop.timer )
					// monitor drop targets
					drop.tolerate( dd );
				break;
			// dragend, from $.event.special.drag
			case 'mouseup': // DROP >> DROPEND >>
			case 'touchend': // DROP >> DROPEND >>
				drop.timer = clearTimeout( drop.timer ); // delete timer
				if ( dd.propagates ){
					$special.drag.hijack( event, "drop", dd );
					$special.drag.hijack( event, "dropend", dd );
				}
				break;

		}
	},

	// returns the location positions of an element
	locate: function( elem, index ){
		var data = $.data( elem, drop.datakey ),
		$elem = $( elem ),
		posi = $elem.offset() || {},
		height = $elem.outerHeight(),
		width = $elem.outerWidth(),
		location = {
			elem: elem,
			width: width,
			height: height,
			top: posi.top,
			left: posi.left,
			right: posi.left + width,
			bottom: posi.top + height
		};
		// drag elements might not have dropdata
		if ( data ){
			data.location = location;
			data.index = index;
			data.elem = elem;
		}
		return location;
	},

	// test the location positions of an element against another OR an X,Y coord
	contains: function( target, test ){ // target { location } contains test [x,y] or { location }
		return ( ( test[0] || test.left ) >= target.left && ( test[0] || test.right ) <= target.right
			&& ( test[1] || test.top ) >= target.top && ( test[1] || test.bottom ) <= target.bottom );
	},

	// stored tolerance modes
	modes: { // fn scope: "$.event.special.drop" object
		// target with mouse wins, else target with most overlap wins
		'intersect': function( event, proxy, target ){
			return this.contains( target, [ event.pageX, event.pageY ] ) ? // check cursor
				1e9 : this.modes.overlap.apply( this, arguments ); // check overlap
		},
		// target with most overlap wins
		'overlap': function( event, proxy, target ){
			// calculate the area of overlap...
			return Math.max( 0, Math.min( target.bottom, proxy.bottom ) - Math.max( target.top, proxy.top ) )
				* Math.max( 0, Math.min( target.right, proxy.right ) - Math.max( target.left, proxy.left ) );
		},
		// proxy is completely contained within target bounds
		'fit': function( event, proxy, target ){
			return this.contains( target, proxy ) ? 1 : 0;
		},
		// center of the proxy is contained within target bounds
		'middle': function( event, proxy, target ){
			return this.contains( target, [ proxy.left + proxy.width * .5, proxy.top + proxy.height * .5 ] ) ? 1 : 0;
		}
	},

	// sort drop target cache by by winner (dsc), then index (asc)
	sort: function( a, b ){
		return ( b.winner - a.winner ) || ( a.index - b.index );
	},

	// async, recursive tolerance execution
	tolerate: function( dd ){
		// declare local refs
		var i, drp, drg, data, arr, len, elem,
		// interaction iteration variables
		x = 0, ia, end = dd.interactions.length,
		// determine the mouse coords
		xy = [ drop.event.pageX, drop.event.pageY ],
		// custom or stored tolerance fn
		tolerance = drop.tolerance || drop.modes[ drop.mode ];
		// go through each passed interaction...
		do if ( ia = dd.interactions[x] ){
			// check valid interaction
			if ( !ia )
				return;
			// initialize or clear the drop data
			ia.drop = [];
			// holds the drop elements
			arr = [];
			len = ia.droppable.length;
			// determine the proxy location, if needed
			if ( tolerance )
				drg = drop.locate( ia.proxy );
			// reset the loop
			i = 0;
			// loop each stored drop target
			do if ( elem = ia.droppable[i] ){
				data = $.data( elem, drop.datakey );
				drp = data.location;
				if ( !drp ) continue;
				// find a winner: tolerance function is defined, call it
				data.winner = tolerance ? tolerance.call( drop, drop.event, drg, drp )
					// mouse position is always the fallback
					: drop.contains( drp, xy ) ? 1 : 0;
				arr.push( data );
			} while ( ++i < len ); // loop
			// sort the drop targets
			arr.sort( drop.sort );
			// reset the loop
			i = 0;
			// loop through all of the targets again
			do if ( data = arr[ i ] ){
				// winners...
				if ( data.winner && ia.drop.length < drop.multi ){
					// new winner... dropstart
					if ( !data.active[x] && !data.anyactive ){
						// check to make sure that this is not prevented
						if ( $special.drag.hijack( drop.event, "dropstart", dd, x, data.elem )[0] !== false ){
							data.active[x] = 1;
							data.anyactive += 1;
						}
						// if false, it is not a winner
						else
							data.winner = 0;
					}
					// if it is still a winner
					if ( data.winner )
						ia.drop.push( data.elem );
				}
				// losers...
				else if ( data.active[x] && data.anyactive == 1 ){
					// former winner... dropend
					$special.drag.hijack( drop.event, "dropend", dd, x, data.elem );
					data.active[x] = 0;
					data.anyactive -= 1;
				}
			} while ( ++i < len ); // loop
		} while ( ++x < end ) // loop
		// check if the mouse is still moving or is idle
		if ( drop.last && xy[0] == drop.last.pageX && xy[1] == drop.last.pageY )
			delete drop.timer; // idle, don't recurse
		else  // recurse
			drop.timer = setTimeout(function(){
				drop.tolerate( dd );
			}, drop.delay );
		// remember event, to compare idleness
		drop.last = drop.event;
	}

};

// share the same special event configuration with related events...
$special.dropinit = $special.dropstart = $special.dropend = drop;

})(jQuery); // confine scope


(function($){

	/* Return the Width of the text */
	String.prototype.textWidth = function(font) {
		var f = font || '12px Helvetica,?Arial,?sans-serif',
		o = $('<div>' + this + '</div>')
				.css({'position': 'absolute', 'float': 'left', 'white-space': 'nowrap', 'visibility': 'hidden', 'font': f})
				.appendTo($('body')),
		w = o.width();

		o.remove();
	return w;
	}

	if (navigator.appVersion.indexOf("MSIE 8.0") > -1) {
		$("html").addClass("ie8");
	}
}(jQuery));/*
* Infor Progress Indicator
*/
(function ($) {
	$.widget("ui.inforProgressIndicator", {
		options: {
			value: 0,
			max: 100,
			overage: 0,
			title: null,
			showCancel: true,
			showTitleClose: true,
			onCancel: null,
			progressText: null,
			detailText: null,
			indefinite: false,
			buttons: null
		},
		min: 0,
		_init: function () {
			var self = this,
				o = self.options,
				isDialog = this.element.is("body");

			//translate the prefs..
			if (o.title === null) {
				o.title = Globalize.localize("StatusIndicator");
			}

			if (o.progressText === null) {
				o.progressText = Globalize.localize("PleaseWait");
			}

			if (o.detailText === null) {
				o.detailText = Globalize.localize("LoadingItem");
			}

			if (o.indefinite) {
				o.value = 100;
			}
			
			//add the progress bar.
			if (isDialog) {
				this.contentArea = $('<div class="inforProgressIndicatorTextArea"></div>');
				this.progressText = $('<h1 class="inforProgressIndicatorStatusText">' + o.progressText + '</h1>').appendTo(this.contentArea);
				this.detailText = $('<h2 class="inforProgressIndicatorDetailText">' + o.detailText + '</h2>').appendTo(this.contentArea);
				this.valueDiv = $('<div class="' + (o.indefinite ? "inforStatusIndefiniteValue" : "inforProgressIndicatorValue") + '"></div>').appendTo(this.contentArea);
				this.valueDiv.wrap('<div class="inforProgressIndicatorBar"></div>');
				this.contentArea.appendTo(this.element);
				this.dialog = this.contentArea.inforMessageDialog({
					title: o.title,
					dialogType: "General",
					width: 361,
					height: 158,
					buttons: o.buttons,
					showTitleClose: o.showTitleClose
				});
				
				this.root = this.dialog.closest("div.inforDialog").addClass("inforProgressIndicator")
					.attr({
						role: "progressbar",
						"aria-valuemin": this.min,
						"aria-valuemax": this.options.max,
						"aria-valuenow": this._value()
					});

				this.root.hide();

				this.root.find(".inforCloseButton").click(function () {
					self.destroy();
					if (o.onCancel) {
						o.onCancel(new $.Event(), this);
					}
				});

				if (!o.showCancel) {
					this.root.find(".dialogButtonBar").hide();
				} else {
					this.root.find(".dialogButtonBar").find("button:contains('"+ Globalize.localize("Cancel") +"')").on("click", function() {
						if (o.onCancel) {
							o.onCancel(new $.Event(), this);
						}
					});
				}

				if (o.detailText === "" || o.progressText === "") {
					this.root.height("92px");
				} else {
					this.root.css("height", "auto");
					this.root.find(".inforDialogContent").css("height", "auto");
				}

			} else {
				this.contentArea = this.root = this.element;
				this.valueDiv = $('<div class="' + (o.indefinite ? "inforStatusIndefiniteValue" : "inforProgressIndicatorValue") + '"></div>').appendTo(this.contentArea);
				this.valueDiv.wrap('<div class="inforProgressIndicatorBar"></div>');
			}

			this._refreshValue();

			if (isDialog) {
				this.root.fadeIn("slow");
			}
		},
		destroy: function () {
			this.valueDiv.remove();
			this.contentArea.remove();

			// call the original destroy method but based on timing it might not exist
			try {
				this.dialog.inforDialog("destroy");
				$.Widget.prototype.destroy.call(this);
			} catch (e){
			}
		},
		value: function (newValue) {
			if (newValue === undefined) {
				return this._value();
			}

			this._setOption("value", newValue);
			return this;
		},
		_setOption: function (key, value) {
			switch (key) {
			case "max":
				this.options.max = value;
				break;
			case "value":
				this.options.value = value;
				this._trigger("change");
				break;
			case "detailText":
				this.options.detailText = value;
				this.detailText.html(value);
				break;
			case "progressText":
				this.options.progressText = value;
				this.progressText.html(value);
				break;
			}
			this._refreshValue();
		},
		_value: function () {
			var val = this.options.value;
			// normalize invalid value
			if (typeof val !== "number") {
				val = 0;
			}

			if (this.options.overage > 0) {
				return val;
			} else {
				return Math.min(this.options.max, Math.max(this.min, val));
			}
		},
		_percentage: function () {
			return 100 * this._value() / this.options.max;
		},
		_refreshValue: function (animate) {
			var value = this.value(),
				o = this.options,
				percentage = this._percentage();

			if (this.oldValue !== value) {
				this.oldValue = value;
				this._trigger("change");
			}

			this.valueDiv.toggle(value > this.min);
			this.progressText.html(o.progressText);
			this.detailText.html(o.detailText);
			
			if (animate) {
				this.valueDiv.animate({
					width: percentage.toFixed(0) + "%"
				});
			} else {
				this.valueDiv.width(percentage.toFixed(0) + "%");
			}

			this.root.attr("aria-valuenow", value);
			if (this.options.closeWhenComplete && value === this.options.max) {
				this.destroy();
			}
		}
	});

})(jQuery);
/*
* Infor About Dialog
*/
(function ($) {
	$.widget("ui.inforAboutDialog", {
	options: {
			productName: "<Product Name>",	//text for product name
			details: null,	//controls full details text text for details text area.
			copyRightYear: null,
			additionalDetails: null,
			version: "10.0.1",
			copyRight: "Copyright &copy; @year Infor. All rights reserved. " +
					" The word and design marks set forth herein are trademarks" +
					" and/or registered trademarks of Infor and/or its affiliates and subsidiaries." +
					" All rights reserved. All other trademarks listed herein are the property of their respective owners. www.infor.com."
		},
		widgetEventPrefix: 'about',
		close: function () {
			this.destroy();
			this._trigger("close");
		},
		destroy: function () {
			$("#inforAboutDialog").remove();
			$(document).unbind("keypress.inforabout");
		},
		dialog: null,
		_init: function () {
			var self = this,
			o = self.options,
			root = $('<div id="inforAboutDialog" style="display:none"></div>'),
			$productName = $('<h1 class="productName">' + o.productName + '</h1>').uniqueId().append("<br>"),
			$logo = $('<div class="inforLogoTm"></div>'),
			$okbutton = $('<button type="button" class="inforAboutCloseButton" title="' + Globalize.localize("Close") + '"><span></span></button>'),
			details = "",
			$details = null,
			container = null;
			
			o.copyRight = o.copyRight.replace("@year", (o.copyRightYear ? o.copyRightYear : "2013"));
			details = (o.details ? o.details : o.productName + " " + o.version + " <br> " + o.copyRight + " <br> " + o.additionalDetails);
			$details = $('<p>' + details + '</p><br>');
			container = $("<div class='container'></div>").append($logo, $productName, $details);

			root.append($okbutton, container);
			$('body').append(root);

			//Adjust aria tags
			root.attr({
				"aria-labelledby": $productName.attr("id"),
				"aria-describedby": $("#aboutText").attr("id")
			});


			root.fadeIn("slow", function() {
				if ($details[0].scrollHeight > $details[0].clientHeight || $details[0].scrollWidth > $details[0].clientWidth) {
					$details.addClass("isOverflowed");
				}
			});
			
			$okbutton.click(function () {
				self.close();
			}).focus();

			//esc closes..
			$(document).bind("keydown.inforabout", function (e) {
				if (e.which === 0 || e.which === 27) {
					self.close();
				}
			});
		}
	});
})(jQuery);
/*
* Infor Accordion
*/
(function ($) {
	$.widget("ui.inforAccordion", {
		options: {
			onExpand: null,
			onCollapse: null,
			selectOnClick: true
		},
		_init: function () {
			var elem = $(this.element),
				o = this.options;
				
			elem.find(".inforFieldSet").inforFieldSet({onExpand: o.onExpand,
														onCollapse: o.onCollapse});
			if (o.selectOnClick) {
				elem.find(".inforAccordionSubmenu").click(function () {
					//optionally add a selected class
					elem.find(".inforAccordionSubmenu.selected").removeClass("selected");
					$(this).addClass("selected");
					elem.find("legend.selected").removeClass("selected");
					$(this).parent().parent().find("legend").addClass("selected");
				});
			}
		}
	});
})(jQuery);
/*
* Infor Application Navigation
*/
(function ($) {
	$.widget("ui.inforApplicationNav", {
		options: {
			loadMenu: null, //Adds the ability to refresh menu items with an ajax call.
			showSessionMenu: false, //adds the session navigation menu and api.
			onSessionMenuOpen: null,
			sortable: false,        //sort overflow items by drag and drop
			backgroundIFrame: false,    //opens an iFrame overtop of submenus. Use this if having issues with pdf/applets in the page
			callback: null  //a function that fires when a menu item is selected
		},
		pending: 0,
		elementId: null,
		resizeTimer: null,
		windowHeight: $(window).height(),
		windowWidth: $(window).width(),
		_sessionInfo: [],
		//the array of sessions.
		_create: function () {
			var self = this,
				elem = this.element;

			this.elementId = elem.attr("id");
			elem.css({
				"overflow": "hidden"
			});

			//add the <br> to clear at the end if its not there.
			if (!elem.children().last().is("br")) {
				elem.append('<br style="clear: left" />');
			}
			this.buildmenu(this.elementId);

			$(window).bind("throttledresize.inforApplicationNav", function () {
				if (elem.is(":visible")) {
					self._resizeAndRender();
				}
			});

			this._setOverflow();
			this._renderMegaMenus();
			//keyboard
			elem.on("keypress", function (e) {
				self._handleKeys(e, elem);
			});
		},
		_handleKeys: function (e, elem) {
			var self = this,
				focusd =  $(':focus'),
				li = focusd.parent(),
				isTop = focusd.parent().parent().parent().hasClass("inforApplicationNav"),
				next, prev;

			switch (e.keyCode) {
						case 9: //tab
							break;
						case 37: //left
							if (isTop) {
								prev = li.prev(":visible");
								if (prev.length === 0) {
									prev = li.prevAll(":visible:first");
									if (prev.length === 0) {
										prev = li.parent().find("li:visible:last");
									}
								}
								self.closeOpenMenus(elem);
								prev.children("a").focus().trigger("click");
							} else {
								if (li.index() === 0 && li.parent().is("ul")) {
									li.parent().prev("a").focus();
									li.parent().hide();
								}
							}
							break;
						case 38: //up
							if (!isTop) {
								prev = li.prev();
								if (prev.length === 0) {
									prev = li.parent().children("li:last");
								}
								prev.find("a").focus();
							}
							break;
						case 39: //right
							//open menu to right
							if (isTop) {
								next = li.next(":visible");
								if (next.length === 0) {
									next = li.nextAll(":visible:first");
									if (next.length === 0) {
										next = li.parent().find("li:visible:first");
									}
								}
								self.closeOpenMenus(elem);
								next.children("a").focus().trigger("click");
							} else {
								if (li.find("ul:first").length > 0) {
									self.openMenu(li.find("ul:first"), li);
									li.find("ul:first").find("a:first").focus();
								}
							}
							break;
						case 40: //down
							if (isTop) {
								li.find("ul a:first").focus();
							} else {
								next = li.next();
								if (next.length === 0) {
									next = li.parent().find("li").eq(0);
								}
								next.find("a").focus();
							}
							break;
					}
		},
		_renderMegaMenus: function () {
			this.element.find(".inforMegaMenuColumn").show();
		},
		render: function () {
			this._setOverflow();
		},
		_resizeAndRender: function () {
			var self = this;
			if (this.resizeTimer) {
				clearTimeout(this.resizeTimer);
			}

			if (this.windowHeight !== $(window).height() || this.windowWidth !== $(window).width()) {
				this.resizeTimer = setTimeout(function () {
					self._setOverflow();
				}, 10);
				this.windowHeight = $(window).height();
				this.windowWidth = $(window).width();
			}
		},
		/* Initial Menu Build Out. Should only be called once. */
		buildmenu: function (elementId) {
			var $mainmenu = $("#" + elementId + ">ul"),
			$headers = null;

			//add some html as a placeholder for the overflowmenu
			$mainmenu.find("#overFlowMenu").remove();
			$mainmenu.append("<li id=\"overFlowMenu\"><a href='#'>" + Globalize.localize("More") + "</a><ul></ul></li>");

			if (this.options.showSessionMenu) {
				//add some html as a placeholder for the sessionNavMenu
				$mainmenu.find("#sessionNavMenu").remove();
				$mainmenu.prepend('<li id ="sessionNavMenu"><a></a><ul><li id="sessionNavLi"><a>Sessions</a></li></ul></li>');
			}

			this._setOverflow();
			$headers = $mainmenu.children("li").has('ul');
			$mainmenu.find("a").hover(function () {
				$(this).addClass("hover");
			}, function () {
				$(this).removeClass("hover");
			});

			this._attachSubMenus($headers);
			this._setupSessionNav();
		},
		_setupSessionNav: function () {
			if (!this.options.showSessionMenu) {
				return;
			}

			var self = this,
			sessionButton = $("#sessionNavMenu"),
			$li = null,
			$ul = null,
			clickFunc = function () {
				//close the menu
				self._closeSiblingMenus($ul.parent());
				//do the action
				var action = $(this).data("action");

				if ($(this).children(":first").hasClasses(["disabledSession", "disabledText"])) {
					return;
				}

				if (action !== null) {
					action();
				}
			};

			//add a button first thing in the menu
			sessionButton.click(function () {
				var session = null,
					anchor = null,
					li = null,
					ul = null,
					parent = null,
					i = null;

				if (self.options.onSessionMenuOpen !== null) {
					self._sessionInfo = self.options.onSessionMenuOpen(self._sessionInfo);
				}

				//hide it if already visible. (toggled the button)
				$li = $(".inforApplicationNav>ul").find("#sessionNavMenu");
				$ul = $li.children("ul");

				if ($ul.is(":visible")) {
					$ul.hide();
					return;
				}

				self._closeSiblingMenus($li);

				//remove the old ones
				$ul.children().remove();

				//refresh the menu elements
				for (i = 0; i < self._sessionInfo.length; i += 1) {
                    session = self._sessionInfo[i];
					li = $("<li></li>");
					anchor = $("<a>" + (session.text === undefined ? "": session.text) + "</a>").attr("id", (session.id === undefined ? session.text: session.id));

					if (anchor === undefined) {
						continue;
					}

					//style with the css classes.
					if (session.id === "navSessionSpacer") {
						anchor.prepend("<div class='navSessionSpacer'></div>");
						anchor.css({
							"height": "6px"
						});
					}

					//add disabled text.
					if (session.cssClass === "disabledSession" || session.cssClass === "disabledText") {
						anchor.addClass("disabledText");
					}

					if (session.cssClass !== undefined && session.id !== "navSessionSpacer") {
						anchor.prepend("<div class='sessionIcon " + session.cssClass + "'></div>");
					}

					if (session.id !== "navSessionSpacer") {
						anchor.click(clickFunc);
					}

					//add it to the dom.
					li.append(anchor);

					if (session.parent !== null) {
						//presumably the parent was added first but we could code a new loop
						//find the parent element
                        parent = $("a#" + session.parent);
                        ul = parent.next("ul");
						//add a ul if not there..
						if (ul.length === 0) {
							ul = $("<ul></ul>");
							parent.after(ul);
						}
						//add it..
						ul.append(li);
					} else {
						$ul.append(li);
					}
					anchor.data("action", session.action);
					//save for the click.
				}

				self._attachSubMenus($li);
				self.openMenu($li.children("ul:first"), $li);
			});
		},
		decorateMenu: function (subMenu) {
			// Can be called to add need styling and elements to a new submenu piece. Eg:
			//$("#inforApplicationNav1").inforApplicationNav("decorateMenu",<newMenuSection>);
			this._attachSubMenus(subMenu);
		},
		close: function () {
			this.closeOpenMenus($(this.element).closest('.inforApplicationNav'));
		},
		sessionInfo: function (updatedInfo) {
			if (updatedInfo !== undefined) {
				this._sessionInfo = updatedInfo;
			}

			return this._sessionInfo;
		},
		_attachSubMenus: function ($headers) {
			var self = this,
				mainMenu = $headers.closest(".inforApplicationNav ul");

			if ($headers.data("attached") !== undefined) {
				return;
			}

			$headers.data("attached", true);

			$headers.each(function (i) {
				var overLay = null,
					$this = $(this),
					$curobj = null,
					$subul = null;

				if ($.data(this, "processed") !== undefined) {
					return;	//continue
				}

				$.data(this, "processed", true);

				$curobj = $this.css({
					zIndex: Math.abs(2000 - i)
				});
				$subul = $this.find('ul:eq(0)').css({
					display: 'block'
				});

				this._dimensions = {
					w: this.offsetWidth,
					h: 30,
					subulw: $subul.outerWidth(),
					subulh: $subul.outerHeight()
				};
				this.istopheader = ($curobj.parents("ul").length === 1 ? true: false);

				//is top level header?
				$subul.css({
					top: this.istopheader ? this._dimensions.h + 2 + "px": 0
				});

				//add arrow images
				if (this.istopheader) {
					$curobj.children("a:eq(0):not(.scrollDown)").append('<div class="downArrow" />');
				} else {
					$curobj.children("a:eq(0):not(.scrollDown)").addClass("rightArrow");
				}

				if (this.istopheader) {
					$curobj.not("#sessionNavMenu").click(function () {
						if ($subul.is(":visible")) {
							//click when open closes the menu
							$curobj.removeClass("activeHeader");
							var rootDiv = $subul.closest(".inforApplicationNav");
							if (rootDiv.length === 0) {	//no css.
								return;
							}
							$subul.hide();
							if (self.options.backgroundIFrame) {
								$(".inforBkgrndIFrame").remove();
							}
							//to speed normal animation
							return;
						}
						self.openMenu($subul, $curobj);
					});
				}

				//Add or ensure there is an overlay
				overLay = $('body').find(".transparentOverlay");
				if (overLay.length === 0) {
					$('<div></div>').addClass('transparentOverlay').appendTo('body').data("openMenus", []).css({
						'width': '100%',
						'height': '100%',
						'top': '-30px',
						'position': 'absolute',
						'display': 'none',
						'z-index': '-1'
					}).mousedown(function () {
						//Serves to close with click like other menus and also closes menu item when its clicked.
						self.closeOpenMenus($headers.closest('.inforApplicationNav'));
					});
				}

				//open submenus on a hover or if one menu on the top level is open.
				$curobj.hover(function () {
					if (this.istopheader) {
						var openMenus = $curobj.closest(".inforApplicationNav").find('ul li ul').filter(":visible");

						if ($curobj.closest(".inforApplicationNav").data("dragging")) {
							return;
						}

						if (openMenus.length > 0 && !$subul.is(":visible")) {
							$headers.removeClass("activeHeader");
							$curobj.addClass("activeHeader").focus();
							mainMenu.find(".hover").removeClass("hover");
							self._closeSiblingMenus($curobj);
							self.openMenu($subul, $curobj);
						}
					}
				});

				$curobj.hoverIntent(function () {
					if (!this.istopheader) {
						self._closeSiblingMenus($curobj);
						self.openMenu($subul, $curobj);
						$curobj.find('a.rightArrow:first').addClass("selected");
					}
				}, function () {
					//We also close on a click out closeMenu($subul,$curobj);
					$curobj.find('a.rightArrow:first').removeClass("selected");
				});
				//end hoverIntent
			});
			//end $headers.each()

			mainMenu.find("ul").css({
				display: 'none',
				visibility: 'visible'
			});

			//close sibling menus when hovering Li's at the same level.
			mainMenu.find("li").each(function () {
				var $this = $(this);
				if ($(this).children("ul").length === 0) {
					$this.hoverIntent(function () {
						self._closeSiblingMenus($(this));
					}, function () {});
				}
			});
		},
		_setVerticalOverflow: function (submenu) {
			//*If more then the number of vertical menu items fit in the page and scrollbars */
			//find the bottom of the window
			var winOffset = $(window).height(),
			rootDiv = $(submenu).closest(".inforApplicationNav"),
			bottomOfNav = rootDiv.position().top + 45,
			//(from the top page to the top of the control)
			allowableHeight = (winOffset - (bottomOfNav)) - 46,
			//add height of the scrollbar buttons..
			fittingMenus = allowableHeight / 34,
			//each menu is 30 in height
			menuCounter = 1,
			hiddenTopItems = [],
			hiddenBottomItems = [],
			visibleSubMenus = [],
			topOfNav = null;

			$(submenu).children().each(function () {
				var $li = $(this);

				if ($li.hasClass("scrollUp") || $li.hasClass("scrollDown")) {
					return;
				}
				
				if ($li.css("display") == "none") {
					return;
				}
				
				if (menuCounter <= fittingMenus) {
					$li.show();
					visibleSubMenus.push($li);
				} else {
					$li.hide();
					hiddenBottomItems.push($li);
				}
				menuCounter += 1;
			});

			if (hiddenBottomItems.length > 0) {
				topOfNav = rootDiv.position().top;
				//(from the top page to the top of the control)
				if ($(submenu).parent().position().top > topOfNav && $(submenu).parent().attr("id") !== "overFlowMenu") {
					$(submenu).css("top", -($(submenu).offset().top - 30) + "px");
				}
				this._addVerticalScrollbars($(submenu), hiddenTopItems, hiddenBottomItems, visibleSubMenus);
			}
		},
		_addVerticalScrollbars: function (submenu, hiddenTopItems, hiddenBottomItems, visibleSubMenus) {
			//add to scrollbar
			this._removeVerticalScrollbars(submenu);

			//Add the vertical scroll styling/elements to the page.
			var up = $("<li class='scrollUp'><div class='scrollArrow'/></li>").prependTo(submenu),
			down = $("<li class='scrollDown'><div class='scrollArrow'/></li>").appendTo(submenu),
			self = this;

			up.attr("disabled", "disabled").unbind('mouseenter mouseleave');
			submenu.width(submenu.width());	//make a fixed with or size changes during scroll.

			//Attach the hover events on a timer
			up.mouseenter(function () {
				submenu.everyTime(200, 'up', function () {
					self._moveUp(submenu);
				}, 0);
			}).mouseleave(function () {
				submenu.stopTime("up");
			});

			//Attach the hover events on a timer
			down.mouseenter(function () {
				submenu.everyTime(200, 'down', function () {
					self._moveDown(submenu);
				}, 0);
			}).mouseleave(function () {
				submenu.stopTime("down");
			});

			//Save to each menu
			this._saveDataToMenu(submenu, hiddenTopItems, hiddenBottomItems, visibleSubMenus, up, down);
		},
		_moveUp: function (submenu) {
			//Scroll up one element
			var hiddenTopItems = $.data(submenu, "hiddenTopItems"),
			hiddenBottomItems = $.data(submenu, "hiddenBottomItems"),
			visibleSubMenus = $.data(submenu, "visibleSubMenus"),
			upButton = $.data(submenu, "upButton"),
			downButton = $.data(submenu, "downButton"),
			topElem = null,
			bottomElem = null;

			if (!upButton.isEnabled()) {
				submenu.stopTime("up");
				return;
			}

			if ($.data(submenu, "hiddenTopItems").length === 0) {
				this._enableVerticalScrollBars(submenu);
				submenu.stopTime("up");
				return;
			}

			//remove an item from the bottom of the hidden top items and  show it
			topElem = hiddenTopItems.splice(hiddenTopItems.length - 1, 1)[0];

			topElem.show();
			visibleSubMenus.splice(0, 0, topElem);

			//remove last item from the visible items and hide it.
			bottomElem = visibleSubMenus.pop();

			bottomElem.hide();
			hiddenBottomItems.push(bottomElem);

			//disable if there are no more.
			this._enableVerticalScrollBars(submenu);
			this._saveDataToMenu(submenu, hiddenTopItems, hiddenBottomItems, visibleSubMenus, upButton, downButton);
		},
		_moveDown: function (submenu) {
			//Move down one element
			var hiddenTopItems = $.data(submenu, "hiddenTopItems"),
			hiddenBottomItems = $.data(submenu, "hiddenBottomItems"),
			visibleSubMenus = $.data(submenu, "visibleSubMenus"),
			upButton = $.data(submenu, "upButton"),
			downButton = $.data(submenu, "downButton"),
			bottomElem = null,
			topElem = null;

			if (!downButton.isEnabled()) {
				submenu.stopTime("down");
				return;
			}

			if (hiddenBottomItems.length === 0) {
				this._enableVerticalScrollBars(submenu);
				submenu.stopTime("down");
				return;
			}

			//remove an item from the bottom - show it
			bottomElem = hiddenBottomItems.splice(0, 1)[0];

			bottomElem.show();
			visibleSubMenus.push(bottomElem);

			//remove an item from top - hide it
			topElem = visibleSubMenus.splice(0, 1)[0];

			topElem.hide();
			hiddenTopItems.push(topElem);

			//disable if there are no more.
			this._enableVerticalScrollBars(submenu);
			this._saveDataToMenu(submenu, hiddenTopItems, hiddenBottomItems, visibleSubMenus, upButton, downButton);
		},
		_saveDataToMenu: function (submenu, hiddenTopItems, hiddenBottomItems, visibleSubMenus, upButton, downButton) {
			$.data(submenu, "hiddenTopItems", hiddenTopItems);
			$.data(submenu, "hiddenBottomItems", hiddenBottomItems);
			$.data(submenu, "visibleSubMenus", visibleSubMenus);
			$.data(submenu, "upButton", upButton);
			$.data(submenu, "downButton", downButton);
		},
		_removeVerticalScrollbars: function (subMenu) {
			subMenu.find('.scrollUp').remove();
			subMenu.find('.scrollDown').remove();
		},
		hiddenLeftItems : [],
		hiddenRightItems : [],
		visibleItems: [],
		_setOverflow: function () {
			//Determine if there is overflow and add the scroll/overflow buttons if needed
			var self = this,
				rootDiv = self.element.closest(".inforApplicationNav"),
				expectedOffset = Math.round(rootDiv.position().top),
				itemCount = 1,
				overflow = $("#overFlowMenu");

			//show all items..
			$(".inforApplicationNav>ul>li").show();
			self.hiddenRightItems = [];

			//hide the elements that are off screen .
			$(".inforApplicationNav>ul>li").each(function () {
				var $this = $(this),
					isTopElement = (!$this.hasClass("headerDividerContainer") && !$this.hasClass("topNavSpacer")) && !$this.is("#sessionNavMenu");

				if ($this.attr("id") === "overFlowMenu") {
					return;
				}
				//(the height of the control)
				if (this.offsetTop > expectedOffset)
				//if greater than the height of the control
				{
					if (isTopElement) {
						self.hiddenRightItems.push({idx: itemCount, elm: $this});
						itemCount++;
					}

					$this.hide();
				} else {
					if (isTopElement) {
						self.visibleItems.push({idx: itemCount, elm: $this});
						itemCount++;
					}
				}
			});

			//if overflow is still hidden in an edge case on zoom then show it..
			if (overflow.length == 1 && rootDiv.is(":visible")) {
				while (!overflow.is(":visible") || Math.round(overflow.position().top) > expectedOffset) { //hide last visible. 
					var hd = overflow.parent().children("li:visible").not("#overFlowMenu").last();
					hd.hide();
					self.hiddenRightItems.push({idx: itemCount, elm: hd});
					itemCount++;
				}
			}
			
			//add scrollbars if needed
			if (self.hiddenRightItems.length > 0) {
				self._addScrollbars();
			} else {
				self._removeScrollbars();
			}
			
			itemCount--;
		},
		_removeScrollbars: function () {
			//Remove the overflow (and formerly scroll buttons) from the dom
			$("#overFlowMenu").hide();
		},
		_hideLast: function () {
			//Bump first element off of visible Items and hide it
			var self = this,
				lastVisible = self.visibleItems.splice(self.visibleItems.length - 1, 1)[0];

			if (lastVisible === undefined) {
				return;
			}

			lastVisible.elm.hide();
			this.visibleItems.sort(this._sortByIdx);
			this.hiddenRightItems.push(lastVisible);
			this.hiddenRightItems.sort(this._sortByIdx);
		},
		_checkButtonOverFlow: function () {
			//Additional Check on the left scroll button itself is overflowing. if it is hide the last visible item.
			var rightbutton = $("#overFlowMenu"),
			rootDiv = rightbutton.closest(".inforApplicationNav"),
			bottomOfNav = (rightbutton.length > 0 ? rootDiv.offset().top + 30 : 30),
			overFlow = $("#overFlowMenu"),
			rightArea = rootDiv.find(".inforApplicationNavRight");

			if (rightbutton.length === 0) {    //no overflow. empty div
				return;
			}

			if (rightbutton.length > 0 && rightbutton.offset().top >= bottomOfNav) {
				this._hideLast();
			}

			if (overFlow.length > 0 && overFlow.offset().top >= bottomOfNav) {
				this._hideLast();
			}
			
			if (overFlow.length > 0 && overFlow.offset().top >= bottomOfNav) {
				this._hideLast();
			}
			//look for a special area and hide an item if need be

			if (rightArea.length > 0) {
				rightArea.show();
				if (rightbutton.offset().top >= bottomOfNav) {
					this._hideLast();
				}
			}

			//if they are still off hide them
			if (rightbutton.length > 0 && rightbutton.offset().top >= bottomOfNav) {
				this._hideLast();
				//rightbutton.hide();
			}

			if (overFlow.length > 0 && overFlow.offset().top >= bottomOfNav) {
				overFlow.hide();
			}

			if (rightArea.length > 0 && rightArea.children().first().offset().top >= bottomOfNav) {
				this._hideLast();
			}
			rightArea.show();
		},
		_addScrollbars: function () {
			//Add the scroll buttons (horizontal) to the dom and add events.
			this._removeScrollbars();
			this._addOverflow();
			this._checkButtonOverFlow();
		},
		_enableVerticalScrollBars: function (submenu) {
			var up = $.data(submenu, "upButton"),
			down = $.data(submenu, "downButton"),
			hiddenBottomItems = $.data(submenu, "hiddenBottomItems"),
			hiddenTopItems = $.data(submenu, "hiddenTopItems");

			if (hiddenBottomItems.length === 0) {
				down.attr("disabled", "disabled");
			} else {
				down.removeAttr("disabled");
			}

			if (hiddenTopItems.length === 0) {
				up.attr("disabled", "disabled");
			} else {
				up.removeAttr("disabled");
			}
		},
		_sortByIdx: function (a, b) {
			//Sort Method for the scrolling arrays.
			var x = a.idx,
				y = b.idx;
			return ((x < y) ? -1: ((x > y) ? 1: 0));
		},
		_addOverflow: function () {
			//Find all of the items including those taht arent visible and add them to the overflow menu button
			var overflow = $("#overFlowMenu"),
			root = overflow.closest(".inforApplicationNav"),
			self = this,
			$ul = overflow.children("ul"),
			originalIndex;

			overflow.show();

			if ($ul.is(":visible")) {
				$ul.hide();
				return;
			}

			self._closeSiblingMenus(overflow);

			//add the menu items
			$ul.children().remove();

			//build the submenu
			$(".inforApplicationNav>ul>li").each(function () {
				var $this = $(this),
					clone = null;

				if ($this.attr("id") === "overFlowMenu") {
					return true;
				}

				clone = $this.clone();
				clone.data("menuItem", $this);
				$ul.append(clone);
				overflow.find("ul .downArrow").remove();
			});

			if (self.options.sortable) {
				$ul.sortable({
					placeholder: 'inforDragPlaceholder',
					helper: 'clone',
					forcePlaceholderSize: true,
					connectWith: 'ul',
					revert: 100,
					start: function (event, ui) {
						root.data("dragging", true);
						originalIndex = ui.item.index();
					},
					stop: function (event, ui) {
						var elem = ui.item.data("menuItem");

						if (originalIndex === ui.item.index()) {
							return;
						}
						if (ui.originalPosition.top > ui.position.top) {
							elem.parent().children().eq(ui.item.index()).before(elem);
						} else {   //dragged up
							elem.parent().children().eq(ui.item.index()).after(elem);
						}
						//dragged down
						root.data("dragging", false);
					}
				});
			}
		},
		_checkOverflowContent: function (ul) {
			var self = this;
			if (self.options.sortable) {
				ul.find("li").show();
				return;
			}

			ul.find("li").each(function () {
				var li =  $(this),
					menuItem = li.data("menuItem");
				li.show();
				if (menuItem && menuItem.is(":visible")) {
					li.hide();
				}
			});
		},
		closeOpenMenus: function (root) {
			if (root.length === 0) {	//no css.
				return;
			}
			this.isOpenedFromOverFlow = false;
			//Close all menus and hide the overlay
			root.find('ul li ul').filter(":visible").not(".inforMegaMenuColumn").hide();
			root.find(".activeHeader").removeClass("activeHeader");

			$('body').find(".transparentOverlay").css({
				'z-index': '-1',
				'display': 'none'
			});
			$("#inforObjectOverlay").hide();

			root.css({
				"overflow": "hidden"
			});

			$(".inforBkgrndIFrame").remove();
		},
		_closeSiblingMenus: function ($curobj) {     //Close ALL Menus at the same level (no animation)
			var rootDiv = $curobj.closest(".inforApplicationNav");
			if (rootDiv.length === 0) {	//no css.
				return;
			}
			$curobj.siblings("li").removeClass("activeHeader").children("ul").filter(":visible").not(".inforMegaMenuColumn").each(function () {
				var $targetul = $(this);
				$targetul.hide();
				$targetul.find("ul").hide();
				$targetul.find(".activeHeader").removeClass("activeHeader");

				//close any child menus of these
				$targetul.children("ul").filter(":visible").not(".inforMegaMenuColumn").hide();
				$targetul.find("ul").each(function () {
					var ul = $(this);
					if (ul.data("iFrame")) {
						ul.data("iFrame").remove();
					}
				});
				if ($targetul.data("iFrame")) {
					$targetul.data("iFrame").remove();
				}
			});
		},
		timeout: null,
		openMenu: function ($subul, $curobj, isCallback) {
			var $headers = $subul.children("li").has('ul'),
			self = this,
			subLis = $subul.find('ul li'),
			expectedHeight = null,
			header = null,
			isOpen = null,
			response = null,
			menuleft = null,
			rootDiv = null,
			bottomOfNav = null,
			offSetTop = null,
			winHeight = null;

			rootDiv = $subul.closest(".inforApplicationNav");
			if (rootDiv.length === 0) {	//no css.
				return;
			}

			$curobj.closest(".inforApplicationNav").css({
				"height": "",
				"overflow": ""
			});
			this._attachSubMenus($headers);

			$('body').find(".transparentOverlay").css({
				'z-index': '2',
				'display': ''
			});
			$("#inforObjectOverlay").show();

			//Add Click Event to each menu item
			//For now this helps close the menu and remove the overlay - later we can use this to track session info.
			subLis.each(function () {
				var $this = $(this);
				$this.off('click');
				$this.on('click', 'a', function (e) {
					self.closeOpenMenus($(this).closest('.inforApplicationNav'));
					e.stopPropagation();
					//prevent from reopening on header click event which will fire.
					if (self.options.callback) {
						self.options.callback(e);
					}
				});
			});

			//Click on the items that have submenus
			$subul.off('click');
			$subul.on('click', 'a', function (e) {
				self.closeOpenMenus($(this).closest('.inforApplicationNav'));
				e.stopPropagation();
				//prevent from reopening on header click event which will fire.
				if (self.options.callback) {
					self.options.callback(e);
				}
			});

			header = $curobj.get(0);
			//reference header LI as DOM object
			isOpen = $subul.is(":visible");
			if (isOpen) {
				return;
			}

			if ($(header).is("#overFlowMenu")) {
				self._checkOverflowContent($subul);
			}

			//May have a dynamic call setup
			if (!isCallback && self.options.loadMenu !== null && header.id !== "overFlowMenu") {

				// Call back for the Ajax Call.
				response = function ($subul, $curobj) {
					//Add The new content
					var newSubmenus = $subul.find("ul");
					if (newSubmenus.length > 0) {
						self._attachSubMenus(newSubmenus.parent());
					}
					$curobj.removeClass("inforBusyIndicator appNav");
					self.openMenu($subul, $curobj, true);
				};

				$curobj.addClass("inforBusyIndicator appNav");
				self.options.loadMenu($subul, $curobj, response);
				return;
			}

			header._offsets = {
				left: $curobj.offset().left,
				top: $curobj.offset().top
			};

			menuleft = header.istopheader ? 0: header._dimensions.w;
			//calculate this sub menu's offsets from its parent
			if (!header.istopheader) {
				menuleft = menuleft - 2;     //padding.
			}

			//if 1 or less queued animations
			if ($subul.queue().length <= 1) {
				if (!Globalize.culture().isRTL) {
					$subul.css({
						left: menuleft + 14 + "px"
					}).animate({
						height: 'show',
						opacity: 'show'
					}, 100, function () {
						//append an iFrame so it opens up over applets ect
						if (self.options.backgroundIFrame) {
							self._addIFrame($subul);
						}
					});
				}
				else {
					if (menuleft <= 0) {
						menuleft = "-3";
					}

					$subul.css({
						right: menuleft + "px",
						width: $subul.width()
					}).animate({
						height: 'show',
						opacity: 'show'
					}, 3);
				}
			}

			bottomOfNav = rootDiv.position().top + 20;

			if (!header.istopheader) {
				if (Globalize.culture().isRTL) {
					$subul.css({
						right: parseInt($subul.parent("li").width(), 10) + 6 + "px"
					});

					if ($subul.offset().left < 0) {
						$subul.css({
							"top": "10px",
							"right": - (parseInt($subul.css("right"), 10) + 2) + "px"
						});
					}

					if (parseInt($subul.parent().parent().css("right"), 10) < -3) {
						$subul.css("right", -(parseInt($subul.css("right"), 10) + 2) + "px");
						if ($subul.offset().left + $subul.width() > $(window).width()) {
							$subul.css("right", Math.abs(parseInt($subul.css("right"), 10) + 2) + "px");
						}
					}
				} else {
					$subul.position({
						my: "left top",
						at: "right top",
						of: $subul.parent("li"),
						collision: "flip"
					});

					$subul.find(".leftArrow").addClass("rightArrow").removeClass("leftArrow");

					if ($subul.position().left < 0) {
						$subul.find(".rightArrow").addClass("leftArrow").removeClass("rightArrow");
					}
					if ($(window).width() - $subul.width() < $subul.offset().left + $subul.width()) {
						$subul.find(".rightArrow").addClass("leftArrow").removeClass("rightArrow");
					}
					//see if the last open flowed left - continue left until we reach the left edge
					if ($subul.parent().parent().position().left < -6) {
						$subul.position({
							my: "right top",
							at: "left top",
							of: $subul.parent(),
							collision: "fit"
						});
						$subul.find(".rightArrow").addClass("leftArrow").removeClass("rightArrow");

						if ($subul.offset().left <= 0) {
							$subul.position({
								my: "left top",
								at: "right top",
								of: $subul.parent(),
								collision: "fit"
							});

							$subul.parent().find(".leftArrow").addClass("rightArrow").removeClass("leftArrow");
							$subul.find(".leftArrow").addClass("rightArrow").removeClass("leftArrow");
						}
					}
				}
			}

			if (header.istopheader && ($subul.offset().left + $subul.width()) > ($(window).width() - ($subul.width() * 2))) {
				$subul.find(".rightArrow").addClass("leftArrow").removeClass("rightArrow");
			}

			if ($(header).is("#overFlowMenu")) {
				$subul.find(".rightArrow").addClass("leftArrow").removeClass("rightArrow");
			}

			//See if it wont fit on the right and move it over.. Use offet+width+padding
			if ($subul.offset().left + $subul.width() + 28 > $(window).width()) {
				$subul.css("left", ($(window).width() - ($subul.offset().left + $subul.width() + (header.istopheader ? 30 : 0))) + "px");

				if (!header.istopheader) {
					$subul.position({
						my: "right",
						at: "left-10",
						collision: "fit flip",
						of: $subul.parent()
					});
				}
			}

			//this is the expected height of the menu numItems*30 (the width of each li)+10 (the bottom padding)
			expectedHeight = ($subul.children("li:visible").length * 30) + 10;
			offSetTop = $subul.offset().top;
			if (offSetTop < 0) {
				offSetTop = bottomOfNav;
			}
			winHeight = $(window).height() - (bottomOfNav);

			//overflow expected and won't fit
			if ((offSetTop + expectedHeight > winHeight) && winHeight < expectedHeight) {
				//move menu to just under the top
				self._setVerticalOverflow($subul);
			} else {
				if (offSetTop + expectedHeight > winHeight) {   //see if it will oveflow past the bottom and fit if to be moved up
					$subul.css("top", "-" + (offSetTop + expectedHeight - winHeight) + "px");

					if ($subul.offset().top < 30) {
						$subul.css("top", "22px");
					}
				}
			}
			
			if ($subul.parent().parent().parent().hasClass("inforApplicationNav")) {
				rootDiv.find(".activeHeader").removeClass("activeHeader");
			}
			$subul.parent("li").addClass("activeHeader").focus();
			rootDiv.find("a.hover").removeClass("hover");
			$subul.find(".inforMegaMenuColumn").show();
		},
		_addIFrame: function (elem) {
			var bkgrndIFrame = $('<div style="position:absolute" class="inforBkgrndIFrame"><iframe title="empty" frameborder="0" style="height:100px;width:100px;"></iframe></div>').appendTo("body");
			bkgrndIFrame.css({
				"left": elem.offset().left,
				"top": elem.offset().top,
				"z-index": 1
			});
			bkgrndIFrame.children().eq(0).height(elem.height()).width(elem.width() + 38);
			//padding
			bkgrndIFrame.show();
			elem.data("iFrame", bkgrndIFrame);
		}
	});

})(jQuery);/*
* Infor Bar Chart - SVG D3
*/
(function ($) {
$.widget("ui.inforBarChart", {
		options: {
			data: [4, 8, 15, 16, 23, 42],
			title: "Chart Title",
			subTitle: null,
			barColor: "#13A3F7"
		},
		_init: function () {
			var o = this.options,
				self = this,
				zone = (self.element.attr("id") ? "#" + self.element.attr("id"): "body"),
				height = self.options.data.length * 30;

			self.width = 320;
			self.barHeight = 18;
			self.barSpacing = 6;
			self.textPadding = 100;

			/*Random Colors
				color = d3.scale.ordinal().range(["#61C5FF", "#13A3F7", "#005CE6", "#9ED927", "#2BD329", "#00733A", "#FFD500",
					"#FFAA00", "#FF6400", "#FF574D", "#D5000E", "#B3000C", "#FF80A2", "#E63262",
					"#BF2951", "#C680FF", "#a352cc", "#7533A6", "#B3B3B3", "#737373", "#595959", "#6DD9D1", "#00C2B4", "#00898C"]);
				
				.style({"fill": function(d, i) { return color(i); }, "stroke":"white"})
			*/

			self.svg = d3.select(zone).append("svg:svg")
				.attr("width", self.width)
				.attr("height", height)
				.style("font-family", "Arial,helvetica,sans-serif");

			//add title
			self.title = self.svg.append("text")
				.attr("transform", function() { return "translate(0, 20)";})
				.style({"fill":"#888A90" , "font-size": "16px", "font-weight": "400"})
				.text(o.title);

			if (self.options.subTitle) {
				self.subTitle = self.svg.append("text")
					.attr("transform", function() { return "translate(0, 38)";})
					.style({"fill":"#888A90" , "font-size": "14px", "font-weight": "400"})
					.text(o.subTitle);
			}

			//add scale
			var g = self.svg.append("g").attr("transform", function() { return "translate(0, 55)";});

			var bar = g.selectAll("rect")
					.data(self.options.data)
					.enter().append("g").attr("class","barGroup");

			bar.append("rect")
				.attr("y", function(d, i) {return (i * self.barHeight) + (self.barSpacing*i);})
				.attr("x", self.textPadding)
				.attr("width", function(d) {return d.value/self.width;})
				.style({"fill": self.options.barColor, "stroke":"white"})
				.attr("height", self.barHeight);

			//Add Labels on the bars
			bar.append("text")
				.attr("class","barValue")
				.attr("x", function(d) {return (d.value/self.width) + self.textPadding - 5;})
				.attr("y", function(d, i) {return (i * self.barHeight) + (self.barSpacing*i);})
				.attr("dy", "13")
				.attr("text-anchor", "end")
				.style({"fill": "white", "font-size": "11px"})
				.text(function(d) {return d.value;});

			bar.append("text")
				.attr("class","barLabel")
				.attr("y", function(d, i) {return (i * self.barHeight) + (self.barSpacing*i);})
				.attr("dy", "13")
				.attr("text-anchor", "start")
				.style({"fill": "#888A90", "font-size": "12px"})
				.text(function(d) {return d.label;});
		},
		update: function(data, title, subTitle) {
			var self = this;

			if (title) {
				self.title.text(title);
			}
			if (subTitle) {
				self.subTitle.text(subTitle);
			}

			var rect = self.svg.selectAll(".barGroup")
						.data(data);

			//update the chart
			rect.transition()
				.select("rect")
					.duration(1000)
					.attr("y", function(d, i) {return (i* self.barHeight) + (self.barSpacing*i);})
					.attr("x", self.textPadding)
					.attr("width", function(d) {return d.value/self.width;})
					.style({"fill": self.options.barColor, "stroke":"white"})
					.attr("height", self.barHeight);

			rect.transition()
				.select(".barLabel")
					.duration(1000)
					.text(function(d) {return d.label;});

			rect.transition()
				.select(".barValue")
					.duration(1000)
					.attr("x", function(d) {return (d.value/self.width) + self.textPadding - 5;})
					.text(function(d) {return d.value;});

			rect.exit().remove();
		}
	});
})(jQuery);
/*
* Infor Bread Crumb a Collapsible Breadcrumb
*/
(function ($) {
	$.widget("ui.inforBreadcrumb", {
		options: {
		},
		_create: function () {
			var self = this;

			$(window).bind("throttledresize.inforBreadcrumb", function () {
				self.resize();
			});

			self.resize();
		},
		resize: function () {
			var elem = $(this.element),
			count = elem.find("a").not(":last").length,
			i = 2,
			maxWidth = elem.closest(".inforModuleHeader").find(".inforModuleHeaderRight").offset().left,
			parent = elem.closest(".inforModuleHeaderLeft");

			if (parent.length > 0) {
				parent.css({"overflow" : "hidden", "max-width" : parseInt(maxWidth, 10) - parseInt(parent.offset().left, 10) - 20  + "px"});
			}

			elem.find("a").not(":last").each(function (index, item) {
				var a = $(item);
				if (index < 2 || index > (count - 2)) {
					return;
				}

				a.data("originalText", a.html())
				.width(52)
				.hoverIntent(function () {
					var text = a.data("originalText"),
					width = text.textWidth() + 25;

					a.width(width);
				}, function () {
					a.width(52);
				});
			});
		}
	});
})(jQuery);/*
* Infor Status Indicator Chart - a Form chart showing static or changing progress
*/

(function ($) {
	$.widget("ui.inforBulletChart", $.ui.inforProgressIndicator, {
		options: {
			value: 0,
			max: 100,
			title: null,
			subTitle: null,
			color: "azure",
			valueLabel: "",
			target: null
		},
		_init: function () {
			var elem = $(this.element),
				o = this.options,
				statusVal = null,
				target = null,
				overage = null;

			if (o.target) {
				o.max = o.target; 
			}

			$.ui.inforProgressIndicator.prototype._init.apply(this, arguments);

			if (o.subTitle) {
				elem.prepend("<span class='subTitle'>" + o.subTitle + "</span><br>");
			}

			if (o.title) {
				elem.prepend("<span class='title'>" + o.title + "</span><br>");
			}

			statusVal = elem.find(".inforProgressIndicatorValue").addClass("inforColor " + o.color);
			statusVal.append("<div class='valueLabel'><div class='line1'>" + "</div><div class='line2'></div></span>");

			if (o.target) {
				target = $("<div class=\"targetBar\"></div>").css("left", (o.target / this.options.max) * 100 + "%");
				statusVal.after(target);
			}

			if (o.overage) {
				overage = $('<div class="inforProgressIndicatorValue overage"></div>').css("width", (o.overage / this.options.max) * 100 + "%");
				target.before(overage);
			}

			this._refreshValue(false);
		},
		_refreshValue: function (animate) {
			var elem = $(this.element),
				valueLabel = this.options.valueLabel.replace("%max%", this.options.max).replace("%target%", this.options.target);

			if (animate === undefined) {
				animate = true;
			}

			$.ui.inforProgressIndicator.prototype._refreshValue.apply(this, [animate]);

			//update labels.
			elem.find(".line1").html(Globalize.format(this.value() / this.options.max, "p0"));
			elem.find(".line2").html(valueLabel);
		}
	});
})(jQuery);
/*
* Infor Busy Indicator
*/
(function ($) {
	$.widget("ui.inforBusyIndicator", {
		options: {
			modal: false,   //Mask the element so that the ui cannot be clicked. Overlays at form level
			delay: 0,   //Delay in milliseconds before element is masked to prevent showing during short operations
			size: "large",	//small or large
			text: Globalize.localize("Loading"),
			position: {		//specify the position/defaults to center of the element
				my: "center-40 center",
				at: "center center"
			}
		},
		loadingElem : null,	//the element.
		overlay : null,
		delay : null,	//The Timeout.
		_init: function () {
		var self = this;
			self.open();
		},
		open: function () {
		var self = this,
				options = self.options;

			//handle the delay
			if (options.delay>0) {
				this.delay = setTimeout(function() {self.show() }, options.delay);
			} else {
				self.show();
			}
		},
		show: function() {
			var element = this.element;
			if (!this.loadingElem)
				this.loadingElem = $('<div id="inforLoadingOverlay" class="inforBusyIndicator"></div>').appendTo(element);

			//center the item and add it to the element.
			this.loadingElem.css("position","absolute");
			this.options.position.of = element;
			if (this.loadingElem.find(".loadingText").length == 0) {
				this.loadingElem.append("<span class='loadingText'>" + this.options.text +"</span>"); 
			} else {
				this.loadingElem.find(".loadingText").html(this.options.text); 
			}
			
			this.loadingElem.addClass(this.options.size).position(this.options.position);
			
			if (this.options.size == "large") {
				this.loadingElem.addClass("pill");
			} else {
				this.loadingElem.removeClass("pill");
				this.loadingElem.find(".loadingText").html(""); 
			}
			
			if (this.options.modal) {
				this.overlay = $("#inforOverlay");
				if (this.overlay.length==0) {
					this.overlay = $('<div id="inforOverlay" class="inforOverlay"></div>').css("z-index","2030").css({"height": "100%", "width": "100%"});
					$("body").append(this.overlay);
				}
			}
		},
		close: function () {
			//remove it and reset the delay
			if (this.loadingElem!=null)
				this.loadingElem.fadeOut().remove();
			this.loadingElem = null;

			clearTimeout(this.delay);
			this.delay = null;

			$("#inforOverlay").fadeOut().remove();
		}
	});
})(jQuery);

/*
* Infor Calculator Field - Creates a Popup Calculator Input Field
*/
(function ($) {
	$.widget("ui.inforCalculatorField", {
		_init: function () {
			var self = this,
				$input = $(this.element);

			//add trigger button styling
			$input.numericOnly(true).data("isInitialized", true).inforTriggerField({
				click: function (e) {
					self._openPopup($input, e);
				}
			});
		},
		expression: null, //the full expression - which can be calculated directly with eval
		calcInput: null, //the bottom input - the number
		hiddenInput: null,
		_closePopup: function (cancel) {
			var field = $(this.element);
			this.menu.empty().remove();
			if (!cancel) {
				field.val(this.calcInput.val()).trigger("change");
			}
		},
		_openPopup: function ($input, e) {
			var $div = $("#inforCalculatorPopup"),
				self = this,
				originalVal = $input.val(),
				popup = null,
				cancelButton = null,
				okButton = null,
				tableHtml = "";

			//close if already open (button was toggled)
			if ($div.length !== 0) {
				$("#inforCalculatorPopup").remove();
				return;
			}

			//create a div in which the Calculator goes - stopPropagtion to prevent clicks from carrying through
			$div = $("<div id='inforCalculatorPopup'> </div>").click(function (e) {
				e.stopPropagation();
			});

			//add the Calculator table and buttons html
			tableHtml = '<div class="inforCalculatorTableHeader"><input class="inforCalculatorExpression" readonly><input class="inforTextbox inforCalculatorInput" readonly><input class="inforTextbox inforHiddenInput"></div> <table class="inforCalculatorTable"><tbody><tr><td><button data-calc="(" class="inforTextButton padded">(</button></td><td><button data-calc=")" class="inforTextButton padded">)</button></td><td><button data-calc="clear"  class="inforTextButton">C</button>' +
						'</td><td colspan="2"><button data-calc="back" class="inforTextButton backButton"></button></td></tr><tr><td><button data-calc="7" class="inforTextButton colored">7</button></td><td><button data-calc="8" class="inforTextButton colored">8</button></td><td><button data-calc="9" class="inforTextButton colored">9</button></td><td><button data-calc="/" class="inforTextButton">&divide;</button></td><td><button data-calc="sqRoot" class="inforTextButton">&radic;</button></td></tr><tr><td><button data-calc="4" class="inforTextButton colored">4</button></td><td><button data-calc="5" class="inforTextButton colored">5</button></td><td><button data-calc="6" class="inforTextButton colored">6</button></td><td><button data-calc="*" class="inforTextButton">x</button></td><td><button data-calc="percent" class="inforTextButton">%</button></td></tr><tr><td><button data-calc="1" class="inforTextButton colored">1</button></td><td><button data-calc="2" class="inforTextButton colored">2</button></td><td>' + //ignore jslint
						'<button data-calc="3" class="inforTextButton colored">3</button></td><td><button data-calc="-" class="inforTextButton">-</button></td><td rowspan="2"><button data-calc="=" class="inforTextButton inforEqualsButton">=</button></td></tr><tr><td><button data-calc="0" class="inforTextButton">0</button></td><td><button data-calc="." class="inforTextButton">.</button></td><td><button data-calc="plusMinus" class="inforTextButton">+/-</button></td><td><button data-calc="+" class="inforTextButton">+</button></td></tr></tbody></table>';

			$div.append(tableHtml);

			//copy the input from the field and style the two input fields Expression(Top) and CalcInput(Bottom)
			this.calcInput = $div.find(".inforCalculatorInput").addClass("selectOnly").attr("readonly", "");
			this.calcInput.val($(this.element).val());
			this.expression = $div.find(".inforCalculatorExpression").attr("readonly", "");

			//Create and add events to the buttons
			$div.find(".inforTextButton").add($div.find(".inforFormButton")).on('click', function (e) {
				var calcExpr = $(e.currentTarget).attr("data-calc");
				self._handleKey(calcExpr);
			});

			//equals button
			$div.find(".inforEqualsButton").on('click', function () {
				self._calc();
			});

			//handle the keypresses by filtering only allowed hot keys and calling the _handleClick
			this.hiddenInput = $div.find(".inforHiddenInput");
			$div.bind('keydown', function (e) {
					var charCode = e.charCode || e.keyCode;
					if (charCode == 8) { //backspace to clear one.
						self._handleKey("back");
					}
				})
				.bind('keypress', function (e) {
					var charCode = e.charCode || e.keyCode,
						actualChar = String.fromCharCode(charCode);

					if (charCode == 99) { //c for clear
						self._handleKey("clear");
						return;
					}

					//no letters..(except c for clear)
					if (actualChar.replace(/[a-zA-Z]/g, '') === '' && actualChar.toLowerCase() != 'c') {
						return;
					}

					switch (charCode) {
					case 61:
						//allow = and enter to calculate
						self._calc();
						e.preventDefault();
						break;
					case 13:
						if (self.menu.is(":visible")) {
							self._calc();
							e.preventDefault();
							self._closePopup();
							$(self.element).focus();
						}
						break;
					case 99:
						//upper and lower case c and esc to clear.
					case 67:
					case 27:
						//self._handleKey("clear");
						//e.stopPropagation();
						self._closePopup();
						$(self.element).val(originalVal).trigger("change").focus();
						break;
					case 9:
						//tab to calculate and insert.
						$(document).trigger("click");
						break;
					default:
						//else insert the character.
						self._handleKey(actualChar);
						break;
					}
				});

			//open the popup in a context menu to get the right cross browser image edge styling
			$("body").append($div);
			$input.inforContextMenu({
				menu: 'inforCalculatorPopup',
				invokeMethod: 'immediate',
				animate: false,
				position: {
					my: (Globalize.culture().isRTL ? "right+2 top+1" : "left-1 top+1"),
					at: (Globalize.culture().isRTL ? "right+2 bottom+1" : "left-1 bottom+1"),
					of: $input
				},
				onClose: function () {
					self._closePopup(true);
				}
			});

			popup = $("#inforCalculatorPopup").height(265); //ensure height is always right to avoid skrink in the context menu
			if (popup.parent().offset().top < $input.offset().top) { //move on top of field when flowing to top
				popup.parent().css("top", parseInt(popup.parent().css("top"), 10) - 27);
			}
			this.menu = $("#inforCalculatorPopup").parent();
			this.menu.css("border", "none");

			this.menu.css("padding", 0);

			//add ok and cancel buttons
			okButton = $("<button class='inforFormButton default'>" + Globalize.localize("Ok") + "</button>").click(function () {
				self._calc();
				self._closePopup();
				$input.focus();
			});
			cancelButton = $("<button class='inforFormButton'>" + Globalize.localize("Cancel") + "</button>").click(function () {
				self._closePopup(true);
				$input.val(originalVal).focus();
			});
			$div.find("table").after($("<div class='inforCalculatorTableFooter'></div>").append(okButton, cancelButton));

			//correct some styling added by the context menu that we dont want to break.
			$div.closest(".menuContent").css("text-indent", "");

			setTimeout(function () {
				self.hiddenInput.focus();
			}, 1);
			this.resetOp = true;	//overright the current value
		},
		firstOp: null, //stores the first operation in the sequence. Used for Percentage Calc.
		resetOp: false, //should we reset the numeric input on next click
		_handleKey: function (key) {
			//Handle Each Key Press or input from the buttons. Similar to Windows Calc Functionality
			var oldOpVal = this.calcInput.val(),
				oldExprVal = this.expression.val(),
				newOp = null;

			switch (key) {
			case "(":
				if (oldOpVal === "" || oldOpVal === "0") {
					this.expression.val(oldOpVal + key);
				}
				else {
					this.expression.val(key + oldOpVal);
				}
				break;
			case ")":
				if ($.inArray("(", oldExprVal) == -1) {
					return;
				}
				this.expression.val(oldExprVal + key);
				break;
			case "=":
				this.isEquals = true;
				/* falls through */
			case "+":
			case "*":
			case "/":
			case "-":
				if (oldExprVal.search("sqrt") == -1) {
					this.expression.val(oldExprVal + oldOpVal + key);
				}
				this.resetOp = true;
				if (!this.firstOp) {
					this.firstOp = oldOpVal;
				}
				break;
			case "percent":
				this.expression.val(oldExprVal + (parseFloat(this.firstOp) * parseFloat(oldOpVal) / 100));
				break;
			case "sqRoot":
				this.expression.val("sqrt(" + oldOpVal + ")");
				break;
			case "back":
				newOp = oldOpVal.substr(0, oldOpVal.length - 1);
				this.calcInput.val(newOp);
				this.expression.val(oldExprVal.substr(0, oldExprVal.length - 1));
				this.firstOp = newOp;
				break;
			case "clear":
				this.calcInput.val("0");
				this.expression.val("");
				this.firstOp = null;
				break;
			case "plusMinus":
				this.calcInput.val((-oldOpVal));
				break;
			default:
				//numbers
				if (key.replace(/[0-9.,]/g, '') === '') {
					if (this.resetOp) {
						this.calcInput.val(key);
					} else {
						this.calcInput.val((oldOpVal == "0" ? key : oldOpVal + key)); //reset zero after clear
					}
					this.resetOp = false;
				}
				break;
			}
		},
		_calc: function () {
			if (!this.isEquals) {
				this._handleKey("=");
			}

			if (this.expression.val() === "") {
				return;
			}

			//Replace the visual sqrt with the js executable Math.sqrt
			var result = "",
				calculation = this.expression.val().replace(/sqrt/gi, "Math.sqrt").replace(/=/gi, "");  //ignore jslint

			//Execute the calc in the expression field - any errors show the visual "Invalid Input"
			try {
				result = eval(calculation); //ignore jslint
			} catch (err) {
				result = "Invalid Input";
			}

			//Show Divide By Zero Errors.
			this.calcInput.val((result == Infinity ? "Cannot Divide By Zero" : result));
			this.expression.val("");
			this.isEquals = false;
		}
	});
}(jQuery));/*
* Infor Carousel Control
*/
(function ($) {
	$.widget("ui.inforCarousel", {
		options: {
			scrollBar: true,
			showItemCount: true,
			onSelect: null	//fires when an item is selected.
		},
		_create: function () {
			var elem = $(this.element),
			self = this,
			scroller = $("<div class=\"inforCarouselScroller\"></div>");

			elem.wrap(scroller);
			this.resize();

			if (!this.options.scrollBar) {
				elem.parent(".inforCarouselScroller").css("overflow-x", "hidden");
			} else {
				elem.parent(".inforCarouselScroller").scroll(function () {
					self._updateItemCount(elem);
				});
			}

			this._addButtons(elem);
			this._updateItemCount(elem);
			this._updateTooltips();
			
			elem.parent().find(".inforCarouselLabel").attr("tabindex", 0).focus(function () {
				var item = $(this).parent(".inforCarouselItem");
				item.find(".inforCarouselOverlay").show();
				item.find(".inforCarouselToolbar").show();
			}).blur(function () {
				var item = $(this).parent(".inforCarouselItem");
				item.find(".inforCarouselOverlay").hide();
				item.find(".inforCarouselToolbar").hide();
			});
		},
		resize: function () {
			var elem = $(this.element),
			item, toolbar,
			width = 0,
			self = this,
			parent = elem.parent(),
			hoverConfig = {
				timeout: 500,
				over: function () {
					var item = $(this);
					item.find(".inforCarouselOverlay").fadeIn("slow");
					item.find(".inforCarouselToolbar").fadeIn("slow");
				},
				out: function () {
					var item = $(this);
					item.find(".inforCarouselOverlay").fadeOut("slow");
					item.find(".inforCarouselToolbar").fadeOut("slow");
				}
			};

			elem.find('.inforCarouselItem').each(function () {
				item = $(this);
				width += item.outerWidth(true),
				toolbar = $(this).find(".inforCarouselToolbar");
				item.find(".inforCarouselOverlay").remove();

				if (toolbar.length > 0) {
					toolbar.before("<div class=\"inforCarouselOverlay\"></div>");
				} else {
					item.append("<div class=\"inforCarouselOverlay\"></div>");
				}
			}).hoverIntent(hoverConfig);

			elem.css('width', width + "px");
			parent = elem.parent().parent();

			//set field set width
			//todo: test this in a card stack/splitter/pane
			self._sizeParent();
			//handle resize for field set width
			$(window).bind("throttledresize.inforCarousel", function () {
				self._sizeParent();
				self._updateItemCount(elem);
			});
		},
		_sizeParent: function () {
			var elem = $(this.element),
			parent = elem.parent().parent();

			if (parent.width !== undefined) {
				parent.width($(window).width() - 20).css({"padding": "0", "margin-left": "0"});
			}
		},
		refresh: function () {
			var elem = $(this.element);

			this.resize();
			this._sizeParent();
			this._updateItemCount(elem);
			this._updateTooltips();
		},
		_updateTooltips: function () {
			var elem = $(this.element);
			elem.find('.inforCarouselItem').each(function () {
				var item = $(this).find(".inforCarouselTooltip").hide(),
				img = $(this).find(".inforCarouselImage");

				if (item.length > 0 && !item.data("uiInforToolTip")) {
					img.attr("title", item.html()).inforToolTip({delay: 750});	//should be two seconds but that seems too long
				}
			});
		},
		scrollOne: function (direction, animate) {
			var elem = $(this.element),
			scroller = $(this.element).parent(),
			self = this,
			itemWidth = elem.find('.inforCarouselItem:first').outerWidth(true) + 32,
			distance = scroller.scrollLeft() + (direction == "right" ? itemWidth : -itemWidth);

			scroller.animate({
				scrollLeft:  distance
			}, (animate ? 300 : 300), "easeOutQuad", function () {
				self._updateItemCount(elem);
			});
		},
		_addButtons: function (elem) {
			var self = this,
				isScrolling = false,
				container = $("<div class=\"inforCarouselScrollerContainer\"></div>"),
				left = $("<button type='button'><span></span></button>").addClass("inforIconButton inforCarouselScrollLeft").attr("title", Globalize.localize("Previous")),
				right = $("<button type='button'><span></span></button>").addClass("inforIconButton inforCarouselScrollRight").attr("title", Globalize.localize("Next"));

			elem.parent().wrap(container);
			container = elem.closest(".inforCarouselScrollerContainer");
			container.append(right).prepend(left);

			left.inforToolTip().click(function () {
				if (isScrolling) {
					isScrolling = false;
					return;
				}
				self.scrollOne("left", true);
				isScrolling = false;
			});

			right.inforToolTip().click(function () {
				if (isScrolling) {
					isScrolling = false;
					return;
				}
				self.scrollOne("right", true);
			});

			/*add click - long press events
			left.on('mousedown', function () {
				self.leftInterval = setInterval(function () {
					self.scrollOne("left");
					isScrolling = true;
				}, 200);
			}).on('mouseup mouseup mouseout', function () {
				clearInterval(self.leftInterval);
			});

			right.on('mousedown', function () {
				self.rightInterval = setInterval(function () {
					self.scrollOne("right");
					isScrolling = true;
				}, 200);
			}).on('mouseup mouseup mouseout', function () {
				clearInterval(self.rightInterval);
			});*/
		},
		isElementInViewPort: function (el) {
			var rect = el.getBoundingClientRect();
			return (
				rect.top >= 0 &&
				rect.left >= 0 &&
				rect.bottom <= window.innerHeight &&
				rect.right <= window.innerWidth
			);
		},
		_updateItemCount: function (elem) {
			if (!this.options.showItemCount) {
				return;
			}
			var container = elem.closest(".inforCarouselScrollerContainer"),
				countElem = container.find(".inforCarouselItemCount"),
				start = 1,
				end = 0,
				foundStart = false,
				self = this;

			if (countElem.length === 0) {
				countElem = $("<div class='inforCarouselItemCount'></div>");
				container.find(".inforCarouselScrollRight").after(countElem);
				if (!this.options.scrollBar) {
					countElem.css("margin-top", "-25px");
				}
			}

			elem.children().each(function () {
				if (self.isElementInViewPort($(this)[0])) {
					end++;
					foundStart = true;
				} else {
					if (!foundStart) {
						start++;
					}
				}
			});

			countElem.html(start + "-" + (end + start - 1) + " of " + elem.children().length);
			this._refreshScroll(elem);
		},
		_refreshScroll: function (elem) {
			var left = elem.closest(".inforCarouselScrollerContainer").find(".inforCarouselScrollLeft"),
			right = elem.closest(".inforCarouselScrollerContainer").find(".inforCarouselScrollRight"),
			scroller = elem.closest(".inforCarouselScroller")[0];

			if (scroller.scrollLeft === 0) {
				left.attr("disabled", "");
				clearInterval(this.leftInterval);
			} else {
				left.removeAttr("disabled");
			}

			if ((scroller.scrollWidth - scroller.clientWidth) === scroller.scrollLeft) {
				right.attr("disabled", "");
				clearInterval(this.rightInterval);
			} else {
				right.removeAttr("disabled");
			}
		}
	});
})(jQuery);/*
* Infor Checkbox Control - Initially Contributed by Josh Russell (Riptide Software, Inc.)
*/
(function ($) {
	var methods = {
		init: function (options) {
			return doInit(this, options);
		},
		isChecked: function () {
			return this.prop('checked');
		}
	};

	$.fn.inforCheckbox = function (method) {
		// Method calling logic
		if (methods[method]) {
			return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
		} else if (typeof method === 'object' || !method) {
			return methods.init.apply(this, arguments);
		} else {
			$.error('Method ' + method + ' does not exist on inforCheckbox.');
		}
	};

	function doInit(els, options) {
		/* Default settings */
		var settings = {
			focusClass: 'inforCheckboxFocus',
			checkedClass: 'checked',
			disabledClass: 'disabled',
			readOnlyClass: 'readonly',
			hoverClass: 'hover'
		};

		/* Processing settings */
		settings = $.extend(settings, options || {});

		/* Wrapping all passed elements */
		return els.each(function () {
			var $el = $(this),
				div = $('<div class="inforCheckbox" />'),
				span = $('<span />'),
				inlineCss = $el.attr("style"),
				root = null,
				container;

			if ($el.parent().parent().hasClass("inforCheckbox")) {
				return;
			}

			if ($el.is("div") && $el.hasClass("inforCheckbox")) {
				return;
			}

			// wrap the checkbox in a couple DOM elements so
			// that we can apply styles
			$el.wrap(div).wrap(span);

			span = $el.parent();
			div = span.parent();

			// the next thing is to hide the original checkbox
			// and add event handlers that will take care of
			// styling
			if (typeof Globalize !== "undefined" && Globalize.culture().isRTL) {
				$el.css("right", "-2px");
			} else {
				$el.css("left", "-2px");
			}

			$el.css({
				'opacity': 0,
				"position": "relative",
				"top": "-1px"
			})
				.focusin(function () {
					if ($el.attr("readonly") || $el.attr("disabled")) {
						return;
					}
					div.parent().addClass(settings.focusClass);
				})
				.focusout(function () {
					if ($el.attr("readonly") || $el.attr("disabled")) {
						return;
					}

					div.parent().removeClass(settings.focusClass);
				})
				.hover(function () {
					if ($el.attr("readonly") || $el.attr("disabled")) {
						return;
					}
					div.parent().addClass(settings.hoverClass);
				}, function () {
					if ($el.attr("readonly") || $el.attr("disabled")) {
						return;
					}

					div.parent().removeClass(settings.hoverClass);
				})
				.blur(function () {
					if ($el.attr("readonly") || $el.attr("disabled")) {
						return;
					}

					div.parent().removeClass(settings.focusClass);
				})
				.on("touchstart click", function () {
					if ($el.attr("readonly") || $el.attr("disabled")) {
						return;
					}
					
					// In Chrome it doesn't think it has focus, therefore the .focusout will not fire.
					// Force it to have focus.
					this.focus();

					if (this.checked) {
						span.addClass(settings.checkedClass);
						$el.attr("aria-checked", "true");
					} else {
						span.removeClass(settings.checkedClass);
						$el.attr("aria-checked", "false");
					}

					$(".inforCheckboxFocus").removeClass("inforCheckboxFocus");
					div.parent().addClass(settings.focusClass);
					div.parent().removeClass(settings.hoverClass);
				});

			//carry over other css.
			if (inlineCss !== undefined) {
				div.attr("style", inlineCss);
			}
			// check the box by default
			if ($el.prop('checked')) {
				span.addClass(settings.checkedClass);
				$el.attr("aria-checked", "true");
			} else {
				$el.attr("aria-checked", "false");
			}

			//wrap a div around for the hover states.

			root = $el.closest("div.inforCheckbox");
			$(root).add(root.next(".inforCheckboxLabel")).wrapAll("<div class='inforCheckboxContainer'></div>");
			container = span.closest(".inforCheckboxContainer");
			
			// disable the checkbox if it is supposed to be
			if ($el.attr('disabled') && !$el.attr('readonly')) {
				span.addClass(settings.disabledClass);
				span.parent().addClass(settings.disabledClass);
				container.addClass(settings.disabledClass);
			}

			container.find(".inforCheckboxLabel")
				.disableSelection().hover(function () {
					container.addClass("hover");
				}, function () {
					container.removeClass("hover");
				});
				

			// set readonly if the checkbox is readonly
			if ($el.attr('readonly')) {
				// This is required because readonly on a checkbox is a bit counter intuitive.
				// The readonly attribute prevents the user from changing the value. However,
				// with a checkbox, checking/unchecking doesn't technically change the value;
				// rather it changes the state, which is not prevented by readonly. Adding
				// disabled prevents the checkbox from having its state changed. One drawback
				// to this approach is that while readonly checkboxes would still be submitted to
				// the server, disabled checkboxes wouldn't be.
				$el.attr('disabled', 'disabled');
				span.addClass(settings.readOnlyClass);
				span.parent().addClass(settings.readOnlyClass);
				span.closest(".inforCheckboxContainer").addClass(settings.readOnlyClass);
			}

			if ($el.hasClass('partial')) {
				$el.removeClass('partial');
				span.addClass('partial');
				$el.attr("aria-checked", "mixed");
			}

			//hide it if its hidden initially
			if ($el.attr("style").indexOf("display: none") > -1) {
				$el.css("display", "");
				root.hide();
				if (root.next().hasClass("inforCheckboxLabel")) {
					root.next().hide();
				}
			}
			
			if ($el.attr("style").indexOf("visibility: hidden") > -1) {
				$el.closest("div.inforCheckbox");
				$el.css("visibility", "");
				root.hide();
				if (root.next().hasClass("inforCheckboxLabel")) {
					root.next().css("visibility", "hidden");
				}
			}
		});
	}
})(jQuery);/*
* Infor CheckGroup
*/
(function ($) {
	$.fn.inforCheckboxGroup = function (options) {

		// make sure we've got inforCheckbox
		if (typeof $().inforCheckbox == 'undefined') {
			$.error('inforCheckGroup dependency on inforCheckbox not satisfied');
		}

		/* Default settings */
		var settings = {};

		/* Processing settings */
		settings = $.extend(settings, options || {});

		return this.each(function () {
			var $el = $(this), // Wrap the reference to the DOM node - should be a ul
			$parentCheckbox = $(':checkbox:first', $el),
			$childrenCheckboxes = $parentCheckbox.closest('li').find('ul :checkbox');

			// Set a partial state if some children are checked and others are not.
			// This functionality depends on the way inforCheckbox handles finding a
			// class of partial on the checkbox it is working with. Therefore, this must
			// be done before inforCheckbox is called. Or, if the whole child list is checked,
			// then set checked on the parent.
			if (isPartiallyChecked($childrenCheckboxes)) {
				$parentCheckbox.addClass('partial');
			}
				// This might be an edge case, but it should be dealt with anyway.
			else if (isFullyChecked($childrenCheckboxes)) {
				$parentCheckbox.prop('checked', true);
			}

			// if the parent is disabled, make sure all children are disabled
			if ($parentCheckbox.attr('disabled')) {
				$childrenCheckboxes.attr('disabled', 'disabled');
			}

			// if the parent is readonly, make sure all children are read only
			if ($parentCheckbox.attr('readonly')) {
				$childrenCheckboxes.attr('readonly', 'readonly');
			}

			// if the parent is checked, make sure all children are checked
			if ($parentCheckbox.prop('checked')) {
				$childrenCheckboxes.prop('checked', true);
			}

			// Apply inforCheckbox to all checkboxes in the group
			$(':checkbox', $el).inforCheckbox();

			// Now apply some event handlers to the parent checkbox
			$parentCheckbox.click(function () {
				// the element was checked
				if (this.checked) {
					$childrenCheckboxes.prop('checked', true).parent('span').addClass('checked');
					$(this).parent('span').removeClass('partial').addClass(settings.checkedClass);
				} else {
					$childrenCheckboxes.prop('checked', false).parent('span').removeClass('checked');
					$(this).parent('span').removeClass(settings.checkedClass);
				}
				$childrenCheckboxes.trigger("change");
			});

			// The final thing to do is attach event handlers to the children so that
			// when they are checked/unchecked, the state of the parent can be toggled.
			$childrenCheckboxes.click(function () {
				if (isPartiallyChecked($childrenCheckboxes)) {
					$parentCheckbox.parent('span').removeClass('checked').addClass('partial');
				} else if (isFullyChecked($childrenCheckboxes)) {
					$parentCheckbox.prop('checked', true).parent('span').removeClass('partial').addClass('checked');
				} else  { //non checked
					$parentCheckbox.prop('checked', false).parent('span').removeClass('partial').removeClass('checked');
				}
			});

		});
	};

	function isPartiallyChecked(childList) {
		// This works because is() returns true if one element in the set
		// of matched elements matches the selector passed to is(). Therefore
		// if is(':checked') and is(':not(:checked)') both return true,
		// some checkboxes are checked and others are not.
		return childList.is(':checked') && childList.is(':not(:checked)');
	}

	function isFullyChecked(childList) {
		return childList.is(':checked') && !childList.is(':not(:checked)');
	}

})(jQuery);/*
* Infor Color Picker Control
*/
(function ($) {
	$.widget("ui.inforColorPicker", {
		options: {
			mode: "basic",
			title: Globalize.localize("SetTextColor"),
			colors: ["#61c5ff", "#9ed927", "#ffd500", "#ff574d", "#ff80a2", "#c680ff", "#6dd9d1", "#666666", "#ffffff",
					 "#13a3f7", "#2db329", "#ffaa00", "#d5000e", "#e63262", "#a352cc", "#00c2b4", "#333333", "#CCCCCC",
					 "#005ce6", "#00733a", "#ff6400", "#b3000c", "#bf2951", "#7533a6", "#00898c", "#000000", "#999999",
					]
		},
		_create: function () {
			var self = this,
				startVal;

			self.input = $(this.element);
			self.popup = $("<ul id='inforColorPopup'></ul>");
			
			//make sure its not initialized twice.
			if (self.input.data("isInitialized")) {
				return;
			}
			
			//add trigger button styling
			self.input.data("isInitialized", true).inforTriggerField({
				editable: false,
				click: function (e) {
					$(document).trigger("click");
					self.input.inforContextMenu("destroy");

					self.popup.appendTo("body");
					self._addColors();
					
					self.popup.find("a").focus(function () {
						$(this).closest("td").addClass("focus");
					}).blur(function () {
						$(this).closest("td").removeClass("focus");
					});
					
					self.input.inforContextMenu({
						menu: 'inforColorPopup',
						invokeMethod: 'immediate',
						animate: false,
						position: {
							my: (Globalize.culture().isRTL ? "right top-1" : "left top-1"),
							at: (Globalize.culture().isRTL ? "left top-1" : "right top-1"),
							of: (self.input.is("visible") ? self.input : $(e.currentTarget))
						},
						onClose: function () {
							self.popup.removeClass("inforMenuOptions").parent().remove();
							self.input.focus();
						}
					}, function (a, e, p, item) {
						var color = item.find("a").attr("title");
						self.setValue(color);
					});
				}
			});

			//move button to other side.
			self.input.parent().append(self.input);
			
			//read the value
			startVal = self.input.val();
			if (startVal) {
				self.setValue(startVal);
			}
			self.popup.find("a:first").focus();
		},
		setValue: function (color) {
			var self = this;
			self.input.val(color === "No Color" ? "" : color).trigger("change");
			self.input.parent().find(".inforColorButton").css("background-color", color === "No Color" ? "" : color);
		},
		_addColors: function() {
			var self = this,
				i = 0,
				html = "",
				gap = false,
				color;

			html += '<span class="inforColorPopupLabel">' + self.options.title + '</span><li class=""><a href="#" style="background-color:transparent" title="No Color" class="noColor"></a></li><table role="presentation" class="inforColorPopupColors"><tr>';
			html += '<tr><td class="spacer"></td><td class="spacer"></td><td class="spacer"></td><td class="spacer"></td><td class="spacer"></td><td class="spacer"></td><td class="spacer"></td><td class="spacer"></td><td><li><a href="#" title="No Color" class="noColor"></a></li></td></tr>';
		
			for (i = 0; i < self.options.colors.length ; i++) {
				gap = (i%9 === 0 && i!=0);
				color = self.options.colors[i];
				
				if (color != "No Color") {
					html += (gap ? "</tr><tr>" : "") + "<td><li><a href='#' style='background-color:" + color +
						(color == "#ffffff" ? ";border: 1px solid #d9d9d9; border-radius: 4px" : "") + "' title='" + color + "'" + (color == "No Color" ? "class='noColor'" : "")  +"></a></li></td>";
				}
			}

			html += "</table>";

			self.popup.empty().append(html);
		}
	});
})(jQuery);/*
	Infor Context Menu!
*/
(function ($) {
	$.extend($.fn, {
		inforContextMenu: function (o, callback) {
			var settings = {
				menu: false,
				blockContextMenu: true,
				invokeMethod: "rightClick",
				positionBelowElement: false,
				offsetLeft: null,
				offsetTop: null,
				position: null,
				event: null,
				srcElement: null,
				beforeOpening: null,
				backgroundIFrame: false,
				iframeFix: false
			},
			self = $(this),
			openFunc;

			// Defaults
			o = $.extend({}, settings, o);

			// Loop each context menu
			self.each(function () {
				var el = $(this),
					offset = el.offset();

				el.wrapMenu(o);

				// Simulate a true right click
				if (o.invokeMethod == "rightClick") {
					el.mousedown(function (e) {
						var evt = e;
						if (evt.button == 2) {
							evt.stopPropagation();
							$(this).mouseup(function (e) {
							e.stopPropagation();
							var elem = $(this);
							elem.off('mouseup');
							if (evt.button == 2) {
								if (o.beforeOpening) {
									o.beforeOpening(e, el);
								}
								elem.openMenu(e, o, el, callback, offset, evt, elem);
							}
						});
						}
					});
				} else if (o.invokeMethod == "click") {
					el.click(function (e) {
						var evt = e,
							elem = $(this);

						e.stopPropagation();
						if (evt.button === 0) {
							if (o.beforeOpening) {
								o.beforeOpening(e, el);
							}
							elem.openMenu(e, o, el, callback, offset, evt, elem);
						}
					});
				} else if (o.invokeMethod == "submenu") {
					el.data("open", function (e) {
						var srcElement = el;
						if (o.beforeOpening) {
							o.beforeOpening(e, el);
						}
						srcElement.openMenu(e, o, el, callback, offset, e, srcElement);
						return $('#' + o.menu);
					});

					el.hover(function (e) {
						openFunc = el.data("open");
						openFunc(e);
						e.stopPropagation();
					});

					el.find("ul").hover(function (e) {
						e.stopPropagation();
					});

					$('#' + o.menu).addClass("submenu");
					el.siblings("li:not(.arrow)").hoverIntent(function (e) {
						var li = $(this);
						if ($(this).hasClass("arrow")) {
							return;
						}
						li.parent().find(".inforMenu.submenu").hide();
					}, function () { });

				} else if (o.invokeMethod == "toggle") {
					el.click(function (e) {
						var menu = $('#' + o.menu),
						isOpen = menu.data("isOpen"),
						menusOnForm = $(".inforMenuOptions"),
						evt = e,
						srcElement = $(this);

						$('#' + o.menu).parent().hide();
						if (!$(this).is(":enabled") && $(this).is("button")) {
							return;
						}
						if (o.beforeOpening) {
							o.beforeOpening(e, el);
						}

						menusOnForm.hide();
						menusOnForm.data("isOpen", false);

						if (isOpen === true) {
							menu.data("isOpen", false);
						} else {


							e.stopPropagation();
							if (evt.button === 0) {
								$(this).openMenu(e, o, el, callback, offset, evt, srcElement);
							}
							menu.data("isOpen", true);
						}
					});
				} else if (o.invokeMethod == "immediate") {
					if (!offset) {
						offset = $('body').offset();
					}
					el.openMenu(o.event, o, el, callback, offset, o.event, o.srcElement);
				}


				// Disable browser context menu (requires both selectors to work in IE/Safari + FF/Chrome)
				if (o.blockContextMenu) {
					$(el).add($('.inforMenu')).on('contextmenu.inforcontextmenu', function () {
						return false;
					});
				}
			});
			return self;
		},
		_addIFrame: function (elem) {
			var bkgrndIFrame = $('<div style="position:absolute" class="inforBkgrndIFrame"><iframe frameborder="0" style="height:100px;width:100px;"></iframe></div>').appendTo("body");
			bkgrndIFrame.css({
				"left": elem.offset().left,
				"top": elem.offset().top,
				"z-index": 1
			});
			bkgrndIFrame.children().eq(0).height(elem.outerHeight()).width(elem.outerWidth());
			bkgrndIFrame.show();
			elem.data("iFrame", bkgrndIFrame);
		},
		wrapMenu: function (o) {
			var $menuElem = $('#' + o.menu);

			// Add contextMenu class
			if (!$menuElem.hasClass('inforMenuOptions')) {  //already wrapped..
				$menuElem.addClass('inforMenuOptions').wrap("<div class='inforMenu'></div>");
			}
		},
		closeMenu: function (o, el) {
			var $menu = $(this),
				menu = $('#' + o.menu),
				menusOnForm = $(".inforMenuOptions");

			if (!$menu.hasClass("submenu")) {
				$(document).off("keydown.inforcontextmenu" + o.menu);

				if (o.iframeFix) {
					$("iframe").contents().find("body").off("click.inforcontextmenu");
				}
			}

			$(el).add($('.inforMenu')).off('contextmenu.inforcontextmenu');

			$(".inforTabset").find("a").off('mousedown');

			$menu.fadeOut(150);
			$menu.parent(".inforMenu").fadeOut(150);
			$menu.data("isOpen", false);
			menu.data("isOpen", false);

			$('#' + o.menu).hide();
			menusOnForm.hide();
			menusOnForm.data("isOpen", false);
			menusOnForm.closest(".inforMenu").hide();

			if (o.backgroundIFrame) {
				$(".inforBkgrndIFrame").remove();
			}

			if (o.onClose) {
				o.onClose(menu);
			}
			return true;
		},
		handleKeyPress: function (e, $menu) {
			var openSubs = $(".inforMenu.submenu:visible"),
				$activeElement = null,
				$li = null, openFunc, subMenu;
			switch (e.keyCode) {
			case 38:
				// up
				e.stopPropagation();
				e.preventDefault();
				if ($menu.find('LI.focus').size() === 0) {
					$activeElement = $menu.find('LI:not(.headerText):not(.separator):last').addClass("focus");
				} else {
					$activeElement = $menu.find('LI.focus').removeClass("focus").prevAll('LI:not(.disabled):not(.headerText):not(.separator)').eq(0).addClass("focus");
					if ($menu.find('LI.focus').size() === 0) {
						$activeElement = $menu.find('LI:not(.headerText):not(.separator):last').addClass("focus");
					}
				}
				$activeElement.find("a").focus();
				break;
			case 40:
				// down
				e.stopPropagation();
				e.preventDefault();
				if ($menu.find('LI.focus').size() === 0) {
					$activeElement = $menu.find('LI:not(.headerText):not(.separator):first').addClass("focus");
				} else {
					$activeElement = $menu.find('LI.focus').removeClass("focus").nextAll('LI:not(.disabled):not(.headerText):not(.separator)').eq(0).addClass("focus");
					if ($menu.find('LI.focus').size() === 0) {
						$activeElement = $menu.find('LI:not(.headerText):not(.separator):first').addClass("focus");
					}
				}
				$activeElement.find("a").focus();
				break;
			case 39:
				// left
				$li = $menu.find('LI.focus.arrow');
				openFunc = $li.data("open");
				if (openFunc) {
					subMenu = openFunc(e);
					subMenu.find('LI:not(.headerText):not(.separator):first').addClass("focus");
					subMenu.find("a").focus();
					subMenu.data("parentLi", $li);
					$li.removeClass("focus");
				}
				break;
			case 37:
				// right
				$li = $menu.find('LI.focus');
				if ($li.parent().hasClass("submenu")) {
					//$menu.hide();
					$li.parent().parent().hide();
					if ($li.parent().data("parentLi")) {
						$li.parent().data("parentLi").addClass("focus").find("a").focus();
					}
					$li.removeClass("focus");
				}
				break;
			case 32:	//space
				$li = $menu.find('LI.focus');
				if ($li.hasClass("checkbox")) {
					$li.find("input").toggleChecked();
				}
			case 13:
				// enter
				//will click since it has focus....
				break;
			case 27:
				// esc
				$(document).trigger('click');
				break;
			}
		},
		openMenu: function (e, o, el, callback, offset, evt, srcElement, deffered) {
			var $container = $('#' + o.menu).closest(".inforMenu"),
				otherMenus = null,
				d = {}, x, y,
				self = this,
				elem = $(el),
				isVisible = $container.is(":visible"),
				$menu = $('#' + o.menu),
				handleKeyPress, openFunc, subMenu, newY, content, scrollWidth;

			if (isVisible) {
				return;
			}

			if ($menu.children().length == 0) {
				return;
			}

			if (o.blockContextMenu) {
				elem.add($('.inforMenu')).on('contextmenu.inforcontextmenu', function () {
					return false;
				});
			}

			// Hide context menus that may be showing excluding the parent menu
			if (srcElement) {
				otherMenus = $(".inforMenu").not(srcElement.parents(".inforMenu")).not(srcElement.data("parentMenu"));
			} else {
				otherMenus = $(".inforMenu");
			}

			otherMenus.hide();
			$container.hide();

			//hide any visible tooltips
			$("#inforTooltip").hide();

			if ($(el).hasClass('disabled')) {
				return false;
			}

			// Detect mouse position
			if (!o.positionBelowElement) {
				if (self.innerHeight) {
					d.pageYOffset = self.pageYOffset;
					d.pageXOffset = self.pageXOffset;
					d.innerHeight = self.innerHeight;
					d.innerWidth = self.innerWidth;
				} else if (document.documentElement && document.documentElement.clientHeight) {
					d.pageYOffset = document.documentElement.scrollTop;
					d.pageXOffset = document.documentElement.scrollLeft;
					d.innerHeight = document.documentElement.clientHeight;
					d.innerWidth = document.documentElement.clientWidth;
				} else if (document.body) {
					d.pageYOffset = document.body.scrollTop;
					d.pageXOffset = document.body.scrollLeft;
					d.innerHeight = document.body.clientHeight;
					d.innerWidth = document.body.clientWidth;
				}

				if (e) {
					x = (e.pageX) ? e.pageX : e.clientX + (d.scrollLeft ? d.scrollLeft : 0);
					y = (e.pageY) ? e.pageY : e.clientY + (d.scrollTop ? d.scrollTop : 0);
				}
			} else {
				x = $(el).offset().left - 1;
				y = $(el).offset().top + $(el).height() + 4;
			}

			// Hover events
			$menu.find('A').mouseover(function () {
				$menu.find('LI.focus').removeClass("focus");
				$(this).parent().addClass("focus");
			}).mouseout(function () {
				$menu.find('LI.focus').removeClass("focus");
			});

			if (!$menu.hasClass("submenu")) {
				$(document).off("keydown.inforcontextmenu").on("keydown.inforcontextmenu" + o.menu, function (e) {
					self.handleKeyPress(e, $menu);
				});
			}

			//Handle Selection of Menu Items
			$('#' + o.menu).find('LI:not(.disabled):not(.headerText) ').off('click.inforcontextmenu').on("click.inforcontextmenu", function (e) {
				var action, item, menu;

				//prevent clicks from reopening the menu
				e.stopPropagation();
				e.preventDefault();

				if ($(this).parent().hasClass("arrow")) {
					return false;
				}

				$(document).off('click.inforcontextmenu').off('keydown.inforcontextmenu' + o.menu);

				menu = $('#' + o.menu);
				menu.closeMenu(o, el);
				action = "";
				item = $(this).find("a");

				if (item.attr("href")) {
					action = item.attr("href").substr(1);
				}

				// Callback
				if (callback) {
					callback(action, $(srcElement), {
						x: x - offset.left,
						y: y - offset.top,
						docX: x,
						docY: y
					}, $(this));
				}

				return false;
			});

			//Use a click and an overlay. Click is to help with right click take over.
			setTimeout(function () {
				$(document).on("click.inforcontextmenu", function (e) {
					if (e.button == 2) {     //right click in mozilla
						return;
					}
					$menu.closeMenu(o, el);
				});

				if (o.iframeFix) {
					//attach to iframes
					$("iframe").ready(function () {
						$("iframe").contents().find("body").on("click.inforcontextmenu", function () {
							$menu.closeMenu(o, el);
						});
					});
				}
			}, 1);

			$(".inforTabset").find("a").mousedown(function () {
				$menu.closeMenu(o, el);
			});

			//Adjust the padding if there are no images
			if ($menu.find('.icon').length >0) {
				$menu.addClass("hasImages");
			}

			//localize the grid options menu.
			if ($menu.attr("id") == "inforFilterConditions") {
				$menu.find('a[href="#greaterThan"]').html(Globalize.localize("GreaterThan"));
				$menu.find('a[href="#greaterThanOrEquals"]').html(Globalize.localize("GreaterThanOrEquals"));
				$menu.find('a[href="#lessThan"]').html(Globalize.localize("LessThan"));
				$menu.find('a[href="#lessThanOrEquals"]').html(Globalize.localize("LessThanOrEquals"));
				$menu.find('a[href="#equals"]').html(Globalize.localize("EqualsStr"));
				$menu.find('a[href="#doesNotEqual"]').html(Globalize.localize("DoesNotEqual"));
				$menu.find('a[href="#contains"]').html(Globalize.localize("Contains"));
				$menu.find('a[href="#doesNotContain"]').html(Globalize.localize("DoesNotContain"));
				$menu.find('a[href="#isEmpty"]').html(Globalize.localize("IsEmpty"));
				$menu.find('a[href="#isNotEmpty"]').html(Globalize.localize("IsNotEmpty"));
				$menu.find('a[href="#startsWith"]').html(Globalize.localize("StartsWith"));
				$menu.find('a[href="#doesNotStartWith"]').html(Globalize.localize("DoesNotStartWith"));
				$menu.find('a[href="#endsWith"]').html(Globalize.localize("EndsWith"));
				$menu.find('a[href="#doesNotEndWith"]').html(Globalize.localize("DoesNotEndWith"));
				$menu.find('a[href="#eitherSelectedorNotSelected"]').html(Globalize.localize("EitherSelectedorNotSelected"));
				$menu.find('a[href="#selected"]').html(Globalize.localize("Selected").replace(":", ""));
				$menu.find('a[href="#notSelected"]').html(Globalize.localize("NotSelected"));
				$menu.find('a[href="#between"]').html(Globalize.localize("Between"));
				$menu.find('a[href="#today"]').html(Globalize.localize("Today"));
			}

			//Detect and Apply submenus.
			$.each($menu.find('li > ul'), function (i) {
				var submenu = $(this),
				parentLi = submenu.parent("li").addClass("arrow"),
				id = submenu.attr("id");

				if (!id) {
					id = "submenu" + i;
					submenu.attr("id", id);
				}

				if (Globalize.culture().isRTL) {
					submenu.parent("li").siblings("li").css("padding-left", "10px");
				}

				parentLi.data("parentMenu", $menu).inforContextMenu({
					menu: id,
					invokeMethod: "submenu",
					event: e,
					position: {
						my: (Globalize.culture().isRTL ? "right top" : "left top-10"),
						at: (Globalize.culture().isRTL ? "left top" : "right top"),
						of: parentLi,
						collision: "flipfit"
					}
				}, function (action, el, pos, item) {
					if (callback) {
						if (item.attr("href")) {
							action = item.attr("href").substr(1);
						}
						callback(action, $(srcElement), {
							x: x - offset.left,
							y: y - offset.top,
							docX: x,
							docY: y
						}, $(this));
					}
				});

				submenu.parent(".inforMenu").addClass("submenu");
			});

			if (Globalize.culture().isRTL) {
				$menu.find('li.arrow').css("padding-left", "0px");
			}

			// Show the menu
			$(document).off('click.inforcontextmenu');

			if (o.offsetLeft) {
				x = x + o.offsetLeft;
			}

			if (o.offsetTop) {
				y = y + o.offsetTop;
			}

			if (!deffered) {
				$('#' + o.menu).show();
				$container.css({"opacity" : 0, "top" : -100, "left" : x}).show();
			}

			//add padding for seperators..
			$menu.find(".separator").prev().css("margin-bottom", "3px");

			//Adjust if the menu wants to go off the right of the page:
			if (($container.width() + x + 20) >= ($(window).width())) {
				x = $(window).width() - $container.width() - 3;
			}

			$container.css({
				top: y,
				left: x
			});

			if (o.position) {
				$container.position(o.position);
			}

			//Adjust if the menu wants to go off the right of the page:
			if (o.invokeMethod === "submenu" && ($container.width() + x + 45) >= ($(window).width())) {
				o.position.my = (Globalize.culture().isRTL ? "left top" : "right top");
				o.position.at = (Globalize.culture().isRTL ? "right top" : "left top");
				$container.position(o.position);
			}

			//make the menu scroll if going off the bottom
			if ($container.height() + $container.offset().top > Math.max($(window).height(), $("body").height())) {
				$container.css("overflow-y", "auto").css("overflow-x", "hidden");
				$container.css("max-height", $(window).height() - 40);
				$container.css("width", $container.width() + 12 + "px");
			}
			
			//flip if the menu up if it wants go off the bottom
			if (false && $container.offset().top > Math.max($(window).height(), $("body").height()) - $container.height()) {
				
				newY = $container.offset().top;
				content = $container.find(".inforMenuOptions");
				scrollWidth = content.width();

					$container.css({
						top: newY - $container.height(),
						width: scrollWidth + 22 + "px"
					});
					content.css({
						//"height": ($(window).height() - newY - 23) + "px",
						"overflow-x": "hidden",
						width: scrollWidth + 22 + "px"});
						
				if (!o.position) {
					$container.css({left: ($container.position().left - 12) + "px"});
				}
			}

			if (o.backgroundIFrame) {
				self._addIFrame($container);
			}
			$container.hide().css("opacity", 1).show();
		}
	});
})(jQuery);/*
* SlickGrid Core
*/
(function ($) {
	/*
	* An event object for passing data to event handlers and letting them control propagation.
	* This is pretty much identical to how W3C and jQuery implement events
	*/
	function EventData() {
		var isPropagationStopped = false,
		isImmediatePropagationStopped = false;

		/*
		* Stops event from propagating up the DOM tree.
		*/
		this.stopPropagation = function () {
			isPropagationStopped = true;
		};

		/*
		* Returns whether stopPropagation was called on this event object.
		*/
		this.isPropagationStopped = function () {
			return isPropagationStopped;
		};

		/*
		* Prevents the rest of the handlers from being executed.
		*/
		this.stopImmediatePropagation = function () {
			isImmediatePropagationStopped = true;
		};

		/*
		* Returns whether stopImmediatePropagation was called on this event object.\
		*/
		this.isImmediatePropagationStopped = function () {
			return isImmediatePropagationStopped;
		};
	}

	/*
	* A simple publisher-subscriber implementation.
	*/
	function Event() {
		var handlers = [];
		
		/*
		* Adds an event handler to be called when the event is fired.
		* <p>Event handler will receive two arguments - an <code>EventData</code> and the <code>data</code>
		* object the event was fired with.<p>
		*/
		this.subscribe = function (fn) {
			handlers.push(fn);
		};

		/*
		* Removes an event handler added with <code>subscribe(fn)</code>.
		*/
		this.unsubscribe = function (fn) {
			for (var i = handlers.length - 1; i >= 0; i--) {
				if (handlers[i] === fn) {
					handlers.splice(i, 1);
				}
				}
		};

		this.unsubscribeAll = function () {
			handlers = [];
		};

		this.getHandlers = function () {
			return handlers;
			};

		/*
			* Fires an event notifying all subscribers.
		*/
		this.notify = function (args, e, scope) {
			var returnValue, i;

			e = e || new EventData();
			scope = scope || this;

			for (i = 0; i < handlers.length && !(e.isPropagationStopped() || e.isImmediatePropagationStopped()); i++) {
				returnValue = handlers[i].call(scope, e, args);
			}

			return returnValue;
		};
	}

	/*
	* A structure containing a range of cells.
	*/
	function Range(fromRow, fromCell, toRow, toCell) {
		if (toRow === undefined && toCell === undefined) {
			toRow = fromRow;
			toCell = fromCell;
		}

		this.fromRow = Math.min(fromRow, toRow);
		this.fromCell = Math.min(fromCell, toCell);
		this.toRow = Math.max(fromRow, toRow);
		this.toCell = Math.max(fromCell, toCell);

		this.isSingleRow = function () {
			return this.fromRow === this.toRow;
		};
		this.isSingleCell = function () {
			return this.fromRow === this.toRow && this.fromCell === this.toCell;
		};
		this.contains = function (row, cell) {
			return row >= this.fromRow && row <= this.toRow &&
				cell >= this.fromCell && cell <= this.toCell;
		};

		this.toString = function () {
			if (this.isSingleCell()) {
				return "(" + this.fromRow + ":" + this.fromCell + ")";
			}
			else {
				return "(" + this.fromRow + ":" + this.fromCell + " - " + this.toRow + ":" + this.toCell + ")";
			}
		};
	}


	/*
	* A base class that all special / non-data rows (like Group and GroupTotals) derive from.
	*/
	function NonDataItem() {
		this.__nonDataRow = true;
	}

	/*
	* Information about a group of rows.
	*/
	function Group() {
		this.__group = true;
		this.__updated = false;

		/*
		* Number of rows in the group.
		* @property count
		* @type {Integer}
		*/
		this.count = 0;

		/*
		* Grouping value.
		* @property value
		* @type {Object}
		*/
		this.value = null;

		/*
		* Formatted display value of the group.
		* @property title
		* @type {String}
		*/
		this.title = null;

		/*
		* Whether a group is collapsed.
		* @property collapsed
		* @type {Boolean}
		*/
		this.collapsed = false;

		/*
		* GroupTotals, if any.
		* @property totals
		* @type {GroupTotals}
		*/
		this.totals = null;
	}

	Group.prototype = new NonDataItem();

	/*
	* Compares two Group instances.
	* @method equals
	* @return {Boolean}
	* @param group {Group} Group instance to compare to.
	*/
	Group.prototype.equals = function (group) {
		return this.value === group.value &&
			this.count === group.count &&
			this.collapsed === group.collapsed;
	};

	/*
	* Information about group totals.
	* An instance of GroupTotals will be created for each totals row and passed to the aggregators
	* so that they can store arbitrary data in it. That data can later be accessed by group totals
	* formatters during the display.
	* @class GroupTotals
	* @extends Slick.NonDataItem
	* @constructor
	*/
	function GroupTotals() {
		this.__groupTotals = true;

		/*
		* Parent Group.
		* @param group
		* @type {Group}
		*/
		this.group = null;
		}

	GroupTotals.prototype = new NonDataItem();

	/*
	* A locking helper to track the active edit controller and ensure that only a single controller
	* can be active at a time. This prevents a whole class of state and validation synchronization
	* issues. An edit controller (such as InforDataGrid) can query if an active edit is in progress
	* and attempt a commit or cancel before proceeding.
	* @class EditorLock
	* @constructor
	*/
	function EditorLock() {
		var activeEditController = null;

		/*
		* Returns true if a specified edit controller is active (has the edit lock).
		* If the parameter is not specified, returns true if any edit controller is active.
		* @method isActive
		* @param editController {EditController}
		* @return {Boolean}
		*/
		this.isActive = function (editController) {
			return (editController ? activeEditController === editController : activeEditController !== null);
		};

		/*
		* Sets the specified edit controller as the active edit controller (acquire edit lock).
		* If another edit controller is already active, and exception will be thrown.
		* @method activate
		* @param editController {EditController} edit controller acquiring the lock
		*/
		this.activate = function (editController) {
			if (editController === activeEditController) { // already activated?
				return;
			}
			if (activeEditController !== null) {
				throw "InforDataGrid.EditorLock.activate: an editController is still active, can't activate another editController";
			}
			if (!editController.commitCurrentEdit) {
				throw "InforDataGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";
			}
			if (!editController.cancelCurrentEdit) {
				throw "InforDataGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";
			}
			activeEditController = editController;
		};

		/*
		* Unsets the specified edit controller as the active edit controller (release edit lock).
		* If the specified edit controller is not the active one, an exception will be thrown.
		* @method deactivate
		* @param editController {EditController} edit controller releasing the lock
		*/
		this.deactivate = function (editController) {
			if (activeEditController !== editController) {
				throw "InforDataGrid.EditorLock.deactivate: specified editController is not the currently active one";
			}
			activeEditController = null;
		};

		/*
		* Attempts to commit the current edit by calling "commitCurrentEdit" method on the active edit
		* controller and returns whether the commit attempt was successful (commit may fail due to validation
		* errors, etc.). Edit controller's "commitCurrentEdit" must return true if the commit has succeeded
		* and false otherwise. If no edit controller is active, returns true.
		* @method commitCurrentEdit
		* @return {Boolean}
		*/
		this.commitCurrentEdit = function () {
			return (activeEditController ? activeEditController.commitCurrentEdit() : true);
		};

		/*
		* Attempts to cancel the current edit by calling "cancelCurrentEdit" method on the active edit
		* controller and returns whether the edit was successfully cancelled. If no edit controller is
		* active, returns true.
		* @method cancelCurrentEdit
		* @return {Boolean}
		*/
		this.cancelCurrentEdit = function cancelCurrentEdit() {
			return (activeEditController ? activeEditController.cancelCurrentEdit() : true);
		};
	}

	// register namespace
	$.extend(true, window, {
		"Slick": {
			"Event": Event,
			"EventData": EventData,
			"Range": Range,
			"NonDataRow": NonDataItem,
			"Group": Group,
			"GroupTotals": GroupTotals,
			"EditorLock": EditorLock,

			//A global singleton editor lock.
			"GlobalEditorLock": new EditorLock()
		}
	});
})($);

/*
* InforDataGrid
*/
(function ($) {
	$.extend(true, window, {
		Slick: {
			Grid: SlickGrid
		}
	});

	var scrollbarDimensions; // shared across all grids on this page

	function SlickGrid(container, data, columnsInput, options) { //ignore jslint
		// settings
		var defaults = {
			headerHeight: 25,
			rowHeight: 26,
			defaultColumnWidth: 80,
			enableAddRow: false,
			editable: false,
			autoEdit: true,
			enableCellNavigation: true,
			enableCellRangeSelection: false,
			enableColumnReorder: true,
			asyncEditorLoading: false,
			asyncEditorLoadDelay: 100,
			forceFitColumns: false,
			enableAsyncPostRender: false,
			asyncPostRenderDelay: 50,
			autoHeight: false,
			autoHeightToPageSize: false,
			fillHeight: true,
			editorLock: Slick.GlobalEditorLock,
			showHeaderRow: false,
			showSummaryRow: false,
			headerRowHeight: 27,
			summaryRowHeight: 25,
			showTopPanel: false,
			topPanelHeight: 25,
			formatterFactory: null,
			editorFactory: null,
			selectedCellCssClass: "selected",
			multiSelect: true,
			fullWidthRows: true,
			multiColumnSort: true,
			filterMenuOptions: null,
			gridMenuOptions: null,
			showColumnHeaders: true,
			frozenColumn: -1,
			frozenRow: -1
		},
		columnDefaults = {
			name: "",
			resizable: true,
			sortable: true,
			reorderable: true,
			minWidth: 15,
			headerCssClass: null,
			rerenderOnResize: false,
			defaultSortAsc: true,
			focusable: true,
			selectable: true
		},
		maxSupportedCssHeight, // browser's breaking point
		th, // virtual height
		h, // real scrollable height
		ph, // page height
		n, // number of pages
		cj, // "jumpiness" coefficient
		defaultColumns = $.extend(true, [], columnsInput),	//deep copy the array for restore function
		page = 0, // current page
		offset = 0, // current page offset
		vScrollDir = 1,
		// private
		initialized = false,
		$container,
		uid = "inforDataGrid" + Math.round(1000000 * Math.random()),
		settingsMenuId = uid.replace("inforDataGrid","inforGridSettingsMenu"),
		filterMenuId = uid.replace("inforDataGrid","inforGridFilterMenu"),
		self = this,
		$focusSink, $focusSink2,
		$headerScroller, $headerParentL , $headerParentR,
		$headers,
		$headerParents,
		$headerRow, $headerRowScroller, $headerRowSpacerL, $headerRowSpacerR, $summaryRow, $summaryRowScroller,
		$topPanelScroller,
		$topPanel,
		$viewport,
		$pageFooter,
		checkboxSelector,
		isDragging = false,

		$gridSettingsButton,
		$filterMenuButton,
		$canvas,
		$style,
		stylesheet, columnCssRulesL = [], columnCssRulesR = [],
		viewportH, viewportW,
		canvasWidth, canvasWidthL, canvasWidthR,
		viewportHasHScroll, viewportHasVScroll,

		headerColumnWidthDiff = 0, headerColumnHeightDiff = 0, // border+padding
		cellWidthDiff = 0, cellHeightDiff = 0,
		absoluteColumnMinWidth,
		numberOfRows = 0,
		hasFrozenRows = false,
		frozenRowsHeight = 0,
		actualFrozenRow = -1,
		dataView = data,
		filterInResults = true,
		allColumns = [],	//both the hidden and non hidden columns

		activePosX,
		tabbingDirection = 1,
		activeRow, activeCell,
		activeCellNode = null,
		currentEditor = null,
		serializedEditorValue,
		editController,

		rowsCache = {},
		rowPositionCache = {},
		renderedRows = 0,
		prevScrollTop = 0,
		scrollTop = 0,
		lastRenderedScrollTop = 0,
		lastRenderedScrollLeft = 0,
		prevScrollLeft = 0,
		scrollLeft = 0,
		selectionModel,
		selectedRows = [],

		plugins = [],
		columns = [],
		hasNestedColumns = false,
		nestedColumns = null,
		cellCssClasses = {},

		columnsById = {},
		sortColumns = [],
		columnPosLeft = [],
		columnPosRight = [],

		// async call handles
		h_editorLoader = null,
		h_render = null,
		h_postrender = null,
		postProcessedRows = {},
		postProcessToRow = null,
		postProcessFromRow = null,

		$paneHeaderL, $paneHeaderR, $paneTopL, $paneTopR,
		$headerScrollerL, $headerScrollerR,
		$headerL, $headerR,
		$headerRowScrollerL, $headerRowScrollerR,
		$summaryRowScrollerL, $summaryRowScrollerR,
		$headerRowL, $headerRowR,
		$summaryRowL, $summaryRowR,
		$topPanelScrollerL, $topPanelScrollerR,
		$viewportTopL, $viewportTopR,
		$canvasTopL, $canvasTopR,
		$canvasBottomL, $canvasBottomR,
		$viewportScrollContainerX, $viewportScrollContainerY,
		$headerScrollContainer, $headerRowScrollContainer, $summaryRowScrollContainer,

		// Handle Window Resizing
		resizeTimer = null,
		windowHeight = $(window).height(), windowWidth = $(window).width(),
		columnFilters = {},
		isFiltering = false,
		selectedRecordArea = null,
		columnpicker = null,
		personalizationInfo = {caller: '', sortColumns:[] ,  columnInfo: [], showFilter: true, filterInResults: true};

		//////////////////////////////////////////////////////////////////////////////////////////////
		// Initialization
		function init() {
			$container = $(container);
			if ($container.length < 1) {
				throw new Error("InforDataGrid requires a valid container, " + container + " does not exist in the DOM.");
			}
			maxSupportedCssHeight = getMaxSupportedCssHeight();

			scrollbarDimensions = scrollbarDimensions || measureScrollbar(); // skip measurement if already have dimensions
			options = $.extend({}, defaults, options);
			columnDefaults.width = options.defaultColumnWidth;

			columnsById = {};
			addBuiltinColumns();
			parseColumns(columnsInput);

			editController = {
				"commitCurrentEdit": commitCurrentEdit,
				"cancelCurrentEdit": cancelCurrentEdit,
				"conditionalAutoCommit": conditionalAutoCommit
			};

			$container
				.empty()
				.attr("tabIndex", 0)
				.attr("hideFocus", true)
				.css("overflow", "hidden")
				.css("outline", 0)
				.attr('role', 'grid')
				.addClass(uid);

			if ($container.css("height") !== "0px") {
				//detect css height
				options.fillHeight = false;
			}

			// set up a positioning container if needed
			if (!/relative|absolute|fixed/.test($container.css("position"))) {
				$container.css("position", "relative");
			}

			$focusSink = $("<div tabindex='0' class='focus-sink' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>").appendTo($container);

			// Containers used for scrolling frozen columns and rows
			$paneHeaderL = $("<div class='slick-pane slick-pane-header slick-pane-left' tabIndex='0' />").appendTo($container);
			$paneHeaderR = $("<div class='slick-pane slick-pane-header slick-pane-right' tabIndex='0' />").appendTo($container);
			$paneTopL = $("<div class='slick-pane slick-pane-top slick-pane-left' tabIndex='0' />").appendTo($container);
			$paneTopR = $("<div class='slick-pane slick-pane-top slick-pane-right' tabIndex='0' />").appendTo($container);

			// Append the header scroller containers
			$headerScrollerL = $("<div class='slick-header slick-header-left' />").appendTo($paneHeaderL);
			$headerScrollerR = $("<div class='slick-header slick-header-right' />").appendTo($paneHeaderR);

			// Cache the header scroller containers
			$headerScroller = $().add($headerScrollerL).add($headerScrollerR);
			$headerParentL = $("<div />").appendTo($headerScrollerL);
			$headerParentR = $("<div />").appendTo($headerScrollerR);

			// Append the columnn containers to the headers
			$headerL = $("<div class='slick-header-columns slick-header-columns-left' role='row' style='" + (Globalize.culture().isRTL ? "right:-1000px" : "left:-1000px") + "' />").appendTo($headerScrollerL);
			$headerR = $("<div class='slick-header-columns slick-header-columns-right' role='row' style='" + (Globalize.culture().isRTL ? "right:-1000px" : "left:-1000px") + "'  />").appendTo($headerScrollerR);

			// Cache the header columns
			$headers = $().add($headerL).add($headerR);
			$headerParents = $().add($headerParentL).add($headerParentR);

			$headerRowScrollerL = $("<div class='slick-headerrow' />").appendTo($paneTopL).scroll(function () {
				$viewportTopL[0].scrollLeft = this.scrollLeft;
			});
			$headerRowScrollerR = $("<div class='slick-headerrow' />").appendTo($paneTopR).scroll(function () {
				$viewportTopR[0].scrollLeft = this.scrollLeft;
			});
			$headerRowScroller = $().add($headerRowScrollerL).add($headerRowScrollerR);

			$headerRowSpacerL = $("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>")
				.css("width", getCanvasWidth() + scrollbarDimensions.width + "px")
				.appendTo($headerRowScrollerL);

			$headerRowSpacerR = $("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>")
				.css("width", getCanvasWidth() + scrollbarDimensions.width + "px")
				.appendTo($headerRowScrollerR);

			$headerRowL = $("<div class='slick-headerrow-columns slick-headerrow-columns-left' />").appendTo($headerRowScrollerL);
			$headerRowR = $("<div class='slick-headerrow-columns slick-headerrow-columns-right' />").appendTo($headerRowScrollerR);
			$headerRow = $().add($headerRowL).add($headerRowR);

			$topPanelScrollerL = $("<div class='slick-top-panel-scroller' />").appendTo($paneTopL);
			$topPanelScrollerR = $("<div class='slick-top-panel-scroller' />").appendTo($paneTopR);
			$topPanelScroller = $().add($topPanelScrollerL).add($topPanelScrollerR);

			if (!options.showTopPanel) {
				$topPanelScroller.hide();
			}

			if (!options.showHeaderRow) {
				$headerRowScroller.hide();
			}

			if (!options.showColumnHeaders) {
				$headerScroller.hide();
			}

			$viewportTopL = $("<div class='slick-viewport slick-viewport-top slick-viewport-left' tabIndex='0' hideFocus />").appendTo($paneTopL);
			$viewportTopR = $("<div class='slick-viewport slick-viewport-top slick-viewport-right' tabIndex='0' hideFocus />").appendTo($paneTopR);

			$viewport = $().add($viewportTopL).add($viewportTopR);
			setOverflow();

			// Append the canvas containers
			$canvasTopL = $("<div class='grid-canvas grid-canvas-top grid-canvas-left' tabIndex='0' hideFocus />").appendTo($viewportTopL);
			$canvasTopR = $("<div class='grid-canvas grid-canvas-top grid-canvas-right' tabIndex='0' hideFocus />").appendTo($viewportTopR);
			// Cache the canvases
			$canvas = $().add($canvasTopL).add($canvasTopR);
			$focusSink2 = $focusSink.clone().appendTo($container);

			$summaryRowScrollerL = $("<div class='slick-summaryrow' />").appendTo($paneTopL);
			$summaryRowScrollerR = $("<div class='slick-summaryrow' />").appendTo($paneTopR);
			$summaryRowScroller = $().add($summaryRowScrollerL).add($summaryRowScrollerR);
			$summaryRowL = $("<div class='slick-summaryrow-columns slick-summaryrow-columns-left' />").appendTo($summaryRowScrollerL);
			$summaryRowR = $("<div class='slick-summaryrow-columns slick-summaryrow-columns-right' />").appendTo($summaryRowScrollerR);
			$summaryRow = $().add($summaryRowL).add($summaryRowR);
			$summaryRowSpacerL = $("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>")
				.css("width", getCanvasWidth() + scrollbarDimensions.width + "px")
				.appendTo($summaryRowScrollerL);

			$summaryRowSpacerR = $("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>")
				.css("width", getCanvasWidth() + scrollbarDimensions.width + "px")
				.appendTo($summaryRowScrollerR);

			$pageFooter = $(".inforBottomFooter");

			if (!options.showSummaryRow) {
				$summaryRowScroller.hide();
			}

			// header columns and cells may have different padding/border skewing width calculations (box-sizing, hello?)
			// calculate the diff so we can set consistent sizes
			measureCellPaddingAndBorder();

			// for usability reasons, all text selection in InforDataGrid is disabled
			// with the exception of input and textarea elements (selection must
			// be enabled there so that editors work as expected); note that
			// selection in grid cells (grid body) is already unavailable in
			// all browsers except IE
			disableSelection($headers); // disable all text selection in header (including input and textarea)
			disableSelection($headerParents);

			viewportW = parseFloat($.css($container[0], "width", true));

			setFrozenOptions();
			setPaneVisibility();
			setScroller();
			setOverflow();

			updateColumnCaches();
			createColumnHeaders();
			setupColumnSort();
			createCssRules();
			initializeRowPositions();
			cacheRowPositions();
			resizeAndRender();

			bindAncestorScrollEvents();

			if (options.frozenColumn > -1) {
				$viewportTopL.mousewheel(handleMouseWheel);
				$container.addClass("hasFrozenColumns");
			}

			$viewport.on("scroll", handleScroll);
			$(window).on("throttledresize.inforDataGrid", function () {
				handleResize();
			});

			$headerScroller
				.on("contextmenu", handleHeaderContextMenu)
				.on("click", handleHeaderClick);

			$focusSink.add($focusSink2)
				.bind("keydown", handleKeyDown);

			$canvas
				.on("keydown", handleKeyDown)
				.on("click", handleClick)
				.on("dblclick", handleDblClick)
				.on("contextmenu", handleContextMenu)
				.on("draginit", handleDragInit)
				.on("dragstart", {distance: 3}, handleDragStart)
				.on("drag", handleDrag)
				.on("dragend", handleDragEnd)
				.delegate(".slick-cell", "mouseenter", handleMouseEnter)
				.delegate(".slick-cell", "mouseleave", handleMouseLeave)
				.delegate(".slick-row", "mouseenter", handleRowMouseEnter)
				.delegate(".slick-row", "mouseleave", handleRowMouseLeave);

			if (!options.editable && options.enableCellNavigation) {	//non editable grids do not work with dbl click.
				var clicks = 0;
				$canvas.off("click.slickdbl").off("dblclick.slickdbl").on("click.slickdbl", function (e) {
					clicks++;
					if (clicks === 1) {
						setTimeout(function () {
							if (clicks === 2) {
								handleDblClick(e);
							}
							clicks = 0;
						}, 300);
					}
				});

				if (navigator.userAgent.toLowerCase().match(/msie/)) {
					$canvas.on("dblclick", function () {
						clicks = 2;
					});
				}
			}

			if (!initialized) {
				initialized = true;
			}
		}

		function handleResize() {
			if (resizeTimer) {
				clearTimeout(resizeTimer);
			}

			if (windowHeight !== $(window).height() || windowWidth !== $(window).width()) {
				resizeTimer = setTimeout(function () {
					resizeCanvas();
				}, 1);

				windowHeight = $(window).height();
				windowWidth = $(window).width();
			}
		}

		function registerPlugin(plugin) {
			plugins.unshift(plugin);
			plugin.init(self);
		}

		function getPlugin(name) {
			for (i = 0; i < plugins.length; i++) {
				var plugin = plugins[i];
				if (plugin.name === name) {
					return plugins[i];
				}
			}
		}

		function unregisterPlugin(plugin) {
			for (var i = plugins.length; i >= 0; i--) {
				if (plugins[i] === plugin) {
					if (plugins[i].destroy) {
						plugins[i].destroy();
					}
					plugins.splice(i, 1);
					break;
				}
			}
		}

		function setSelectionModel(model) {
			if (selectionModel) {
				selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged);
				if (selectionModel.destroy) {
					selectionModel.destroy();
				}
			}

			selectionModel = model;
			selectionModel.init(self);

			selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged);
		}

		function getSelectionModel() {
			return selectionModel;
		}

		function getCanvasNode() {
			return $canvas;
		}


		function measureScrollbar() {
			var $c = $("<div style='position:absolute; top:-40000px; left:-40000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body"),
			dim = {
				width: $c.width() - $c[0].clientWidth,
				height: $c.height() - $c[0].clientHeight
			};
			$c.remove();
			return dim;
		}

		function getHeadersWidth() {
			headersWidth = headersWidthL = headersWidthR = 0;

			for ( var i = 0, ii = columns.length; i < ii; i++ ) {
				var width = columns[ i ].width;
				if ( ( options.frozenColumn ) > -1 && ( i > options.frozenColumn ) ) {
					headersWidthR += width;
				} else {
					headersWidthL += width;
				}
			}

			if ( options.frozenColumn > -1 ) {
				headersWidthL = headersWidthL + 1000;
				headersWidthR = Math.max( headersWidthR, viewportW ) + headersWidthL;
				headersWidthR += scrollbarDimensions.width;
			} else {
				headersWidthL += scrollbarDimensions.width;
				headersWidthL = Math.max( headersWidthL, viewportW ) + 1000;
			}

			headersWidth = headersWidthL + headersWidthR;
		}

		function getCanvasWidth() {
			var totalRowWidth, availableWidth;

			//refresh dimensions
			viewportW = parseFloat($.css($container[0], "width", true));

			availableWidth = viewportHasVScroll ? viewportW - scrollbarDimensions.width : viewportW,
			i = columns.length;

			canvasWidthL = canvasWidthR = 0;

			while (i--) {
				if ((options.frozenColumn > -1) && (i > options.frozenColumn)) {
					canvasWidthR += columns[i].width;
				} else {
					canvasWidthL += columns[i].width;
				}
			}

			if (Globalize.culture().isRTL && viewportHasHScroll) {
				canvasWidthR += scrollbarDimensions.width + 5;
				canvasWidthL += scrollbarDimensions.width + 5;
			}

			totalRowWidth = canvasWidthL + canvasWidthR;

			if (options.fullWidthRows && availableWidth > canvasWidthL && (options.frozenColumn === -1)) {
				canvasWidthL = availableWidth;
			}

			if (options.fullWidthRows && availableWidth > totalRowWidth && (options.frozenColumn > -1)) {
				canvasWidthR = availableWidth - canvasWidthL - 1;
			}

			/* TODO - see if this is ok.
			if ((options.showGridSettings || options.showFilter)) {
				if (canvasWidthR > availableWidth && canvasWidthR > 0) {
					canvasWidthR += 22;
				}
				if (options.frozenColumn === -1 && (canvasWidthL > availableWidth && canvasWidthL > 0)) {
					canvasWidthL += 22;
				}
			}*/

			return options.fullWidthRows ? Math.max(totalRowWidth, availableWidth) : totalRowWidth;
		}

		function updateCanvasWidth(forceColumnWidthsUpdate) {
			var oldCanvasWidth = canvasWidth,
				oldCanvasWidthL = canvasWidthL,
				oldCanvasWidthR = canvasWidthR,
				widthChanged;

			canvasWidth = getCanvasWidth();
			widthChanged = canvasWidth !== oldCanvasWidth || canvasWidthL !== oldCanvasWidthL || canvasWidthR !== oldCanvasWidthR;

			if (widthChanged || options.frozenColumn > -1) {
				$canvasTopL.css("width", canvasWidthL + "px");

				$headerL.css("width", headersWidthL + "px");
				$headerR.css("width", headersWidthR + "px");
				$headerParentL.css("width", headersWidthL + "px");
				$headerParentR.css("width", headersWidthR + "px");

				if (options.frozenColumn > -1) {
					$canvasTopR.css("width", canvasWidthR + "px");

					$paneHeaderL.css("width", canvasWidthL + "px");
					$paneHeaderR.css('left', canvasWidthL + "px");

					$paneTopL.css("width", canvasWidthL + "px");
					$paneTopR.css('left', canvasWidthL + "px");

					$headerRowScrollerL.css("width", canvasWidthL + "px");
					$headerRowScrollerR.css("width", viewportW - canvasWidthL + "px");
					$summaryRowScrollerL.css("width", canvasWidthL + "px");
					$summaryRowScrollerR.css("width", viewportW - canvasWidthL + "px");

					$headerRowL.css("width", canvasWidthL + "px");
					$headerRowR.css("width", canvasWidthR + "px");
					$summaryRowL.css("width", canvasWidthL + "px");
					$summaryRowR.css("width", canvasWidthR + "px");

					$viewportTopL.css("width", canvasWidthL + "px");
					$viewportTopR.css("width", viewportW - canvasWidthL + "px");

				} else {
					$paneHeaderL.css("width", "100%");
					$paneTopL.css("width", "100%");
					$headerRowScrollerL.css("width", "100%");
					$summaryRowScrollerL.css("width", "100%");
					$headerRowL.css("width", canvasWidth + "px");
					$summaryRowL.css("width", canvasWidth + "px");
					$viewportTopL.css("width", "100%");
				}

				viewportHasHScroll = (canvasWidth > viewportW - scrollbarDimensions.width);
			}

			getHeadersWidth();
			$headerL.css("width", headersWidthL + "px");
			$headerR.css("width", headersWidthR + "px");
			$headerRowSpacerL.css("width", canvasWidth + (viewportHasVScroll ? scrollbarDimensions.width : 0) + "px");
			$headerRowSpacerR.css("width", canvasWidth + (viewportHasVScroll ? scrollbarDimensions.width : 0) + "px");

			if (widthChanged || forceColumnWidthsUpdate) {
				applyColumnWidths();
				updateFilterRow();
			}
		}

		function disableSelection($target) {
			if ($target && $target.jquery) {
				$target
					.attr('unselectable', 'on')
					.css('MozUserSelect', 'none')
					.on('selectstart.ui', function () { return false; }); // from jquery:ui.core.js 1.7.2
			}
		}

		/*add the button menus*/
		function appendGridSettingsMenu() {
			appendMenu(settingsMenuId, options.gridMenuOptions);
		}

		/*dynamically add the menu contents and call*/
		function appendMenu(menuid, menuOpts) {
			$("#" + menuid).remove();

			var ul = $('<ul id="' + menuid + '" class="inforContextMenu"></ul>'),
				i, opt, li, a, show;

			for (i = 0; i < menuOpts.length; i++) {
				opt = menuOpts[i];
				show = (opt.condition === undefined ? true : opt.condition);
				
				if (show) {
					if (opt.label) {
						li = $('<li><a>' + opt.label + '</a></li>');
					} else {
						li = $('<li></li>');
					}
					
					a = li.find("a");

					if (opt.id) {
						a.attr("id", opt.id);
					}

					if (opt.cssClass) {
						a.before($("<span></span>").addClass("icon " + opt.cssClass));
					}

					if (opt.href) {
						a.attr("href", opt.href);
					}

					if (opt.onclick) {
						a.attr("onclick", opt.onclick);
					}

					ul.append(li);
				}
			}
			$("body").append(ul);
		}

		/*add the button menus*/
		function appendFilterMenu() {
			appendMenu(filterMenuId, options.filterMenuOptions);
		}

		//set the menu options as checked or unchecked depending on the current values.
		function setMenuChecked() {
			//set the show filter row...
			var menu = $("#" + settingsMenuId),
				isChecked = (options.showHeaderRow === true),
				li = menu.find("#showFilter").parent(),
				data = getFilteredData();

			if (isChecked) {
				li.find(".icon").removeClass("notSelected").addClass("selected");
			} else {
				li.find(".icon").removeClass("selected").addClass("notSelected");
			}

			//disable export if no data
			li =  menu.find("a[href='#ex']").parent();
			if (data.length === 0) {
				li.attr("class","disabled");
			} else {
				li.removeClass("disabled");
			}

			//set the toggle in results
			menu = $("#" + filterMenuId);
			li =  menu.find("#filterInResults").parent();
			if (filterInResults) {
				li.find(".icon").removeClass("notSelected").addClass("selected");
			} else {
				li.find(".icon").removeClass("selected").addClass("notSelected");
			}
		}

		/* Update Headers to remove extra border. */
		function showGridSettings() {
			if (!options.showColumnHeaders) {
				return;
			}

			if (!$gridSettingsButton) {
				$gridSettingsButton = $("<button type='button' class='inforGridSettingsButton' title='" + Globalize.localize("GridSettings") + "'><span></span></button>").inforToolTip();

				if (Globalize.culture().isRTL) {
					$gridSettingsButton.addClass("inforRTLFlip");
				}

				$container.prepend($gridSettingsButton);
				appendGridSettingsMenu();
			}

			var leftOffset = -20;
			if (Globalize.culture().isRTL) {
				leftOffset = 5;
			}

			if (!options.showGridSettings) {
				$gridSettingsButton.hide();
				return;
			}

			$gridSettingsButton.inforContextMenu({
				menu: settingsMenuId,
				invokeMethod: 'toggle',
				positionBelowElement: true,
				offsetLeft: leftOffset,
				offsetTop: -3,
				beforeOpening: setMenuChecked
			},
			function (action, button, pos, aHref) {
				//ignore disabled
				if ($(aHref).parent().hasClass("disabled")){
					return;
				}

				if (action === "sfr") {
					toggleFilterRow();
				}

				if (action === "cp") {
					columnPersonalization(button);
				}

				if (action === "ex") {
					excelExport();
				}

				if (action === "re") {
					resetColumnLayout();
				}
			});
		}

		function excelExport() {	//find the cell range selector plugin and call it
			getPlugin("CellRangeSelector").excelExport();
		}

		function getFilteredData() {
			var dv = getData();
			return  dv.getFilteredAndPagedItems(dv.getItems(), filter).rows;
		}


		function getDirtyRows() {
			var allRows = getData().getItems(),
				dirty = [], i;

			for (i = 0; i < allRows.length; i++) {
				if (allRows[i].indicator === "dirty") {
					dirty.push(allRows[i]);
				}
			}
			return dirty;
		}

		//add and show the column picker
		function columnPersonalization(button) {
			saveColumns();	//save once ..
			if (columnpicker == null) {
				columnpicker = new Slick.Controls.ColumnPicker(self, options);
			}
			columnpicker.open(button);
		}

		function getMaxSupportedCssHeight() {
		var supportedHeight = 1000000;
		// FF reports the height back but still renders blank after ~6M px
		var testUpTo = navigator.userAgent.toLowerCase().match(/firefox/) ? 6000000 : 1000000000;
		var div = $("<div style='display:none' />").appendTo(document.body);

		while (true) {
			var test = supportedHeight * 2;
			div.css("height", test);
			if (test > testUpTo || div.height() !== test) {
			break;
			} else {
			supportedHeight = test;
			}
		}

		div.remove();
		return supportedHeight;
		}

		// This is static might need to handle page mutation.
		function bindAncestorScrollEvents() {
			var elem = $canvas[0];
			while ((elem = elem.parentNode) !== document.body) {
				// bind to scroll containers only
				if (elem === $viewport[0] || elem.scrollWidth !== elem.clientWidth || elem.scrollHeight !== elem.clientHeight) {
					$(elem).on("scroll", handleActiveCellPositionChange);
				}
			}
		}

		function unbindAncestorScrollEvents() {
			$canvas.parents().off("scroll");
		}

		function updateColumnHeader(columnId, title, toolTip) {
			if (!initialized) {
				return;
			}
			var idx = getColumnIndex(columnId), columnDef, $header;

			if (idx != null) {
				columnDef = columns[idx];
				$header = $headers.children().eq(idx);
			}

			if (hasNestedColumns && idx != null && columnDef.spacers.length > 0) {
				$header = $headerParents.children().children().eq(idx);
			}

			if (hasNestedColumns && idx == null) {
				$header = $("#" + uid+columnId);
			}

			if ($header) {
				if (title !== undefined && idx != null) {
					columns[idx].name = title;
				}
				if (toolTip !== undefined && idx != null) {
					columns[idx].toolTip = toolTip;
				}

				trigger(self.onBeforeHeaderCellDestroy, {
					"node": $header[0],
					"column": columnDef
				});

				$header.attr("title", toolTip || "").children().eq(0).html(title).inforToolTip();

				trigger(self.onHeaderCellRendered, {
					"node": $header[0],
					"column": columnDef
				});
			}
		}

		function getHeaderRow() {
			return (options.frozenColumn > -1) ? $headerRow : $headerRow[0];
		}

		function getSummaryRow() {
			return (options.frozenColumn > -1) ? $summaryRow : $summaryRow[0];
		}

		function getHeaderRowColumn(columnId) {
			var idx = getColumnIndex(columnId),
				$headerRowTarget;

			if (options.frozenColumn > -1) {
				if (idx <= options.frozenColumn) {
					$headerRowTarget = $headerRowL;
				} else {
					$headerRowTarget = $headerRowR;
					idx -= options.frozenColumn + 1;
				}
			} else {
				$headerRowTarget = $headerRowL;
			}

			var $header = $headerRowTarget.children().eq(idx);
			return $header && $header[0];
		}

		function getColumnChildren(columnId) {
			var idx = getColumnIndex(columnId),
				$headerRowTarget;

			if (options.frozenColumn > -1) {
				if (idx <= options.frozenColumn) {
					$headerRowTarget = $headerL;
				} else {
					$headerRowTarget = $headerR;
					idx -= options.frozenColumn + 1;
				}
			} else {
				$headerRowTarget = $headerL;
			}

			var $header = $headerRowTarget.children().eq(idx);
			return $header;
		}

		function getSummaryRowColumn(columnId) {
			var idx = getColumnIndex(columnId),
				$summaryRowTarget;

			if (options.frozenColumn > -1) {
				if (idx <= options.frozenColumn) {
					$summaryRowTarget = $summaryRowL;
				} else {
					$summaryRowTarget = $summaryRowR;

					idx -= options.frozenColumn + 1;
					}
			} else {
				$summaryRowTarget = $summaryRowL;
			}

			var $summary= $summaryRowTarget.children().eq(idx);
			return $summary && $summary[0];
		}

		function RequiredFieldValidator(value) {
			if (typeof value === "string" && $.trim(value).length === 0) {
				return { valid: false, msg: Globalize.localize("Required") };
			}
			if (value == null || value === undefined || (typeof value === "string" && !value.length)) {
				return { valid: false, msg: Globalize.localize("Required") };
			}
			else {
				return { valid: true, msg: null };
			}
		}

		function createColumnHeaders() {

			function onMouseEnter() {
				var col = $(this),
					id = col.data("columnId"),
					columnInfo = getColumns()[getColumnIndex(id)];

				if (columnInfo && columnInfo.sortable) {
					col.addClass("ui-state-hover");
					$(getHeaderRowColumn(id)).addClass("ui-state-hover");
					self.getColumnChildren(id).addClass("ui-state-hover");
				}
				if (columnInfo && columnInfo.resizable && !columnInfo.sortable) {
					col.addClass("ui-state-resizable");
					$(getHeaderRowColumn(id)).addClass("ui-state-resizable");
					self.getColumnChildren(id).addClass("ui-state-resizable");
				}
			}

			function onMouseLeave() {
				var col = $(this);
				col.removeClass("ui-state-hover ui-state-resizable");
				$(getHeaderRowColumn(col.data("columnId"))).removeClass("ui-state-hover ui-state-resizable");
				self.getColumnChildren(col.data("columnId")).removeClass("ui-state-hover ui-state-resizable");
			}

			function createColumnHeader(m, appendTo, isParent) {
				var header = $("<div class='slick-header-column' role='columnheader'></div>")
					.html("<span class='slick-column-name'>" + (m.name === undefined ? "" : m.name) + "</span>")
					.width(m.width - headerColumnWidthDiff)
					.data("column", m)
					.data("columnId", m.id)
					.attr("id", "" + uid + m.id)
					.addClass(m.headerCssClass || "")
					.appendTo(appendTo);
				
				if (m.toolTip) {
					header.attr("title", m.toolTip).inforToolTip();
				} else if (m.name.textWidth() > m.width) {
					header.attr("title", m.name).inforToolTip();
				} else {
					header.attr("title", "");
				}
				
				if (isParent) {
					header.addClass((m.children ? "header-parent-arrow" : "header-parent"));
					header.on('mouseenter', onMouseEnter).on('mouseleave', onMouseLeave);
				}

				if (m.reorderable) {
					header.addClass("reorderable");
				}

				if (m.sortable) {
				header.append("<span class='slick-sort-indicator' />");
				}

				if (m.spacer) {
					header.addClass("slick-column-spacer");
				}

				if (m.required) {	//add required indicator and attach the validator.
					var ind = $('<div class="inforRequiredIndicator"></div>');
					header.find(".slick-column-name").before(ind);
					if (m.validator === undefined) {
						m.validator = RequiredFieldValidator;
					}
				}
				return header;
			}

			$headerL.empty();
			$headerR.empty();

			getHeadersWidth();
			$headerL.width(headersWidthL);
			$headerR.width(headersWidthR);

			$headerRowL.empty();
			$headerRowR.empty();
			$headerParentL.empty();
			$headerParentR.empty();

			$summaryRowL.empty();
			$summaryRowR.empty();

			if (hasNestedColumns) {
				for (var i = 0; i < nestedColumns.length; i++) {
				var $rowL, $rowR,
					isParent = false,
					layer = nestedColumns[i];

				if (i + 1 < nestedColumns.length) {
					$rowL = $("<div class='slick-header-columns slick-header-parents' style='left:-1000px' />").appendTo($headerParentL);
					if (options.frozenColumn > -1) {
						$rowR = $("<div class='slick-header-columns slick-header-parents' style='left:-1000px' />").appendTo($headerParentR);
					}
					isParent = true;
				}
				for (var j = 0; j < layer.length; j++) {
					var column = layer[j];
					if (isParent) {
						createColumnHeader(column, (options.frozenColumn > -1) ? ((j <= options.frozenColumn) ? $rowL : $rowR) : $rowL, true);
					}
					else {
						createBaseColumnHeader(column, j);
					}
				}
				}
			}
			else {
				for (var i = 0; i < columns.length; i++) {
					var m = columns[i];
					createBaseColumnHeader(m, i);
				}
			}

			function createBaseColumnHeader(m, idx) {
				var $headerTarget = (options.frozenColumn > -1) ? ((idx <= options.frozenColumn) ? $headerL : $headerR) : $headerL;
				var $headerRowTarget = (options.frozenColumn > -1) ? ((idx <= options.frozenColumn) ? $headerRowL : $headerRowR) : $headerRowL;
				var $summaryRowTarget = (options.frozenColumn > -1) ? ((idx <= options.frozenColumn) ? $summaryRowL : $summaryRowR) : $summaryRowL;
				var header = createColumnHeader(m, $headerTarget );

				if (options.enableColumnReorder || m.sortable) {
					header.on('mouseenter', onMouseEnter).on('mouseleave', onMouseLeave);
				}

				trigger(self.onHeaderCellRendered, {
				"node": header[0],
				"column": m
				});

				if (options.showHeaderRow) {
					var headerRowCell = $("<div class='slick-headerrow-column l" + idx + " r" + idx + "'></div>").appendTo($headerRowTarget);
					trigger(self.onHeaderRowCellRendered, {
						"node": headerRowCell[0],
						"column": m
					});
				}

				if (options.showSummaryRow) {
					$("<div class='slick-summaryrow-column l" + idx + " r" + idx + "'></div>").appendTo($summaryRowTarget);
				}
			}

			setSortColumns(sortColumns);
			setupColumnResize();

			if (options.enableColumnReorder) {
				setupColumnReorder();
			}
		}

		function setupColumnSort() {
			$headerScroller.click(function (e) {
				if (isDragging) {
					return false;
				}

				if ($(e.target).hasClass("slick-resizable-handle")) {
					return;
				}

				var $col = $(e.target).closest(".slick-header-column");
				if (!$col.length) {
					return;
				}

				var column = columns[getColumnIndex($col.data("columnId"))];
				if (column && column.sortable) {
					if (!self.isLookupGrid && $(this).closest("#lookupGridDivId").length === 0 && !getEditorLock().commitCurrentEdit()) {
						return;
					}

					var sortOpts = null;
					var i = 0;
					for (; i < sortColumns.length; i++) {
						if (sortColumns[i].columnId === column.id) {
						sortOpts = sortColumns[i];
						sortOpts.sortAsc = !sortOpts.sortAsc;
						break;
						}
					}

					if (e.ctrlKey) {
						if (sortOpts) {
						sortColumns.splice(i, 1);
						}
					}
					else {
						if ((!e.shiftKey && !e.metaKey)) {
						sortColumns = [];
						}

						if (!sortOpts) {
						sortOpts = { columnId: column.id, sortAsc: true };
						sortColumns.push(sortOpts);
						} else if (sortColumns.length === 0) {
						sortColumns.push(sortOpts);
						}
					}

					setSortColumns(sortColumns);
				}
			});
		}

		function setupColumnReorder() {
			var columnScrollTimer = null;

			function scrollColumnsRight() {
				$viewportScrollContainerY[0].scrollLeft = $viewportScrollContainerY[0].scrollLeft + 10;
			}

			function scrollColumnsLeft() {
				$viewportScrollContainerY[0].scrollLeft = $viewportScrollContainerY[0].scrollLeft - 10;
			}

			$headers.sortable({
				placeholder: "slick-sortable-placeholder slick-header-column",
				cursor: "default",
				forcePlaceholderSize: true,
				helper: "clone",
				delay: 300,
				distance: 3,
				items: ".reorderable",
				start: function (e, ui) {
					var $helper = $(ui.helper);
					$helper.addClass("ui-state-hover")
						.css({border: "2px solid #21A7F5", position: "fixed", left: e.clientX - 1 +"px", top: e.clientY-20});


					$(document).bind("mousemove",function(e){
						if (Globalize.culture().isRTL) {
							$helper.css({position: "fixed", left: e.clientX - 1 +"px", right: $(window).width() - e.clientX - $helper.width() +"px"});
						} else {
							$helper.css({position: "fixed", left: e.clientX - 1 +"px", top: e.clientY-20});
						}
					});

					$headers.children("div:not(.reorderable):not(.slick-sortable-placeholder)").each(function () {
						$(this).data("fixedIndex", getColumnIndex($(this).attr("id").replace(uid, "")));
					});
				},
				beforeStop: function (e, ui) {
					$(ui.helper).removeClass("slick-header-column-active");
					$(document).unbind("mousemove");
				},
				sort: function(e, ui) {	//allows you to drag out of scroll area.
				if (e.originalEvent.pageX > $container[0].clientWidth) {
						if (!(columnScrollTimer)) {
							columnScrollTimer = setInterval(
							scrollColumnsRight, 100);
						}
					} else if (e.originalEvent.pageX < $viewportScrollContainerY.offset().left) {
						if (!(columnScrollTimer)) {
							columnScrollTimer = setInterval(
							scrollColumnsLeft, 100);
						}
					} else {
						clearInterval(columnScrollTimer);
						columnScrollTimer = null;
					}
				},
				stop: function (e) {
					clearInterval(columnScrollTimer);
					columnScrollTimer = null;

					if (!getEditorLock().commitCurrentEdit()) {
						$(this).sortable("cancel");
						return;
					}

					//var reorderedIds = $headers.sortable("toArray");
					var reorderedIds = $headerL.sortable("toArray");
					reorderedIds = reorderedIds.concat($headerR.sortable("toArray"));

					var reorderedColumns = [];
					for (var i = 0; i < reorderedIds.length; i++) {
						reorderedColumns.push(columns[getColumnIndex(reorderedIds[i].replace(uid, ""))]);
					}
					//add non-reorderable columns back
					$headers.children("div:not(.reorderable):not(.slick-sortable-placeholder)").each(function () {
						var fixedIndex = $(this).data("fixedIndex");
						reorderedColumns.splice(fixedIndex,0,columns[fixedIndex]);
					});
					setColumns(reorderedColumns, true);

					trigger(self.onColumnsReordered, {});
					updateFilterRow();
					e.stopPropagation();
					setupColumnResize();
				}
			});
		}

		function setupColumnResize() {
			var j, c, pageX, columnElements, newCanvasWidthL, newCanvasWidthR, minPageX, maxPageX, firstResizable, lastResizable;
			columnElements = $headers.children();
			columnElements.find(".slick-resizable-handle").remove();

			columnElements.each(function(i, e) {
				if (columns[i].resizable) {
					if (firstResizable === undefined) {
						firstResizable = i;
					}
					lastResizable = i;
				}
			});

			if (firstResizable === undefined) {
				return;
			}

			columnElements.each(function(i, e) {
				if (i < firstResizable || (options.forceFitColumns && i >= lastResizable)) {
					return;
				}
				$col = $(e);

				$("<div class='slick-resizable-handle' />")
					.appendTo(e)
					.bind("dragstart", function(e, dd) {
						if (!getEditorLock().commitCurrentEdit()) {
							return false;
						}
						isDragging = true;
						pageX = e.pageX;

						$(this).parent().addClass("slick-header-column-active").css("cursor", "col-resize");
						$(this).parent().next().addClass("slick-header-column-active").css("cursor", "col-resize");

						var shrinkLeewayOnRight = null,
							stretchLeewayOnRight = null;
						// lock each column's width option to current width
						columnElements.each(function(i, e) {
							columns[i].previousWidth = $(e).outerWidth();
						});
						if (options.forceFitColumns) {
							shrinkLeewayOnRight = 0;
							stretchLeewayOnRight = 0;
							// colums on right affect maxPageX/minPageX
							for (j = i + 1; j < columnElements.length; j++) {
								c = columns[j];
								if (c.resizable) {
									if (stretchLeewayOnRight !== null) {
										if (c.maxWidth) {
											stretchLeewayOnRight += c.maxWidth - c.previousWidth;
										} else {
											stretchLeewayOnRight = null;
										}
									}
									shrinkLeewayOnRight += c.previousWidth - Math.max(c.minWidth || 0, absoluteColumnMinWidth);
								}
							}
						}
						var shrinkLeewayOnLeft = 0,
							stretchLeewayOnLeft = 0;
						for (j = 0; j <= i; j++) {
							// columns on left only affect minPageX
							c = columns[j];
							if (c.resizable) {
								if (stretchLeewayOnLeft !== null) {
									if (c.maxWidth) {
										stretchLeewayOnLeft += c.maxWidth - c.previousWidth;
									} else {
										stretchLeewayOnLeft = null;
									}
								}
								shrinkLeewayOnLeft += c.previousWidth - Math.max(c.minWidth || 0, absoluteColumnMinWidth);
							}
						}
						if (shrinkLeewayOnRight === null) {
							shrinkLeewayOnRight = 100000;
						}
						if (shrinkLeewayOnLeft === null) {
							shrinkLeewayOnLeft = 100000;
						}
						if (stretchLeewayOnRight === null) {
							stretchLeewayOnRight = 100000;
						}
						if (stretchLeewayOnLeft === null) {
							stretchLeewayOnLeft = 100000;
						}
						maxPageX = pageX + Math.min(shrinkLeewayOnRight, stretchLeewayOnLeft);
						minPageX = pageX - Math.min(shrinkLeewayOnLeft, stretchLeewayOnRight);
					})
					.bind("drag", function(e, dd) {
						var actualMinWidth, d = Math.min(maxPageX, Math.max(minPageX, e.pageX)) - pageX,
							x;

						if (d < 0) { // shrink column
							x = d;

							newCanvasWidthL = 0;
							newCanvasWidthR = 0;

							for (j = i; j >= 0; j--) {
								c = columns[j];
								if (c.resizable) {
									actualMinWidth = Math.max(c.minWidth || 0, absoluteColumnMinWidth);
									if (x && c.previousWidth + x < actualMinWidth) {
										x += c.previousWidth - actualMinWidth;
										c.width = actualMinWidth;
									} else {
										c.width = c.previousWidth + x;
										x = 0;
									}
								}
							}

							for ( k = 0; k <= i; k++ ) {
								c = columns[k];

								if ((options.frozenColumn > -1) && (k > options.frozenColumn)) {
									newCanvasWidthR += c.width;
								} else {
									newCanvasWidthL += c.width;
								}
							}

							if (options.forceFitColumns) {
								x = -d;

								for (j = i + 1; j < columnElements.length; j++) {
									c = columns[j];
									if (c.resizable) {
										if (x && c.maxWidth && (c.maxWidth - c.previousWidth < x)) {
											x -= c.maxWidth - c.previousWidth;
											c.width = c.maxWidth;
										} else {
											c.width = c.previousWidth + x;
											x = 0;
										}

										if ((options.frozenColumn > -1) && (j > options.frozenColumn)) {
											newCanvasWidthR += c.width;
										} else {
											newCanvasWidthL += c.width;
										}
									}
								}
							} else {
								for (j = i + 1; j < columnElements.length; j++) {
									c = columns[j];

									if ((options.frozenColumn > -1) && (j > options.frozenColumn)) {
										newCanvasWidthR += c.width;
									} else {
										newCanvasWidthL += c.width;
									}
								}
							}
						} else { // stretch column
							x = d;

							newCanvasWidthL = 0;
							newCanvasWidthR = 0;

							for (j = i; j >= 0; j--) {
								c = columns[j];
								if (c.resizable) {
									if (x && c.maxWidth && (c.maxWidth - c.previousWidth < x)) {
										x -= c.maxWidth - c.previousWidth;
										c.width = c.maxWidth;
									} else {
										c.width = c.previousWidth + x;
										x = 0;
									}
								}
							}

							for ( k = 0; k <= i; k++ ) {
								c = columns[k];

								if ((options.frozenColumn > -1) && (k > options.frozenColumn)) {
									newCanvasWidthR += c.width;
								} else {
									newCanvasWidthL += c.width;
								}
							}

							if (options.forceFitColumns) {
								x = -d;

								for (j = i + 1; j < columnElements.length; j++) {
									c = columns[j];
									if (c.resizable) {
										actualMinWidth = Math.max(c.minWidth || 0, absoluteColumnMinWidth);
										if (x && c.previousWidth + x < actualMinWidth) {
											x += c.previousWidth - actualMinWidth;
											c.width = actualMinWidth;
										} else {
											c.width = c.previousWidth + x;
											x = 0;
										}

										if ((options.frozenColumn > -1) && (j > options.frozenColumn)) {
											newCanvasWidthR += c.width;
										} else {
											newCanvasWidthL += c.width;
										}
									}
								}
							} else {
								for (j = i + 1; j < columnElements.length; j++) {
									c = columns[j];

									if ((options.frozenColumn > -1) && (j > options.frozenColumn)) {
										newCanvasWidthR += c.width;
									} else {
										newCanvasWidthL += c.width;
									}
								}
							}
						}

						if ( options.frozenColumn > -1 && newCanvasWidthL !== canvasWidthL ) {
							$paneHeaderR.css( 'left', newCanvasWidthL );
						}
						applyColumnHeaderWidths();
						if (options.syncColumnCellResize) {
							applyColumnWidths();
						}
					})
					.bind("dragend", function(e, dd) {
						var newWidth,
							parent = $(this).parent();


						for (j = 0; j < columnElements.length; j++) {
							c = columns[j];
							newWidth = $(columnElements[j]).outerWidth();

							if (c.previousWidth !== newWidth && c.rerenderOnResize) {
								invalidateAllRows();
							}
						}

						updateCanvasWidth(true);
						render();
						trigger(self.onColumnsResized, {});
						updateFilterRow();
						trigger(self.onPersonalizationChanged, getGridPersonalizationInfo('ColumnsResized'));

						setTimeout(function() {
							parent.removeClass("slick-header-column-active").css("cursor", "");
							parent.next().removeClass("slick-header-column-active").css("cursor", "");
							isDragging = false;
						}, 100);
					});
			});
		}

		function getVBoxDelta($el) {
			var p = ["borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom"];
			var delta = 0;
			$.each(p, function (n, val) { delta += parseFloat($el.css(val)) || 0; });
			return delta;
		}

		function setFrozenOptions() {
			options.frozenColumn = ( options.frozenColumn >= 0
									&& options.frozenColumn < columns.length
								)
								? parseInt(options.frozenColumn, 10)
								: -1;

			options.frozenRow = ( options.frozenRow >= 0
								&& options.frozenRow < numVisibleRows
								)
								? parseInt(options.frozenRow, 10)
								: -1;

			if ( options.frozenRow > -1 ) {
				hasFrozenRows = true;
				frozenRowsHeight = ( options.frozenRow ) * options.rowHeight;

				var dataLength = getDataLength() || this.data.length;

				actualFrozenRow = ( options.frozenBottom )
								? ( dataLength - options.frozenRow )
								: options.frozenRow;
			} else {
				hasFrozenRows = false;
			}
		}

		function setPaneVisibility() {
			if (options.frozenColumn > -1) {
				$paneHeaderR.show();
				$paneTopR.show();
			} else {
				$paneHeaderR.hide();
				$paneTopR.hide();
			}
		}

		function setOverflow() {
			var setting = ((options.autoHeightToPageSize || options.autoHeight) ? 'hidden' :'auto');

			$viewportTopL.css({
				'overflow-x': (options.frozenColumn > -1) ? 'scroll' : 'auto',
				'overflow-y': (options.frozenColumn > -1) ? 'hidden' : setting
			});

			$viewportTopR.css({
				'overflow-x': (options.frozenColumn > -1) ? 'scroll' : 'auto',
				'overflow-y': (options.frozenColumn > -1) ? 'auto' : setting
			});
		}

		function setScroller() {
		if ( options.frozenColumn > -1 ) {
				$headerScrollContainer = $headerScrollerR;
				$headerRowScrollContainer = $headerRowScrollerR;
				$summaryRowScrollContainer = $summaryRowScrollerR;

				if ( hasFrozenRows ) {
					if ( options.frozenBottom ) {
						$viewportScrollContainerX = $viewportBottomR;
						$viewportScrollContainerY = $viewportTopR;
					} else {
						$viewportScrollContainerX = $viewportScrollContainerY = $viewportBottomR;
					}
				} else {
					$viewportScrollContainerX = $viewportScrollContainerY = $viewportTopR;
				}
			} else {
				$headerScrollContainer = $headerScrollerL;
				$headerRowScrollContainer = $headerRowScrollerL;
				$summaryRowScrollContainer = $summaryRowScrollerL;

				if ( hasFrozenRows ) {
					if ( options.frozenBottom ) {
						$viewportScrollContainerX = $viewportBottomL;
						$viewportScrollContainerY = $viewportTopL;
					} else {
						$viewportScrollContainerX = $viewportScrollContainerY = $viewportBottomL;
					}
				} else {
					$viewportScrollContainerX = $viewportScrollContainerY = $viewportTopL;
				}
			}
		}

		function measureCellPaddingAndBorder() {
			var el;
			var h = ["borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight"];
			var v = ["borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom"];

			el = $("<div class='slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers);

			headerColumnWidthDiff = headerColumnHeightDiff = 0;
			$.each(h, function (n, val) { headerColumnWidthDiff += parseFloat(el.css(val)) || 0; });
			$.each(v, function (n, val) { headerColumnHeightDiff += parseFloat(el.css(val)) || 0; });
			el.remove();

			var r = $("<div class='slick-row' />").appendTo($canvas);
			el = $("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(r);
			cellWidthDiff = cellHeightDiff = 0;
			$.each(h, function (n, val) { cellWidthDiff += parseFloat(el.css(val)) || 0; });
			$.each(v, function (n, val) { cellHeightDiff += parseFloat(el.css(val)) || 0; });
			r.remove();

			absoluteColumnMinWidth = Math.max(headerColumnWidthDiff, cellWidthDiff);
		}

		function createCssRules() {
			$style = $("<style type='text/css' rel='stylesheet' />").appendTo($("head"));
			var rowHeight = (options.rowHeight - cellHeightDiff);

			var rules = [
				"." + uid + " .slick-header-column { " +(!Globalize.culture().isRTL ? "left: 1000px;" : "right: 1000px;")+";height:"+ options.headerHeight + "px; }",
				"." + uid + " .slick-header-columns { height:" + options.headerHeight + "px; }",
				"." + uid + " .inforFilterMenuButton { top:" + (parseInt(options.headerHeight, 10) + 4) + "px; }",
				"." + uid + " .slick-top-panel { height:" + options.topPanelHeight + "px; }",
				"." + uid + " .slick-headerrow-columns { height:" + options.headerRowHeight + "px; }",
				"." + uid + " .slick-summaryrow-columns { height:" + options.summaryRowHeight + "px; }",
				"." + uid + " .slick-cell { height:" + rowHeight + "px; }",
				"." + uid + " .slick-row { height:" + options.rowHeight + "px; }"
			];

			for (var i = 0; i < columns.length; i++) {
				rules.push("." + uid + " .l" + i + " { }");
				rules.push("." + uid + " .r" + i + " { }");
			}

			if ($style[0].styleSheet) { // IE
				$style[0].styleSheet.cssText = rules.join(" ");
			} else {
				$style[0].appendChild(document.createTextNode(rules.join(" ")));
			}

			var sheets = document.styleSheets;
			for (var i = 0; i < sheets.length; i++) {
				if ((sheets[i].ownerNode || sheets[i].owningElement) === $style[0]) {
					stylesheet = sheets[i];
					break;
				}
			}

			// find and cache column CSS rules
			columnCssRulesL = [], columnCssRulesR = [];
			var cssRules = (stylesheet.cssRules || stylesheet.rules);
			var matches, columnIdx;
			for (var i = 0; i < cssRules.length; i++) {
				matches = matches = /\.l\d+/.exec(cssRules[i].selectorText);
				if (matches) {
				columnIdx = parseInt(matches[0].substr(2, matches[0].length - 2), 10);
				columnCssRulesL[columnIdx] = cssRules[i];
				} else {
					matches = /\.r\d+/.exec(cssRules[i].selectorText);
					if (matches) {
						columnIdx = parseInt(matches[0].substr(2, matches[0].length - 2), 10);
						columnCssRulesR[columnIdx] = cssRules[i];
					}
				}
			}
		}

		function initializeRowPositions() {
			rowPositionCache = {
				0: {
					top: 0,
					height: options.rowHeight,
					bottom: options.rowHeight
				}
			};
		}

		function cacheRowPositions() {
			initializeRowPositions();
			calculateVariableRowHeight();

			for ( var i = 0; i < getDataLength(); i++ ) {
				var metadata = data.getRowHeights && data.getRowHeights(i);

				rowPositionCache[i] = {
					top: ( rowPositionCache[i - 1] )
						? ( rowPositionCache[i - 1].bottom - offset )
						: 0, 
						height: ( metadata && metadata.rows && metadata.rows[i] )
							? metadata.rows[i].height
							: options.rowHeight
				};

				rowPositionCache[i].bottom = rowPositionCache[i].top + rowPositionCache[i].height;
			}
		}

		function getColumnCssRules(idx) {
			return {
				"left": columnCssRulesL[idx],
				"right": columnCssRulesR[idx],
				"width": "0px"
			};
		}
		function removeCssRules() {
			$style.remove();
		}

		function destroy(isEditor) {
			if (!isEditor) {
				getEditorLock().cancelCurrentEdit();
			}

			trigger(self.onBeforeDestroy, {});

			var i = plugins.length;
			while(i--) {
				unregisterPlugin(plugins[i]);
			}

			if (options.enableColumnReorder && $headers.sortable && $headers.data("uiSortable")) {
				$headers.sortable("destroy");
			}

			unbindAncestorScrollEvents();
			$container.unbind(".slickgrid");
			removeCssRules();

			$canvas.unbind("draginit dragstart dragend drag");
			$container.empty().removeClass(uid);
			$(window).unbind("throttledresize.inforDataGrid");

			if ($gridSettingsButton) {
				$gridSettingsButton.remove();
			}
			
			if ($filterMenuButton) {
				$filterMenuButton.remove();
			}
			
			$container.next(".inforGridFooter").remove();
			$container.remove();

			$("#" + settingsMenuId).parent(".inforMenu").remove();
			$("#" + filterMenuId).parent(".inforMenu").remove();
		}

		//////////////////////////////////////////////////////////////////////////////////////////////
		// General
		function trigger(evt, args, e) {
			e = e || new Slick.EventData();
			args = args || {};
			args.grid = self;
			return evt.notify(args, e, self);
		}

		function getEditorLock() {
			return options.editorLock;
		}

		function getEditController() {
			return editController;
		}

		function getColumnIndex(id) {
			return columnsById[id];
		}

		function autosizeColumns() {
			//refresh size.
			viewportW = parseFloat($.css($container[0], "width", true));

			var c,
			widths = [],
			shrinkLeeway = 0,
			total = 0,
			prevTotal,
			availWidth = viewportHasVScroll ? viewportW - scrollbarDimensions.width : viewportW;

			if ($gridSettingsButton || options.showFilter) {	//subtract size for the buttons on the end.
				availWidth -= 18;
			}
			
			for (var i = 0; i < columns.length; i++) {
				c = columns[i];
				widths.push(c.width);
				total += c.width;
				if (c.resizable) {
				shrinkLeeway += c.width - Math.max(c.minWidth, absoluteColumnMinWidth);
				}
			}

			// shrink
			prevTotal = total;
			while (total > availWidth && shrinkLeeway) {
				var shrinkProportion = (total - availWidth) / shrinkLeeway;
				for (var i = 0; i < columns.length && total > availWidth; i++) {
				c = columns[i];
				var width = widths[i];
				if (!c.resizable || width <= c.minWidth || width <= absoluteColumnMinWidth) {
					continue;
				}
				var absMinWidth = Math.max(c.minWidth, absoluteColumnMinWidth);
				var shrinkSize = Math.floor(shrinkProportion * (width - absMinWidth)) || 1;
				shrinkSize = Math.min(shrinkSize, width - absMinWidth);
				total -= shrinkSize;
				shrinkLeeway -= shrinkSize;
				widths[i] -= shrinkSize;
				}
				if (prevTotal == total) {  // avoid infinite loop
					break;
				}
				prevTotal = total;
			}

			// grow
			prevTotal = total;
			while (total < availWidth) {
				var growProportion = availWidth / total;
				for (var i = 0; i < columns.length && total < availWidth; i++) {
				c = columns[i];
				if (!c.resizable || c.maxWidth <= c.width) {
					continue;
				}
				var growSize = Math.min(Math.floor(growProportion * c.width) - c.width, (c.maxWidth - c.width) || 1000000) || 1;
				total += growSize;
				widths[i] += growSize;
				}
				if (prevTotal == total) {  // avoid infinite loop
				break;
				}
				prevTotal = total;
			}

			for (var i = 0; i < columns.length; i++) {
				columns[i].width = widths[i];
			}

			applyColumnHeaderWidths();
			updateCanvasWidth(true);
			updateFilterRow();
			invalidateAllRows();
			render();
		}

		function applyColumnHeaderWidths() {
			if (!initialized) {
				return;
			}
			var h;
			applyNestedColumnHeaderWidths();

			for (var i = 0, headers = $headers.children(), ii = headers.length; i < ii; i++) {
				h = $(headers[i]);
				h.css("width", columns[i].width - headerColumnWidthDiff + "px");
			}

			updateColumnCaches();
		}

		function applyNestedColumnHeaderWidths() {
			if (!hasNestedColumns) { return; }
			var nh, nestedHeaderRows;

			function computeWidths(columns, depth) {
				var totalWidth = 0;
				for (var i = 0; i < columns.length; i++) {
					var column = columns[i];
					if (!columns.hasOwnProperty(i)) {
						continue;
					}

					if (column.children && column.children.length) {
						column.width = computeWidths(column.children, depth);
					}
					if (column.spacers) {
						var spacer;
						for (var j = 0; j < column.spacers.length; j++) {
							spacer = column.spacers[j];
							spacer.width = column.width;
						}
					}
					totalWidth += column.width;
				}
				return totalWidth;
			}

			computeWidths(nestedColumns[0], 0);
			for (var j = 0, nestedHeaderRows = $headerParents.children(), jj = nestedHeaderRows.length; j < jj; j++) {
				for (var k = 0, nestedHeaders = $(nestedHeaderRows[j]).children(), kk = nestedHeaders.length; k < kk; k++) {
					var idx = k;
					nh = $(nestedHeaders[k]);
					if (nestedColumns[j][idx]) {	//column hid
						nh.css("width", nestedColumns[j][idx].width - headerColumnWidthDiff  + "px");
					}
				}
			}
		}

		var timeout = null;
		function applyColumnWidths() {
			var x = 0,
				w, rule;
			for (var i = 0; i < columns.length; i++) {
				w = columns[i].width;

				rule = getColumnCssRules(i);

				if (rule && rule.left && rule.right) {
					if (!Globalize.culture().isRTL) {
						rule.left.style.left = x + "px";
						rule.right.style.right = (((options.frozenColumn != -1 && i > options.frozenColumn) ? canvasWidthR : canvasWidthL) - x - w) + "px";
					} else {
						rule.right.style.right = x + "px";
						rule.left.style.left = (((options.frozenColumn != -1 && i > options.frozenColumn) ? canvasWidthR : canvasWidthL) - x - w) + "px";
					}
				}

				// If this column is frozen, reset the css left value since the
				// column starts in a new viewport.
				if (options.frozenColumn == i) {
					x = 0;
				} else {
					x += columns[i].width;
				}

				if (options.variableRowHeight && columns[i].cssClass == "autoHeight" ) {
					clearTimeout(timeout);
					timeout = setTimeout(function () {
						invalidateAllRows();
						render();
						resizeCanvas();
					}, 0);
				}
			}
		}

		function parseColumns(columnsInput) {
			var maxDepth = 0,
				j = 0;
				columns = [];

			nestedColumns = null;

			function parse(columnsInput, depth) {
				var totalWidth = 0;
				if (depth > maxDepth) maxDepth = depth;
				for (var i = 0; i < columnsInput.length; i++) {
					var column = columnsInput[i];
					if (column === undefined) {
						return totalWidth;
					}
					if (column.children && column.children.length) {
						hasNestedColumns = true;
						column.width = parse(column.children, depth + 1);
					}
					else {
						column = columnsInput[i] = $.extend({}, columnDefaults, column);
						columnsById[column.id] = j;
						j++;
						if (column.minWidth && column.width < column.minWidth) {
							column.width = column.minWidth;
						}
						if (column.maxWidth && column.width > column.maxWidth) {
							column.width = column.maxWidth;
						}
						columns.push(column);
					}
					totalWidth += column.width;
				}
				return totalWidth;
			}

			function addToNested(column, depth) {
				if (!nestedColumns) { nestedColumns = [] }
				if (!nestedColumns[depth]) { nestedColumns[depth] = []; }
				nestedColumns[depth].push(column);
			}

			var spacerIndex = 0;
			
			function splitIntoLayers(columnsInput, depth) {
				for (var index in columnsInput) {
				var column = columnsInput[index];
				addToNested(column, depth);
				if (column.children && column.children.length) {
					splitIntoLayers(column.children, depth + 1)
				}
				else {
					var spacer;
					var spacers = [];
					for (var d = depth + 1; d <= maxDepth; d++) {
						spacer = {spacer: true, width: column.width || columnDefaults.width, name: "", id: "spacer" + spacerIndex};
						addToNested(spacer, d);
						spacers.push(spacer);
						spacerIndex++;
					}
					column.spacers = spacers;
				}
				}
			}

			hasNestedColumns = false;
			parse(columnsInput, 0);

			if (maxDepth > 0) {
				splitIntoLayers(columnsInput, 0);
			}
		}

		function setSortColumn(columnId, ascending) {
			var cols = [];
			cols.push({ columnId: columnId, sortAsc: ascending});
			setSortColumns(cols);
		}

		function getSortColumns() {
			return sortColumns;
		}

		var lastSort = "";
		
		function setSortColumns(cols) {
			sortColumns = cols;
			if (sortColumns.length == 0) {
				return;
			}
			
			var headerColumnEls = $headers.children();
			var removeFrom = hasNestedColumns ? headerColumnEls.add($headerParents.children().children()) : headerColumnEls;

			removeFrom
			.removeClass("slick-header-column-sorted")
			.find(".slick-sort-indicator")
				.removeClass("slick-sort-indicator-asc slick-sort-indicator-desc");


			$.each(sortColumns, function(i, col) {
					if (col.sortAsc == null) {
						col.sortAsc = true;
					}
					var columnIndex = getColumnIndex(col.columnId);
					
					if (columnIndex != null) {
						var headerMaybe = headerColumnEls.eq(columnIndex);

						if (hasNestedColumns && headerMaybe.hasClass("slick-column-spacer")) {
							var parentHeaderRows = $headerParents.children().get().reverse();
							for (var i = 0; i < parentHeaderRows.length; i++) {
							var headerColumns = $(parentHeaderRows[i]).children();
							$(headerColumns).each(function(){

								if ($(this).data("column").id == col.columnId && ! $(this).hasClass("slick-column-spacer")) {
								headerMaybe = $(this);
								return;
								}
							});
							}
						}

						headerMaybe
							.addClass("slick-header-column-sorted")
							.find(".slick-sort-indicator")
								.addClass(col.sortAsc ? "slick-sort-indicator-asc" : "slick-sort-indicator-desc");
					}
			});

			
			if (lastSort == cols[0].sortAsc.toString()+cols[0].columnId.toString()) {
				return;
			}
			lastSort = cols[0].sortAsc.toString()+cols[0].columnId.toString();
			
			trigger(self.onSort, {
			sortColumns: $.map(sortColumns, function(col) {
				return {sortCol: columns[getColumnIndex(col.columnId)], sortAsc: col.sortAsc };
			})}, null);

			//set the state of the grid and fire the events
			personalizationInfo.sortColumns = sortColumns;
			dataView.setPagingOptions({sortColumns: sortColumns, pageNum: 0});
			dataView.requestNewPage("sort");
			trigger(self.onPersonalizationChanged, getGridPersonalizationInfo('SortColumn'));
		}

		function handleSelectedRangesChanged(e, ranges) {
			selectedRows = [];
			var hash = {};
			for (var i = 0; i < ranges.length; i++) {
				for (var j = ranges[i].fromRow; j <= ranges[i].toRow; j++) {
					if (!hash[j] && canRowBeSelected(j)) { // prevent duplicates
						selectedRows.push(j);
						hash[j] = {};
					}
					for (var k = ranges[i].fromCell; k <= ranges[i].toCell; k++) {
						if (canCellBeSelected(j, k)) {
							hash[j][columns[k].id] = options.selectedCellCssClass;
						}
					}
				}
			}

			setCellCssStyles(options.selectedCellCssClass, hash);

			trigger(self.onSelectedRowsChanged, { rows: getSelectedRows(), active: ranges.active  }, e);

			//set the footer status
			if (selectedRecordArea==null && options.showFooter) {
				selectedRecordArea = $container.next(".inforGridFooter").find(".slick-records-status");
			}

			if (options.showFooter && selectedRecordArea.length!=0)
				selectedRecordArea.html(Globalize.localize("Selected") + (selectedRows.length < 10 ? " " + selectedRows.length : selectedRows.length));
		}

		function getColumnIndexById(id) {
			for (var i = 0; i < columnsInput.length; i++){
				if (columnsInput[i].id === id) {
					return i;
				}
			}
			return -1;
		}

		function addBuiltinColumns() {
			var o = options;
			checkboxSelector = new Slick.CheckboxSelectColumn({ cssClass: "slick-cell-checkboxsel" });

			//TODO: In case we dont want to mod the orginal array..
			columnsInput = columnsInput.slice(0);
			if (o.showDrillDown && getColumnIndexById("drilldown") === -1) {
				columnsInput.splice(0, 0, {id: "drilldown", builtin: true, selectable: false, reorderable:false, sortable:false, resizable: false, width: 22, formatter: DrillDownCellFormatter, cssClass: "non-data-cell" });
			}

			if (o.showCheckboxes && getColumnIndexById("checkbox-selector")  === -1) {
				var def = checkboxSelector.getColumnDefinition(o.multiSelect);
				if (o.enableGrouping) {
					def.width = 37;
				}
				columnsInput.splice(0, 0, def);
				self.registerPlugin(checkboxSelector);
			}

			if (o.showStatusIndicators && getColumnIndexById("indicator-icon")  === -1) {
				columnsInput.splice(0, 0, { id: "indicator-icon", sortable:false, builtin: true, reorderable:false, selectable: false, resizable: false, width: 16, formatter: IndicatorIconFormatter, cssClass: "status-indicator non-data-cell" });
			}
		}

		function getColumns(includeHidden) {
			if (includeHidden) {
				return allColumns;
			} else {
				return columns;
			}
		}

		function updateColumnCaches() {
			// Pre-calculate cell boundaries.
			columnPosLeft = [];
			columnPosRight = [];
			var x = 0;
			for (var i = 0, ii = columns.length; i < ii; i++) {
				columnPosLeft[i] = x;
				columnPosRight[i] = x + columns[i].width;

				if (options.frozenColumn == i) {
					x = 0;
				} else {
					x += columns[i].width;
				}
			}
		}

		function setColumns(columnDefinitions, noReset) {
			columns = columnDefinitions;
			columnsById = {};

			if (!noReset) {
				allColumns = [];
				saveColumns();
				defaultColumns = $.extend(true, [], columns);
			}

			columnsInput = columns;
			addBuiltinColumns();
			parseColumns(columnsInput);
			updateColumnCaches();

			if (initialized) {
				setPaneVisibility();
				setOverflow();
				invalidateAllRows();
				createColumnHeaders();
				removeCssRules();
				createCssRules();
				resizeCanvas();
				updateCanvasWidth();
				applyColumnWidths();
				handleScroll();
				updateSummaryRow();
			}
			trigger(self.onPersonalizationChanged, getGridPersonalizationInfo('SetColumns'));
			processHiddenColumns(columns);
		}

		function saveColumns() {
			if (allColumns.length!=0)
				return;

			for (var i=0; i<columns.length; i++) {
				allColumns.push(columns[i]);
			}
		}

		function hideColumn(columnid, defer) {
			saveColumns();	//save the columns once...
			var visibleColumns = [];
			for (var i=0; i < columnsInput.length; i++) {
				if (columnsInput[i].id !== columnid) {
					visibleColumns.push(columnsInput[i]);
				}
				if (columnsInput[i].children) {
					for (var j=0; j < columnsInput[i].children.length; j++) {
						if (columnsInput[i].children[j].id === columnid) {
							columnsInput[i].children.splice(j, 1);
							for (var k=0; k < allColumns.length; k++) {
								if (allColumns[k].id === columnid) {
									allColumns[k].childIdx = j;	
								}
							}
						}
					}
				}
				if (columnsInput[i].children && columnsInput[i].children.length == 0) {
					for (var k=0; k < visibleColumns.length; k++) {
						if (visibleColumns[k].id === columnsInput[i].id) {
							visibleColumns.splice(k, 1);
						}
					}
				}
			}
			columnsInput = visibleColumns;
			if (!defer) {
				setColumns(visibleColumns, true);
				updateFilterRow();
			}
		}

		function colInArry(array, columnid) {
			for (var i=0; i < array.length; i++) {
				if (array[i].id==columnid)
					return true;
			}
			return false;
		}

		function showColumn(newColumns) {
			var sinceChildren = null,
				columns = columnsInput,
				currentColumns = getColumns(),
				numHiddenCols = 0;
			
			if (allColumns.length==0) {
				return;
			}
			
			if (typeof newColumns == "string")
				newColumns = [newColumns];

			for (var j=0; j < newColumns.length; j++) {
				var colId = newColumns[j];
				for (var i=0; i < currentColumns.length; i++) {
					if (currentColumns[i].id==colId) {	//already in the list of columns....
						return;
					}
				}
			}

			if (newColumns.length==0) {
				return;
			}
			
			for (var i=0; i < allColumns.length; i++) {
				if (allColumns[i].hidden && $.inArray(allColumns[i].id,newColumns)==-1) {
					numHiddenCols++;
				}
				
				var spliceIdx = i;
				if (columns[spliceIdx-numHiddenCols] && columns[spliceIdx-numHiddenCols].children) {
					sinceChildren = 0;
				}
				
				if (sinceChildren !== null) {
					sinceChildren++;
				}
				
				if (($.inArray(allColumns[i].id, newColumns)>-1)) {
					allColumns[i].hidden = false;
					if (sinceChildren && columns[spliceIdx-numHiddenCols-sinceChildren+1].children) {
						columns[spliceIdx-numHiddenCols-sinceChildren+1].children.splice(allColumns[i].childIdx, 0 , allColumns[i]);
					} else {
						columns.splice(spliceIdx-numHiddenCols,0,allColumns[i]);
					}
				}
			}
			setColumns(columns, true);
			updateFilterRow();
		}
						
						
		function hideColumns(cols) {				
			for (var i=0; i < cols.length; i++) {
				hideColumn(cols[i], (i<cols.length-1));
			}
		}

		function showColumns(cols) {
			showColumn(cols);
		}

		function getOptions() {
			return options;
		}

		//Gets the current personalization info...
		function getGridPersonalizationInfo(callerInfo) {
			saveColumns();	//save the columns once...

			//get the current savable grid settings in an object to be serialized/saved
			personalizationInfo.caller=callerInfo;
			personalizationInfo.columnInfo = [];
			personalizationInfo.filterInResults = filterInResults;

			if (options.pageSize)
				personalizationInfo.pageSize = options.pageSize;

			for(var i=0; i< allColumns.length; i++) {
				var col = allColumns[i];
				var index = getColumnIndex(col.id);
				var colWidth = col.width;

				//col index of <0 means not shown
				var colIndex = -1;
				if (index!=undefined) {
					colWidth = getColumns()[index].width;
					colIndex = index;
				}
				var columnInfo = {id:col.id , width: colWidth, columnIndex: colIndex };
				personalizationInfo.columnInfo.push(columnInfo);
			}
			return personalizationInfo;
		}

		function arraymove(arr, fromIndex, toIndex) {
			element = arr[fromIndex];
			arr.splice(fromIndex,1);
			arr.splice(toIndex,0,element);
		}

		//Restored the personalization (columns) to the ones initialized with (overriding cookies)
		function resetColumnLayout() {
			filterInResults = true;
			columns = defaultColumns;
			defaultColumns = $.extend(true, [], columns);
			setColumns(columns, true);
			processHiddenColumns(defaultColumns);
			applyColumnWidths();
			updateFilterRow();
		}

		function processHiddenColumns(cols) {
			var hiddenCols = [];
			for (var i = 0; i < cols.length; i++) {
				var col = cols[i];
				if (col.hidden == true) {
					hiddenCols.push(col.id);
				}
			}
			if (hiddenCols.length > 0) {
				hideColumns(hiddenCols);
			}
		}

		//Sets the current personalization info back from an stored object
		function restorePersonalization(gridInfo) {
			//restore filterInResults
			filterInResults = gridInfo.filterInResults;
			//set the page size.
			if (options.showPageSizeSelector && gridInfo.pageSize && self.pager) {
				self.pager.setPageSize(gridInfo.pageSize);
			}

			//set the column sizes...
			if (gridInfo.columnInfo) {
				var currentColumns = getColumns();
				for(var i=0; i< gridInfo.columnInfo.length; i++) {
					var colinfo = gridInfo.columnInfo[i];
					var targetCol = null,
						oldIndex = -1;

					//find the matching column in the columns collection...
					for(var j=0; j< currentColumns.length; j++) {
						if (currentColumns[j].id==colinfo.id) {
							targetCol = currentColumns[j];
							oldIndex = j;
							break;
						}
					}

					if (targetCol==null) {
						continue;
					}
					targetCol.width = colinfo.width;
					arraymove(currentColumns,oldIndex,colinfo.columnIndex);
				}

				//set columns...
				setColumns(currentColumns, true);

				//hide hidden columns
				var hiddenCols = [],showCols = [];
				for(var i=0; i< gridInfo.columnInfo.length; i++) {
					var colinfo = gridInfo.columnInfo[i];
					if (colinfo.columnIndex==-1)
						hiddenCols.push(colinfo.id);
				}

				if (hiddenCols.length>0){
				//hide hidden columns
					hideColumns(hiddenCols);
				}

				//show columns hidden by default but shown by user
				for(var i=0; i< allColumns.length; i++) {
					var colinfo = allColumns[i];
					if (colinfo.hidden==true) {
						for(var j=0; j< gridInfo.columnInfo.length; j++) {
							var col = gridInfo.columnInfo[j];
							if (col.id==colinfo.id && col.columnIndex>=0) {
								showCols.push(col.id);
								break;
							}
						}
					}
				}
				if (showCols.length>0){
					showColumns(showCols);
				}
			}

			//set the sort order...
			if (gridInfo.sortColumns) {
				setSortColumns(gridInfo.sortColumns);
			}

			//set the filter...
			if (gridInfo.showFilter === false) {
				options.showFilter = !gridInfo.showFilter;
				toggleFilterRow();
			} else {
				updateFilterRow();
			}
		}

		function setOptions(args) {
			if (!getEditorLock().commitCurrentEdit()) {
				return;
			}

			makeActiveCellNormal();

			if (options.enableAddRow !== args.enableAddRow) {
				invalidateRow(getDataLength());
			}

			options = $.extend(options, args);

			if (args.idProperty)
				dataView.setIdProperty(args.idProperty);

			setScroller();
			render();
		}

		/*
			Do a minimal refresh of the data contents..
		*/
		function updateData(data) {
			var gridDataObj = getData(),
				sortCols = getSortColumns();
				
			gridDataObj.setItems([]); //Clear row cache
			gridDataObj.setItems(data); //Set the objects back in the dataview..
			setSortColumns(sortCols);
			
			updateRowCount();  //Notify the grid to update whats changed
			render(); //Call render to refresh including the hover events.
		}

		var loadedPages = [];

		//Now can use an object: {dataset: newData, pageNum: -1, totalRows: -1, isLastPage: true, isFirstPage: false
		function mergeData(dataObj, pageNum, totalRows, isLastPage, isFirstPage) {
			if (dataObj.dataset!=undefined) {	//we provided an object (one param). set the others.
				var isLastPage = dataObj.isLastPage,
					isFirstPage = dataObj.isFirstPage,
					totalRows = dataObj.totalRows,
					pageNum = dataObj.pageNum,
					newData = dataObj.dataset;
			} else{
				var newData = dataObj;
			}

			if (isLastPage && pageNum==-1)
				pageNum = 99999;


			var busyPort = $viewport.filter(".slick-viewport:visible").last();
			if (busyPort.data("uiInforBusyIndicator")) {
				busyPort.inforBusyIndicator("close");	//hide loading indicator
			}
			
			//see if the page was loaded..Caching
			var cachePos = $.inArray( pageNum, loadedPages );
			if (cachePos>-1) {
				updateData(loadedPages[cachePos].dataset);
				getData().setPagingOptions({totalRows: totalRows, pageNum: pageNum});
				return;
			}

			loadedPages.push({pageNum:pageNum, dataset: newData});
			if (options.pagingMode=="ContinuousScrolling") {
				var oldData = (pageNum == 0 ? [] : getData().getItems());
				var allData = oldData.concat(newData);
				updateData(allData);

				if (totalRows==undefined)
					totalRows = allData.length;
			}
			else {
				updateData(newData);

				if (totalRows==undefined)
					totalRows = newData.length;
			}

			var dataView = getData();
			dataView.setPagingOptions({totalRows: totalRows, pageNum: pageNum, isLastPage: isLastPage, isFirstPage: isFirstPage});
			dataView.onPagingInfoChanged.notify(dataView.getPagingInfo(), null, self);

			//scroll down...for better continuous scrolling.
			if (options.pagingMode=="ContinuousScrolling") {
				dataView.activeReq = false;	//let the next request go through
				if (pageNum!=0) {
					scrollRowIntoView(totalRows*.80, false);
				}
			}
			setOverflow();
		}

		function getData(commitEdits) {
			//Commit any pending edits...
			if (commitEdits)
				getEditorLock().commitCurrentEdit();

			return data;
		}

		/* Validation Functions */
		function ErrorMap() {
			this.keys = new Array();
			this.data = new Object();

			this.push = function (key, value) {
				if(this.data[key] == null){
					this.keys.push(key);
				}
				this.data[key] = value;
			};

			this.get = function (key) {
				return this.data[key];
			};

			this.remove = function (key) {
				var len = this.keys.length;
				for (var i=0; i<len; i++) {
					if (this.keys[i] == key) {
						this.keys.splice(i,1);
					}
				}
				this.data[key] = null;
			};

			this.size = function() {
				return this.keys.length;
			};

			this.toString = function() {
				var len = this.keys.length,
					str = "";

				for (var i=0; i < len; i++) {
					str += (len > 1 ? (i+1)+ ") " : "") + this.data[this.keys[i]].validationResults.msg + "<br>";
				}
				return str;
			};
		}

		//execute the validator on a cell.
		function validateCell(row, cell) {
			//create a new editor
			var tempContainer = $("<div></div>"),
				item = getData().getItem(row),
				tempCellNode = getCellNode(row, cell),
				columnDef = getColumns()[cell],
				editor,
				isValid,
				editorFunc = getEditor(row, cell);

			if (!editorFunc) {
				return true;
			}

			editor = new (editorFunc)({
								grid: self,
								gridPosition: absBox($container[0]),
								position: absBox(tempCellNode),
								container: tempContainer,
								column: columnDef,
								item: item || {},
								commitChanges: null,
								cancelChanges: null
							});

			if (item) {
				editor.loadValue(item, false);
			}

			isValid = executeValidator(editor, item, columnDef, row, cell);
			editor.destroy();
			tempContainer = null;
			return isValid;
		}

		function executeValidator(editor, item, column, row, cell) {
			var validationResults = editor.validate(),
				cellNode = getCellNode(row, cell);

			if (!validationResults.valid) {
				var errorObj = {
					editor: editor,
					cellNode: cellNode,
					validationResults: validationResults,
					row: row,
					cell: cell,
					column: column
				};

				//set errors on the trigger fields.
				$(cellNode).addClass("error");
				if (item.indicator != "error") {
					item.previousIndicator = item.indicator;
				}
				item.indicator = "error";

				if (!item.validationMessages) {
					item.validationMessages = new ErrorMap();
				}
				item.validationMessages.push(cell, errorObj);
				updateCell(row, getColumnIndex("indicator-icon"));
				trigger(self.onValidationMessage, errorObj);
			} else {
				//remove error indicator if no more errors.
				$(cellNode).removeClass("error");
				
				if (item) {
					if (item.validationMessages) {
						item.validationMessages.remove(cell);
					}
					if (item.validationMessages && item.validationMessages.size() >= 1) {
						item.indicator = "error";
					} else {
						item.indicator = (item.previousIndicator ? item.previousIndicator : (editor.isValueChanged() && item.indicator !== "new" ? "dirty" : item.indicator));
					}
				}
			}
			
			return validationResults.valid;
		}

		//validate all cells on a row
		function validateRow(row) {
			var columns = getColumns(),
				i, isValid = true, cellValid = true;

			for (i = 0; i < columns.length; i++) {
				cellValid = validateCell(row, i);
				if (!cellValid && isValid) {
					isValid = false;
				}
			}
			return isValid;
		}

		//validate all cells on every row.
		function validateAll() {
			var data = getFilteredData(),
				i, isValid = true, rowValid = true;

			for (i = 0; i < data.length; i++) {
				rowValid = validateRow(i);
				if (!rowValid && isValid) {
					isValid = false;
				}
			}
			return isValid;
		}

		function clearValidationMessages() {
			var data = getFilteredData(),
				i;

			for (i = 0; i < data.length; i++) {
				setValidationMessages(i, null);
			}
		}

		function getValidationMessages(rownum) {
			var row = getData().getItems()[rownum];
			return row.validationMessages;
		}

		function setValidationMessages(rownum, validationMessages) {
			var row = getData().getItems()[rownum];
			row.validationMessages = validationMessages;
			if (!row.validationMessages || row.validationMessages.size() >= 1) {
				row.indicator = "";
			}
			invalidateRow(rownum);
			render();
		}

		function addValidationMessage(rownum, cell, message) {
			var row = getData().getItems()[rownum],
				errorObj =  {
							editor: null,
							cellNode: null,
							validationResults: {valid: false, msg: message},
							row: rownum,
							cell: cell,
							column: null
							};

			if (row.indicator && row.indicator!="error") {
				row._indicator = row.indicator;
			}
			row.indicator = "error";
			if (!row.validationMessages) {
				row.validationMessages = new ErrorMap();
			}
			row.validationMessages.push((cell ? cell : "row" + rownum), errorObj);
			invalidateRow(rownum);
			render();
		}

		function removeValidationMessage(rownum, cell) {
			var row = getData().getItems()[rownum];
			if (row.validationMessages) {
				row.validationMessages.remove((cell ? cell : "row" + rownum));
				if (row.validationMessages.size() >= 1) {
					row.indicator = "error";
				} else {
					row.indicator = (row._indicator ? row._indicator : "");
					delete row._indicator;
				}
				invalidateRow(rownum);
				render();
			}
		}

		function setRowStatus (rownum, status, message) {	//can be "dirty", "new", "error" or "" to clear.
			if (status === "error") {
				addValidationMessage(rownum, null, message);
				return;
			}

			var row = getData().getItems()[rownum];
			row.indicator = status;
			if (status == "error") {
				row.validationMessages = message;
			} else {
				row.indicatorTooltip = message;
			}
			invalidateRow(rownum);
			render();
		}

		/*
			Add a row to the bottom of the grid. Or in any position after insertBefore.
		*/
		function addRow(newRow, insertBefore){
			if (!newRow) {
				newRow = { id: getData().getMaxId() + 1};
			}
			//add new indication..
			newRow.indicator = "new" ;

			if (insertBefore === undefined) {
				getData().addItem(newRow);
			} else {
				getData().insertItem(insertBefore, newRow);
			}

			updateRowCount();
			render();

			var focusRow = (insertBefore === undefined ? getDataLength()-1 : insertBefore);
			scrollRowIntoView(focusRow, false);
			focus(focusRow);

			trigger(self.onAddNewRow, { item: newRow });
		}

		function focus(row) {
			if (options.editable) {
				var cols = getColumns();
				for (var i=0; i < cols.length; i++) {
					if (isCellPotentiallyEditable(row, i)) {
						setActiveCellInternal(getCellNode(row, i), options.autoEdit, true);
						break;
					}
				}
			}
		}

		function addRows(newRows, indicator){
			if (!newRows || newRows.length==0)
				return;

			//add new indication..
			var indicatorStr = (indicator ? "new" : "");
			var dataSet = getData(),
				items = dataSet.getItems();

			for (var i=0; i < newRows.length; i++) {
				newRows[i].indicator = indicatorStr ;
				//dataSet.addItem(newRows[i]);
				items.push(newRows[i]);
				trigger(self.onAddNewRow, { item: newRows[i] });
			}

			updateData(items);
			updateRowCount();
			render();
			dataSet.reSort();

			//scroll to the last one we added.
			var idx = data.getRowIdx(newRows[newRows.length-1]);
			scrollRowIntoView((idx == -1 ? 0 : idx), true);
		}

		//Remove all Selected Rows from the grid.
		function removeSelectedRows() {
			var dataset = getData(),
				rowData = dataset.getItems(),
				filteredData = getFilteredData(),
				id, idx;

			var selRows = getSelectedRows();
			if (selRows.length === 0) {
				return;
			}

			selRows.sort(function(a,b){return a - b});
			for (var i = (selRows.length - 1); i >= 0; i--) {
				id = filteredData[selRows[i]][options.idProperty];
				idx = dataset.getIdxById(filteredData[selRows[i]][options.idProperty]);
				//find item by id.
				rowData.splice(idx , 1);
			}

			dataset.setItems(rowData);
			updateRowCount();
			render();

			// clear selected rows - select last
			setSelectedRows([]);
			$(".selector-checkbox-header").removeAttr('checked');
			updateSummaryRow();
		}

		function getDataLength() {
			if (data.getLength) {
				return data.getLength();
			}
			else {
				return data.length;
			}
		}

		function getSelectableLength() {
			var collection = null,
				selectable = 0;

			if (data.getLength) {
				collection = getFilteredData();
			}
			else {
				collection = data;
			}

			for (var i = 0; i < collection.length; i++) {
				if (canRowBeSelected(i))
					selectable++;
			}

			if (getOptions().enableGrouping) {
				selectable = collection.length;
			}
			return selectable;
		}

		function getDataItem(i) {
			if (data.getItem) {
				return data.getItem(i);
			}
			else {
				return data[i];
			}
		}

		function getTopPanel() {
			return $topPanel[0];
		}

		function setTopPanelVisibility(visible) {
			if (options.showTopPanel != visible) {
				options.showTopPanel = visible;
				if (visible) {
					$topPanelScroller.slideDown("fast", resizeCanvas);
				} else {
					$topPanelScroller.slideUp("fast", resizeCanvas);
				}
			}
		}

		function setHeaderRowVisibility(visible) {
			if (options.showHeaderRow != visible) {
				options.showHeaderRow = visible;
				if (visible) {
					$headerRowScroller.show();
				} else {
					$headerRowScroller.hide();
				}
				resizeCanvas();
			}
			showFilterButton(visible);
		}

		function toggleFilterRow() {
			options.showFilter = !options.showFilter;
			setHeaderRowVisibility(options.showFilter);
			createColumnHeaders();
			updateFilterRow();
			personalizationInfo.showFilter=options.showFilter;
			if (options.showFilter) {
				$headerRowScrollContainer[0].scrollLeft = $headerScrollContainer[0].scrollLeft;
			}
			trigger(self.onPersonalizationChanged, getGridPersonalizationInfo('ShowFilter'));
		}

		//////////////////////////////////////////////////////////////////////////////////////////////
		// Rendering / Scrolling
		function scrollTo(y) {
			y = Math.max(y, 0);
			y = Math.min(y, th - $viewportScrollContainerY.height() + ((viewportHasHScroll || options.frozenColumn > -1) ? scrollbarDimensions.height : 0));

			var oldOffset = offset;

			page = Math.min(n - 1, Math.floor(y / ph));
			offset = Math.round(page * cj);
			var newScrollTop = y - offset;

			if (offset != oldOffset) {
				var range = getVisibleRange(newScrollTop);
				cleanupRows(range);
				updateRowPositions();
			}

			if (prevScrollTop != newScrollTop) {
				vScrollDir = (prevScrollTop + oldOffset < newScrollTop + offset) ? 1 : -1;

				lastRenderedScrollTop = ( scrollTop = prevScrollTop = newScrollTop );

				if (options.frozenColumn > -1) {
					$viewportTopR[0].scrollTop = newScrollTop;
				}

				if ( hasFrozenRows ) {
					$viewportBottomL[0].scrollTop = $viewportBottomR[0].scrollTop = newScrollTop;
				}

				$viewportScrollContainerY[0].scrollTop = newScrollTop;
				trigger(self.onViewportChanged, {});
			}
		}


		function defaultFormatter(row, cell, value, columnDef, dataContext) {
			return (value === null || value === undefined) ? "" : value;
		}

		function getFormatter(row, column) {
			var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);

			// look up by id, then index
			var columnOverrides = rowMetadata &&
					rowMetadata.columns &&
					(rowMetadata.columns[column.id] || rowMetadata.columns[getColumnIndex(column.id)]);

			return (columnOverrides && columnOverrides.formatter) ||
					(rowMetadata && rowMetadata.formatter) ||
					column.formatter ||
					(options.formatterFactory && options.formatterFactory.getFormatter(column)) ||
					defaultFormatter;
		}

		function getEditor(row, cell) {
			var column = columns[cell],
				rowMetadata = data.getItemMetadata && data.getItemMetadata(row),
				columnMetadata = rowMetadata && rowMetadata.columns;

			if (columnMetadata && columnMetadata[column.id] && columnMetadata[column.id].editor !== undefined) {
				return columnMetadata[column.id].editor;
			}
			if (columnMetadata && columnMetadata[cell] && columnMetadata[cell].editor !== undefined) {
				return columnMetadata[cell].editor;
			}

			return column.editor || (options.editorFactory && options.editorFactory.getEditor(column));
		}


		var getItemCache = {};
		function getDataItemValueForColumn(item, field) {
			if (options.dataItemColumnValueExtractor) {
				return options.dataItemColumnValueExtractor(item, field, self);
			} else if (!item[field] && field !== undefined && field.indexOf(".") > -1) {
				var fn = getItemCache[field] = getItemCache[field] || new Function(["item", "field"], "with(item){try{return "+field+";}catch(e){return null;}}"); 
				return fn(item, field);
			} else {
				return item[field];
			}
		}

		var setItemCache = {};
		function setDataItemValueForColumn(item, field, value) {
			if (options.dataItemColumnValueSetter) {
				options.dataItemColumnValueSetter(item, field, value, self);
			} else if (!item[field] && field !== undefined && field.indexOf(".") > -1) {
				var fn = setItemCache[field] = setItemCache[field] || new Function(["item", "field", "value"], "with(item){try{"+field+"=value;}catch(e){return}}"); 
				fn(item, field, value);
			} else {
				item[field] = value;
			}
		}

		function calculateVariableRowHeight() {
			if (!options.variableRowHeight) {
				return;
			}

			var dataview = getData(),
				data = getFilteredData(),
				h = 0,
				varCols = options.variableRowHeightColumn,
				col = (typeof varCols == "string" ? varCols : varCols[0]);

			//attach function to look at the rowHeight data set value
			if (!getColumnIndex(col) && col=="rowHeight") {
				dataview.getRowHeights = function(row) {
					var dataset = getFilteredData();
					if (dataset[row] && dataset[row].rowHeight) {
						var obj = {
							'rows': {}
						};

						obj['rows'][row] = {height : dataset[row].rowHeight};
						return obj;
					}
				}
				return;
			}

			if (data.length == 0 || data[0][col] === undefined) {
				return;
			}

			//attch function to look at a specific column
			dataview.getRowHeights = function(row) {
				var h = estimateColumnHeight(col, row, data),
					h2 = 0;

				if (typeof varCols == "object") {
					for (var i = 1; i < varCols.length; i++) {
						h2 = estimateColumnHeight(varCols[i], row, data);
						if (h2 > h) {
							h = h2;
						}
					}
				}

				if (h > 27 ) {
					var obj = {
						'rows': {}
					};

					obj['rows'][row] = {'height': h };
					return obj;
				}
			}
		}

		function estimateColumnHeight(col, row, data) {
			var colindex = getColumnIndex(col),
				h;

			if (!data[row] || !data[row][col]) {
				return 27;
			}

			if (!colindex) {
				return 27;
			}

			var c = data[row][col],
				colwidth = getColumns()[colindex].width;

			//New calc
			c = c.toString();
			var matches = c.match(/\n/g);

			if ((c.length*8) + 8 < colwidth && (matches ? matches.length : 0) === 0) {
				h = 27;
			} else {
				var tester = $("<textarea style='line-height: 16px;white-space: pre-wrap;word-wrap: break-word;' class='inforTextArea'>" + c + "</textarea>").css({"width" : colwidth , "height" : "auto"}).appendTo("body");
				h = parseInt(tester.prop('scrollHeight'), 10) + 17;
				tester.remove();
			}

			return h;
		}

		function appendRowHtml(stringArrayL, stringArrayR, row, range) {
			var d = getDataItem(row),
				dataLoading = row < getDataLength() && !d,
				rowCss = "slick-row " +
					(dataLoading ? " loading" : "") +
					(row === activeRow ? " active" : "") +
					(row % 2 == 1 ? ' odd' : ' even') +
					(options.showZebraStripes ? ' zebra' : ' ') +
					($.inArray(row,selectedRows)>-1 ? " selected" : " "),
				metadata = data.getItemMetadata && data.getItemMetadata(row);

			if (metadata && metadata.cssClasses) {
				rowCss += " " + metadata.cssClasses;
			}

			var frozenRowOffset = (options.frozenRow > -1 && row >= options.frozenRow) ? options.rowHeight * options.frozenRow : 0;
			var rowHtml = "<div class='ui-widget-content " + rowCss + "' role='row' row='" + row + "' style='top:" + (rowPositionCache[row].top - frozenRowOffset) + "px;"
				+ ((rowPositionCache[row].height != options.rowHeight ) ? "height:" + rowPositionCache[row].height + "px;" : "")+"'>";

			stringArrayL.push(rowHtml);

			if (options.frozenColumn > -1) {
				stringArrayR.push(rowHtml);
			}

			var colspan, m;

			for (var i = 0, ii = columns.length; i < ii; i++) {
				m = columns[i];
				colspan = 1;
				if (metadata && metadata.columns) {
					var columnData = metadata.columns[m.id] || metadata.columns[i];
					colspan = (columnData && columnData.colspan) || 1;
					if (colspan === "*") {
						colspan = ii - i;
					}
				}

				// Do not render cells outside of the viewport.
				if (columnPosRight[Math.min(ii - 1, i + colspan - 1)] > range.leftPx) {
					if (columnPosLeft[i] > range.rightPx) {
						// All columns to the right are outside the range.
						break;
					}

					if ( ( options.frozenColumn > -1 ) && ( i > options.frozenColumn ) ) {
						appendCellHtml(stringArrayR, row, i, colspan);
					} else {
						appendCellHtml(stringArrayL, row, i, colspan);
					}
				} else if ( ( options.frozenColumn > -1 ) && ( i <= options.frozenColumn ) ) {
					appendCellHtml(stringArrayL, row, i, colspan);
				}

				if (colspan > 1) {
					i += (colspan - 1);
				}
			}

			stringArrayL.push("</div>");

			if (options.frozenColumn > -1) {
				stringArrayR.push("</div>");
			}
		}

		function appendCellHtml(stringArray, row, cell, colspan) {
			var m = columns[cell],
				d = getDataItem(row),
				r = Math.min(columns.length - 1, cell + colspan - 1),
				cellCss = "slick-cell l" + cell + " r" + r + (m.cssClass ? " " + m.cssClass : "");

			if (row === activeRow && cell === activeCell) {
				cellCss += (" active");
			}

			if (d.validationMessages && d.validationMessages.get(r)) {
				cellCss += (" error");
			}

			// TODO:  merge them together in the setter
			for (var key in cellCssClasses) {
				if (cellCssClasses[key][row] && cellCssClasses[key][row][m.id]) {
					cellCss += (" " + cellCssClasses[key][row][m.id]);
				}
			}

			stringArray.push("<div class='" + cellCss +
							"' aria-describedby='" + uid + m.id +
							"' tabindex='-1' role='gridcell'>");

			// if there is a corresponding row (if not, this is the Add New row or this data hasn't been loaded yet)
			if (d) {
				var value = getDataItemValueForColumn(d, m.field);
				stringArray.push(getFormatter(row, m)(row, cell, value, m, d, options, self));
			}

			stringArray.push("</div>");

			rowsCache[row].cellRenderQueue.push(cell);
			rowsCache[row].cellColSpans[cell] = colspan;
		}

		function cleanupRows(rangeToKeep) {
			for (var i in rowsCache) {
				if (((i = parseInt(i, 10)) !== activeRow) && (i < rangeToKeep.top || i > rangeToKeep.bottom)) {
					removeRowFromCache(i);
				}
			}
		}

		function invalidate() {
			updateRowCount();
			invalidateAllRows();
			render();
		}

		function invalidateAllRows() {
			if (currentEditor) {
				makeActiveCellNormal();
			}
			for (var row in rowsCache) {
				removeRowFromCache(row);
			}
		}

		function removeRowFromCache(row) {
			var node = rowsCache[row];
			if (!node) {
				return;
			}

			node.rowNode.remove();

			delete rowsCache[row];
			delete postProcessedRows[row];
			renderedRows--;
		}

		function invalidateRows(rows) {
			var i, rl;
			if (!rows || !rows.length) {
				return;
			}
			vScrollDir = 0;
			for (i = 0, rl = rows.length; i < rl; i++) {
				if (currentEditor && activeRow === rows[i]) {
					makeActiveCellNormal();
				}
				if (rowsCache[rows[i]]) {
					removeRowFromCache(rows[i]);
				}
			}
		}

		function invalidateRow(row) {
			invalidateRows([row]);
		}

		function updateCell(row, cell) {
			var cellNode = getCellNode(row, cell);
			if (!cellNode) {
				return;
			}

			var m = columns[cell], d = getDataItem(row);
			if (currentEditor && activeRow === row && activeCell === cell) {
				currentEditor.loadValue(d);
			}
			else {
				cellNode.html(d ? getFormatter(row, m)(row, cell, getDataItemValueForColumn(d, m.field), m, d, getOptions(), self) : "");
				invalidatePostProcessingResults(row);
			}
		}

		function updateRow(row) {
			var cacheEntry = rowsCache[row];
			if (!cacheEntry) {
				return;
			}

			ensureCellNodesInRowsCache(row);

			for (var columnIdx in cacheEntry.cellNodesByColumnIdx) {
				if (!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(columnIdx)) {
					continue;
				}

				columnIdx = columnIdx | 0;
				var m = columns[columnIdx],
					d = getDataItem(row),
					node = cacheEntry.cellNodesByColumnIdx[columnIdx][0];

				if (row === activeRow && columnIdx === activeCell && currentEditor) {
					currentEditor.loadValue(d);
				} else if (d) {
					node.innerHTML = getFormatter(row, m)(row, columnIdx, getDataItemValueForColumn(d, m.field), m, d, getOptions(), self);
				} else {
					node.innerHTML = "";
				}
			}

			invalidatePostProcessingResults(row);
		}

		function getViewportHeight() {
			return parseFloat($.css($container[0], "height", true))
				- parseFloat((options.showColumnHeaders ? $.css($headerScroller[0], "height") : 0))
				- getVBoxDelta($headerScroller)
				- (options.showTopPanel ? options.topPanelHeight + getVBoxDelta($topPanelScroller) : 0)
				- (options.showHeaderRow ? options.headerRowHeight + getVBoxDelta($headerRowScroller) : 0)
				- (options.showSummaryRow ? options.summaryRowHeight + getVBoxDelta($summaryRowScroller) : 0);
		}

		function reinit() {	//rerender after being initially invisible.
			resizeCanvas();
			createColumnHeaders();
			updateFilterRow();
			invalidateAllRows();
			render();
			updateSummaryRow();
		}

		function resizeCanvas() {

			if (options.fillHeight && !options.autoHeight && !options.autoHeightToPageSize) {
				//Find the top of the viewport and subtract that from the window height
				var offSet = $container.offset();

				if ($container.length==0)	//might be here unless the grid was not destroyed().
					return;

				var winHeight = $(window).height();
				var newHeight = winHeight-offSet.top-2;

				//See whats below the grid...
				var nextElement = $container.next(":visible").not(".inforMenu, .inforGridFooter");
				if (nextElement.length>0) {
					newHeight -=  nextElement.height();
				}

				var topPane = $container.closest("#topPane");	//handle being in the top of a splitter
				if ($container.closest("#topPane").length>0){
					newHeight =   topPane.height() - ($container.position().top -  topPane.position().top)- 4;
				}

				if (options.showFooter) {
					newHeight -= 22;
				}

				if ($pageFooter.length==1) {	//account for space when there is a page footer.
					newHeight -= 27;
				}

				var tabPanel = $container.closest(".ui-tabs-panel");
				if (tabPanel.length>0) {
					newHeight = tabPanel.height() - ($container.position().top - tabPanel.position().top) - 2;
					if ($container.next(":visible").is(".inforGridFooter")) {
						newHeight -= 24;
					}
				}

				if (tabPanel.parent().hasClass("inforVerticalTabs")) {
					newHeight = tabPanel.height() - ($container.position().top) - (options.showFooter ? 22 : 0) - ($pageFooter.length==1 ? 27 : 0);
				}

				$container.height(newHeight);
				viewportW = parseFloat($.css($container[0], "width", true));	//reset width
			}

			if (!initialized) { return; }

			if (options.autoHeight || options.autoHeightToPageSize) {
				var len = (getDataLength() <= 0 ? 0 : getDataLength()-1);
				viewportH = rowPositionCache[len].top + rowPositionCache[len].height;

				if (options.autoHeightToPageSize && getDataLength()<options.pageSize) {
					viewportH += ((options.pageSize - getDataLength()) * options.rowHeight);
				}

				if ($container.find(".inforLookupHeader").length==1) {
						viewportH+=26;
				}
				if ( options.frozenColumn > -1 ) {
					$container.height(viewportH + parseFloat($.css($headerScrollerL[0], "height")) + scrollbarDimensions.height + (options.showSummaryRow ? 27 : 0));
				} else {
					$container.height(viewportH + parseFloat($.css($headerScrollerL[0], "height")) + scrollbarDimensions.height + (options.showSummaryRow ? 27 : 0) + (options.showHeaderRow ? 10 : -scrollbarDimensions.height));
				}

			} else {
				viewportH = getViewportHeight();
			}

			var paneTopH = viewportH
						+ (options.showHeaderRow ? options.headerRowHeight + getVBoxDelta($headerRowScroller) : 0)
						+ (options.showSummaryRow ? options.summaryRowHeight + getVBoxDelta($summaryRowScroller) : 0);

			paneTopH += ( options.frozenColumn > -1 && options.autoHeight ) ? scrollbarDimensions.height : 0;

			$paneTopL.css({
				'top': $paneHeaderL.height()
				,'height': paneTopH
			});

			var viewportTopH = viewportH;
			if (options.autoHeight || options.autoHeightToPageSize) {
				$canvas.height(viewportTopH);
			}

			if (options.autoHeight || options.autoHeightToPageSize) {
				viewportTopH += scrollbarDimensions.height;
			}

			$viewportTopL.height(viewportTopH);

			if (options.frozenColumn > -1) {
				$paneTopR.css({
					'top': $paneHeaderR.height()
				,'height': paneTopH
				});

				$viewportTopR.height(viewportTopH);
			}

			$viewportTopR.height(viewportTopH);

			if (options.forceFitColumns) {
				createColumnHeaders();
				autosizeColumns();
				updateCanvasWidth(true);
				updateFilterRow();
			}

			updateRowCount();
			handleScroll();

			//make adjustments for scrollbar
			if (options.autoHeight || options.autoHeightToPageSize) {
				var hasScrollR =  $viewportTopR.get(0).scrollWidth > $viewportTopR.width();
				var hasScrollL =  $viewportTopL.get(0).scrollWidth > $viewportTopL.width();

				$paneTopL.height("auto");
				$paneTopR.height("auto");
				$viewport.height("auto");
				$container.height($container.height() + ((hasScrollL || hasScrollR) ? scrollbarDimensions.height + (navigator.userAgent.toLowerCase().indexOf("webkit") > -1 ?  1 : (options.showFilter ? 1 : 0)) : 0 ));
			}

			if (getOptions().frozenColumn > -1) {
				updateCanvasWidth(true);
			}

			render();
		}

		function resizeAndRender() {
			if (options.forceFitColumns) {
				autosizeColumns();
			} else {
				resizeCanvas();
			}
		}

		function updateRowCount() {
			if (!initialized) { return; }

			cacheRowPositions();
			var oldNumberOfRows = numberOfRows;

			numberOfRows = getDataLength() +
				(options.enableAddRow ? 1 : 0);

			var oldViewportHasVScroll = viewportHasVScroll;
			// with autoHeight, we do not need to accommodate the vertical scroll bar
			//viewportHasVScroll = !options.autoHeight && !options.autoHeightToPageSize && (numberOfRows * options.rowHeight > viewportH);
			viewportHasVScroll = !options.autoHeight && !options.autoHeightToPageSize
						&& rowPositionCache[numberOfRows-1]
						&& (rowPositionCache[numberOfRows-1].bottom > viewportH);

			// remove the rows that are now outside of the data range
			// this helps avoid redundant calls to .removeRow() when the size of the data decreased by thousands of rows
			var l = options.enableAddRow ? getDataLength() : getDataLength() - 1;
			for (var i in rowsCache) {
				if (i >= l) {
					removeRowFromCache(i);
				}
			}

			var oldH = h,
				len = getDataLength() === 0 ? 0 : getDataLength()-1;

			//th = Math.max(options.rowHeight * numberOfRows, viewportH - scrollbarDimensions.height);
			var rowMax = (options.enableAddRow)
				? rowPositionCache[len].bottom
				: rowPositionCache[len].top + rowPositionCache[len].height;

			th = Math.max(rowMax, viewportH - scrollbarDimensions.height);

			if (activeCellNode && activeRow > l) {
				resetActiveCell();
			}

			if (th < maxSupportedCssHeight) {
				// just one page
				h = ph = th;
				n = 1;
				cj = 0;
			} else {
				// break into pages
				h = maxSupportedCssHeight;
				ph = h / 100;
				n = Math.floor(th / ph);
				cj = (th - h) / (n - 1);
			}

			if (numberOfRows !== oldNumberOfRows || h !== oldH) {
				if ( hasFrozenRows && !options.frozenBottom ) {
					$canvasBottomL.css("height", h);

					if ( options.frozenColumn > -1 ) {
						$canvasBottomR.css("height", h);
					}
				} else {
					$canvasTopL.css("height", h);
					$canvasTopR.css("height", h);
				}

				scrollTop = $viewportScrollContainerY[0].scrollTop;
			}

			var oldScrollTopInRange = (scrollTop + offset <= th - viewportH);

			if (th == 0 || scrollTop == 0) {
				page = offset = 0;
			} else if (oldScrollTopInRange) {
				// maintain virtual position
				scrollTo(scrollTop + offset);
			} else {
				// scroll to bottom
				scrollTo(th - viewportH);
			}

			if (numberOfRows !== oldNumberOfRows && (options.autoHeight || options.autoHeightToPageSize)) {
				resizeCanvas();
			}

			if (options.forceFitColumns && oldViewportHasVScroll !== viewportHasVScroll) {
				autosizeColumns();
			}
			updateCanvasWidth(false);
		}

	function getVisibleRange(viewportTop, viewportLeft) {
		if (viewportTop == null) {
				viewportTop = scrollTop;
			}
			if (viewportLeft == null) {
				viewportLeft = scrollLeft;
			}

			return {
				top: getRowFromPosition(viewportTop),
				bottom: getRowFromPosition(viewportTop + viewportH) + 1,
				leftPx: viewportLeft,
				rightPx: viewportLeft + viewportW
			};
		}

		function getRowFromPosition( maxPosition ) {
			var row = 0;
			var rowsInPosCache = getDataLength();

			if ( !rowsInPosCache ) {
				return row;
			}

			// Loop through the row position cache and break when
			// the row is found
			for ( var i = 0; i < rowsInPosCache; i++ ) {
				if (rowPositionCache[i] == undefined) {
					return;
				}

				if ( rowPositionCache[i].top <= maxPosition
					&& rowPositionCache[i].bottom >= maxPosition
				) {
					row = i;
					continue;
				}
			}

			// Return the last row in the grid
			if ( maxPosition > rowPositionCache[rowsInPosCache-1].bottom ) {
				row = rowsInPosCache-1;
			}

			return row;
		}

		function getRenderedRange(viewportTop, viewportLeft) {
			var range = getVisibleRange(viewportTop, viewportLeft),
				buffer = Math.round(viewportH / options.rowHeight),
				minBuffer = 3;

			if (vScrollDir == -1) {
				range.top -= buffer;
				range.bottom += minBuffer;
			}
			else if (vScrollDir == 1) {
				range.top -= minBuffer;
				range.bottom += buffer;
			}
			else {
				range.top -= minBuffer;
				range.bottom += minBuffer;
			}

			range.top = Math.max(0, range.top);
			range.bottom = Math.min(options.enableAddRow ? getDataLength() : getDataLength() - 1, range.bottom);

			range.leftPx -= viewportW;
			range.rightPx += viewportW;

			range.leftPx = Math.max(0, range.leftPx);
			range.rightPx = Math.min(canvasWidth, range.rightPx);

			return range;
		}

		function ensureCellNodesInRowsCache(row) {
			var cacheEntry = rowsCache[row];
			if (cacheEntry) {
				if (cacheEntry.cellRenderQueue.length) {
					var $lastNode = cacheEntry.rowNode.children().last();
					while (cacheEntry.cellRenderQueue.length) {
						var columnIdx = cacheEntry.cellRenderQueue.pop();

						cacheEntry.cellNodesByColumnIdx[columnIdx] = $lastNode;
						$lastNode = $lastNode.prev();

						// Hack to retrieve the frozen columns because
						if ( $lastNode.length == 0 ) {
							$lastNode = $( cacheEntry.rowNode[0] ).children().last();
						}
					}
				}
			}
		}

		function cleanUpCells(range, row) {
			// Ignore frozen rows
			if ( hasFrozenRows
				&& ( ( options.frozenBottom && row > actualFrozenRow ) // Frozen bottom rows
					|| ( row <= actualFrozenRow )                     // Frozen top rows
					)
			) {
				return;
			}

			var totalCellsRemoved = 0;
			var cacheEntry = rowsCache[row];

			// Remove cells outside the range.
			var cellsToRemove = [];
			for (var i in cacheEntry.cellNodesByColumnIdx) {
				// I really hate it when people mess with Array.prototype.
				if (!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(i)) {
					continue;
				}

				// This is a string, so it needs to be cast back to a number.
				i = i | 0;

				// Ignore frozen columns
				if ( i <= options.frozenColumn ) {
					continue;
				}

				var colspan = cacheEntry.cellColSpans[i];
				if (columnPosLeft[i] > range.rightPx || columnPosRight[Math.min(columns.length - 1, i + colspan - 1)] < range.leftPx) {
					if (!(row == activeRow && i == activeCell)) {
						cellsToRemove.push(i);
					}
				}
			}

			var cellToRemove;
			while ((cellToRemove = cellsToRemove.pop()) != null) {
				cacheEntry.cellNodesByColumnIdx[cellToRemove][0].parentElement.removeChild( cacheEntry.cellNodesByColumnIdx[cellToRemove][0] );
				delete cacheEntry.cellColSpans[cellToRemove];
				delete cacheEntry.cellNodesByColumnIdx[cellToRemove];
				if (postProcessedRows[row]) {
					delete postProcessedRows[row][cellToRemove];
				}
				totalCellsRemoved++;
			}
		}

		function cleanUpAndRenderCells(range) {
			var cacheEntry;
			var stringArray = [];
			var processedRows = [];
			var cellsAdded;
			var totalCellsAdded = 0;
			var colspan;

			for (var row = range.top; row <= range.bottom; row++) {
				cacheEntry = rowsCache[row];
				if (!cacheEntry) {
					continue;
				}

				// cellRenderQueue populated in renderRows() needs to be cleared first
				ensureCellNodesInRowsCache(row);

				cleanUpCells(range, row);

				// Render missing cells.
				cellsAdded = 0;

				var metadata = data.getItemMetadata && data.getItemMetadata(row);
				metadata = metadata && metadata.columns;

				// TODO:  shorten this loop (index? heuristics? binary search?)
				for (var i = 0, ii = columns.length; i < ii; i++) {
					// Cells to the right are outside the range.
					if (columnPosLeft[i] > range.rightPx) {
						break;
					}

					// Already rendered.
					if ((colspan = cacheEntry.cellColSpans[i]) != null) {
						i += (colspan > 1 ? colspan - 1 : 0);
						continue;
					}

					colspan = 1;
					if (metadata) {
						var columnData = metadata[columns[i].id] || metadata[i];
						colspan = (columnData && columnData.colspan) || 1;
						if (colspan === "*") {
							colspan = ii - i;
						}
					}

					if (columnPosRight[Math.min(ii - 1, i + colspan - 1)] > range.leftPx) {
						appendCellHtml(stringArray, row, i, colspan);
						cellsAdded++;
					}

					i += (colspan > 1 ? colspan - 1 : 0);
				}

				if (cellsAdded) {
					totalCellsAdded += cellsAdded;
					processedRows.push(row);
				}
			}

			if (!stringArray.length) {
				return;
			}

			var x = document.createElement("div");
			x.innerHTML = stringArray.join("");

			var processedRow;
			var $node;
			while ((processedRow = processedRows.pop()) != null) {
				cacheEntry = rowsCache[processedRow];
				var columnIdx;
				while ((columnIdx = cacheEntry.cellRenderQueue.pop()) != null) {
					$node = $(x).children().last();

					if ( ( options.frozenColumn > -1 ) && ( columnIdx > options.frozenColumn ) ) {
						$( cacheEntry.rowNode[1] ).append( $node );
					} else {
						$( cacheEntry.rowNode[0] ).append( $node );
					}

					cacheEntry.cellNodesByColumnIdx[columnIdx] = $node;
				}
			}
		}

		function renderRows(range) {
			var i, l,
				stringArrayL = [],
				stringArrayR = [],
				rows = [],
				needToReselectCell = false;

			if (options.variableRowHeight) {
				cacheRowPositions();	//recache row positions for sorting and filtering at a slight perf hit
			}

			for (i = range.top; i <= range.bottom; i++) {
				if (rowsCache[i]) {
					continue;
				}
				renderedRows++;
				rows.push(i);

				// Create an entry right away so that appendRowHtml() can
				// start populatating it.
				rowsCache[i] = {
				"rowNode": null,

				// ColSpans of rendered cells (by column idx).
				// Can also be used for checking whether a cell has been rendered.
				"cellColSpans": [],

				// Cell nodes (by column idx).  Lazy-populated by ensureCellNodesInRowsCache().
				"cellNodesByColumnIdx": [],

				// Column indices of cell nodes that have been rendered, but not yet indexed in
				// cellNodesByColumnIdx.  These are in the same order as cell nodes added at the
				// end of the row.
				"cellRenderQueue": []
				};

				appendRowHtml(stringArrayL, stringArrayR, i, range);

				if (activeCellNode && activeRow === i) {
					needToReselectCell = true;
				}
			}

			if (!rows.length) {
				return;
			}

			var x = document.createElement("div"),
				xRight = document.createElement("div");

			x.innerHTML = stringArrayL.join("");
			xRight.innerHTML = stringArrayR.join("");

			for (var i = 0, ii = rows.length; i < ii; i++) {
				if ( ( hasFrozenRows ) && ( rows[i] >= actualFrozenRow ) ) {
					if (options.frozenColumn > -1) {
						rowsCache[rows[i]].rowNode = $()
							.add($(x.firstChild).appendTo($canvasBottomL))
							.add($(xRight.firstChild).appendTo($canvasBottomR));
					} else {
						rowsCache[rows[i]].rowNode = $()
							.add($(x.firstChild).appendTo($canvasBottomL));
					}
				} else if (options.frozenColumn > -1) {
					rowsCache[rows[i]].rowNode = $()
						.add($(x.firstChild).appendTo($canvasTopL))
						.add($(xRight.firstChild).appendTo($canvasTopR));
				} else {
					rowsCache[rows[i]].rowNode = $()
						.add($(x.firstChild).appendTo($canvasTopL));
				}
			}

			if (needToReselectCell) {
				activeCellNode = getCellNode(activeRow, activeCell);
			}
		}

		function startPostProcessing() {
			if (!options.enableAsyncPostRender) { return; }
			clearTimeout(h_postrender);
			h_postrender = setTimeout(asyncPostProcessRows, options.asyncPostRenderDelay);
		}

		function invalidatePostProcessingResults(row) {
			delete postProcessedRows[row];
			postProcessFromRow = Math.min(postProcessFromRow, row);
			postProcessToRow = Math.max(postProcessToRow, row);
			startPostProcessing();
		}

		function updateSummaryRow() {
			if (!options.showSummaryRow) {
				return;
			}

			getData().refresh();

			var cols =getColumns();
			for (var i = 0; i < cols.length; i++) {
				if (cols[i].id !== "indicator-icon") {
					var header = getSummaryRowColumn(cols[i].id);

					if (!cols[i].summaryTotalFormatter)
						continue;

					var groups = getData().getGroups();
					if (groups.length > 0) {
						var html = cols[i].summaryTotalFormatter(groups[0].totals,cols[i]);
						$(header).empty().html(html);
					} else {
						$(header).empty();
					}
				}
			}
		}

		function render() {
		if (!initialized) { return; }

			var visible = getVisibleRange();
			var rendered = getRenderedRange();

			// remove rows no longer in the viewport
			cleanupRows(rendered);

			// add new rows & missing cells in existing rows
			if (lastRenderedScrollLeft != scrollLeft) {
				cleanUpAndRenderCells(rendered);
			}

			// render missing rows
			renderRows(rendered);

			// Render frozen bottom rows
			if ( options.frozenBottom ) {
				renderRows({
					top: actualFrozenRow
					,bottom: getDataLength() - 1
					,leftPx: rendered.leftPx
					,rightPx: rendered.rightPx
				});
			}

			postProcessFromRow = visible.top;
			postProcessToRow = Math.min(options.enableAddRow ? getDataLength() : getDataLength() - 1, visible.bottom);
			startPostProcessing();

			lastRenderedScrollTop = scrollTop;
			lastRenderedScrollLeft = scrollLeft;
			h_render = null;
		}

		function handleHeaderRowScroll() {
			var scrollLeft = $headerRowScrollContainer[0].scrollLeft;
			if (scrollLeft != $viewportScrollContainerX[0].scrollLeft) {
				$viewportScrollContainerX[0].scrollLeft = scrollLeft;
			}
		}

		function handleMouseWheel(event, delta, deltaX, deltaY) {
			scrollTop = $viewportScrollContainerY[0].scrollTop - (deltaY * options.rowHeight);
			scrollLeft = $viewportScrollContainerX[0].scrollLeft + (deltaX * 10);
			_handleScroll(true);
			event.preventDefault();
		}

		function handleScroll() {
			scrollTop = $viewportScrollContainerY[0].scrollTop;
			scrollLeft = $viewportScrollContainerX[0].scrollLeft;
			_handleScroll(false);
		}

		function _handleScroll(isMouseWheel) {
			var maxScrollDistanceY = $viewportScrollContainerY[0].scrollHeight - $viewportScrollContainerY[0].clientHeight;
			var maxScrollDistanceX = $viewportScrollContainerY[0].scrollWidth - $viewportScrollContainerY[0].clientWidth;

			// Ceiling the max scroll values
			if (scrollTop > maxScrollDistanceY) {
				scrollTop = maxScrollDistanceY;
			}
			if (scrollLeft > maxScrollDistanceX) {
				scrollLeft = maxScrollDistanceX;
			}

			var vScrollDist = Math.abs(scrollTop - prevScrollTop);
			var hScrollDist = Math.abs(scrollLeft - prevScrollLeft);

			if (hScrollDist) {
				prevScrollLeft = scrollLeft;

				$viewportScrollContainerX[0].scrollLeft = scrollLeft;
				$headerScrollContainer[0].scrollLeft = scrollLeft;
				$topPanelScroller[0].scrollLeft = scrollLeft;
				$headerRowScrollContainer[0].scrollLeft = scrollLeft;
				$summaryRowScrollContainer[0].scrollLeft = scrollLeft;

				if (options.frozenColumn > -1) {
					if ( hasFrozenRows ) {
						$viewportTopR[0].scrollLeft = scrollLeft;
					}
				} else {
					if ( hasFrozenRows ) {
						$viewportTopL[0].scrollLeft = scrollLeft;
					}
				}
			}

			if (vScrollDist) {
				vScrollDir = prevScrollTop < scrollTop ? 1 : -1;
				prevScrollTop = scrollTop

				if ( isMouseWheel ) {
					$viewportScrollContainerY[0].scrollTop = scrollTop;
				}

				if ( options.frozenColumn > -1 ) {
					if ( hasFrozenRows && !options.frozenBottom ) {
						$viewportBottomL[0].scrollTop = scrollTop;
					} else {
						$viewportTopL[0].scrollTop = scrollTop;
					}
				}

				// switch virtual pages if needed
				if (vScrollDist < viewportH) {
					scrollTo(scrollTop + offset);
				} else {
					var oldOffset = offset;
					if (h == viewportH) {
						page = 0;
					} else {
						page = Math.min(n - 1, Math.floor(scrollTop * ((th - viewportH) / (h - viewportH)) * (1 / ph)));
					}
					offset = Math.round(page * cj);
					if (oldOffset != offset) {
						invalidateAllRows();
					}
				}
			}

			if (hScrollDist || vScrollDist) {
				if (h_render) {
				clearTimeout(h_render);
				}

				if (Math.abs(lastRenderedScrollTop - scrollTop) > 20 ||
					Math.abs(lastRenderedScrollLeft - scrollLeft) > 20) {
					if (options.forceSyncScrolling || (
						Math.abs(lastRenderedScrollTop - scrollTop) < viewportH &&
						Math.abs(lastRenderedScrollLeft - scrollLeft) < viewportW)) {
						render();
					} else {
						h_render = setTimeout(render, 50);
					}

				trigger(self.onViewportChanged, {});
				}
			}

			trigger(self.onScroll, {
				scrollLeft: scrollLeft,
				scrollTop: scrollTop
			});
		}

		function asyncPostProcessRows() {
			while (postProcessFromRow <= postProcessToRow) {
				var row = (vScrollDir >= 0) ? postProcessFromRow++ : postProcessToRow--;
				var cacheEntry = rowsCache[row];
				if (!cacheEntry || row >= getDataLength()) {
					continue;
				}

				if (!postProcessedRows[row]) {
					postProcessedRows[row] = {};
				}

				ensureCellNodesInRowsCache(row);
				for (var columnIdx in cacheEntry.cellNodesByColumnIdx) {
					if (!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(columnIdx)) {
						continue;
					}

					columnIdx = columnIdx | 0;

					var m = columns[columnIdx];
					if (m.asyncPostRender && !postProcessedRows[row][columnIdx]) {
						var node = cacheEntry.cellNodesByColumnIdx[columnIdx];
						if (node) {
							m.asyncPostRender(node, row, getDataItem(row), m);
						}
						postProcessedRows[row][columnIdx] = true;
					}
				}

				h_postrender = setTimeout(asyncPostProcessRows, options.asyncPostRenderDelay);
				return;
			}
		}

		function addCellCssStyles(key, hash) {
		if (cellCssClasses[key]) {
				throw "addCellCssStyles: cell CSS hash with key '" + key + "' already exists.";
			}

			cellCssClasses[key] = hash;

			var node;
			for (var row in rowsCache) {
				if (hash[row]) {
					for (var columnId in hash[row]) {
						node = getCellNode(row, getColumnIndex(columnId));
						if (node) {
						$(node).addClass(hash[row][columnId]);
							if (key==options.selectedCellCssClass)
								$(node).addClass(key).closest(".slick-row").addClass(key);
						}
					}
				}
			}
		}

		function removeCellCssStyles(key) {
			if (!cellCssClasses[key]) {
				return;
			}

			var node;
			for (var row in rowsCache) {
				if (cellCssClasses[key][row]) {
					for (var columnId in cellCssClasses[key][row]) {
						node = getCellNode(row, getColumnIndex(columnId));
						if (node) {
							$(node).removeClass(cellCssClasses[key][row][columnId]);
							if (key==options.selectedCellCssClass)
								$(node).removeClass(key).closest(".slick-row").removeClass(key);
						}
					}
				}
			}

			delete cellCssClasses[key];
		}

		function setCellCssStyles(key, hash) {
			removeCellCssStyles(key);
			addCellCssStyles(key, hash);
		}

		//////////////////////////////////////////////////////////////////////////////////////////////
		// Interactivity

		function handleDragInit(e, dd) {
			var cell = getCellFromEvent(e);
			if (!cell || !cellExists(cell.row, cell.cell)) {
				return false;
			}

			retval = trigger(self.onDragInit, dd, e);
			if (e.isImmediatePropagationStopped()) {
				return retval;
			}

			// if nobody claims to be handling drag'n'drop by stopping immediate propagation,
			// cancel out of it
			return false;
		}

		function handleDragStart(e, dd) {
			var cell = getCellFromEvent(e);
			if (!cell || !cellExists(cell.row, cell.cell)) {
				return false;
			}

			var retval = trigger(self.onDragStart, dd, e);
			if (e.isImmediatePropagationStopped()) {
				return retval;
			}

			return false;
		}

		function handleDrag(e, dd) {
			return trigger(self.onDrag, dd, e);
		}

		function handleDragEnd(e, dd) {
			trigger(self.onDragEnd, dd, e);
		}

		function handleKeyDown(e) {
			trigger(self.onKeyDown, {}, e);
			var handled = e.isImmediatePropagationStopped();
			if (!handled) {
				if (!e.shiftKey && !e.altKey && !e.ctrlKey) {
					if (e.which == 27) {
						if (!getEditorLock().isActive()) {
							return; // no editing mode to cancel, allow bubbling and default processing (exit without cancelling the event)
						}
						cancelEditAndSetFocus();
					}
					else if (e.which == 37) {
						navigateLeft();
					}
					else if (e.which == 39) {
						navigateRight();
					}
					else if (e.which == 38) {
						navigateUp();
					}
					else if (e.which == 40) {
						navigateDown();
					}
					else if (e.which == 9) {	//tab right
						navigateNext();
					}
					else if (e.which == 34) {	//page down
						navigatePageDown();
					}
					else if (e.which == 33) {	//page up
						navigatePageUp();
					}
					else if (e.which == 13) {
						if (options.editable) {
							if (currentEditor) {
								// adding new row
								if (activeRow === getDataLength()) {
									navigateDown();
								}
								else {
									commitEditAndSetFocus();
								}
							} else {
								if (getEditorLock().commitCurrentEdit()) {
									makeActiveCellEditable();
								}
							}
						}
					}
					else
						return;
				}
				else if (e.which == 9 && e.shiftKey && !e.ctrlKey && !e.altKey) {
					navigatePrev();
				}
				else
					return;
			}

			//IE issue with focus and keys not working
			if (currentEditor === null) {
				setFocus();
			}
			
			// the event has been handled so don't let parent element (bubbling/propagation) or browser (default) handle it
			e.stopPropagation();
			e.preventDefault();
			try {
				e.originalEvent.keyCode = 0; // prevent default behaviour for special keys in IE browsers (F3, F5, etc.)
			}
			catch (error) { } // ignore exceptions - setting the original event's keycode throws access denied exception for "Ctrl" (hitting control key only, nothing else), "Shift" (maybe others)
		}

		function handleClick(e) {
			if (!currentEditor) {
				// if this click resulted in some cell child node getting focus,
				// don't steal it back - keyboard events will still bubble up
				if (e.target != document.activeElement) {
					setFocus();
				}
			}

			var cell = getCellFromEvent(e);
			if (!cell || (currentEditor !== null && activeRow == cell.row && activeCell == cell.cell)) {
				return;
			}

			trigger(self.onClick, { row: cell.row, cell: cell.cell }, e);
			if (e.isImmediatePropagationStopped()) {
				return;
			}

			if (canCellBeActive(cell.row, cell.cell)) {
				if (!getEditorLock().isActive() || getEditorLock().commitCurrentEdit()) {
				scrollRowIntoView(cell.row, false);
				setActiveCellInternal(getCellNode(cell.row, cell.cell), (cell.row === getDataLength()) || options.autoEdit, true);
				}
			}

			handleCellChange(cell, true);
		}

		function handleCellChange(cell, forceSelect) {
			//In non edit mode a click selects the row.
			if ((!options.editable || options.selectRowInEditMode) && (forceSelect || options.enableCellNavigation)) {
				if ($(getCellNode(cell.row, cell.cell)).find(".drilldown").length>0)	//ignore drill down columns...
					return;

				if (options.multiSelect) {
					//If ctrl is down add to the
					setSelectedRows([cell.row]);
				}
				else {
				var empty = [];
				setSelectedRows(empty.concat(cell.row));
				}
			}
		}

		function handleContextMenu(e) {
			var $cell = $(e.target).closest(".slick-cell", $canvas);
			if ($cell.length === 0) { return; }

			// are we editing this cell?
			if (activeCellNode === $cell[0] && currentEditor !== null) { return; }

			trigger(self.onContextMenu, {}, e);
		}

		function handleDblClick(e) {
			var cell = getCellFromEvent(e);
			if (!cell || (currentEditor !== null && activeRow == cell.row && activeCell == cell.cell)) {
				return;
			}

			trigger(self.onDblClick, { row: cell.row, cell: cell.cell }, e);
			if (e.isImmediatePropagationStopped()) {
				return;
			}

			if (options.editable) {
				gotoCell(cell.row, cell.cell, true);
			}
		}

		function handleHeaderContextMenu(e) {
			var $header = $(e.target).closest(".slick-header-column", ".slick-header-columns");
			var column = $header && columns[self.getColumnIndex($header.data("columnId"))];
			trigger(self.onHeaderContextMenu, { column: column }, e);
		}

		function handleHeaderClick(e) {
			var $header = $(e.target).closest(".slick-header-column", ".slick-header-columns");
			var column = $header && columns[self.getColumnIndex($header.data("columnId"))];
			if (column) {
				trigger(self.onHeaderClick, { column: column }, e);
			}
		}

		function toggleHover(rowNode, show) {
			if ( (options.frozenColumn > -1) && (rowNode) ) {
				var rowNo = $(rowNode).attr("row"),
					rows = $container.find('.slick-row[row="'+rowNo+'"]');

				if (show)
					rows.addClass("slick-row-hover");
				else
					rows.removeClass("slick-row-hover");
			}
		}

		function handleRowMouseEnter(e) {
			toggleHover(e.currentTarget, true);
		}

		function handleRowMouseLeave(e) {
			toggleHover(e.currentTarget, false);
		}

		function handleMouseEnter(e) {
			trigger(self.onMouseEnter, {}, e);
		}

		function handleMouseLeave(e) {
			trigger(self.onMouseLeave, {}, e);
		}

		function cellExists(row, cell) {
			return !(row < 0 || row >= getDataLength() || cell < 0 || cell >= columns.length);
		}

		function getCellFromPoint(x, y) {
			var row = Math.floor( getRowFromPosition( y + offset ) );
			var cell = 0;

			var w = 0;
			for (var i = 0; i < columns.length && w < x; i++) {
				w += columns[i].width;
				cell++;
			}

			if (cell < 0) {
				cell = 0;
			}

			return { row: row, cell: cell - 1 };
		}

		function getCellFromNode(cellNode) {
			// read column number from .l<columnNumber> CSS class
			var node = cellNode;
			if (!cellNode.className) {
				node = cellNode[0];
			}
			var cls = /l\d+/.exec(node.className);
			if (!cls) {
				throw "getCellFromNode: cannot get cell - " + node.className;
			}
			return parseInt(cls[0].substr(1, cls[0].length - 1), 10);
		}

		function getCellFromEvent(e) {
			var $cell = $(e.target).closest(".slick-cell", $canvas);
			if (!$cell.length)
				return null;

			return {
				row: $cell.parent().attr("row") | 0,
				cell: getCellFromNode($cell[0])
			};
		}

		function getCellNodeBox(row, cell) {
			if (!cellExists(row, cell))
				return null;

			var y1 = rowPositionCache[row].top - offset;
			var y2 = y1 + rowPositionCache[row].height - 1;
			var x1 = 0;
			for (var i = 0; i < cell; i++) {
				x1 += columns[i].width;
			}
			var x2 = x1 + columns[cell].width;

			if (options.frozenColumn > -1 && cell > options.frozenColumn) {
				x1 -= parseInt($paneHeaderR.css("left"));
				x2 -= parseInt($paneHeaderR.css("left"));
			}

			return {
				top: y1,
				left: x1,
				bottom: y2,
				right: x2
			};
		}

		//////////////////////////////////////////////////////////////////////////////////////////////
		// Cell switching

		function resetActiveCell() {
			setActiveCellInternal(null, false);
		}

		function setFocus() {
			if (tabbingDirection == -1) {
				$focusSink[0].focus();
			} else {
				$focusSink2[0].focus();
			}
		}

		function setActiveCellInternal(newCell, editMode, isClick) {
			if (activeCellNode !== null && rowsCache[activeRow] !== undefined) {
				makeActiveCellNormal();
				$(activeCellNode).removeClass("active");
				$(rowsCache[activeRow].rowNode).removeClass("active");
			}

			var activeCellChanged = (activeCellNode !== newCell),
				oldActiveRow = activeRow;

			activeCellNode = newCell;

			if (activeCellNode != null) {
				activeRow = parseInt($(activeCellNode).parent().attr("row"));
				activeCell = activePosX = getCellFromNode(activeCellNode);

				$(activeCellNode).addClass("active");
				$(rowsCache[activeRow].rowNode).addClass("active");

				if (options.editable && editMode && isCellPotentiallyEditable(activeRow, activeCell)) {
					clearTimeout(h_editorLoader);

					if (options.asyncEditorLoading) {
						h_editorLoader = setTimeout(function () { makeActiveCellEditable(); }, options.asyncEditorLoadDelay);
					}
					else {
						makeActiveCellEditable(null, isClick);
					}
				}
				else {
					setFocus();
				}
			}
			else {
				activeRow = activeCell = null;
			}

			if (activeCellChanged) {
				trigger(self.onActiveCellChanged, getActiveCell());
			}
			if (oldActiveRow != activeRow) {
				trigger(self.onActiveRowChanged, {previousRow: oldActiveRow, activeRow: activeRow, activeCell: getActiveCell()});
			}
		}

		function isCellPotentiallyEditable(row, cell) {
			// is the data for this row loaded?
			if (row < getDataLength() && !getDataItem(row)) {
				return false;
			}

			// are we in the Add New row? can we create new from this cell?
			if (columns[cell].cannotTriggerInsert && row >= getDataLength()) {
				return false;
			}

			// does this cell have an editor?
			if (!getEditor(row, cell)) {
				return false;
			}

			// Handle expression based Non Editable Cells.
			var $activeCell = $(activeCellNode);
			if ($activeCell.children("div").hasClass("uneditable")) {
				return false;
			}

			return true;
		}

		function makeActiveCellNormal() {
			if (!currentEditor) { return; }
			trigger(self.onBeforeCellEditorDestroy, { editor: currentEditor });
			currentEditor.destroy();
			currentEditor = null;

			if (activeCellNode) {
				$(activeCellNode).removeClass("editable");

				var d = getDataItem(activeRow);
				if (d) {
					var column = columns[activeCell],
						formatter = getFormatter(activeRow, column);
					activeCellNode[0].innerHTML = formatter(activeRow, activeCell, getDataItemValueForColumn(d, column.field), column, getDataItem(activeRow), getOptions(), self);
					invalidatePostProcessingResults(activeRow);
				}
			}

			getEditorLock().deactivate(editController);
		}

		function makeActiveCellEditable(editor, isClick) {
			if (!activeCellNode) { return; }
			if (!options.editable) {
			return;
			}

			$("#inforTooltip").stop().fadeOut();

			// cancel pending async call if there is one
			clearTimeout(h_editorLoader);

			if (!isCellPotentiallyEditable(activeRow, activeCell)) {
				return;
			}

			var columnDef = columns[activeCell],
				item = getDataItem(activeRow),
				$activeCell = $(activeCellNode);

			if (trigger(self.onBeforeEditCell, { row: activeRow, cell: activeCell, item: item, column: columnDef }) === false) {
				setFocus();
				return;
			}

			getEditorLock().activate(editController);
			if ($activeCell.children("div").hasClass("uneditable")) {
				$activeCell.removeClass("editable");
			}
			$activeCell.addClass("editable").removeClass("error");

			// don't clear the cell if a custom editor is passed through
			if (!editor) {
				activeCellNode[0].innerHTML = "";
			}

			currentEditor = new (editor || getEditor(activeRow, activeCell))({
				grid: self,
				gridPosition: absBox($container[0]),
				position: absBox(activeCellNode[0]),
				container: activeCellNode,
				column: columnDef,
				item: item || {},
				commitChanges: commitEditAndSetFocus,
				cancelChanges: cancelEditAndSetFocus
			});

			if (item) {
				currentEditor.loadValue(item, isClick);
			}

			if (currentEditor) {
				serializedEditorValue = currentEditor.serializeValue();

				if (currentEditor.position) {
					handleActiveCellPositionChange();
				}
			}
		}

		function commitEditAndSetFocus() {
			// if the commit fails, it would do so due to a validation error
			// if so, do not steal the focus from the editor
			if (getEditorLock().commitCurrentEdit()) {
				setFocus();

				if (options.autoEdit) {
					navigateDown();
				}
			}
		}

		function cancelEditAndSetFocus() {
			if (getEditorLock().cancelCurrentEdit()) {
				setFocus();
			}
		}

		function absBox(elem) {
			if (!elem) {
				return {top: -1, left: -1, bottom: 0, right: 0, width: 0, height: 0, visible: false };
			}

			var box = { top: elem.offsetTop, left: elem.offsetLeft, bottom: 0, right: 0, width: $(elem).outerWidth(), height: $(elem).outerHeight(), visible: true };
			box.bottom = box.top + box.height;
			box.right = box.left + box.width;

			// walk up the tree
			var offsetParent = elem.offsetParent;
			while ((elem = elem.parentNode) != document.body && elem != undefined) {
				if (box.visible && elem.scrollHeight != elem.offsetHeight && $(elem).css("overflowY") != "visible")
					box.visible = box.bottom > elem.scrollTop && box.top < elem.scrollTop + elem.clientHeight;

				if (box.visible && elem.scrollWidth != elem.offsetWidth && $(elem).css("overflowX") != "visible")
					box.visible = box.right > elem.scrollLeft && box.left < elem.scrollLeft + elem.clientWidth;

				box.left -= elem.scrollLeft;
				box.top -= elem.scrollTop;

				if (elem === offsetParent) {
					box.left += elem.offsetLeft;
					box.top += elem.offsetTop;
					offsetParent = elem.offsetParent;
				}

				box.bottom = box.top + box.height;
				box.right = box.left + box.width;
			}

			return box;
		}

		function getActiveCellPosition() {
			return absBox(activeCellNode);
		}

		function getGridPosition() {
			return absBox($container[0])
		}

		function handleActiveCellPositionChange() {
			if (!activeCellNode) return;
			var cellBox;

			trigger(self.onActiveCellPositionChanged, {});

			if (currentEditor) {
				cellBox = cellBox || getActiveCellPosition();
				if (currentEditor.show && currentEditor.hide) {
					if (!cellBox.visible)
						currentEditor.hide();
					else
						currentEditor.show();
				}

				if (currentEditor.position)
					currentEditor.position(cellBox);
			}
		}

		function getCellEditor() {
			return currentEditor;
		}

		function getActiveCell() {
			if (!activeCellNode)
				return null;
			else
				return { row: activeRow, cell: activeCell };
		}

		function getActiveCellNode() {
			return activeCellNode;
		}

		function scrollCellIntoView(row, cell, doPaging) {
			// Don't scroll to frozen cells
			if ( cell <= options.frozenColumn ) {
				return;
			}

			if ( row < actualFrozenRow ) {
				scrollRowIntoView(row, doPaging);
			}

			var colspan = getColspan(row, cell);
			var left = columnPosLeft[cell],
				right = columnPosRight[cell + (colspan > 1 ? colspan - 1 : 0)],
				scrollRight = scrollLeft + $viewportScrollContainerX.width();

			if (left < scrollLeft) {
				$viewportScrollContainerX.scrollLeft(left);
				handleScroll();
				render();
			} else if (right > scrollRight) {
				$viewportScrollContainerX.scrollLeft(Math.min(left, right - $viewportScrollContainerX[0].clientWidth));
				handleScroll();
				render();
			}
		}

		function scrollRowIntoView(row, doPaging) {
			if (!rowPositionCache[row]) {
				return;
			}
			var rowAtTop = rowPositionCache[row].top,
				rowAtBottom = rowPositionCache[row].bottom - viewportH + (viewportHasHScroll ? scrollbarDimensions.height : 0);

			// need to page down?
			if (rowPositionCache[row].bottom > scrollTop + viewportH + offset) {
				scrollTo(doPaging ? rowAtTop : rowAtBottom);
				render();
			}
			// or page up?
			else if (rowPositionCache[row].top < scrollTop + offset) {
				scrollTo(doPaging ? rowAtBottom : rowAtTop);
				render();
			}
		}

		function scrollRowToTop(row) {
		scrollTo( rowPositionCache[row].top );
		render();
		}

		function getColspan(row, cell) {
			var metadata = data.getItemMetadata && data.getItemMetadata(row);
			if (!metadata || !metadata.columns) {
				return 1;
			}

			var columnData = metadata.columns[columns[cell].id] || metadata.columns[cell];
			var colspan = (columnData && columnData.colspan);
			if (colspan === "*") {
				colspan = columns.length - cell;
			} else {
				colspan = colspan || 1;
			}
			return (colspan || 1);
		}

		function findFirstFocusableCell(row) {
			var cell = 0;
			while (cell < columns.length) {
				if (canCellBeActive(row, cell)) {
					return cell;
				}
				cell += getColspan(row, cell);
			}
			return null;
		}

		function findLastFocusableCell(row) {
			var cell = 0;
			var lastFocusableCell = null;
			while (cell < columns.length) {
				if (canCellBeActive(row, cell)) {
					lastFocusableCell = cell;
				}
				cell += getColspan(row, cell);
			}
			return lastFocusableCell;
		}

		function gotoRight(row, cell, posX) {
			if (cell >= columns.length) {
				return null;
			}

			do {
				cell += getColspan(row, cell);
			}
			while (cell < columns.length && !canCellBeActive(row, cell));

			if (cell < columns.length) {
				return {
					"row": row,
					"cell": cell,
					"posX": cell
				};
			}
			return null;
		}

		function gotoLeft(row, cell, posX) {
			if (cell <= 0) {
				return null;
			}

			var firstFocusableCell = findFirstFocusableCell(row);
			if (firstFocusableCell === null || firstFocusableCell >= cell) {
				return null;
			}

			var prev = {
				"row": row,
				"cell": firstFocusableCell,
				"posX": firstFocusableCell
			};
			var pos;
			while (true) {
				pos = gotoRight(prev.row, prev.cell, prev.posX);
				if (!pos) {
					return null;
				}
				if (pos.cell >= cell) {
					return prev;
				}
				prev = pos;
			}
		}

		function gotoDown(row, cell, posX) {
			var prevCell;
			while (true) {
				if (++row >= getDataLength() + (options.enableAddRow ? 1 : 0)) {
					return null;
				}

				prevCell = cell = 0;
				while (cell <= posX) {
					prevCell = cell;
					cell += getColspan(row, cell);
				}

				if (canCellBeActive(row, prevCell)) {
					return {
						"row": row,
						"cell": prevCell,
						"posX": posX
					};
				}
			}
		}

		function gotoUp(row, cell, posX) {
			var prevCell;
			while (true) {
				if (--row < 0) {
					return null;
				}

				prevCell = cell = 0;
				while (cell <= posX) {
					prevCell = cell;
					cell += getColspan(row, cell);
				}

				if (canCellBeActive(row, prevCell)) {
					return {
						"row": row,
						"cell": prevCell,
						"posX": posX
					};
				}
			}
		}

		function gotoNext(row, cell, posX) {
			var pos = gotoRight(row, cell, posX);
			if (pos) {
				return pos;
			}

			var firstFocusableCell = null;
			while (++row < getDataLength() + (options.enableAddRow ? 1 : 0)) {
				firstFocusableCell = findFirstFocusableCell(row);
				if (firstFocusableCell !== null) {
					return {
						"row": row,
						"cell": firstFocusableCell,
						"posX": firstFocusableCell
					};
				}
			}
			return null;
		}

		function gotoPrev(row, cell, posX) {
			var pos;
			var lastSelectableCell;
			while (!pos) {
				pos = gotoLeft(row, cell, posX);
				if (pos) {
					break;
				}
				if (--row < 0) {
					return null;
				}

				cell = 0;
				lastSelectableCell = findLastFocusableCell(row);
				if (lastSelectableCell !== null) {
					pos = {
						"row": row,
						"cell": lastSelectableCell,
						"posX": lastSelectableCell
					};
				}
			}
			return pos;
		}

		function navigateRight() {
			navigate("right");
		}

		function navigateLeft() {
			navigate("left");
		}

		function navigateDown() {
			navigate("down");
		}

		function navigateUp() {
			navigate("up");
		}

		function navigateNext() {
			navigate("next");
		}

		function navigatePrev() {
			navigate("prev");
		}

		function navigatePageDown() {
		var range = getVisibleRange();
		scrollRowIntoView(range.top + (range.bottom-range.top), true);
		}

		function navigatePageUp() {
		var range = getVisibleRange();
		scrollRowIntoView(range.top - (range.bottom-range.top), true);
		}

		function moveDown() {
			var selectedRows = getSelectedRows();

			var rowId = 0;
			if(selectedRows[0]!=undefined)
				rowId=selectedRows[0]+1;

			if (rowId>getDataLength()-1)
				return;

			scrollRowIntoView(rowId, true);
			setSelectedRows([rowId]);
		}

		function moveUp() {
			var selectedRows = getSelectedRows();

			var rowId = 0;
			if(selectedRows[0]!=undefined)
				rowId=selectedRows[0]-1;

			if (rowId<0)
				return;

			scrollRowIntoView(rowId, true);
			setSelectedRows([rowId]);
		}

		function navigate(dir) {

			if (!activeCellNode || !options.enableCellNavigation) { return; }
			if (!getEditorLock().commitCurrentEdit()) { return; }

			setFocus();

			var tabbingDirections = {
					"up": -1,
					"down": 1,
					"left": -1,
					"right": 1,
					"prev": -1,
					"next": 1
				};

			tabbingDirection = tabbingDirections[dir]

			var stepFunctions = {
				"up": gotoUp,
				"down": gotoDown,
				"left": gotoLeft,
				"right": gotoRight,
				"prev": gotoPrev,
				"next": gotoNext
			};

			var stepFn = stepFunctions[dir];
			var pos = stepFn(activeRow, activeCell, activePosX);
			if (pos) {
				if ( hasFrozenRows && options.frozenBottom & pos.row == getDataLength() ) {
					return;
				}

				var isAddNewRow = (pos.row == getDataLength());

				if ( ( !options.frozenBottom && pos.row >= actualFrozenRow )
					|| ( options.frozenBottom && pos.row < actualFrozenRow )
				) {
					scrollCellIntoView(pos.row, pos.cell, !isAddNewRow);
				}

				setActiveCellInternal(getCellNode(pos.row, pos.cell), isAddNewRow || options.autoEdit);
				activePosX = pos.posX;
				return true;
			} else {
				setActiveCellInternal(getCellNode(activeRow, activeCell), (activeRow == getDataLength()) || options.autoEdit);
				return false;
			}
		}

		function getCellNode(row, cell) {
			if (rowsCache[row]) {
				ensureCellNodesInRowsCache(row);
				return rowsCache[row].cellNodesByColumnIdx[cell];
			}
			return null;
		}

		function setActiveCell(row, cell, enterEditMode) {
			if (!initialized) { return; }

			if (row > getDataLength() || row < 0 || cell >= columns.length || cell < 0) {
				return;
			}

			if (!options.enableCellNavigation) {
				return;
			}

			scrollRowIntoView(row, false);
			setActiveCellInternal(getCellNode(row, cell), enterEditMode);
		}

		function canCellBeActive(row, cell) {
			if (!options.enableCellNavigation || row >= getDataLength() + (options.enableAddRow ? 1 : 0) || row < 0 || cell >= columns.length || cell < 0) {
				return false;
			}

			var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);
			if (rowMetadata && typeof rowMetadata.focusable === "boolean") {
				return rowMetadata.focusable;
			}

			var columnMetadata = rowMetadata && rowMetadata.columns;
			if (columnMetadata && columnMetadata[columns[cell].id] && typeof columnMetadata[columns[cell].id].focusable === "boolean") {
				return columnMetadata[columns[cell].id].focusable;
			}
			if (columnMetadata && columnMetadata[cell] && typeof columnMetadata[cell].focusable === "boolean") {
				return columnMetadata[cell].focusable;
			}

			return columns[cell].focusable;
		}

		function canRowBeSelected(row) {
			var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);
			if (rowMetadata && typeof rowMetadata.selectable === "boolean")
				return rowMetadata.selectable;

			return true;
		}

		function canCellBeSelected(row, cell) {
			if (row >= getDataLength() || row < 0 || cell >= columns.length || cell < 0) {
				return false;
			}

			var rowMetadata = data.getItemMetadata && data.getItemMetadata(row);
			if (rowMetadata && typeof rowMetadata.selectable === "boolean") {
				return rowMetadata.selectable;
			}

			var columnMetadata = rowMetadata && rowMetadata.columns && (rowMetadata.columns[columns[cell].id] || rowMetadata.columns[cell]);
			if (columnMetadata && typeof columnMetadata.selectable === "boolean") {
				return columnMetadata.selectable;
			}

			return columns[cell].selectable;
		}

		function gotoCell(row, cell, forceEdit) {
			if (!initialized) { return; }
			if (!canCellBeActive(row, cell)) {
				return;
			}

			if (!getEditorLock().commitCurrentEdit()) { return; }

			scrollRowIntoView(row, false);

			var newCell = getCellNode(row, cell);

			// if selecting the 'add new' row, start editing right away
			setActiveCellInternal(newCell, forceEdit || (row === getDataLength()) || options.autoEdit);

			// if no editor was created, set the focus back on the grid
			if (!currentEditor) {
				setFocus();
			}
		}


		//////////////////////////////////////////////////////////////////////////////////////////////
		// IEditor implementation for the editor lock

		function commitCurrentEdit() {
			var item = getDataItem(activeRow),
			column, previousValue;

			if (currentEditor) {
					if (activeCell) {
						column = columns[activeCell],
						previousValue = (item ? item[column.field] : undefined);
						if (currentEditor.previousValue) {
							previousValue = currentEditor.previousValue;	//select editor has auto commit;
						}
					}
					executeValidator(currentEditor, item, column, activeRow, activeCell);
					if (currentEditor.isValueChanged()) {
						var cellValue = (currentEditor.getValuePairs ? currentEditor.getValuePairs() : currentEditor.serializeValue());
						if (activeRow < getDataLength()) {
							var editCommand = {
								row: activeRow,
								cell: activeCell,
								editor: currentEditor,
								serializedValue: currentEditor.serializeValue(),
								prevSerializedValue: serializedEditorValue,
								execute: function () {
									this.editor.applyValue(item, this.serializedValue);
									updateRow(this.row);
								},
								undo: function () {
									this.editor.applyValue(item, this.prevSerializedValue);
									updateRow(this.row);
								}
							};

							if (options.editCommandHandler) {
								makeActiveCellNormal();
								options.editCommandHandler(item, column, editCommand);
							}
							else {
								editCommand.execute();
								if ($(activeCellNode).hasClass("error")) {
									$("#inforTooltip").stop().hide();
								}
								makeActiveCellNormal();
							}

							trigger(self.onCellChange, {
								row: activeRow,
								cell: activeCell,
								item: item,
								cellValue : cellValue,
								previousCellValue: previousValue
							});
						}
						else {
							var newItem = {};
							currentEditor.applyValue(newItem, currentEditor.serializeValue());
							makeActiveCellNormal();
							trigger(self.onAddNewRow, { item: newItem, column: column });
						}

						// check whether the lock has been re-acquired by event handlers
						return !getEditorLock().isActive();
					}
					makeActiveCellNormal();
			}
			return true;
		}

		function conditionalAutoCommit() {
			setTimeout(function() {
				var focus = $("*:focus"),
					classes = (focus == undefined ? "" : focus.attr("class"));

				if (classes==undefined)
					classes="";
					
				if (focus.is(".focus-sink")) {
				    return;
				}
				
				if (focus.parent().hasClass("slick-cell"))
					return;
				
				if ($("#inforDatePicker-div").is(":visible"))
					return;

				if ($("#lookupGridDivId").is(":visible"))
					return;

				if (classes!=undefined  && classes.indexOf("inforDate") != -1 && focus.closest(".slick-headerrow-column").length!=1)
					return;

				//select cell logic
				if (focus.closest(".slick-cell").length==1)
					return;

				if (classes.indexOf("inforDropDownList") != -1)
					return;

				if (classes.indexOf("ui-state-hover") != -1)
					return;

				if (classes.indexOf("inforTempInput") != -1)
					return;

				if (classes.indexOf("grid-canvas") != -1)
					return;

				if ($(".inforMenu:visible").length>0)
					return;

				//lookup fly out logic
				if (classes.indexOf("inforTriggerButton") != -1)
					return;

				if (classes.indexOf("grid-canvas") != -1)
					return;

				if (classes.indexOf("inforTempInput") != -1)
					return;

				if (classes.indexOf("inforLookupField") != -1)
					return;

				if (focus.closest(".inforGridCommentPopup").length==1)
					return;

				commitCurrentEdit();
			},150);
		}

		function cancelCurrentEdit() {
			makeActiveCellNormal();
			return true;
		}

		function rowsToRanges(rows) {
			var ranges = [];
			var lastCell = columns.length - 1;
			for (var i = 0; i < rows.length; i++) {
				ranges.push(new Slick.Range(rows[i], 0, rows[i], lastCell));
			}
			return ranges;
		}

		function getSelectedRows() {
			return selectedRows;
		}

		function setSelectedRows(rows, active) {
			selectionModel.setSelectedRanges(rowsToRanges(rows), active);
		}

		function selectAllRows() {
			var rows = [],
				len = getDataLength();

			for (var i = 0; i < len; i++) {
				rows.push(i);
			}
			setSelectedRows(rows);
		}

		//////////////////////////////////////////////////////////////////////////////////////////////
		// Filtering
		/* Update the Header For Filtering. */
		function updateFilterRow() {
			if (!options.showHeaderRow)
				return;

			for (var i = 0; i < columns.length; i++) {

				//ignore these columns:
				if ($.inArray(columns[i].id, ['selector', 'indicator-icon', 'checkbox-selector', 'drilldown'])>= 0) {
					//do something
					continue;
				}

				if (columns[i].filterType==undefined)
					continue;

				var filterType = columns[i].filterType();

				switch(filterType)
				{
				case "TextFilter":
					addTextFilterColumn(self,columns[i]);
					break;
				case "DateFilter":
					addDateFilterColumn(self,columns[i]);
					break;
				case "SelectFilter":
					addSelectFilterColumn(self,columns[i]);
				break;
				case "IntegerFilter":
					addIntegerFilterColumn(self,columns[i],false);
					break;
				case "DecimalFilter":
					addIntegerFilterColumn(self,columns[i],true);
					break;
				case "PercentFilter":
					addIntegerFilterColumn(self,columns[i],true);
					break;	
				case "CheckboxFilter":
					addCheckboxFilterColumn(self,columns[i]);
					break;
				case "ColumnContentsFilter":
					addColumnContentsFilterColumn(self,columns[i]);
					break;
				default:
				continue;
				}
			}
		}

		/*Append/move the filter button on the page*/
		function showFilterButton(visible) {
			if ($filterMenuButton==undefined) {

				$filterMenuButton = $("<button type='button' class='inforFilterMenuButton' title='"+Globalize.localize("FilterMenu")+"'><span></span></button>");
				if (Globalize.culture().isRTL)
					$filterMenuButton.addClass("inforRTLFlip");

				$container.prepend($filterMenuButton);
				appendFilterMenu();

				var leftOffset = -20;

				if (Globalize.culture().isRTL)
					leftOffset = 5;

				$filterMenuButton.inforContextMenu({
					menu: filterMenuId,
					invokeMethod: 'toggle',
					positionBelowElement: true,
					offsetLeft: leftOffset,
					offsetTop: -4,
					beforeOpening: setMenuChecked
				},
					function(action, el, pos, item) {
						if (action=="rf")
							applyFilter();

						if (action=="fwr")
							toggleFilterResults();

						if (action=="cf")
							clearFilter();

						if (action=="sf")
							savedFilters();
				});
			}

			//might be hidden if user selected the menu option...
			if ($filterMenuButton) {
				$filterMenuButton.css("visibility", (visible ? "visible": "hidden"));
			}
		}

		function savedFilters() {
			//not yet implemented : http://jira.infor.com/browse/HFC-110
		}

		function toggleFilterResults() {
			filterInResults = !filterInResults;
			personalizationInfo.filterInResults = filterInResults;
			trigger(self.onPersonalizationChanged, getGridPersonalizationInfo('FilterInResults'));
		}

		function getFilter() {
			return columnFilters;
		}

		function applyFilter(initialColumnFilters) {
			var isSupplied = false;

			if (isFiltering)
				return;

			columnFilters = {};

			if (initialColumnFilters!=undefined) {
				columnFilters=initialColumnFilters;
				isSupplied = true;
			}

			if (isSupplied) {
				//set all the filter text
				for (columnId in columnFilters) {
					var $header = $(getHeaderRowColumn(columnId)),
						filterExpr = columnFilters[columnId],
						$filterButton = $header.find(".inforFilterButton")

					$header.find("input").val(filterExpr.value);
					$filterButton.attr("class","inforFilterButton").addClass(filterExpr.operator);

					if (filterExpr.filterType=="ColumnContentsFilter") {
						$filterButton.data("selections",filterExpr.value);
					}
				}
			}
			isFiltering = true;

			//loop through all the filter rows and update all filter values..
			for (var i = 0; i < columns.length; i++) {
				if (columns[i].filterType==undefined)
					continue;

				var columnId = columns[i].id;
				var $headerCol = $(getHeaderRowColumn(columnId));
				var filterType = columns[i].filterType();

				if ($headerCol.length==0) {
					continue;
				}

				if ($headerCol.find(".inforFilterButton").attr("class") == undefined) {
					continue;
				}

				var op = $headerCol.find(".inforFilterButton").attr("class").replace("inforFilterButton ","");
				var value = $headerCol.find("input").val();

				switch(filterType) {
					case "TextFilter":
						if (value!="" || op=="isEmpty" || op=="isNotEmpty") {
							var newObj = {value: value,
										operator: $headerCol.find(".inforFilterButton").attr("class").replace("inforFilterButton ",""),
										filterType: TextFilter()};
							columnFilters[columnId] = newObj;
						}
						break;
					case "DateFilter":
						if (value!="" || op=="isEmpty" || op=="isNotEmpty") {
							var newObj = {value: value,
										operator: $headerCol.find(".inforFilterButton").attr("class").replace("inforFilterButton ",""),
										filterType: DateFilter()};
							columnFilters[columnId] = newObj;
						}
						break;
					case "SelectFilter":
						if ($.trim(value)!="" || op=="isEmpty" || op=="isNotEmpty") {
							var select = $headerCol.find("select");
							var newObj = {value: (select.data("useCodes") ? select.getCode() : select.getValue()) ,
										operator: $headerCol.find(".inforFilterButton").attr("class").replace("inforFilterButton ",""),
										filterType: SelectFilter()};
							columnFilters[columnId] = newObj;
						}
						break;
					case "IntegerFilter":
						if (value!="" || op=="isEmpty" || op=="isNotEmpty") {
							var newObj = {value: value,
										operator: $headerCol.find(".inforFilterButton").attr("class").replace("inforFilterButton ",""),
										filterType: IntegerFilter()};
							columnFilters[columnId] = newObj;
						}
						break;
					case "DecimalFilter":
						if (value!="" || op=="isEmpty" || op=="isNotEmpty") {
							var newObj = {value: value,
										operator: $headerCol.find(".inforFilterButton").attr("class").replace("inforFilterButton ",""),
										filterType: DecimalFilter()};
							columnFilters[columnId] = newObj;
						}
						break;
					case "PercentFilter":
						if (value!="" || op=="isEmpty" || op=="isNotEmpty") {
							value = value / 100;
							var newObj = {value: value,
										operator: $headerCol.find(".inforFilterButton").attr("class").replace("inforFilterButton ",""),
										filterType: PercentFilter()};
							columnFilters[columnId] = newObj;
						}
						break;		
					case "CheckboxFilter":
						if (op!="eitherSelectedorNotSelected") {
							var newObj = {value: null,
										operator: op,
										filterType: CheckboxFilter()};
							columnFilters[columnId] = newObj;
						}
						break;
					case "ColumnContentsFilter":
						var selections = $headerCol.find(".inforFilterButton").data("selections");

						if (selections!=undefined) {
							var newObj = {value: selections,
										operator: op,
										filterType: ColumnContentsFilter()};
							columnFilters[columnId] = newObj;
						}
						break;
					default:
				}
			}

			dataView.setPagingOptions({filters: columnFilters, isFirstPage: true, sortColumns: personalizationInfo.sortColumns});
			
			if (!filterInResults) {
				dataView.requestNewPage("filter");
			}

			isFiltering = false;
			//scroll to top
			scrollRowIntoView(0, false);
			setSelectedRows([]);
		}

		function clearFilter() {
			getEditorLock().commitCurrentEdit();

			//clear text filters..
			$headerRow.find("input").val("");

			//clear the checkbox and othe rtypes of filters
			$headerRow.find(".inforFilterButton").each(function(){
				var $this = $(this);
				$this.removeClass();
				if ($this.data("filterType")==CheckboxFilter())
					$this.addClass('inforFilterButton eitherSelectedorNotSelected');

				if ($this.data("filterType")==TextFilter())
					$this.addClass('inforFilterButton contains');

				if ($this.data("filterType")==SelectFilter())
					$this.addClass('inforFilterButton equals');

				if ($this.data("filterType")==DateFilter())
					$this.addClass('inforFilterButton equals');

				if ($this.data("filterType")==IntegerFilter())
					$this.addClass('inforFilterButton equals');

				if ($this.data("filterType")==DecimalFilter())
					$this.addClass('inforFilterButton equals');
					
				if ($this.data("filterType")==PercentFilter())
					$this.addClass('inforFilterButton equals');	

				if ($this.data("filterType")==ColumnContentsFilter())
				{
					$this.addClass('inforFilterButton contains');
					$this.data("selections",null);
				}
			});

			//clear the filter operators
			columnFilters = {};
			dataView.refresh();

			if (!filterInResults) {
				var pageInfo = dataView.getPagingInfo();
				pageInfo.filters = {};
				dataView.setPagingOptions(pageInfo);
				dataView.requestNewPage("clearFilter");
			}
		}

		var currentButton = "";

		/*Return a filter button with events for the filter based on column type*/
		function getFilterButton(columnId, filterType, initialValue, initialToolTip) {

			var button = $("<button type='button' class='inforFilterButton "+initialValue+"'><span></span></button>");
			button.data("columnId", columnId);
			button.data("filterType", filterType);
			button.data("isOpen", false);
			//set the initial tooltip
			button.attr("title",Globalize.localize(initialToolTip)).inforToolTip();
			button.click(function(e) {
					var $button = $(this),
						currentMenu = $('#inforFilterConditions').parent();

					if (currentMenu.is(":visible")) {
						var isSameMenu = (currentButton == button.data("columnId"));
						if (isSameMenu)
							return;
					}

					$("#inforFilterConditions").parent().remove();

					currentButton = button.data("columnId");

					//different menus for each filter option
					var filterType = $(this).data("filterType");

					if (filterType=="TextFilter")
						$('body').append('<ul id="inforFilterConditions" class="inforContextMenu"><li><span class="icon equals"></span><a href="#equals">Equals</a></li><li><span class="icon doesNotEqual"></span><a href="#doesNotEqual">Does Not equal</a></li><li><span class="icon contains"></span><a href="#contains">Contains</a></li><li><span class="icon doesNotContain"></span><a href="#doesNotContain">Does Not Contain</a></li><li><span class="icon isEmpty"></span><a href="#isEmpty">Is Empty</a></li><li><span class="icon isNotEmpty"></span><a href="#isNotEmpty">Is Not Empty</a></li><li><span class="icon startsWith"></span><a href="#startsWith">Starts With</a></li><li><span class="icon doesNotStartWith"></span><a href="#doesNotStartWith">Does Not Start With</a></li><li><span class="icon endsWith"></span><a href="#endsWith">Ends With</a></li><li><span class="icon doesNotEndWith"></span><a href="#doesNotEndWith">Does Not End With</a></li></ul>');

					if (filterType=="SelectFilter")
						$('body').append('<ul id="inforFilterConditions" class="inforContextMenu"><li><span class="icon equals"></span><a href="#equals">Equals</a></li><li><span class="icon doesNotEqual"></span><a href="#doesNotEqual">Does Not equal</a></li><li><span class="icon isEmpty"></span><a href="#isEmpty">Is Empty</a></li><li><span class="icon isNotEmpty"></span><a href="#isNotEmpty">Is Not Empty</a></li></ul>');

					if (filterType=="CheckboxFilter")
						$('body').append('<ul id="inforFilterConditions" class="inforContextMenu"><li><span class="icon eitherSelectedorNotSelected"></span><a href="#eitherSelectedorNotSelected">Either Selected or Not Selected</a></li><li><span class="icon checked"></span><a href="#selected">Selected</a></li><li><span class="icon notChecked"></span><a href="#notSelected">Not Selected</a></li></ul>');

					if (filterType=="DateFilter")
						$('body').append('<ul id="inforFilterConditions" class="inforContextMenu"><li><span class="icon today"></span><a href="#today">Today</a></li><li><span class="icon equals"></span><a href="#equals">Equals</a></li><li><span class="icon doesNotEqual"></span><a href="#doesNotEqual">Does Not equal</a></li><li><span class="icon isEmpty"></span><a href="#isEmpty">Is Empty</a></li><li><span class="icon isNotEmpty"></span><a href="#isNotEmpty">Is Not Empty</a></li><li><span class="icon lessThan"></span><a href="#lessThan">Less Than</a></li><li><span class="icon lessThanOrEquals"></span><a href="#lessThanOrEquals">Less Than or Equals</a></li><li><span class="icon greaterThan"></span><a href="#greaterThan">Greater Than</a></li><li><span class="icon greaterThanOrEquals"></span><a href="#greaterThanOrEquals">Greater Than or Equals</a></li></ul>');

					if (filterType=="IntegerFilter" || filterType=="DecimalFilter" || filterType=="PercentFilter")
						$('body').append('<ul id="inforFilterConditions" class="inforContextMenu"><li><span class="icon equals"></span><a href="#equals">Equals</a></li><li><span class="icon doesNotEqual"></span><a href="#doesNotEqual">Does Not equal</a></li><li><span class="icon isEmpty"></span><a href="#isEmpty">Is Empty</a></li><li><span class="icon isNotEmpty"></span><a href="#isNotEmpty">Is Not Empty</a></li><li><span class="icon lessThan"></span><a href="#lessThan">Less Than</a></li><li><span class="icon lessThanOrEquals"></span><a href="#lessThanOrEquals">Less Than or Equals</a></li><li><span class="icon greaterThan"></span><a href="#greaterThan">Greater Than</a></li><li><span class="icon greaterThanOrEquals"></span><a href="#greaterThanOrEquals">Greater Than or Equals</a></li></ul>');

					var col = columns[getColumnIndex(columnId)];
					if (col.filterExcludeList) {
						$("#inforFilterConditions").find(col.filterExcludeList).parent().remove();
					}

					if (filterType=="ColumnContentsFilter") {
						var isEmpty = addContentsFilterMenu(col, button);
						if (isEmpty)
							return;
					}

					$button.inforContextMenu({
						menu: 'inforFilterConditions',
						invokeMethod: 'immediate',
						event: e,
						srcElement: $button,
						positionBelowElement: true,
						offsetLeft: -3,
						offsetTop: 2
					}, function(action, el, pos, item) {

						if (el.data("filterType")=="ColumnContentsFilter")
							return;

						var isChanged=!el.hasClass(action);

						//toggle the button icon..
						el.removeClass();
						el.addClass('inforFilterButton '+action);

						//set the tooltip
						el.data("uiInforToolTip").tooltipContent.html(item.text());
						el.data("currentTitle", item.text());
						
						$('#inforFilterConditions').remove();

						//apply filter...
						if (el.data("filterType")=="CheckboxFilter" && isChanged)
							applyFilter();

						if (action=="isNotEmpty" || action=="isEmpty")
							applyFilter();

						if (action=="today")
							$.datepicker.selectToday(el.next().find("input"));

						el.focus();
					});
			});

			return button;
		}

		function addSelection(button, $this, isChecked) {
			//update the selections.
			var selections = button.data("selections"),
				found=false;

			if (!selections)
				selections = [];

			for (var i = 0; i < selections.length; i++) {
				if (selections[i].id==$this.attr("id"))
				{
					selections[i].isChecked=isChecked;
					found=true;
				}
			}

			//check for any new elements not in the previous list and add them.
			if (!found)
				selections.push({id: $this.attr("id"), isChecked: isChecked});

			button.data("selections", selections);
		}

		//scan the column for distinct values and add them to the list with a checkbox..and manage saving values to data.
		function addContentsFilterMenu(col, button) {
			var html = '<ul id="inforFilterConditions" class="inforContextMenu">',
				data = getData().getItems(),
				distinctValues = [],
				suppliedValues = col.contentsFilterValues,
				field = col.field,
				formatter = col.filterFormatter;

			if (data.length==0 && !suppliedValues)
				return true;

			distinctValues.push({id:"selectAll", html: Globalize.localize("SelectDeselect")});

			if (suppliedValues) {
					for (i = 0; i < suppliedValues.length; i++) {

						for (j = 0; j < distinctValues.length; j++) {
							var found = false;
							if (suppliedValues[i]==distinctValues[j].id) {
								found=true;
								break;
							}
						}
						if (!found && suppliedValues[i]!=undefined)
							distinctValues.push({id:suppliedValues[i], html: suppliedValues[i]});
					}
			} else {
				var addEmpty = false;

				for (i = 0; i < data.length; i++) {
					for (j = 0; j < distinctValues.length; j++) {
						var found = false;

						if (addEmpty==false && !data[i][field])
							addEmpty = true;

						if (data[i][field]==distinctValues[j].id) {
							found=true;
							break;
						}
					}
					if (!found && data[i][field]!=undefined && data[i][field]!="")
						distinctValues.push({id:data[i][field], html:data[i][field]});
				}
			}

			if (addEmpty)
				distinctValues.push({id:"empty", html: "["+Globalize.localize("IsEmpty")+"]"});

			if (distinctValues.length==0)
				return true;

			var prevSelections = button.data("selections");

			for (i = 0; i < distinctValues.length; i++) {
				var isChecked = true;
				//check previous selections and retick
				if (prevSelections!=undefined)
				{
					for (j = 0; j < prevSelections.length; j++) {
						if (distinctValues[i].id==prevSelections[j].id)
							isChecked=prevSelections[j].isChecked;
					}
				}
				//allow a function to be injected to format the value...
				var newHtml = '<li class="checkbox"><a href="#"><div class="inforCheckbox "><span '+(isChecked ? 'class="checked"' : '')+'><input type="checkbox" class="inforCheckbox" '+(isChecked ? 'checked="checked"' : '')+'style="filter: alpha(opacity = 0);opacity:0;margin:0;padding:0" id="'+distinctValues[i].id+'"/></span></div><label class="inforCheckboxLabel" for="'+distinctValues[i].id+'">'+distinctValues[i].html+'</label></a></li>';
				if (formatter!=undefined)
					html = html+ formatter(newHtml,distinctValues[i].html);
				else
					html = html+newHtml;
			}

			html += '</ul>';

			//reset the selections...
			if (prevSelections==undefined) {
				var selections = [];
				for (i = 0; i < distinctValues.length; i++) {
					selections.push({id: distinctValues[i].id, isChecked: true});
				}
				button.data("selections", selections);
			}

			$('body').append(html);

			$("#inforFilterConditions").find(".inforCheckbox").click(function(e) {
				var $this = $(this),
					isChecked = this.checked,
					$headerCol = $(getHeaderRowColumn(col.id)),
					button = $headerCol.find(".inforFilterButton");

				if ($this.attr("id")=="selectAll") {
					var spans = $this.closest(".inforContextMenu").find("span");
					if (isChecked)
						spans.addClass("checked");
					else
						spans.removeClass("checked");

					spans.each(function() {
						var input = $(this).find("input");
						input.attr('checked', isChecked);
						addSelection(button,input,isChecked);
					});

				} else {
					if (isChecked)
						$this.parent("span").addClass("checked");
					else
						$this.parent("span").removeClass("checked");

					addSelection(button,$this,isChecked);
				}

				//apply filter...
				if (col.contentsFilterSettings && col.contentsFilterSettings.filterOnRun) {
					e.stopPropagation();
					return;
				}

				applyFilter();
				e.stopPropagation();	//do not want the click on the checkbox to close the menu
			});
		}

		/* Adds a checkbox Filter to the grid column */
		function addCheckboxFilterColumn(gridObj, column) {
			var header = gridObj.getHeaderRowColumn(column.id);
			//save last value
			var filterButton = $(header).find(".inforFilterButton")
			var lastFilterValue =""
			if (filterButton.length>0)
				lastFilterValue = filterButton.attr("class").replace("inforFilterButton ","");

			$(header).empty();
			//add the button
			var $button = getFilterButton(column.id,  CheckboxFilter(), "eitherSelectedorNotSelected", "EitherSelectedorNotSelected");

			$(header).css({"text-align":"center", "top": "-2px"});

			if (lastFilterValue!="")//restore last value
				$button.removeAttr("class").addClass("inforFilterButton "+lastFilterValue);

			$button.css({"float":"none"});
			$(header).append($button);
		}

		/* Adds a ColumnContents to the grid column */
		function addColumnContentsFilterColumn(gridObj, column) {
			var header = gridObj.getHeaderRowColumn(column.id);
			//save last value
			var filterButton = $(header).find(".inforFilterButton")
			var lastFilterValue =""
			if (filterButton.length>0)
				lastFilterValue = filterButton.attr("class").replace("inforFilterButton ","");

			$(header).empty();
			//add the button
			var $button = getFilterButton(column.id,  ColumnContentsFilter(), "contains", "SelectContents");

			$(header).css("text-align","center");

			if (lastFilterValue!="")//restore last value
				$button.removeAttr("class").addClass("inforFilterButton "+lastFilterValue);

			$button.css({"float":"none"});

			$(header).append($button);
		}

		/* Adds a text Filter to the grid column */
		function addTextFilterColumn(gridObj, column) {
			var header = gridObj.getHeaderRowColumn(column.id),
				filters = gridObj.getFilter(),
				lastValue = (filters && filters[column.id] ? filters[column.id].value : undefined),
				lastFilterValue ="",
				filterButton = $(header).find(".inforFilterButton")

			if (filterButton.length>0)
				lastFilterValue = filterButton.attr("class").replace("inforFilterButton ","");

			$(header).empty();

			var inputWidth = $(header).width() - 4 - 31;	//column width - margin - button size with padding
			var input = $("<input class='inforTextbox' type='text'>")
				.data("columnId", column.id)
				.data("filterType", TextFilter())
				.width(inputWidth)
				.val(lastValue)
				.appendTo(header)
				.keypress(function(e) {
					if (e.which == $.ui.keyCode.ENTER)	//Run the filter...
					{
						e.preventDefault();
						e.stopPropagation();
						gridObj.applyFilter();
						$(this).focus();
						return false;
					}
				});

			if (column.cssClass) {
				input.addClass(column.cssClass);
			}

			if (column.maxLength) {
				input.attr("maxLength",column.maxLength).maxLength();
			}

			var $button = getFilterButton(column.id, TextFilter(), "contains", "Contains");

			if (lastFilterValue!="")//restore last value
				$button.removeAttr("class").addClass("inforFilterButton "+lastFilterValue);

			input.before($button);
		}

		function addSelectFilterColumn(gridObj, column) {
			var header = gridObj.getHeaderRowColumn(column.id),
				lastFilterValue ="",	//save last value
				filters = gridObj.getFilter(),
				lastValue = (filters && filters[column.id] ? filters[column.id].value : undefined);

			$(header).empty();
			var inputWidth = $(header).width() - 54,	//column width - margin - button size - trigger button size.
				option_str = "", useCodes = false, hasEmpty = false;

			if (column.options) {
				for (var i = 0; i < column.options.length; i++){
					v = column.options[i];
					if (v.value!=undefined && v.label!=undefined) {
						option_str += "<OPTION value='" + $.escape(v.value) + "' " +">" + $.escape(v.label) + "</OPTION>";
						useCodes = true;
						if (v.label == "" || v.label == " ") {
							hasEmpty = true;
						}
					} else
						option_str += "<OPTION value='" + $.escape(v) + "' "+ ">" + $.escape(v) + "</OPTION>";
						if (v == "" || v == " "){
							hasEmpty = true;
						}
				}

				if (!hasEmpty) {
					option_str = "<OPTION value=''>" + " " + "</OPTION>"+option_str;
				}
			}

			var input = $("<select class='inforDropDownList'>"+option_str+"</select>")
				.data("columnId", column.id)
				.data("filterType", SelectFilter())
				.data("useCodes", useCodes)
				.width(inputWidth)
				.val(lastValue)
				.appendTo(header)
				.inforDropDownList(column.editorOptions)
				.change(function(event) {
					gridObj.applyFilter();
					event.preventDefault();
					event.stopPropagation();
					$(this).focus();
				});

			var $button = getFilterButton(column.id, SelectFilter(), "equals", "EqualsStr");

			if (lastFilterValue!="")//restore last value
				$button.removeAttr("class").addClass("inforFilterButton "+lastFilterValue);

			input.before($button);
		}

		function addIntegerFilterColumn(gridObj, column, isDecimal) {
			var header = gridObj.getHeaderRowColumn(column.id),
			filterButton = $(header).find(".inforFilterButton"),	//save last value
			lastFilterValue = "",
			filters = gridObj.getFilter(),
			lastValue = (filters && filters[column.id] ? filters[column.id].value : undefined);

			if (filterButton.length > 0) {
				lastFilterValue = filterButton.attr("class").replace("inforFilterButton ","");
			}

			$(header).empty();

			var filterType = (isDecimal ?  DecimalFilter() :  IntegerFilter());

			var input = $("<input class='inforTextbox alignRight' type='text'>")
				.data("columnId", column.id)
				.data("filterType", filterType)
				.addClass((isDecimal  ? "numericOnly" : "decimalOnly"))
				.width($(header).width() - 4 - 25)
				.val(lastValue)
				.appendTo(header)
				.numericOnly(isDecimal, (column.positiveOnly ? column.positiveOnly : false))
				.keypress(function(event) {
					if (event.which == $.ui.keyCode.ENTER)	//Run the filter...
					{
						gridObj.applyFilter();
						event.preventDefault();
						event.stopPropagation();
						$(this).focus();
					}
				});

			if (column.cssClass) {
				input.addClass(column.cssClass);
			}

			if (column.maxLength) {
				input.attr("maxLength",column.maxLength).maxLength();
			}

			if (column.numberFormat) {
				input.attr("data-number-format",column.numberFormat).formatNumber();
			}
			var $button = getFilterButton(column.id, filterType, "equals" , "EqualsStr");

			if (lastFilterValue!="")//restore last value
				$button.removeAttr("class").addClass("inforFilterButton "+lastFilterValue);

			input.before($button);
		}

		/* Adds a date Filter to the grid column */
		function addDateFilterColumn(gridObj, column) {
			var header = gridObj.getHeaderRowColumn(column.id),
			filterButton = $(header).find(".inforFilterButton"), 	//save last value
			lastFilterValue = "",
			filters = gridObj.getFilter(),
			lastValue = (filters && filters[column.id] ? filters[column.id].value : undefined);

			if (filterButton.length>0)
				lastFilterValue = filterButton.attr("class").replace("inforFilterButton ","");

			$(header).empty();

			var options = {dateFormat: column.DateShowFormat};
			if (column.editorOptions)
				options = column.editorOptions;

			var input = $("<input class='inforDateField' type='text'>")
				.data("columnId", column.id)
				.data("filterType", DateFilter())
				.val(lastValue)
				.appendTo(header)
				.inforDateField(options)
				.keypress(function(event) {
					if (event.which == $.ui.keyCode.ENTER)	//Run the filter...
					{
						gridObj.applyFilter();
						event.preventDefault();
						event.stopPropagation();
						$(this).focus();
					}
				});

			input.width($(header).width() - 44);	//4 pixel padding / width of the button

			if (column.cssClass) {
				input.addClass(column.cssClass);
			}

			if (column.maxLength) {
				input.attr("maxLength",column.maxLength).maxLength();
			}

			var $button = getFilterButton(column.id, DateFilter(), "equals", "EqualsStr");

			if (lastFilterValue!="")//restore last value
				$button.removeAttr("class").addClass("inforFilterButton "+lastFilterValue);

			input.closest(".inforTriggerField").before($button);
		}

		function filterTextValue(colValue, filterValue, operator) {
			if (colValue==undefined)
				colValue="";

			colValue= colValue.toString().toLowerCase();
			filterValue = filterValue.toLowerCase();
			var pattern = filterValue.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&"),
				filterRegx = new RegExp(pattern, "i");

			switch(operator)
				{
				case "equals":
					if (colValue!=filterValue && filterValue!="")
						return false;
					break;
				case "doesNotEqual":
					if (colValue==filterValue && filterValue!="")
						return false;
					break;
				case "contains":
					if (colValue.search(filterRegx)<0 && filterValue!="")
						return false;
					break;
				case "doesNotContain":
					if (colValue.search(filterRegx)>=0 && filterValue!="")
						return false;
					break;
				case "isEmpty":
					if (colValue!="" && colValue!=undefined && $.trim(colValue)!="")
						return false;
					break;
				case "isNotEmpty":
					if (colValue=="" || colValue==undefined || $.trim(colValue) == "")
						return false;
					break;
				case "startsWith":
					if (colValue.search(filterRegx)!=0 && filterValue!="")
						return false;
					break;
				case "doesNotStartWith":
					if (colValue.search(filterRegx)==0 && filterValue!="")
						return false;
					break;
				case "endsWith":
					if (!colValue.endsWith(pattern) && filterValue!="")
						return false;
					break;
				case "doesNotEndWith":
					if (colValue.endsWith(pattern) && filterValue!="")
						return false;
					break;
				}
			return true;
		}

		function filterIntegerValue(colValue, filterValue, operator) {

			switch(operator)
				{
				case "equals":
					if (parseFloat(colValue,10)!=Globalize.parseFloat(filterValue,10))
						return false;
					break;
				case "doesNotEqual":
					if (parseFloat(colValue,10)==Globalize.parseFloat(filterValue,10))
						return false;
					break;
				case "isEmpty":
					if (!(colValue==="" || colValue==undefined) || colValue==0 || colValue=="0")
						return false;
					break;
				case "isNotEmpty":
					if (colValue=="" || colValue==undefined)
						return false;
					break;
				case "lessThan":
					if ((colValue==undefined ? 0 : parseFloat(colValue, 10))>=Globalize.parseFloat(filterValue,10))
						return false;
					break;
				case "lessThanOrEquals":
					if (!((colValue==undefined ? 0 : parseFloat(colValue, 10))<Globalize.parseFloat(filterValue,10) || parseFloat(colValue, 10)==Globalize.parseFloat(filterValue,10)))
						return false;
					break;
				case "greaterThan":
					if ((colValue==undefined ? 0 : parseFloat(colValue, 10))<=Globalize.parseFloat(filterValue,10))
						return false;
					break;
				case "greaterThanOrEquals":
					if (!((colValue==undefined ? 0 : parseFloat(colValue, 10))>Globalize.parseFloat(filterValue,10) || parseFloat(colValue, 10)==Globalize.parseFloat(filterValue,10)))
						return false;
					break;
				}
			return true;
		}

		function filterColumnContentsValue(colValue, filterValues) {
			if (filterValues==undefined)
				return true;

			var isInList = false;

			for (var i = 0; i < filterValues.length; i++) {
				if (filterValues[i].id=="selectAll")
					continue;

				if (filterValues[i].id=="empty" && filterValues[i].isChecked==true && !colValue) {
					isInList=true;
				}

				if (filterValues[i].id=="empty" && filterValues[i].isChecked==false && !colValue) {
					break;
				}

				if (colValue==filterValues[i].id && filterValues[i].isChecked==true) {
					isInList=true;
					break;
				}
			}

			return isInList;
		}

		function filterCheckboxValue(colValue, operator) {
			if (colValue==undefined)	//no rows in the grid and something triggered a filter
				return;

			switch(operator)
				{
				case "selected":
					if ((colValue.toString() == "0" || colValue == 0 || colValue == false) && !(colValue===""))
						return false;
					break;
				case "notSelected":
					if ((colValue.toString() == "1" || colValue == 1 || colValue == true) && !(colValue===""))
						return false;
					break;
				}
			return true;
		}

		function filterDateValue(colValue, filterValue, operator, columnInfo) {
			if (columnInfo.DateSourceFormat!=undefined && !(Object.prototype.toString.call(colValue) === '[object Date]')) {
					//convert to date
					if (columnInfo.DateSourceFormat == 'UTC') {
							// The date/time is in UTC but assumed to be local for filtering, so convert it into local time
							var generatedDate = new Date(colValue);

							// Use the generated date's offset to create a new date with the timezone offset added, as this offset isn't currently applied
							generatedDate.setMinutes(generatedDate.getMinutes() + generatedDate.getTimezoneOffset());

							// Parse the date/time into the proper format
							// TODO: Is there a less verbose way of accomplishing this behavior?
							colValue = $.datepicker.parseDate($.datepicker.formatDate(generatedDate, columnInfo.DateShowFormat), columnInfo.DateShowFormat);
					} else {
							colValue = $.datepicker.parseDate(colValue, columnInfo.DateSourceFormat);
					}
			}

			//add 00:00:00 time if time part is missing
			if (columnInfo.DateShowFormat!=undefined && columnInfo.DateShowFormat.search('HH:mm:ss')>-1 && filterValue.search(' ')==-1)
				filterValue=filterValue+" 00:00:00";

			filterValue = $.datepicker.parseDate(filterValue,columnInfo.DateShowFormat);
			var filterValueJustDate = null;
			var colValueJustDate = null;

			if (filterValue!=undefined)
				filterValueJustDate= filterValue.getDate().toString() + filterValue.getMonth().toString() + filterValue.getFullYear().toString();

			if (columnInfo.DateShowFormat && columnInfo.DateShowFormat.indexOf("HH")>1){  //use time
				filterValueJustDate= filterValue.getTime().toString();
			}

			if (colValue!=undefined) {
				if (typeof colValue=="string" &&  colValue.substr(0,6)=="/Date(")
					colValue = new Date(parseInt(colValue.substr(6)));

				colValueJustDate = colValue.getDate().toString() + colValue.getMonth().toString() + colValue.getFullYear().toString();

				if (columnInfo.DateShowFormat && columnInfo.DateShowFormat.indexOf("HH")>1) {  //use time
					colValueJustDate= colValue.getTime().toString();
				}
			}

			switch(operator)
				{
				case "today":
					if (colValueJustDate!=filterValueJustDate)
						return false;
					break;
				case "equals":
					if (colValueJustDate!=filterValueJustDate)
						return false;
					break;
				case "doesNotEqual":
					if (colValueJustDate==filterValueJustDate)
						return false;
					break;
				case "isEmpty":
					if (colValue!=undefined)
						return false;
					break;
				case "isNotEmpty":
					if (colValue==undefined)
						return false;
					break;
				case "lessThan":
					if (colValue>=filterValue || colValueJustDate==filterValueJustDate)
						return false;
					break;
				case "lessThanOrEquals":
					if (!(colValue<filterValue || colValueJustDate==filterValueJustDate))
						return false;
					break;
				case "greaterThan":
					if (colValue<=filterValue || colValueJustDate==filterValueJustDate)
						return false;
					break;
				case "greaterThanOrEquals":
					if (!(colValue>filterValue || colValueJustDate==filterValueJustDate))
						return false;
					break;
				}
			return true;
		}

		/* Filter out values from the grid that do not match...*/
		function filter(item) {
			//Allow new records
			if (item.indicator === "new") {
				return true;
			}

			if (!options.disableClientFilter) {
				for (var columnId in columnFilters) {
					var filterValue = columnFilters[columnId].value,
						filterType = columnFilters[columnId].filterType,
						operator = columnFilters[columnId].operator,
						columnInfo = getColumns()[getColumnIndex(columnId)];

					if (typeof columnInfo=="undefined")
						continue;

					var colValue = getDataItemValueForColumn(item, columnInfo.field);

					switch(filterType)
					{
					case "TextFilter":
						if (!filterTextValue(colValue, filterValue, operator))
							return false;
						break;
					case "SelectFilter":
						if (!filterTextValue(colValue, filterValue, operator))
							return false;
						break;
					case "IntegerFilter":
						if (!filterIntegerValue(colValue, filterValue, operator))
							return false;
					break;
					case "DecimalFilter":
						if (!filterIntegerValue(colValue, filterValue, operator))
							return false;
					break;
					case "PercentFilter":
						if (!filterIntegerValue(colValue, filterValue.toString(), operator))
							return false;
					break;
					case "DateFilter":
						if (!filterDateValue(colValue, filterValue, operator, columnInfo))
							return false;
						break;
					case "CheckboxFilter":
						if (!filterCheckboxValue(colValue, operator))
							return false;
						break;
					case "ColumnContentsFilter":
						if (!filterColumnContentsValue(colValue, filterValue))
							return false;
						break;
					default:
						continue;
					}
				}
			}


			//tree grid - collapse/expand
			if (item.parent != null) {
				var parent = getData().getItemById(item.parent);

				while (parent) {
				if (parent.collapsed) {
					return false;
				}

					parent = getData().getItemById(parent.parent);
				}
			}

			return true;
		}

		var popup = null;
		function showCommentsPopup(position, text, editable){
			if (!popup) {
				popup = $('<div style="z-index:10000; display:none; position: absolute;" class="inforGridCommentPopup inforPopover bottom"><div class="arrow"></div><div class="inforPopoverContent"></div></div>')
						.appendTo("body");

				var textArea = $("<textarea>").appendTo(popup.find(".inforPopoverContent"));
				if (!editable)
					textArea.attr("readonly","readonly");

				popup.resizable({ handles: 'se'});
			}
			popup.find("textarea").text(text);
			popup.show().css({"left" : parseInt(position.left, 10) - 50 , "top" : parseInt(position.top, 10) + 35});
			return popup;
		}

		//////////////////////////////////////////////////////////////////////////////////////////////
		// Public API
		$.extend(this, {
			// Events
			"onScroll": new Slick.Event(),
			"onSort": new Slick.Event(),
			"onHeaderContextMenu": new Slick.Event(),
			"onHeaderClick": new Slick.Event(),
			"onHeaderCellRendered": new Slick.Event(),
			"onBeforeHeaderCellDestroy": new Slick.Event(),
			"onHeaderRowCellRendered": new Slick.Event(),
			"onBeforeHeaderRowCellDestroy": new Slick.Event(),
			"onMouseEnter": new Slick.Event(),
			"onMouseLeave": new Slick.Event(),
			"onClick": new Slick.Event(),
			"onDblClick": new Slick.Event(),
			"onContextMenu": new Slick.Event(),
			"onKeyDown": new Slick.Event(),
			"onAddNewRow": new Slick.Event(),
			"onValidationMessage": new Slick.Event(),
			"onViewportChanged": new Slick.Event(),
			"onColumnsReordered": new Slick.Event(),
			"onColumnsResized": new Slick.Event(),
			"onCellChange": new Slick.Event(),
			"onBeforeEditCell": new Slick.Event(),
			"onBeforeCellEditorDestroy": new Slick.Event(),
			"onBeforeDestroy": new Slick.Event(),
			"onActiveCellChanged": new Slick.Event(),
			"onActiveRowChanged": new Slick.Event(),
			"onActiveCellPositionChanged": new Slick.Event(),
			"onDragInit": new Slick.Event(),
			"onDragStart": new Slick.Event(),
			"onDrag": new Slick.Event(),
			"onDragEnd": new Slick.Event(),
			"onSelectedRowsChanged": new Slick.Event(),
			"onPersonalizationChanged": new Slick.Event(),
			"onRowsMoved": new Slick.Event(),
			"onRowExpanded": new Slick.Event(),
			"onRowCollapsed": new Slick.Event(),
			"trigger": trigger,

			// Methods
			"registerPlugin": registerPlugin,
			"unregisterPlugin": unregisterPlugin,
			"getColumns": getColumns,
			"setColumns": setColumns,
			"getColumnIndex": getColumnIndex,
			"getGridPersonalizationInfo": getGridPersonalizationInfo,
			"updateColumnHeader": updateColumnHeader,
			"setSortColumn": setSortColumn,	//depricated use setSortColumns
			"setSortColumns": setSortColumns,
			"getSortColumns": getSortColumns,

			"autosizeColumns": autosizeColumns,
			"getOptions": getOptions,
			"setOptions": setOptions,
			"getData": getData,
			"getFilteredData" : getFilteredData,
			"getDataLength": getDataLength,
			"getDirtyRows": getDirtyRows,
			"getSelectableLength": getSelectableLength,

			"getDataItem": getDataItem,
			"getSelectionModel": getSelectionModel,
			"setSelectionModel": setSelectionModel,
			"getSelectedRows": getSelectedRows,
			"setSelectedRows": setSelectedRows,
			"selectAllRows": selectAllRows,
			"canRowBeSelected" : canRowBeSelected,

			"getDataItemValueForColumn" : getDataItemValueForColumn,
			"setDataItemValueForColumn" : setDataItemValueForColumn,

			//Added Functionality
			"showGridSettings": showGridSettings,
			"showFilterButton": showFilterButton,
			"addRow": addRow,
			"addRows": addRows,

			//Validation
			"getValidationMessages" : getValidationMessages,
			"setValidationMessages" : setValidationMessages,
			"removeValidationMessage" : removeValidationMessage,
			"addValidationMessage" : addValidationMessage,
			"clearValidationMessages" : clearValidationMessages,
			"validateCell" : validateCell,
			"validateRow" : validateRow,
			"validateAll" : validateAll,
			"setRowStatus" : setRowStatus,

			"showCommentsPopup": showCommentsPopup,
			"focus": focus,
			"excelExport": excelExport,
			"resetColumnLayout": resetColumnLayout,

			"removeSelectedRows": removeSelectedRows,
			"updateData": updateData,
			"mergeData": mergeData,	//for paging
			"updateSummaryRow": updateSummaryRow, //for summary row

			"hideColumn": hideColumn,
			"showColumn": showColumn,
			"hideColumns": hideColumns,
			"showColumns": showColumns,

			"resizeAndRender": resizeAndRender,
			"restorePersonalization": restorePersonalization,

			//added for filtering...
			"clearFilter" : clearFilter,
			"applyFilter" : applyFilter,
			"getFilter" : getFilter,
			"updateFilterRow" : updateFilterRow,
			"filter" : filter,	//Should not be used called call applyFilter

			"render": render,
			"invalidate": invalidate,
			"invalidateRow": invalidateRow,
			"invalidateRows": invalidateRows,
			"invalidateAllRows": invalidateAllRows,
			"updateCell": updateCell,
			"updateRow": updateRow,
			"getViewport": getVisibleRange,
			"resizeCanvas": resizeCanvas,
			"reinit": reinit,
			"updateRowCount": updateRowCount,
			"scrollRowIntoView": scrollRowIntoView,
			"scrollRowToTop": scrollRowToTop,
			"scrollCellIntoView": scrollCellIntoView,
			"getCanvasNode": getCanvasNode,
			"getCellFromPoint": getCellFromPoint,
			"getCellFromEvent": getCellFromEvent,
			"getActiveCell": getActiveCell,
			"setActiveCell": setActiveCell,
			"getActiveCellNode": getActiveCellNode,
			"getActiveCellPosition": getActiveCellPosition,
			"resetActiveCell": resetActiveCell,
			"editActiveCell": makeActiveCellEditable,
			"getCellEditor": getCellEditor,
			"getCellNode": getCellNode,
			"getCellNodeBox": getCellNodeBox,
			"canCellBeSelected": canCellBeSelected,
			"canCellBeActive": canCellBeActive,
			"navigatePrev": navigatePrev,
			"navigateNext": navigateNext,
			"navigateUp": navigateUp,
			"navigateDown": navigateDown,
			"navigateLeft": navigateLeft,
			"navigateRight": navigateRight,
			"gotoCell": gotoCell,
			"getTopPanel": getTopPanel,
			"getHeaderRow": getHeaderRow,
			"setTopPanelVisibility": setTopPanelVisibility,
			"setHeaderRowVisibility": setHeaderRowVisibility,
			"getHeaderRowColumn": getHeaderRowColumn,
			"getColumnChildren": getColumnChildren,
			"getSummaryRow": getSummaryRow,
			"getSummaryRowColumn": getSummaryRowColumn,
			"getGridPosition": getGridPosition,
			"addCellCssStyles": addCellCssStyles,
			"setCellCssStyles": setCellCssStyles,
			"removeCellCssStyles": removeCellCssStyles,

			"destroy": destroy,

			// IEditor implementation
			"getEditorLock": getEditorLock,
			"getEditController": getEditController
		});
		init();
	}
} (jQuery));

/*
* InforDataGrid Formatters and Editors
*/
(function ($) {

	var SlickEditor = {
	/*Filters */
		TextFilter : function () {
			return "TextFilter";
		},
		IntegerFilter : function () {
			return "IntegerFilter";
		},
		DecimalFilter : function () {
			return "DecimalFilter";
		},
		PercentFilter : function () {
			return "PercentFilter";
		},
		DateFilter : function () {
			return "DateFilter";
		},
		CheckboxFilter : function () {
			return "CheckboxFilter";
		},
		SelectFilter : function () {
			return "SelectFilter";
		},
		ColumnContentsFilter : function () {
			return "ColumnContentsFilter";
		},
	/*Formatters*/
		SelectorCellFormatter: function (row, cell, value, columnDef, dataContext) {
			return (!dataContext ? "" : row);
		},

		CellTemplateFormatter: function (row, cell, value, columnDef, dataContext) {
			var compiled_template = tmpl(columnDef.cellTemplate);
			return compiled_template(dataContext);
		},

		LinkFormatter: function (row, cell, value, columnDef, dataContext) {
		//replace the dataContext
		var linkHrefExpr = ""

		if (columnDef.linkHref!=undefined)
				linkHrefExpr = columnDef.linkHref.replace('%value%',value);

		if (columnDef.linkHref!=undefined &&  columnDef.linkHref.search('%dataContext.')>-1)
		{
				var linkHref = columnDef.linkHref.replace(/'/gi,'"');
				while (linkHref.indexOf('%') >= 0)	//loop through all matches to replace values to build: reportid_instanceid,reportname
				{
					var expr = linkHref.substr(linkHref.search('%')+1);
					expr = expr.substr(0,expr.search('%'));

					//faster than eval for dataContext. expressions
					if (expr.indexOf("dataContext.")==0) {
						expr = dataContext[expr.replace("dataContext.","")];
					} else
						expr = eval(expr);

					if (expr==undefined)
						expr="undefined";

					expr = expr.toString();	//Just in case it is not a string..

					expr = expr.replace(/'/g,"&#39;"); // escape quote inline js
					expr = expr.replace(/"/g,"&#34;"); // escape doublequote inline js

					var start = linkHref.substr(0,linkHref.search('%'));
					var end = linkHref.substr(linkHref.search('%')+1);
					end  = end.substr(end.search('%')+1);

					linkHref = start+expr+end;
					linkHrefExpr = linkHref;
				}
			}

		var linkOnClick = "";

		if (columnDef.linkOnClick!=undefined)
			linkOnClick = columnDef.linkOnClick.replace(/'/gi,'"').replace('%value%',value);

		if (columnDef.linkOnClick!=undefined && columnDef.linkOnClick.search('%dataContext.')>-1)
		{
				var linkOnClick = columnDef.linkOnClick.replace(/'/gi,'"');

				while (linkOnClick.indexOf('%') >= 0)	//loop through all matches to replace values to build: reportid_instanceid,reportname
				{
					var expr = linkOnClick.substr(linkOnClick.search('%')+1);
					expr = expr.substr(0,expr.search('%'));

					//faster than eval for dataContext. expressions
					if (expr.indexOf("dataContext.")==0) {
						expr = dataContext[expr.replace("dataContext.","")];
					} else
						expr = eval(expr);

					if (expr==undefined)
						expr="undefined";

					expr = expr.toString();	//Just in case it is not a string..

					expr = expr.replace(/'/g,"&#39;"); // escape quote inline js
					expr = expr.replace(/"/g,"&#34;"); // escape doublequote inline js

					var start = linkOnClick.substr(0,linkOnClick.search('%'));
					var end = linkOnClick.substr(linkOnClick.search('%')+1);
					end  = end.substr(end.search('%')+1);
					linkOnClick = start+expr+end ;
				}
		}

		var isReadonly = false;
			if (columnDef.editability!=undefined && columnDef.editability(row, cell, value, columnDef, dataContext))
				isReadonly = true;

		return "<a class='inforHyperlink' "
			+ (linkHrefExpr=="" || isReadonly ? "" : "href='" + linkHrefExpr + "'")
			+ (columnDef.linkTarget==undefined  || isReadonly  ? "" :  "target='" + columnDef.linkTarget + "'")
			+ (linkOnClick==""  || isReadonly ? "" :  " onclick='" + linkOnClick + "'")
			+ (columnDef.toolTip ==undefined ? "" :  " title='" + columnDef.toolTip + "'")
			+ (isReadonly ? "disabled" : "")+">" + (value == undefined ? "" : value) + "</a>" ;
		},

		CheckboxCellFormatter: function (row, cell, value, columnDef, dataContext, gridOptions) {
			var isReadonly = false;
			if (columnDef.editability!=undefined && columnDef.editability(row, cell, value, columnDef, dataContext) || !gridOptions.editable)
				isReadonly = true;

			if (value==undefined)
				return '<div class="inforCheckboxContainer '+(isReadonly ? 'uneditable readonly"': '"')+'> <div class="inforCheckbox '+(isReadonly ? ' readonly"': '"')+'><span '+(isReadonly ? 'class="readonly"': '')+'><input class="inforCheckbox" '+(isReadonly ? ' readonly': '')+' type="checkbox" style="filter: alpha(opacity = 0);opacity: 0;"></span></div></div>';
			if (value.toString() == "1" || value == 1 || value == true || value.toString().toLowerCase() === 'yes') {
				return '<div class="inforCheckboxContainer '+(isReadonly ? 'uneditable readonly"': '"')+'> <div class="inforCheckbox '+(isReadonly ? ' readonly"': '"')+'><span class="checked'+(isReadonly ? ' readonly"': '"')+'><input id="checkedCheckBox" '+(isReadonly ? ' readonly': '')+' class="inforCheckbox" type="checkbox" checked="checked" style="filter: alpha(opacity = 0);opacity: 0;"></span></div></div>';
			}
			else {
				return '<div class="inforCheckboxContainer '+(isReadonly ? 'uneditable readonly"': '"')+'> <div class="inforCheckbox '+(isReadonly ? ' readonly"': '"')+'><span '+(isReadonly ? 'class="readonly"': '')+'><input class="inforCheckbox" '+(isReadonly ? ' readonly': '')+' type="checkbox" style="filter: alpha(opacity = 0);opacity: 0;"></span></div></div>';
			}
		},

		DateCellFormatter : function(row, cell, value, columnDef, dataContext){
			var isReadonly = false,
				thedate = value,
				displayVal = null;

			if (columnDef.editability!=undefined && columnDef.editability(row, cell, value, columnDef, dataContext)) {
				isReadonly = true;
			}

			if (value==null)
				return '<div'+(isReadonly ? ' class="uneditable"': '')+'></div>';

			if (Object.prototype.toString.call(value) === '[object Date]') {	//date objects as source.
				if (columnDef.DateShowFormat!=undefined)
					displayVal = $.datepicker.formatDate(thedate,columnDef.DateShowFormat);
				else
					displayVal = $.datepicker.formatDate(thedate,Globalize.culture().calendar.patterns.d);

				return  '<div'+(isReadonly ? ' class="uneditable"': '')+'>'+displayVal+'</div>';
			} else if (value != '0000-00-00') {	//string dates as source

				if (value!=undefined && columnDef.DateSourceFormat=="UTC") {
					thedate = (value === '' ? '' : Globalize.parseUtcDate(value));
				} else if (value!=undefined && value.substr(0,6)=="/Date(" || columnDef.DateSourceFormat=="JSON")	//auto detect JSON Format or its specified.
					thedate = (value === '' ? '' : new Date(parseInt(value.substr(6))));
				else if (columnDef.DateSourceFormat!=undefined)
					thedate = $.datepicker.parseDate(value,columnDef.DateSourceFormat);
				else
					thedate = value;

				if (columnDef.DateShowFormat != undefined) {
					displayVal = $.datepicker.formatDate(thedate, columnDef.DateShowFormat);
					if (displayVal && columnDef.DateSourceFormat=="UTC" && columnDef.DateShowFormat.indexOf("zzz") > -1) {
						//change the time zone format
						displayVal = displayVal.substr(0, displayVal.length - 6) + "+00:00";
					}
				} else {
					displayVal = $.datepicker.formatDate(thedate,Globalize.culture().calendar.patterns.d);
				}

				if (thedate == null)
					return '<div'+(isReadonly ? ' class="uneditable"': '')+'></div>';
				else
					return  '<div'+(isReadonly ? ' class="uneditable"': '')+'>'+displayVal+'</div>';
			} else {
				return '<div'+(isReadonly ? ' class="uneditable"': '')+'></div>';
			}
		},

		DrillDownCellFormatter: function (row, cell, value, columnDef, dataContext, options) {
			var isReadonly = false,
				tooltip = Globalize.localize("DrillDown");

			if (columnDef.editability!=undefined && columnDef.editability(row, cell, value, columnDef, dataContext)) {
				isReadonly = true;
			}

			var tooltip = Globalize.localize("DrillDown");
			if (options.drillDownTooltip) {
				tooltip = options.drillDownTooltip;
			}

			return "<a class='drilldown " + (isReadonly ? " uneditable" : "") + (Globalize.culture().isRTL ? " inforRTLFlip" : "") + "' title='"+tooltip+"'><span></span></a>";
		},

		ButtonCellFormatter: function (row, cell, value, columnDef, dataContext) {
			var isReadonly = false,
				tooltip = "";

			if (columnDef.editability!=undefined && columnDef.editability(row, cell, value, columnDef, dataContext))
			{
				isReadonly = true;
			}

			if (columnDef.toolTip!=null)
				tooltip = columnDef.toolTip;

			var innerHtml = "<span></span>";
			if (columnDef.buttonCssClass=="inforFormButton" || columnDef.buttonCssClass=="inforFormButton default")
				innerHtml = (value ? value : "&nbsp;");
			else if (columnDef.buttonHtml)
				innerHtml = columnDef.buttonHtml;

			return "<button type='button' class='" + (columnDef.buttonCssClass != undefined ? columnDef.buttonCssClass : "") + " gridButton'" + (isReadonly ? " disabled" : "") + " data-columnid='" + columnDef.id + "'" + (tooltip ? "title='"+tooltip+"'" : "") + ">"+innerHtml+"</button>";
		},

		ToggleButtonFormatter: function (row, cell, value, columnDef, dataContext, gridObj) {
			var toggleHtml = $('<div class="inforToggleButton">' + columnDef.toggleButtonHtml  +'</div>');
			toggleHtml.find("button").eq(value).addClass("checked");
			toggleHtml.find("button").attr("data-columnid", columnDef.id );
			return toggleHtml[0].outerHTML;
		},

		DetailTemplateFormatter: function (row, cell, value, columnDef, dataContext, gridObj) {
			if (!dataContext.rowHeight) {
				return "";
			}

			var templateArea = $('<div class="inforDetailTemplate"></div>').height(dataContext.rowHeight).css("opacity", 0),
				loading = $('<div class="inforBusyIndicator large"></div>').css("top", (dataContext.rowHeight/2) - 36);

			if (columnDef.detailTemplate) {
				templateArea.append(columnDef.detailTemplate(row, cell, value, columnDef, dataContext, gridObj));
			}

			return loading[0].outerHTML + templateArea[0].outerHTML;
		},

		MultiLineTextCellFormatter:  function (row, cell, value, columnDef, dataContext, gridOptions) {
			var isReadonly = false;

			if (value == null || value == undefined)
				value = "";

			if (columnDef.editability!=undefined && columnDef.editability(row, cell, value, columnDef, dataContext))
				isReadonly = true;

			return "<div class='"+(isReadonly ? "uneditable " : "")+"multiline-cell'>" + value + "</div>";
		},

		SelectCellFormatter: function (row, cell, value, columnDef, dataContext) {
			var isReadonly = false,
				isFound = false;

			if (columnDef.editability!=undefined && columnDef.editability(row, cell, value, columnDef, dataContext))
				isReadonly = true;

			if (value == null || value == undefined)
				value = "";

			//lookup the value in the options..
			var dropDownOptions = [];
			if (columnDef.options)
				dropDownOptions = columnDef.options;

			//Execute Source..
			if (columnDef.editorOptions && columnDef.editorOptions.source) {
				var response = function(data) {
					dropDownOptions = data;
				}
				columnDef.editorOptions.source("", response, true, dataContext);
			}

			for (var i = 0; i < dropDownOptions.length; i++) {
				var opt = dropDownOptions[i];
				if ((opt.id != undefined ? opt.id.toString() === value.toString() : $.trim(opt.value) === $.trim(value))) {	
					value = opt.label;
					isFound = true;
					break;
				}
			}

			if (!isFound)
				value= "";

			if (isReadonly) {
				return "<div class='uneditable'>" + value + "</div>";
			}
			else {
				return value;
			}
		},
		LookupCellFormatter: function (row, cell, value, columnDef, dataContext) {
			var isReadonly = false,
				isFound = false;

			if (columnDef.editability!=undefined && columnDef.editability(row, cell, value, columnDef, dataContext))
				isReadonly = true;

			if (value == null || value == undefined) {
				values = "";
			} else {
				//lookup the value in the dataset....
				var lookupData = columnDef.editorOptions.gridOptions.dataset,
					keyField = columnDef.editorOptions.gridOptions.idProperty,
					returnField = columnDef.editorOptions.returnField;

				//Execute Source..
				if (columnDef.editorOptions.source) {
					var response = function(data) {
						lookupData = data;
					}
					columnDef.editorOptions.source("",response,true, dataContext);
				}

				var ids = value.toString().split(","),
					values = "";

				for (var i = 0; i < ids.length; i++) {
					for (var j = 0; j < lookupData.length; j++) {
						if (ids[i]==lookupData[j][keyField])
							values += lookupData[j][returnField] + (ids.length-1!=i ? "," : "");
					}
				}
			}

			if (isReadonly) {
				return "<div class='uneditable'>" + values + "</div>";
			}
			else {
				return values;
			}
		},

		RowSortFormatter : function (row, cell, value, columnDef, dataContext, options, gridObj) {
			var isReadonly = false;
			if (columnDef.editability && columnDef.editability(row, cell, value, columnDef, dataContext, options, gridObj)) {
				isReadonly = true;
			}
			return "<div class='cell-reorder dnd" + (isReadonly ? " uneditable" : "") + "' title='Reorder Rows'></div>";
		},

		TextCellFormatter: function (row, cell, value, columnDef, dataContext) {
			if (value == null || value == undefined) {
				value = "";
			}
			var isReadonly = false;

			if (columnDef.editability && columnDef.editability(row, cell, value, columnDef, dataContext)) {
				isReadonly = true;
			}

			if (columnDef.inputType=="password")
				value = Array(value.length).join("*");

			if (isReadonly) {
				return "<div class='uneditable'>" + value + "</div>";
			}
			else {
				return value;
			}
		},

		IntegerCellFormatter: function (row, cell, value, columnDef, dataContext, isNumeric) {
			if (value == null || value == undefined) {
				value = "";
			}
			var isReadonly = false;

			if (columnDef.editability!=undefined && columnDef.editability(row, cell, value, columnDef, dataContext))
			{
				isReadonly = true;
			}

			//format the value
			var $input = $("<input/>");

			if (!columnDef.numberFormat) {
				columnDef.numberFormat = "n0";
			}

			$input.attr("data-number-format",columnDef.numberFormat);

			if (columnDef.numberSourceFormat) {
				$input.attr("data-number-source-format",columnDef.numberSourceFormat);
			}

			$input.addClass((isNumeric ? "numericOnly" : "decimalOnly")).val(value);

			if (columnDef.numberFormat) {
				$input.formatNumber();
			}
			value = $input.val();

			return "<div class='"+(isReadonly ? "uneditable " : " ")+ (columnDef.cssClass ? columnDef.cssClass : " alignRight") +"'>" + value + "</div>";
		},

		DecimalCellFormatter : function (row, cell, value, columnDef, dataContext) {
			if (!columnDef.numberFormat) {
				columnDef.numberFormat = "t9";
			}
			return IntegerCellFormatter(row, cell, value, columnDef, dataContext, false);
		},

		IndicatorIconFormatter: function (row, cell, value, columnDef, dataContext) {
			if (dataContext.indicator == "error") {
				return "<div class='indicator-icon inforAlertIconSmall error' title='" + dataContext.validationMessages.toString() + "'></div>";
			} else {
				return "<div class='indicator-icon inforAlertIconSmall " + dataContext.indicator + "' title='" + (dataContext.indicatorTooltip ? dataContext.indicatorTooltip : "") + "'></div>";
			}
		},
		UneditableColumnFormatter: function (row, cell, value, columnDef, dataContext) {
			var display = value;
			//Add some checks and encode empty stuff as &nbsp
			if (value==null || value==undefined || value=='' || (typeof value == "string" && value.replace(/\s/g,"") == ""))
				display="&nbsp";

			columnDef.editable=false;
			return "<div class='uneditable' >" + display + "</div>";
		},
		TreeRowFormatter : function (row, cell, value, columnDef, dataContext, gridOptions, gridObj) {
			if (value==null || value==undefined || value=='') {
				value = "";
			}

			value = value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
			gridOptions.treeGrid = true;

			var spacer = "<span style='float: "+ (Globalize.culture().isRTL ? "right" : "left")+ ";display:inline-block;height:1px;width:" + (14 * (dataContext["depth"] + (dataContext.isParent ? 0 : 1))) + "px'></span>";

			if (dataContext.isParent) {
				return spacer + "<button type='button' class='tree-expand inforIconButton  " + (dataContext.collapsed ? 'closed' : 'open') +"'><span></span></button>" + "<span>" + value +"</span>";
			}
			else {
				return spacer + "<span>" + value + "</span>";
			}
		},

		PercentFieldCellFormatter: function(row, cell, value, columnDef, dataContext) {
			return Globalize.format((typeof value =="string" ? parseFloat(value) : value), "p0");
		},

		ProgressBarCellFormatter: function(row, cell, value, columnDef, dataContext, options, grid) {
			var formatString = function(text, rowData, fieldIdArray) {
				if (fieldIdArray != undefined) {
					for (var i = 0; i < fieldIdArray.length; i++) {
						text = text.replace("{"+i+"}", rowData[fieldIdArray[i]]);
					}
				}

				return text;
			}

			var rangeOrder = ["azure", "emerald", "amber", "ruby", "tourmaline", "amethyst", "turquoise", "lightAmber", "lightAzure", "lightEmerald", "lightRuby", "lightTourmaline", "lightAmethyst", "lightTurquoise","deepAzure", "deepEmerald", "deepAmber", "deepRuby", "deepTourmaline", "deepAmethyst", "deepTurquoise"];
			var range = columnDef.meterRange || 1.0;
			var color = "lightAzure";
			var start, end;
			var tooltip = "";
			var columnId;
			var textvars;

			if (columnDef.ranges) {
				for (var index in rangeOrder) {
					if (columnDef.ranges.hasOwnProperty(rangeOrder[index])) {
						if (typeof columnDef.ranges[rangeOrder[index]]["start"] === "string") {
							columnId = columnDef.ranges[rangeOrder[index]]["start"];
							start = grid.getDataItemValueForColumn(dataContext, columnId);                                                                                                                
						}
						else {
							start = columnDef.ranges[rangeOrder[index]]["start"];
						}

						if (typeof columnDef.ranges[rangeOrder[index]]["end"] === "string") {
							columnId = columnDef.ranges[rangeOrder[index]]["end"];
							end = grid.getDataItemValueForColumn(dataContext, columnId);                                                                                                                                                                                                                                
						} 
						else {
							end = columnDef.ranges[rangeOrder[index]]["end"];
						}

						if (value >= start && value <= end) {
							color = rangeOrder[index];
							if (columnDef.ranges[color].tooltip != 'undefined') {
								textvars = columnDef.ranges[color].tooltipvars || [];
								tooltip = formatString(columnDef.ranges[color].tooltip, dataContext, textvars);
							}

							break;
						}
					}
				}
			}
			
			var decimalValue = (value / range),
			progressPercentage = decimalValue * 100 + "%",
			displayValue = PercentFieldCellFormatter(row, cell, decimalValue, columnDef, dataContext);
			
			return "<div class='inforProgressBar' style='width:100%;' title='" + tooltip + "'><span class='bar inforColor "+color +"' style='width:" + progressPercentage + "'></span><span class='text'>" + (columnDef.showPercent ? displayValue : "") + "</span></div>";
		},

		/*Editors*/
		TextCellEditor: function (args) {
			var $input;
			var defaultValue;

			this.init = function () {
				$(args.container).addClass("hasTextEditor");

				$input = $("<input class='inforTextbox' "+(args.column && args.column.inputType=="password" ? " type='password'/>" : "type='text' />"  ))
					.appendTo(args.container)
					.on("keydown.nav", function (e) {
						if (e.keyCode === $.ui.keyCode.LEFT || e.keyCode === $.ui.keyCode.RIGHT) {
							e.stopImmediatePropagation();
						}
					})
					.focus()
					.select();

				if (args.column.cssClass)
					$input.addClass(args.column.cssClass);

				if (args.column.maxLength)
					$input.attr("maxLength",args.column.maxLength).maxLength();

				//auto commit on click out
				$input.blur(function() {
					args.grid.getEditController().conditionalAutoCommit();
				});

				$input.width($input.parent().width()-8);

				var isTreeFormatter = (args.column.formatter  ? args.column.formatter.toString().toLowerCase().indexOf("tree")>-1 : false);
				if (isTreeFormatter && args.item.isParent) {
					$input.width($input.parent().width()-22);
					$input.before('<span style="float: left;display:inline-block;height:1px;width:0px"></span><button type="button" style="position:relative;left:1px;top: 2px" class="tree-expand inforIconButton '+(args.item.collapsed ? "closed" : "open")+'"></button>');
				}
			};

			this.destroy = function () {
				$input.parent().removeClass("hasTextEditor");
				$input.remove();
			};

			this.focus = function () {
				$input.focus();
			};

			this.getValue = function () {
				return $input.val();
			};

			this.setValue = function (val) {
				$input.val(val);
			};

			this.loadValue = function (item) {
				defaultValue = args.grid.getDataItemValueForColumn(item, args.column.field) || "";
				defaultValue = $("<div>").html(defaultValue).text();
				$input.val(defaultValue);
				$input[0].defaultValue = defaultValue;
				$input.select();
			};

			this.serializeValue = function () {
				return $input.val();
			};

			this.applyValue = function (item, state) {
				args.grid.setDataItemValueForColumn(item, args.column.field, state);
			};

			this.isValueChanged = function () {
				return (!($input.val() == "" && defaultValue == null)) && ($input.val() != defaultValue);
			};

			this.validate = function () {
				if (args.column.validator) {
					var validationResults = args.column.validator($input.val(), args.item);
					if (!validationResults.valid)
						return validationResults;
				}

				return {
					valid: true,
					msg: null
				};
			};

			this.init();
		},

		IntegerCellEditor: function (args, isDecimal) {
			var $input;
			var defaultValue;

			this.init = function () {
				$(args.container).addClass("hasTextEditor");
				$input = $("<INPUT type=text class='inforTextbox alignRight' />");

				$input.on("keydown.nav", function (e) {
					if (e.keyCode === $.ui.keyCode.LEFT || e.keyCode === $.ui.keyCode.RIGHT) {
						e.stopImmediatePropagation();
					}
				});

				$input.appendTo(args.container);
				$input
					.focus()
					.select()
					.addClass(isDecimal ? "decimalOnly" : "numericOnly")
					.numericOnly(isDecimal, (args.column.positiveOnly ? args.column.positiveOnly : false))
					.width($input.parent().width()-8)
					.blur(function() {	//auto commit on click out
						args.grid.getEditController().conditionalAutoCommit();
					});

				if (args.column.cssClass) {
					$input.addClass(args.column.cssClass);
				}
				if (args.column.maxLength) {
					$input.attr("maxLength",args.column.maxLength).maxLength();
				}
			};

			this.destroy = function () {
				$input.parent().removeClass("hasTextEditor");
				$input.remove();
			};

			this.focus = function () {
				$input.focus();
			};

			this.loadValue = function (item) {
				defaultValue = args.grid.getDataItemValueForColumn(item, args.column.field);
				$input.val(defaultValue);
				$input.formatNumber();
				$input[0].defaultValue = defaultValue;
				$input.select();
			};

			this.serializeValue = function () {
				if ($input.val()=="")
					return "";

				return Globalize.parseFloat($input.val(), 10) || 0;
			};

			this.applyValue = function (item, state) {
				args.grid.setDataItemValueForColumn(item, args.column.field, state);
			};

			this.isValueChanged = function () {
				return (defaultValue=="" && $input.val()=="0") || ((!($input.val() == "" && defaultValue == null)) && (parseInt($input.val()) != defaultValue));
			};

			this.validate = function () {
				if (args.column.validator) {
					var validationResults = args.column.validator($input.val(), args.item);
					if (!validationResults.valid)
						return validationResults;
				}

				var val =($input.val()=="" ? "0" : $input.val());
				if (isNaN(parseInt(val))) {
					return {
						valid: false,
						msg: "Please enter a valid integer"
					};
				}
				return {
					valid: true,
					msg: null
				};
			};

			this.init();
		},

		DecimalCellEditor: function (args) {
			var $input;
			var defaultValue;

			this.init = function () {
				$(args.container).addClass("hasTextEditor");
				$input = $("<INPUT type=text class='inforTextbox alignRight' />");

				$input.on("keydown.nav", function (e) {
					if (e.keyCode === $.ui.keyCode.LEFT || e.keyCode === $.ui.keyCode.RIGHT) {
						e.stopImmediatePropagation();
					}
				});

				$input.appendTo(args.container);
				$input.focus()
					.select()
					.addClass("decimalOnly")
					.width($input.parent().width()-8)
					.blur(function() {	//auto commit on click out
							args.grid.getEditController().conditionalAutoCommit();
						});

				if (!args.column.numberFormat) {
					args.column.numberFormat = "t9";
				}

				$input.attr("data-number-format",args.column.numberFormat);

				if (args.column.numberSourceFormat)
					$input.attr("data-number-source-format",args.column.numberSourceFormat);

				$input.numericOnly(true);

				if (args.column.cssClass) {
					$input.addClass(args.column.cssClass);
				}
				if (args.column.maxLength) {
					$input.attr("maxLength",args.column.maxLength).maxLength();
				}
			};

			this.destroy = function () {
				$input.parent().removeClass("hasTextEditor");
				$input.remove();
			};

			this.focus = function () {
				$input.focus();
			};

			this.loadValue = function (item) {
				defaultValue = args.grid.getDataItemValueForColumn(item, args.column.field);
				$input.val(defaultValue);
				if (args.column.numberFormat) {
					$input.formatNumber();
				}
				$input[0].defaultValue = defaultValue;
				$input.select();
			};

			this.serializeValue = function () {
				if ($input.val()=="")
					return "";

				return Globalize.parseFloat($input.val()) || 0;
			};

			this.applyValue = function (item, state) {
				var targetValue = state;
				var currentValue = args.grid.getDataItemValueForColumn(item, args.column.field);
				if (typeof currentValue === "string") {
					targetValue = Globalize.format(state, args.column.numberFormat);
				}

				args.grid.setDataItemValueForColumn(item, args.column.field, targetValue);
			};

			this.isValueChanged = function () {
				return (defaultValue=="" && $input.val()=="0") || ((!($input.val() == "" && defaultValue == null)) && ((typeof state === "string"  ? $input.val() : Globalize.parseFloat($input.val()) ) != defaultValue));
			};

			this.validate = function () {
				if (args.column.validator) {
					var validationResults = args.column.validator($input.val(), args.item);
					if (!validationResults.valid)
						return validationResults;
				}
				var val =($input.val()=="" ? "0" : $input.val());
				if (isNaN(Globalize.parseFloat(val))) {
					return {
						valid: false,
						msg: "Please enter a valid decimal"
					};
				}
				return {
					valid: true,
					msg: null
				};
			};

			this.init();
		},

		DateCellEditor: function (args) {
			var $input;
			var defaultValue;
			var calendarOpen = false;
			var showFormat =  Globalize.culture().calendar.patterns.d;
			var sourceFormat = undefined;	//date format...

			this.init = function () {
				if(args.column.DateShowFormat != undefined){
					showFormat = args.column.DateShowFormat;
				}
				$input = $('<input class="inforDateField" type="text" />');
				$input.appendTo(args.container);
				$(args.container).addClass("haseditor");

				var options = {dateFormat: showFormat};
				if (args.column.editorOptions)
					options = args.column.editorOptions;

				$input.focus()
					.select()
					.width($input.parent().width()-26)
					.inforDateField(options)
					.blur(function() {	//auto commit on click out
							args.grid.getEditController().conditionalAutoCommit();
					})
					.closest(".inforTriggerField").parent().addClass("hasDateEditor");

				if (args.column.cssClass) {
					$input.addClass(args.column.cssClass);
				}
				if (args.column.maxLength) {
					$input.attr("maxLength",args.column.maxLength).maxLength();
				}
			};

			this.destroy = function () {
				$.datepicker.dpDiv.stop(true, true);
				$input.datepicker("hide");
				$input.datepicker("destroy");
				$input.closest(".inforTriggerField").parent().removeClass("hasDateEditor");
				$input.remove();
				$(args.container).removeClass("haseditor");
			};

			this.show = function () {
				if (calendarOpen) {
					$.datepicker.dpDiv.stop(true, true).show();
				}
			};

			this.hide = function () {
				if (calendarOpen) {
					$.datepicker.dpDiv.stop(true, true).hide();
				}
			};

			this.position = function (position) {
				if (!calendarOpen) return;
				$.datepicker.dpDiv
					.css("top", position.top + 30)
					.css("left", position.left);
			};

			this.focus = function () {
				$input.focus();
			};

			this.loadValue = function (item) {
				var thedate = null,
					isUtc = (args.column.editorOptions ? args.column.editorOptions.showUTCTime == true : false);

				defaultValue = args.grid.getDataItemValueForColumn(item, args.column.field);
				
				if (args.column.editorOptions && isUtc) {
					thedate = (defaultValue === '' ? '' : Globalize.parseUtcDate(defaultValue));
				} else if (Object.prototype.toString.call(defaultValue) === '[object Date]') {	//date objects as source.
					thedate = defaultValue;
				} else if (args.column.DateSourceFormat=="JSON"){
					thedate = (!defaultValue || defaultValue === '' ? '' : new Date(parseInt(defaultValue.substr(6))));
				} else if (args.column.DateSourceFormat != undefined)	{//string dates as source
					sourceFormat = args.column.DateSourceFormat;
					thedate =  $.datepicker.parseDate(defaultValue,sourceFormat);
				}

				if (defaultValue) {
					defaultValue =  $.datepicker.formatDate(thedate, showFormat);
					if (isUtc && showFormat.indexOf("zzz") > -1) {
						defaultValue = defaultValue.substr(0, defaultValue.length - 6) + "+00:00";
					}
				}

				$input.val(defaultValue);
				$input[0].defaultValue = defaultValue;
				$input.select();
			};

			this.serializeValue = function () {
				var thedate = $.datepicker.parseDate($input.val(),showFormat),
					utcDate = "",
					colOpts = args.column.editorOptions;

				if (colOpts && colOpts.showUTCTime == true) {
					return ($input.val() === '' ? null : parseInt($input.attr("data-utcmillis"), 10));
				}

				if (sourceFormat != undefined) {
					return $.datepicker.formatDate(thedate, sourceFormat);
				}

				return (thedate==undefined ? "" : thedate)
			};

			this.applyValue = function (item, state) {
				args.grid.setDataItemValueForColumn(item, args.column.field, state);
			};

			this.isValueChanged = function () {
				return (!($input.val() == "" && defaultValue == null)) && ($input.val() != defaultValue);
			};

			this.validate = function () {
				if (args.column.validator) {
					var validationResults = args.column.validator($input.val(), args.item);
					if (!validationResults.valid)
						return validationResults;
				}
				return {
					valid: true,
					msg: null
				};
			};

			this.init();
		},

		CheckboxCellEditor: function (args) {
			var $checkbox;
			var defaultValue;

			this.init = function () {
				$checkbox = $('<div class="inforCheckbox"><span><input class="inforCheckbox" type="checkbox" style="opacity: 0;"></span></div>');
				$checkbox.click(function () {
					var span = $(this).children("span");
					if (span.hasClass("checked"))	//defaultValue.toString() == "1" || defaultValue == 1 || defaultValue == true)
						span.removeClass("checked");
					else
						span.addClass("checked");

					args.grid.getEditController().commitCurrentEdit();	//auto commit
				});
				$checkbox.appendTo(args.container);

				$(document).bind("keydown.celledit", this.handleKeyDown);

				$checkbox.focus().blur(function() {	//auto commit on click out
					args.grid.getEditController().conditionalAutoCommit();
				});
				$checkbox.addClass("inforCheckboxFocus");
				$checkbox.parent().addClass("hasCheckboxEditor")
			};

			this.handleKeyDown = function (e) {
				if ((e.which == $.ui.keyCode.ENTER && !e.ctrlKey) || (e.which==32)) {
					e.preventDefault();
					$checkbox.trigger("click");
				}
				else if (e.which == $.ui.keyCode.TAB && e.shiftKey) {
					e.preventDefault();
					args.grid.navigatePrev();
				}
				else if (e.which == $.ui.keyCode.TAB) {
					e.preventDefault();
					args.grid.navigateNext();
				}
			};

			this.destroy = function () {
				$checkbox.parent().removeClass("hasCheckboxEditor");
				$checkbox.remove();
				$(document).unbind("keydown.celledit");
			};

			this.focus = function () {
				$checkbox.closest("div").addClass("inforCheckboxFocus");
				$checkbox.focus();
			};

			this.loadValue = function (item, isClick) {
				defaultValue = args.grid.getDataItemValueForColumn(item, args.column.field);
				
				if (defaultValue==undefined)
					defaultValue=0;

				if (isClick)
				{
					if (defaultValue.toString() == "1" || defaultValue == 1 || defaultValue == true )
						$checkbox.children("span").removeClass("checked");
					else
						$checkbox.children("span").addClass("checked");

					args.grid.getEditController().commitCurrentEdit();	//auto commit
				} else {
					if (defaultValue.toString() == "1" || defaultValue == 1 || defaultValue == true )
						$checkbox.children("span").addClass("checked");
					else
						$checkbox.children("span").removeClass("checked");
				}
			};

			this.serializeValue = function () {
				var isChecked = $checkbox.children("span").hasClass("checked");
				if (typeof(defaultValue)== "string") {
					if (isChecked) {
						return "1";
					}
					else {
						return "0";
					}
				}
				else if (defaultValue == 1 || defaultValue == 0) {
					if (isChecked) {
						return 1;
					}
					else {
						return 0;
					}
				}
				else if (typeof(defaultValue) == "boolean") {
					return isChecked;
				}
				else
				{
					return false;
				}
			};

			this.applyValue = function (item, state) {
				args.grid.setDataItemValueForColumn(item, args.column.field, state);
			};

			this.isValueChanged = function () {

				isChecked = $checkbox.children("span").hasClass("checked");
				if (typeof(defaultValue)== "string") {
				return !((defaultValue == "1" && isChecked) || (defaultValue == "0" && !isChecked));
				}
				else if (defaultValue == 1 || defaultValue == 0) {
					return !((defaultValue == 1 && isChecked) || (defaultValue == 0 && !isChecked));
				}
				else if (typeof(defaultValue) == "boolean") {
					return !((defaultValue && isChecked) || (!defaultValue && !isChecked));
				}
				else
					return true;
			};

			this.validate = function () {
				return {
					valid: true,
					msg: null
				};
			};

			this.init();
		},

		SelectCellEditor: function (args) {
			var $select,
			defaultValue, option_str, dropDownOptions,
			isCodeList =  args.column.options && args.column.options[0] && args.column.options[0].value!=undefined && args.column.options[0].label!=undefined;

			this.init = function () {
			var self = this;

			if (typeof(args.column.options) == "function") {
					$select = $("<SELECT></SELECT>");
					$select.appendTo(args.container);
					$select.width($select.parent().width()-26);
					$select.inforDropDownList({source: function (request, response) {
						response(args.column.options(request, response, args));
					}});
				}
				else {
					option_str = "";
					//lookup the value in the options..
					dropDownOptions = [];

					if (args.column.options)
						dropDownOptions = args.column.options;

					//Execute Source..
					if (args.column.editorOptions && args.column.editorOptions.source) {
						var response = function(data) {
							dropDownOptions = data;
						}
						args.column.editorOptions.source("", response, false, args.item);
					}

					for (var i = 0; i < dropDownOptions.length; i++) {
						v = dropDownOptions[i];
						if (v.value!=undefined && v.label!=undefined)
							option_str += "<OPTION value='" + $.escape(v.value) + "' "+($.escape(args.item[args.column.field])==$.escape(v.value) ? "selected " : "") +">" + $.escape(v.label) + "</OPTION>";
						else
							option_str += "<OPTION value='" + $.escape(v) + "' "+($.escape(args.item[args.column.field])==$.escape(v) ? "selected " : "") +">" + $.escape(v) + "</OPTION>";
					}

					$select = $("<SELECT>" + option_str + "</SELECT>");
					$select.appendTo(args.container);
					$select.css("width", parseInt($select.parent().css("width"), 10) - 21 + "px");
					$select.inforDropDownList(args.column.editorOptions);
					$select.next().find("input").focus();
				}

				$select.addClass("inforDataGridDropDownList");
				$(args.container).addClass("haseditor hasComboEditor");
				$select.next().find("input").blur(function(e) {
					args.grid.getEditController().conditionalAutoCommit();
				});
				$select.change(function () {
					var cellValue = self.serializeValue();
					/*ignore jslint start*/
					if (self.previousValue != cellValue) {
					/*ignore jslint end*/
						self.applyValue(args.item, cellValue);
						args.grid.trigger(args.grid.onCellChange, {
							row: args.grid.getActiveCell().row,
							cell: args.grid.getActiveCell().cell,
							item: args.item,
							cellValue : cellValue,
							previousCellValue: self.previousValue
						});
					}
				});
				this.previousValue = args.grid.getDataItemValueForColumn(args.item, args.column.field);
			};

			this.destroy = function () {
				$(args.container).removeClass("haseditor hasComboEditor");
				$select.remove();
			};

			this.focus = function () {
				$select.focus();
			};

			this.getValuePairs = function () {
				return {label: $select.getValue(), value: $select.getValue(), id:$select.getCode()}
			};

			this.loadValue = function (item) {
				defaultValue = args.grid.getDataItemValueForColumn(item, args.column.field);
				if (isCodeList)
					$select.inforDropDownList("setCode", defaultValue, true);
				else {
					$select.setValue(defaultValue);
					$select.val(defaultValue);
				}
			};

			this.serializeValue = function () {
				if (args.column.options) {
					if (isCodeList)
						return $select.getCode();
					else
						return $select.getValue();
				} else {
					return $select.getValue();
				}
			};

			this.applyValue = function (item, state) {
				args.grid.setDataItemValueForColumn(item, args.column.field, state);
			};

			this.isValueChanged = function () {
				var isChanged = false;
				if (isCodeList)
					isChanged = ($.trim($select.getCode()) !== $.trim(defaultValue));
				else
					isChanged = ($.trim($select.getValue()) !== $.trim(defaultValue));

				return isChanged;
			};

			this.validate = function () {
				var val = null;

				if (isCodeList)
					val = $select.getCode();
				else
					val = $select.getValue();

				if (args.column.validator) {
					var validationResults = args.column.validator(val, args.item);
					if (!validationResults.valid)
						return validationResults;
				}

				return {
					valid: true,
					msg: null
				};
			};

			this.init();
		},

		LookupCellEditor: function (args) {
			var $lookup,
				defaultValue,
				displayValue;

			this.init = function () {

				$(args.container).addClass("hasComboEditor hasEditor");

				$lookup = $('<input class="inforLookupField" type="text">');
				$lookup.appendTo(args.container)
						.width($lookup.parent().width()-26)
						.inforLookupField(args.column.editorOptions)

						.blur(function() {
							args.grid.getEditController().conditionalAutoCommit();
						})
						.on("keydown.nav", function (e) {
							if (args.column.editorOptions.editable){
								if (e.keyCode === $.ui.keyCode.UP || e.keyCode === $.ui.keyCode.DOWN || e.keyCode === $.ui.keyCode.TAB) {
									return;
								}
								if (e.keyCode === $.ui.keyCode.LEFT || e.keyCode === $.ui.keyCode.RIGHT) {
									e.stopImmediatePropagation();
									return;
								}
								$lookup.data("isChanged", true);
							}
						})
						.closest("div.inforTriggerField").find(".inforTriggerButton").click(function() {
							$lookup.val(displayValue);
						});


				if (args.column.cssClass)
					$lookup.addClass(args.column.cssClass);

				if (args.column.maxLength)
					$lookup.attr("maxLength",args.column.maxLength).maxLength();

			};

			this.destroy = function () {
				var returnVal = $lookup.data("returnVal");
				$(args.container).removeClass("hasComboEditor hasEditor");
				if (returnVal) {
					$lookup.val(returnVal);
					$lookup.data("returnVal","");
				}
				if ($lookup.data("uiInforLookupField")) {
					$lookup.inforLookupField("destroy");
				}
				$(".inforLookupGridBoxShadow").remove();
				$("#inforLookupOverlay").remove();
			};

			this.focus = function () {
				$lookup.focus();
			};

			this.loadValue = function (item) {
				defaultValue = args.grid.getDataItemValueForColumn(item, args.column.field);
				
				//set the codes ....
				if (defaultValue) {
					var codes = defaultValue.toString().split(",");
					$lookup.inforLookupField("setCode",codes).select();
					displayValue = $lookup.val();
				}

				//some codes might not be in the list - free typed
				if (args.column.editorOptions.editable || args.column.editorOptions.click){
					//defaultValue = item[args.column.field];
					displayValue = defaultValue;
					$lookup.val(defaultValue);
				}

				$lookup.select().focus();
			};

			this.getCodeList = function() {
				var selectList = $lookup.inforLookupField("getSelectedValues"),
					codeList = "";

				if (args.column.editorOptions.editable  || args.column.editorOptions.click) {
					codeList = $lookup.val();
					return codeList;
				}

				for (i=0; i<selectList.length ;i++) {
					codeList = codeList + selectList[i].id.toString()+(i==selectList.length-1 ? "" : ",");
				}
				return codeList;
			}

			this.serializeValue = function () {
			if ($lookup.data("isChanged")) {
					return this.getCodeList();
				} else {
					return defaultValue;
				}
			};

			this.applyValue = function (item, state) {
				args.grid.setDataItemValueForColumn(item, args.column.field, state);
			};

			this.isValueChanged = function () {
				return $lookup.data("isChanged");
			}

			this.validate = function () {
				if (args.column.validator) {
					var validationResults = args.column.validator($lookup.val(), args.item);
					if (!validationResults.valid)
						return validationResults;
				}

				return {
					valid: true,
					msg: null
				};
			};

			this.init();
		},

		LongTextCellEditor: function (args) {
			var $input, $wrapper;
			var defaultValue;
			var scope = this;

			this.init = function () {
				$wrapper = args.grid.showCommentsPopup(args.position,"", true);
				$input = $wrapper.find("textarea");

				$wrapper.find(".inforCancelButton").on("click", this.saveAndClose);
				$input.on("keydown", this.handleKeyDown);

				//scope.position(args.position);
				$input.focus().select()
					.blur(function() {	//auto commit on click out
						args.grid.getEditController().conditionalAutoCommit();
					});

				if (args.column.maxLength) {
					$input.attr("maxLength", args.column.maxLength).maxLength();
				}
			};

			this.handleKeyDown = function (e) {
				if (e.which == $.ui.keyCode.ENTER && e.ctrlKey) {
					scope.save();
				}
				else if (e.which == $.ui.keyCode.ESCAPE) {
					e.preventDefault();
					scope.cancel();
				}
				else if (e.which == $.ui.keyCode.TAB && e.shiftKey) {
					e.preventDefault();
					args.grid.navigatePrev();
				}
				else if (e.which == $.ui.keyCode.TAB) {
					e.preventDefault();
					args.grid.navigateNext();
				}
			};

			this.save = function () {
				args.commitChanges();
				$wrapper.remove();
			};

			this.saveAndClose = function () {
			args.grid.getEditorLock().commitCurrentEdit();
			};

			this.cancel = function () {
				$input.val(defaultValue);
				args.cancelChanges();
			};

			this.hide = function () {
				$wrapper.hide();
			};

			this.show = function () {
				$wrapper.show("fadeIn");
			};

			this.destroy = function () {
				$wrapper.hide();
			};

			this.focus = function () {
				$input.focus();
			};

			this.loadValue = function (item) {
				$input.val(defaultValue = args.grid.getDataItemValueForColumn(item, args.column.field));
				$input.select();
			};

			this.serializeValue = function () {
				return $input.val();
			};

			this.applyValue = function (item, state) {
				args.grid.setDataItemValueForColumn(item, args.column.field, state);
			};

			this.isValueChanged = function () {
			return (!($input.val() == "" && defaultValue == null)) && ($input.val() != defaultValue);
			};

			this.validate = function () {
				return {
					valid: true,
					msg: null
				};
			};

			this.init();
		},

		MultiLineTextCellEditor: function (args) {
			var $input,
				defaultValue;

			this.init = function () {
				$(args.container).addClass("hasTextEditor");

				$input = $("<textarea type=text class='inforTextArea' />")
					.appendTo(args.container)
					.on("keydown.nav", function (e) {
						if (e.keyCode === $.ui.keyCode.LEFT || e.keyCode === $.ui.keyCode.RIGHT || e.keyCode === $.ui.keyCode.ENTER ) {
							e.stopImmediatePropagation();
						}
					})
					.focus()
					.select();

				$input.width($input.parent().width()-10).height($input.closest(".slick-row").height()-15);
				//auto commit on click out
				$input.blur(function() {
					args.grid.getEditController().conditionalAutoCommit();
				});

				if (args.column.maxLength) {
					$input.attr("maxLength", args.column.maxLength).maxLength();
				}
			};

			this.destroy = function () {
				$input.parent().removeClass("hasTextEditor");
				$input.remove();
			};

			this.focus = function () {
				$input.focus();
			};

			this.getValue = function () {
				return $input.val();
			};

			this.setValue = function (val) {
				$input.val(val);
			};

			this.loadValue = function (item) {
				defaultValue = args.grid.getDataItemValueForColumn(item, args.column.field) || "";
				$input.val(defaultValue);
				$input[0].defaultValue = defaultValue;
				$input.select();
			};

			this.serializeValue = function () {
				return $input.val();
			};

			this.applyValue = function (item, state) {
				args.grid.setDataItemValueForColumn(item, args.column.field, state);
			};

			this.isValueChanged = function () {
				return (!($input.val() == "" && defaultValue == null)) && ($input.val() != defaultValue);
			};

			this.validate = function () {
				if (args.column.validator) {
					var validationResults = args.column.validator($input.val(), args.item);
					if (!validationResults.valid)
						return validationResults;
				}

				return {
					valid: true,
					msg: null
				};
			};

			this.init();
		}
	};

	$.extend(window, SlickEditor);

})($);

/*
* InforDataGrid DataView
*/
(function ($) {
	$.extend(true, window, {
		Slick: {
			Data: {
				DataView: DataView,
				Aggregators: {
					Avg: AvgAggregator,
					Min: MinAggregator,
					Max: MaxAggregator,
					Sum: SumAggregator
				}
			}
		}
	});

	/*
	* Relies on the data item having an "id" property uniquely identifying it.
	*/
	function DataView(options) {
		var self = this;

		var defaults = {
			groupItemMetadataProvider: null
		};

		// private
		var idProperty = "id"; // property holding a unique row id

		if (options!=undefined && options.idProperty!=undefined)
			idProperty=options.idProperty;

		var items = []; // data by index
		var rows = []; // data by row
		var idxById = {}; // indexes by id
		var rowsById = null; // rows by id; lazy-calculated
		var filter = null; // filter function
		var updated = null; // updated item ids
		var suspend = false; // suspends the recalculation
		var sortComparer;
		var filters = null;	//filter expressions
		var isFirstPage = false;
		var isLastPage = false;
		var sortColumns = [];

		// grouping
		var groupingGetter;
		var groupingGetterIsAFn;
		var groupingFormatter;
		var groupingComparer;
		var groups = [];
		var collapsedGroups = {};
		var aggregators;
		var aggregateCollapsed = false;

		var pagesize = 0;
		var pagenum = 0;
		var totalRows = 0;
		var activeReq = false; //active request?

		// events
		var onRowCountChanged = new Slick.Event();
		var onRowsChanged = new Slick.Event();
		var onPagingInfoChanged = new Slick.Event();
		var onPageRequested = new Slick.Event();
		var onDataLoading = new Slick.Event();
		var onDataLoaded = new Slick.Event();
		var onAggregatorsChanged = new Slick.Event();

		options = $.extend(true, {}, defaults, options);

		function beginUpdate() {
			suspend = true;
		}

		function endUpdate(hints) {
			suspend = false;
			refresh(hints);
		}

		function setIdProperty(args) {
		idProperty = args;
		}

		function updateIdxById(startingIndex) {
			startingIndex = startingIndex || 0;
			var id;
			for (var i = startingIndex, l = items.length; i < l; i++) {
				id = items[i][idProperty];
				if (id === undefined) {
					throw "Each data element must implement a unique 'id' property";
				}
				idxById[id] = i;
			}
		}

		function ensureIdUniqueness() {
			var id;
			for (var i = 0, l = items.length; i < l; i++) {
				id = items[i][idProperty];
				if (id === undefined || idxById[id] !== i) {
					throw "Each data element must implement a unique 'id' property";
				}
			}
		}

		function getItems() {
			return items;
		}

		//Get the Max Value in the id column
		function getMaxId() {
			var maxId = -1;
			for (var i = 0, l = items.length; i < l; i++) {
				id = items[i][idProperty];
				if (id > maxId)
					maxId = id;
			}

			return maxId;
		}

		function setItems(data, objectIdProperty) {
			if (objectIdProperty !== undefined) idProperty = objectIdProperty;
			items = data;
			idxById = {};
			updateIdxById();
			ensureIdUniqueness();
			refresh();
		}

		function setPagingOptions(args, action) {

			if (args.filters != undefined)
				filters = args.filters;

			if (args.sortColumns != undefined)
				sortColumns = args.sortColumns;

			if (args.pageSize != undefined)
				pagesize = args.pageSize;

			if (args.isLastPage != undefined)
				isLastPage = args.isLastPage;

			if (args.isFirstPage != undefined)
				isFirstPage = args.isFirstPage;

			if (args.pageNum != undefined) {
				var newPage = (args.pageNum != pagenum);

				if (options.pagingMode=="PagerClientSide")
					pagenum = Math.min(args.pageNum, Math.ceil(totalRows / pagesize));
				else
					pagenum = args.pageNum;

				if (newPage && args.totalRows==undefined) {
					requestNewPage(action);
					if (options.pagingMode=="PagerServerSide")
						return;
				}
			}

			if (args.totalRows != undefined) {
				if (getPagingInfo().totalRows!=args.totalRows) {
					totalRows = args.totalRows;
					onPagingInfoChanged.notify(getPagingInfo(), null, self);
				}
				onDataLoaded.notify(getPagingInfo());
				return;	//dont call refresh if we explicitly set this..
			}

			onPagingInfoChanged.notify(getPagingInfo(), null, self);
			refresh();
		}

		function requestNewPage(operation) {
			var pageInfo = getPagingInfo();
			pageInfo.operation = operation;
			
			if (options.pagingMode!="PagerClientSide" && options.pagingMode!="None") {
				onDataLoading.notify(pageInfo);
			}
			onPageRequested.notify(pageInfo, null, self);
		}

		function getPagingInfo() {
			return { pageSize: pagesize, pageNum: pagenum, totalRows: totalRows,
				filters: filters, sortColumns: sortColumns, isLastPage: isLastPage, isFirstPage : isFirstPage};
		}

		function sort(comparer, ascending) {
			sortAsc = ascending;
			sortComparer = comparer;

			if (ascending === false) items.reverse();
			items.sort(comparer);
			if (ascending === false) items.reverse();
			idxById = {};
			updateIdxById();
			refresh();
		}

		function reSort() {
			if (sortComparer) {
				sort(sortComparer, sortAsc);
			}
		}

		function setFilter(filterFn) {
			filter = filterFn;
			refresh();
		}

		function groupBy(valueGetter, valueFormatter, sortComparer) {
			if (!options.groupItemMetadataProvider) {
				options.groupItemMetadataProvider = new Slick.Data.GroupItemMetadataProvider();
			}

			groupingGetter = valueGetter;
			groupingGetterIsAFn = typeof groupingGetter === "function";
			groupingFormatter = valueFormatter;
			groupingComparer = sortComparer;
			collapsedGroups = {};
			groups = [];
			refresh();
		}

		function setAggregators(groupAggregators, includeCollapsed) {
			aggregators = groupAggregators;
			aggregateCollapsed = includeCollapsed !== undefined ? includeCollapsed : aggregateCollapsed;
			refresh();
			onAggregatorsChanged.notify(getPagingInfo(), null, self);
		}

		function getAggregators() {
			return aggregators;
		}

		function getItemByIdx(i) {
			return items[i];
		}

		function getIdxById(id) {
			return idxById[id];
		}

		// calculate the lookup table on first call
		function getRowById(id) {
			if (!rowsById) {
				rowsById = {};
				for (var i = 0, l = rows.length; i < l; ++i) {
					rowsById[rows[i][idProperty]] = i;
				}
			}

			return rowsById[id];
		}

		function getRowIdx(row) {
			for (var i = 0, l = rows.length; i < l; ++i) {
				if (rows[i][idProperty]==row[idProperty])
					return i;
			}
			return -1;
		}

		function getItemById(id) {
			return items[idxById[id]];
		}

		function updateItem(id, item) {
			if (idxById[id] === undefined || id !== item[idProperty])
				throw "Invalid or non-matching id";
			items[idxById[id]] = item;
			if (!updated) updated = {};
			updated[id] = true;
			refresh();
		}

		function insertItem(insertBefore, item) {
			items.splice(insertBefore, 0, item);
			updateIdxById(insertBefore);
			refresh();
		}

		function addItem(item) {
			items.push(item);
			updateIdxById(items.length - 1);
			refresh();
		}

		function deleteItem(id) {
			var idx = idxById[id];
			if (idx === undefined) {
				throw "Invalid id";
			}
			delete idxById[id];
			items.splice(idx, 1);
			updateIdxById(idx);
			refresh();
		}

		function getLength() {
			return rows.length;
		}

		function getItem(i) {
			return rows[i];
		}

		function getItemMetadata(i) {
			var item = rows[i];
			if (item === undefined) {
				return null;
			}

			// overrides for group rows
			if (item.__group) {
				return options.groupItemMetadataProvider.getGroupRowMetadata(item);
			}

			// overrides for totals rows
			if (item.__groupTotals) {
				return options.groupItemMetadataProvider.getTotalsRowMetadata(item);
			}

			return null;
		}

		function collapseGroup(groupingValue) {
			collapsedGroups[groupingValue] = true;
			refresh();
		}

		function expandGroup(groupingValue) {
			delete collapsedGroups[groupingValue];
			refresh();
		}

		function getGroups() {
			return groups;
		}

		function extractGroups(rows) {
			var group;
			var val;
			var groups = [];
			var groupsByVal = {};
			var r;

			for (var i = 0, l = rows.length; i < l; i++) {
				r = rows[i];
				val = (groupingGetterIsAFn) ? groupingGetter(r) : r[groupingGetter];
				group = groupsByVal[val];
				if (!group) {
					group = new Slick.Group();
					group.count = 0;
					group.value = val;
					group.rows = [];
					groups[groups.length] = group;
					groupsByVal[val] = group;
				}

				group.rows[group.count++] = r;
			}

			return groups;
		}

		// TODO: lazy totals calculation
		function calculateGroupTotals(group) {
			var r, idx;

			if (group.collapsed && !aggregateCollapsed) {
				return;
			}

			idx = aggregators.length;
			while (idx--) {
				aggregators[idx].init();
			}

			for (var j = 0, jj = group.rows.length; j < jj; j++) {
				r = group.rows[j];
				idx = aggregators.length;
				while (idx--) {
					aggregators[idx].accumulate(r);
				}
			}

			var t = new Slick.GroupTotals();
			idx = aggregators.length;
			while (idx--) {
				aggregators[idx].storeResult(t);
			}
			t.group = group;
			group.totals = t;
		}

		function calculateTotals(groups) {
			var idx = groups.length;
			while (idx--) {
				calculateGroupTotals(groups[idx]);
			}
		}

		function finalizeGroups(groups) {
			var idx = groups.length, g;
			while (idx--) {
				g = groups[idx];
				g.collapsed = (g.value in collapsedGroups);
				g.title = groupingFormatter ? groupingFormatter(g) : g.value;
			}
		}

		function flattenGroupedRows(groups) {
			var groupedRows = [], gl = 0, g;
			for (var i = 0, l = groups.length; i < l; i++) {
				g = groups[i];
				groupedRows[gl++] = g;

				if (!g.collapsed) {
					for (var j = 0, jj = g.rows.length; j < jj; j++) {
						groupedRows[gl++] = g.rows[j];
					}
				}

				if (g.totals && (!g.collapsed || aggregateCollapsed)) {
					groupedRows[gl++] = g.totals;
				}
			}
			return groupedRows;
		}

		function getFilteredAndPagedItems(items, filter) {
			var pageStartRow = pagesize * pagenum;
			var pageEndRow = pageStartRow + pagesize;

			if (options.pagingMode=="PagerServerSide") {
				pageStartRow = 0;
				pageEndRow = items.length;
			}
			var itemIdx = 0, rowIdx = 0, item;
			var continousMode = options.pagingMode=="ContinuousScrolling";
			var newRows = [];

			// filter the data and get the current page if paging
			if (filter) {
				for (var i = 0, il = items.length; i < il; ++i) {
					item = items[i];

					if (!filter || filter(item)) {
						if ((continousMode ? true : !pagesize) || (itemIdx >= pageStartRow && itemIdx < pageEndRow)) {
							newRows[rowIdx] = item;
							rowIdx++;
						}
						itemIdx++;
					}
				}
			}
			else {
				newRows = pagesize ? items.slice(pageStartRow, pageEndRow) : items.concat();
				itemIdx = items.length;
			}

			return { totalRows: itemIdx, rows: newRows };
		}

		function getRowDiffs(rows, newRows) {
			var item, r, eitherIsNonData, diff = [];
			for (var i = 0, rl = rows.length, nrl = newRows.length; i < nrl; i++) {
				if (i >= rl) {
					diff[diff.length] = i;
				}
				else {
					item = newRows[i];
					r = rows[i];

					if ((groupingGetter && (eitherIsNonData = (item.__nonDataRow) || (r.__nonDataRow)) &&
							item.__group !== r.__group ||
							item.__updated ||
							item.__group && !item.equals(r))
						|| (aggregators && eitherIsNonData &&
					// no good way to compare totals since they are arbitrary DTOs
					// deep object comparison is pretty expensive
					// always considering them 'dirty' seems easier for the time being
							(item.__groupTotals || r.__groupTotals))
						|| item[idProperty] != r[idProperty]
						|| (updated && updated[item[idProperty]])
						) {
						diff[diff.length] = i;
					}
				}
			}
			return diff;
		}

		function recalc(_items, _rows, _filter) {
			rowsById = null;

			var newRows = [];

			var filteredItems = getFilteredAndPagedItems(_items, _filter);

			if (options.pagingMode!="PagerServerSide")
				totalRows = filteredItems.totalRows;

			newRows = filteredItems.rows;

			groups = [];
			if (groupingGetter != null) {
				groups = extractGroups(newRows);
				if (groups.length) {
					finalizeGroups(groups);
					if (aggregators) {
						calculateTotals(groups);
					}
					if (groupingComparer)
						groups.sort(groupingComparer);
					newRows = flattenGroupedRows(groups);
				}
			} else {
				//calculate summaryRow totals - also using aggregators.
				if (aggregators) {
					groups = extractGroups(newRows);
					calculateTotals(groups);
				}
			}

			var diff = getRowDiffs(_rows, newRows);
			rows = newRows;

			return diff;
		}

		function refresh() {
			if (suspend) return;

			var countBefore = rows.length;
			var totalRowsBefore = totalRows;

			var diff = recalc(items, rows, filter); // pass as direct refs to avoid closure perf hit

			// if the current page is no longer valid, go to last page and recalc
			// we suffer a performance penalty here, but the main loop (recalc) remains highly optimized
			if (pagesize && totalRows < pagenum * pagesize) {
				pagenum = Math.floor(totalRows / pagesize);
				diff = recalc(items, rows, filter);
			}

			updated = null;

			if (totalRowsBefore != totalRows && options.pagingMode!="PagerServerSide") {
				onPagingInfoChanged.notify(getPagingInfo(), null, self);
			}

			if (countBefore != rows.length)
				onRowCountChanged.notify({ previous: countBefore, current: rows.length }, null, self);

			if (diff.length > 0)
				onRowsChanged.notify({ rows: diff }, null, self);
		}

		return {
			// methods
			"beginUpdate": beginUpdate,
			"endUpdate": endUpdate,
			"setPagingOptions": setPagingOptions,
			"getPagingInfo": getPagingInfo,
			"getItems": getItems,
			"getFilteredAndPagedItems": getFilteredAndPagedItems,
			"setItems": setItems,
			"setFilter": setFilter,
			"setIdProperty": setIdProperty,
			"getMaxId": getMaxId,
			"sort": sort,
			"reSort": reSort,
			"groupBy": groupBy,
			"setAggregators": setAggregators,
			"collapseGroup": collapseGroup,
			"expandGroup": expandGroup,
			"getGroups": getGroups,
			"getIdxById": getIdxById,
			"getRowById": getRowById,
			"getRowIdx": getRowIdx,
			"getItemById": getItemById,
			"getItemByIdx": getItemByIdx,
			"refresh": refresh,
			"updateItem": updateItem,
			"insertItem": insertItem,
			"addItem": addItem,
			"deleteItem": deleteItem,

			// data provider methods
			"getLength": getLength,
			"getItem": getItem,
			"getItemMetadata": getItemMetadata,
			"requestNewPage" : requestNewPage,

			//properties
			"activeReq": activeReq,

			// events
			"onRowCountChanged": onRowCountChanged,
			"onRowsChanged": onRowsChanged,
			"onPagingInfoChanged": onPagingInfoChanged,
			"onPageRequested": onPageRequested,
			"onDataLoading": onDataLoading,
			"onDataLoaded": onDataLoaded,
			"onAggregatorsChanged": onAggregatorsChanged
		};
	}

	function AvgAggregator(field) {
		var count;
		var nonNullCount;
		var sum;

		this.init = function () {
			count = 0;
			nonNullCount = 0;
			sum = 0;
		};

		this.accumulate = function (item) {
			var val = item[field];
			count++;
			if (val != null && val != NaN) {
				nonNullCount++;
				sum += 1 * val;
			}
		};

		this.storeResult = function (groupTotals) {
			if (!groupTotals.avg) {
				groupTotals.avg = {};
			}
			if (nonNullCount != 0) {
				groupTotals.avg[field] = sum / nonNullCount;
			}
		};
	}

	function SumAggregator(field) {
		var sum;

		this.init = function () {
			sum = 0;
		};

		this.accumulate = function (item) {
			var val = item[field];

			if (typeof val == "string")
				val = val.replace(",","");	//remove thousands seperator.

			if (val != null && val != "" && val != NaN) {
				sum += parseFloat(val);
			}
		};

		this.storeResult = function (groupTotals) {
			if (!groupTotals.sum) {
				groupTotals.sum = {};
			}
			groupTotals.sum[field] = sum;
		};
	}

	function MinAggregator(field) {
		var min;

		this.init = function () {
			min = null;
		};

		this.accumulate = function (item) {
			var val = item[field];
			if (val != null && val != NaN) {
				if (min == null || val < min) {
					min = val;
				}
			}
		};

		this.storeResult = function (groupTotals) {
			if (!groupTotals.min) {
				groupTotals.min = {};
			}
			groupTotals.min[field] = min;
		}
	}

	function MaxAggregator(field) {
		var max;

		this.init = function () {
			max = null;
		};

		this.accumulate = function (item) {
			var val = item[field];
			if (val != null && val != NaN) {
				if (max == null || val > max) {
					max = val;
				}
			}
		};

		this.storeResult = function (groupTotals) {
			if (!groupTotals.max) {
				groupTotals.max = {};
			}
			groupTotals.max[field] = max;
		}
	}

})(jQuery);

/*
* CheckBox Selection Plugin
*/
(function ($) {
	// register namespace
	$.extend(true, window, {
		"Slick": {
			"CheckboxSelectColumn": CheckboxSelectColumn
		}
	});

	function CheckboxSelectColumn(options) {
		var _grid;
		var _selectedRowsLookup = {};
		var _defaults = {
			columnId: "checkbox-selector",
			cssClass: "selector-checkbox-header",
			toolTip: Globalize.localize("SelectDeselect"),
			width: 20,
			resizable: false,
			sortable: false
		};

		var _options = $.extend(true, {}, _defaults, options);

		function init(grid) {
			_grid = grid;
			_grid.onSelectedRowsChanged.subscribe(handleSelectedRowsChanged);
			_grid.onClick.subscribe(handleClick);
			_grid.onHeaderClick.subscribe(handleHeaderClick);
		}

		function destroy() {
			_grid.onSelectedRowsChanged.unsubscribe(handleSelectedRowsChanged);
			_grid.onClick.unsubscribe(handleClick);
			_grid.onHeaderClick.unsubscribe(handleHeaderClick);
		}

		function handleSelectedRowsChanged(e, args) {
			var selectedRows = _grid.getSelectedRows();
			var lookup = {}, row, i;
			for (var i = 0; i < selectedRows.length; i++) {
				row = selectedRows[i];
				lookup[row] = true;
				if (lookup[row] !== _selectedRowsLookup[row]) {
					_grid.invalidateRow(row);
					delete _selectedRowsLookup[row];
				}
			}
			for (i in _selectedRowsLookup) {
				_grid.invalidateRow(i);
			}
			_selectedRowsLookup = lookup;
			_grid.render();

			if (!_grid.getOptions().multiSelect) {
				_grid.updateColumnHeader(_options.columnId, '','');
				return;
			}
			if (selectedRows.length> 0 && selectedRows.length == _grid.getSelectableLength()) {
				_grid.updateColumnHeader(_options.columnId, '<div class="inforCheckbox selector-checkbox-header"><span class="checked"><input class="inforCheckbox" type="checkbox" style="opacity: 0;" checked="checked"></span></div>',  _options.toolTip);
			}
			else {
				_grid.updateColumnHeader(_options.columnId, '<div class="inforCheckbox selector-checkbox-header"><span><input class="inforCheckbox" type="checkbox" style="opacity: 0;"></span></div>',  _options.toolTip);
			}

		}

		function removeChildren(selected, row) {
			if (_grid.getOptions().treeGrid  && _grid.getOptions().selectChildren) {
				var data = _grid.getFilteredData(),
					depth = data[row]["depth"];

				//if this row is a parent, un-select the children
				for (var j = row+1; j < data.length; j++) {
					if (data[j]["isParent"])
						break;

					if (data[j]["depth"]==depth+1) {
						for (var i = 0; i < selected.length; i++) {
							if (selected[i]==j)
								selected.splice(i,1);
						}
					} else {
						break;
					}
				}
			}
			return selected;
		}

		function addChildren(row) {
			var selected = [];
			selected.push(row);

			if (_grid.getOptions().treeGrid && _grid.getOptions().selectChildren) {
				var data = _grid.getFilteredData(),
					depth = data[row]["depth"];

				//if this row is a parent, select the children
				for (var j = row+1; j < data.length; j++) {
					if (data[j]["isParent"])
						break;

					if (data[j]["depth"]==depth+1) {
						selected.push(j);
					} else {
						break;
					}
				}
			}
			return selected;
		}

		function handleClick(e, args) {
			// clicking on a row select checkbox
			if (_grid.getColumns()[args.cell].id === _options.columnId && $(e.target).find(":first-child").is(".inforCheckbox")) {
			// if editing, try to commit
				if (_grid.getOptions().editable && _grid.getEditorLock().isActive() && !_grid.getEditorLock().commitCurrentEdit()) {
					e.preventDefault();
					e.stopImmediatePropagation();
					return;
				}
				if (_selectedRowsLookup[args.row]) {
					var grepedRows = $.grep(_grid.getSelectedRows(), function (n) {
						return n != args.row;
					});

					grepedRows = removeChildren(grepedRows,args.row);
					_grid.setSelectedRows(grepedRows, {row : args.row, cell : args.cell});
				}
				else if (_grid.getOptions().multiSelect) {
					var addedRows = addChildren(args.row);
					_grid.setSelectedRows(_grid.getSelectedRows().concat(addedRows) , {row : args.row, cell : args.cell});
				}
				else {
					var empty = [];
					_grid.setSelectedRows(empty.concat(args.row), {row : args.row, cell : args.cell});
				}
				e.stopPropagation();
				e.stopImmediatePropagation();
			}
		}

		function handleHeaderClick(e, args) {
			if (args.column && args.column.id == _options.columnId && $(e.target).find(":first-child").is(".inforCheckbox")){
				// if editing, try to commit
				if (!_grid.isLookupGrid && _grid.getEditorLock().isActive() && !_grid.getEditorLock().commitCurrentEdit()) {
					e.preventDefault();
					e.stopImmediatePropagation();
					return;
				}

				if (!$(e.target).hasClass("checked")) {
					_grid.selectAllRows();
					$(e.target).addClass("checked");
				}
				else {
					_grid.setSelectedRows([]);
					$(e.target).removeClass("checked");
				}
				e.stopPropagation();
				e.stopImmediatePropagation();
			}
		}

		function getColumnDefinition(multiSelect) {
			return {
				id: _options.columnId,
				name: (!multiSelect ? '' : '<div class="inforCheckbox selector-checkbox-header"><span><input class="inforCheckbox" type="checkbox" style="opacity: 0;"></span></div>'),
				toolTip: _options.toolTip,
				width: 20,
				builtin: true,
				resizable: false,
				sortable: false,
				reorderable: false,
				cssClass: "non-data-cell",
				formatter: checkboxSelectionFormatter,
				selectable: false
			};
		}


		function checkboxSelectionFormatter(row, cell, value, columnDef, dataContext) {
			if (dataContext) {
				var isSelectable = (_grid == undefined ? true : _grid.canRowBeSelected(row)),
					tooltip = Globalize.localize("CannotBeSelected");

				return _selectedRowsLookup[row]
						? '<div class="inforCheckbox selector-checkbox"><span class="checked"><input id="checkedCheckBox" class="inforCheckbox" type="checkbox" checked="checked" style="opacity: 0;"></span></div>'
						: '<div class="inforCheckbox selector-checkbox" title="'+(!isSelectable ? tooltip :"")+'"><span '+(!isSelectable ? "class='readonly'" :"")+'><input class="inforCheckbox" type="checkbox" style="opacity: 0;" '+(!isSelectable ? " readonly" :"")+'></span></div>';
			}
			return null;
		}

		$.extend(this, {
			"init": init,
			"destroy": destroy,

			"getColumnDefinition": getColumnDefinition
		});
	}
})(jQuery);

/*
* Row Selection Plugin
*/
(function ($) {
	// register namespace
	$.extend(true, window, {
		"Slick": {
			"RowSelectionModel": RowSelectionModel
		}
	});

	function RowSelectionModel(options) {
		var _grid;
		var _ranges = [];
		var _self = this;
		var _options;
		var _defaults = {
			selectActiveRow: true
		};

		function init(grid) {
			_options = $.extend(true, {}, _defaults, options);
			_grid = grid;
			_grid.onActiveCellChanged.subscribe(handleActiveCellChange);
			_grid.onKeyDown.subscribe(handleKeyDown);
			_grid.onClick.subscribe(handleClick);
		}

		function destroy() {
			_grid.onActiveCellChanged.unsubscribe(handleActiveCellChange);
			_grid.onKeyDown.unsubscribe(handleKeyDown);
			_grid.onClick.unsubscribe(handleClick);
		}

		function rangesToRows(ranges) {
			var rows = [];
			for (var i = 0; i < ranges.length; i++) {
				for (var j = ranges[i].fromRow; j <= ranges[i].toRow; j++) {
					rows.push(j);
				}
			}
			return rows;
		}

		function rowsToRanges(rows) {
			var ranges = [];
			var lastCell = _grid.getColumns().length - 1;
			for (var i = 0; i < rows.length; i++) {
				ranges.push(new Slick.Range(rows[i], 0, rows[i], lastCell));
			}
			return ranges;
		}

		function getRowsRange(from, to) {
			var i, rows = [];
			for (i = from; i <= to; i++) {
				rows.push(i);
			}
			for (i = to; i < from; i++) {
				rows.push(i);
			}
			return rows;
		}

		function getSelectedRows() {
			return rangesToRows(_ranges);
		}

		function setSelectedRows(rows) {
			setSelectedRanges(rowsToRanges(rows));
		}

		function setSelectedRanges(ranges, active) {
			_ranges = ranges;
			_ranges.active = active;
			_self.onSelectedRangesChanged.notify(_ranges);
		}

		function getSelectedRanges() {
			return _ranges;
		}

		function handleActiveCellChange(e, data) {
			if (_options.selectActiveRow) {
				setSelectedRanges([new Slick.Range(data.row, 0, data.row, _grid.getColumns().length - 1)]);
			}
		}

		function handleKeyDown(e) {
			var activeRow = _grid.getActiveCell();
			if (e.shiftKey	&& e.ctrlKey && e.which == 35) {	//ctrl-shift-end
					e.preventDefault();
					e.stopPropagation();
					var selection = _grid.getSelectedRows(),
					from =  selection.pop(),
					to = _grid.getDataLength()-1;

					selection = [];
					for (var i = from; i <= to; i++) {
						selection.push(i);
					}
					_grid.setSelectedRows(selection);
					_grid.scrollRowIntoView(to, false);
					return;
			}

			if (!e.shiftKey	&& e.ctrlKey && e.which == 65) {	//ctrl-a selects all.
				e.preventDefault();
				e.stopPropagation();
				_grid.selectAllRows();
				return;
			}


			if (activeRow && e.shiftKey && !e.ctrlKey && !e.altKey && !e.metaKey && (e.which == 38 || e.which == 40)) {
				var selectedRows = getSelectedRows();
				selectedRows.sort(function (x, y) { return x - y });

				if (!selectedRows.length) {
					selectedRows = [activeRow.row];
				}

				var top = selectedRows[0];
				var bottom = selectedRows[selectedRows.length - 1];
				var active;


				if (e.which == 40) {
					active = activeRow.row < bottom || top == bottom ? ++bottom : ++top;
				}
				else {
					active = activeRow.row < bottom ? --bottom : --top;
				}

				if (active >= 0 && active < _grid.getDataLength() &&  _grid.getOptions().multiSelect) {
					_grid.scrollRowIntoView(active);
					_ranges = rowsToRanges(getRowsRange(top, bottom));
					setSelectedRanges(_ranges);
				}

				e.preventDefault();
				e.stopPropagation();
			}
		}

		function handleClick(e) {
			var cell = _grid.getCellFromEvent(e),
				opt = _grid.getOptions(),
				readonlySelect = (!opt.enableCellNavigation && opt.multiSelect && !opt.editable);

			if (!cell || (readonlySelect ? false : !_grid.canCellBeActive(cell.row, cell.cell))) {
				return false;
			}

			var selection = rangesToRows(_ranges);
			var idx = $.inArray(cell.row, selection);

			if (!e.ctrlKey && !e.shiftKey && !e.metaKey) {
				return false;
			}
			else if (_grid.getOptions().multiSelect) {
				if (idx === -1 && (e.ctrlKey || e.metaKey)) {
					selection.push(cell.row);
					_grid.setActiveCell(cell.row, cell.cell);
				}
				else if (idx !== -1 && (e.ctrlKey || e.metaKey)) {
					selection = $.grep(selection, function (o, i) { return (o !== cell.row); });
					_grid.setActiveCell(cell.row, cell.cell);
				}
				else if (selection.length && e.shiftKey) {
					var last = selection.pop();
					var from = Math.min(cell.row, last);
					var to = Math.max(cell.row, last);
					selection = [];
					for (var i = from; i <= to; i++) {
						if (i !== last) {
							selection.push(i);
						}
					}
					selection.push(last);
					_grid.setActiveCell(cell.row, cell.cell);
				}
			}

			_ranges = rowsToRanges(selection);
			setSelectedRanges(_ranges);
			e.stopImmediatePropagation();

			return true;
		}

		$.extend(this, {
			"getSelectedRows": getSelectedRows,
			"setSelectedRows": setSelectedRows,
			"getSelectedRanges": getSelectedRanges,
			"setSelectedRanges": setSelectedRanges,
			"init": init,
			"destroy": destroy,
			"onSelectedRangesChanged": new Slick.Event()
		});
	}
})(jQuery);

/*
* RowMove Manager Plugin.
*/
(function($) {
	// register namespace
	$.extend(true, window, {
		"Slick": {
			"RowMoveManager": RowMoveManager
		}
	});

	function RowMoveManager() {
		var _grid;
		var _canvas;
		var _dragging;
		var _self = this;

		function init(grid) {
			_grid = grid;
			_canvas = _grid.getCanvasNode();
			_grid.onDragInit.subscribe(handleDragInit);
			_grid.onDragStart.subscribe(handleDragStart);
			_grid.onDrag.subscribe(handleDrag);
			_grid.onDragEnd.subscribe(handleDragEnd);
		}

		function destroy() {
			_grid.onDragInit.unsubscribe(handleDragInit);
			_grid.onDragStart.unsubscribe(handleDragStart);
			_grid.onDrag.unsubscribe(handleDrag);
			_grid.onDragEnd.unsubscribe(handleDragEnd);
		}

		function handleDragInit(e) {
			// prevent the grid from cancelling drag'n'drop by default
			e.stopImmediatePropagation();
		}

		function handleDragStart(e,dd) {
			var cell = _grid.getCellFromEvent(e);
			if (_grid.getEditorLock().isActive() || !/move|selectAndMove/.test(_grid.getColumns()[cell.cell].behavior)) {
				return false;
			}

			if ($(_grid.getCellNode(cell.row, cell.cell)).find(".uneditable").length >0) {
				return false;
			}

			_dragging = true;
			e.stopImmediatePropagation();

			var selectedRows = _grid.getSelectedRows();

			if (selectedRows.length == 0 || $.inArray(cell.row, selectedRows) == -1) {
				selectedRows = [cell.row];
				_grid.setSelectedRows(selectedRows);
			}

			var rowHeight = _grid.getOptions().rowHeight;

			dd.selectedRows = selectedRows;

			dd.selectionProxy = $("<div class='slick-reorder-proxy'/>")
				.css("position", "absolute")
				.css("zIndex", "99999")
				.css("width", "100%")
				.css("height", rowHeight*selectedRows.length)
				.appendTo(_canvas);

			dd.guide = $("<div class='slick-reorder-guide'/>")
				.css("position", "absolute")
				.css("zIndex", "99998")
				.css("width", "100%")
				.css("top", -1000)
				.appendTo(_canvas);

			dd.insertBefore = -1;

		}

		function handleDrag(e,dd) {
			if (!_dragging) {
				return;
			}

			e.stopImmediatePropagation();

			var top = e.pageY - $(_canvas).offset().top;
			dd.selectionProxy.css("top",top-5);

			var insertBefore = Math.max(0,Math.min(Math.round(top/_grid.getOptions().rowHeight),_grid.getDataLength()));
			if (insertBefore !== dd.insertBefore) {
				var eventData = {
					"rows":         dd.selectedRows,
					"insertBefore": insertBefore
				};

				if (_self.onBeforeMoveRows.notify(eventData) === false) {
					dd.guide.css("top", -1000);
					dd.canMove = false;
				}
				else {
					dd.guide.css("top",insertBefore*_grid.getOptions().rowHeight);
					dd.canMove = true;
				}

				dd.insertBefore = insertBefore;
			}
		}

		function handleDragEnd(e,dd) {
			if (!_dragging) {
				return;
			}
			_dragging = false;
			e.stopImmediatePropagation();

			dd.guide.remove();
			dd.selectionProxy.remove();

			if (dd.canMove) {
				var eventData = {
					"rows":         dd.selectedRows,
					"insertBefore": dd.insertBefore
				};
				_self.onMoveRows.notify(eventData);
			}
		}

		$.extend(this, {
			"onBeforeMoveRows": new Slick.Event(),
			"onMoveRows":       new Slick.Event(),

			"init":             init,
			"destroy":          destroy
		});
	}
})(jQuery);

/*
* Cell Decorator Plugin for Xls copy
*/
(function ($) {
// register namespace
$.extend(true, window, {
	"Slick": {
	"CellRangeDecorator": CellRangeDecorator
	}
});

function CellRangeDecorator(grid, options) {
	var _elem,
		_defaults = {
			selectionClass: "slick-cell-range-select"
		};

	options = $.extend(true, {}, _defaults, options);

	function show(range, canvas) {
	var self = this;
	if (!_elem) {
		_elem = $("<div></div>")
			.css("position", "absolute").addClass(options.selectionClass)
			.appendTo(canvas)
			.click(function(e) {
				self.hide();
				$(document.elementFromPoint(e.clientX,e.clientY)).trigger("click");
			});
	}

	if (_elem.parent()!=canvas) {
		_elem.remove().appendTo(canvas);
	}

	var from = grid.getCellNodeBox(range.fromRow, range.fromCell);
	var to = grid.getCellNodeBox(range.toRow, range.toCell);

	_elem.css({
		top: from.top,
		left: from.left,
		height: to.bottom - from.top +1,
		width: to.right - from.left -1
	});

	return _elem;
	}

	function hide() {
	if (_elem) {
		_elem.remove();
		_elem = null;
	}
	}

	$.extend(this, {
	"show": show,
	"hide": hide
	});
}
})(jQuery);

/*
* CellRangeSelector Plugin for Xls copy
Based on http://www.developerextensions.com/index.php/extjs-excel-copypaste-grid
*/
(function ($) {
// register namespace
$.extend(true, window, {
	"Slick": {
	"CellRangeSelector": CellRangeSelector
	}
});

function CellRangeSelector(options) {
	var _grid;
	var _canvas;
	var _dragging;
	var _decorator;
	var _self = this;
	var _textarea = null;
	var _tsvData = "";	//Excel pastable data.

	function init(grid) {
		_grid = grid;
		_canvas = _grid.getCanvasNode();

		if (!options.enableCellRangeSelection)
			return;

		_decorator = new Slick.CellRangeDecorator(grid);
		_grid.onDragInit.subscribe(handleDragInit);
		_grid.onDragStart.subscribe(handleDragStart);
		_grid.onDrag.subscribe(handleDrag);
		_grid.onDragEnd.subscribe(handleDragEnd);
		_grid.onActiveCellChanged.subscribe(handleActiveCellChange);
		_grid.getData().onRowCountChanged.subscribe(handleActiveCellChange);
		_grid.onSort.subscribe(handleActiveCellChange);

		this.onCellRangeSelected.subscribe(handleCellRangeSelected);

		_grid.onKeyDown.subscribe(function (e) {
			if (grid.getEditorLock().isActive()) {
				return;
			}
			
			if (e.ctrlKey && !e.shiftKey && e.which == 	67) {
				copyToClipBoard();
			}
			
			if (e.ctrlKey && !e.shiftKey && e.which == 86) {
				directFocus();
			}
		});
		
		if (_grid.getOptions().editable) {
			$(_canvas).bind("paste", function(elem, e) {
				//let the value past into the text area and on
				setTimeout(function() { handlePaste() }, 0);
			});
		}
	}

	function destroy() {
		_grid.onDragInit.unsubscribe(handleDragInit);
		_grid.onDragStart.unsubscribe(handleDragStart);
		_grid.onDrag.unsubscribe(handleDrag);
		_grid.onDragEnd.unsubscribe(handleDragEnd);
		_grid.onActiveCellChanged.unsubscribe(handleActiveCellChange);
		_grid.onSort.unsubscribe(handleActiveCellChange);
		_grid.getData().onRowCountChanged.unsubscribe(handleActiveCellChange);
	}

	function handleDragInit(e, dd) {
		// prevent the grid from cancelling drag'n'drop by default
		e.stopImmediatePropagation();
	}

	function handleDragStart(e, dd) {
		var cell = _grid.getCellFromEvent(e);
		if (_self.onBeforeCellRangeSelected.notify(cell) !== false) {

			if (_grid.getEditorLock().isActive()) {
				_grid.getEditorLock().commitCurrentEdit();
			}
			if (_grid.canCellBeSelected(cell.row, cell.cell)) {
			_dragging = true;
			e.stopImmediatePropagation();
			}
		}
		if (!_dragging) {
			return;
		}

		var start = _grid.getCellFromPoint(
			dd.startX - $(_canvas).offset().left,
			dd.startY - $(_canvas).offset().top);

		dd.range = {start: start, end: {}};

	//return _decorator.show(new Slick.Range(start.row, start.cell));
	}

	function handleDrag(e, dd) {
	if (!_dragging) {
		return;
	}
	e.stopImmediatePropagation();

	var end = _grid.getCellFromPoint(
		e.pageX - $(_canvas).offset().left,
		e.pageY - $(_canvas).offset().top);

	if (!_grid.canCellBeSelected(end.row, end.cell)) {
		return;
	}

	dd.range.end = end;
	if (dd.range.start.row==end.row && dd.range.start.cell==end.cell)
		return;

	var frozenCol = _grid.getOptions().frozenColumn,
		target = $(_canvas[0]);

	if (frozenCol > -1 && dd.range.start.cell > frozenCol)
		target = $(_canvas[1]);

		_decorator.show(new Slick.Range(dd.range.start.row, dd.range.start.cell, end.row, end.cell), target);
	}

	function handleDragEnd(e, dd) {
	if (!_dragging) {
		return;
	}

	_dragging = false;
	e.stopImmediatePropagation();

	_self.onCellRangeSelected.notify({
		range: new Slick.Range(
			dd.range.start.row,
			dd.range.start.cell,
			dd.range.end.row,
			dd.range.end.cell
		)
	});

	_canvas.focus();	//focus the canvas so the keys work.
	}

	function handleCellRangeSelected(e, args) {
	_ranges = args.range;
	}

	function handleActiveCellChange(e, args) {
		_decorator.hide();
		_ranges = new Slick.Range(args.row, args.cell, args.row, args.cell);
	}

	function collectGridData(includeHeaders) {
		var data = _grid.getFilteredData(),
			from = _ranges,
			rowTsv = "",
			columns = _grid.getColumns();

		_tsvData = "";

		if (data.length == 0) {
			return;
		}

		if (includeHeaders) {
			rowTsv = "";
			for (var j = 0; j <= from.toCell - from.fromCell; j++) {
				var col = columns[from.fromCell + j],
					fieldId = col.field;

				if (fieldId==undefined) {
					continue;
				}
				if ( rowTsv!="" ){
					rowTsv+="\t";
				}
				rowTsv += col.name;
			}
			_tsvData +=rowTsv;
		}

		for (var i = 0; i <= from.toRow - from.fromRow; i++) {
			if ( _tsvData!="" ) {
				_tsvData +="\n";
			}
			rowTsv = "";

			var firstEmpty = false;

			for (var j = 0; j <= from.toCell - from.fromCell; j++) {
				var column = columns[from.fromCell + j];
					fieldId = column.field;
				//ignore columns with no field. this includes built in columns
				if (fieldId==undefined) {
					continue;
				}

				if ( rowTsv!="" || firstEmpty ){
					rowTsv+="\t";
				}

				//Format the values as needed.
				var cellVal = data[from.fromRow + i][fieldId];
				if (cellVal==undefined || cellVal==null) {
					cellVal="";
					if (rowTsv!="")
						firstEmpty == true;
				}

				//replace tabs and new lines with spaces and
				if (typeof cellVal =="string") {
					cellVal = cellVal.replace(new RegExp( "\\t", "g" ),"     ");
					if (cellVal.search(new RegExp( "\\n", "g" ))>-1) {
						cellVal = '"' + cellVal + '"'
					}
				}

				var formatter = column.formatter,
					isEmpty = (typeof cellVal =="string" &&  cellVal ==""),
					isTreeFormatter = (formatter  ? formatter.toString().toLowerCase().indexOf("tree")>-1 : false),
					isCheckboxFormatter = (formatter  ? formatter.toString().toLowerCase().indexOf("inforcheckbox")>-1 : false);

				if (formatter && !isTreeFormatter && !isCheckboxFormatter && !isEmpty) {	//Ignore the tree /checkbox formatter.
					cellVal = formatter(from.fromCell + j, i, cellVal, column,data[from.fromRow + i],_grid.getOptions(),_grid);
					if (typeof cellVal =="string"){
						cellVal = $("<div/>").html(cellVal).text();
					}
				}
				rowTsv += cellVal;
			}
			_tsvData +=rowTsv;
		}
	}

	function excelExport() {
		//set ranges to all then trigger a ctrl c
		_ranges = new Slick.Range(
			0,
			0,
			_grid.getFilteredData().length-1,
			_grid.getColumns().length-1
		);
		collectGridData(true);
		downloadFile(_tsvData);
	}

	function downloadFile(data) {
		var form = $("<form></form>").appendTo("body")
			.attr("action", options.exportScriptUrl)
			.attr("method", "POST");

		$("<input type='hidden'/>").appendTo(form)
			.attr("name", "data")
			.attr("value", data);

		$("<input type='hidden'/>").appendTo(form)
			.attr("name", "filename")
			.attr("value", options.exportFileName);

		form.submit();
		form.remove();
	}

	function copyToClipBoard(includeHeaders){
		collectGridData(includeHeaders);

		if (window.clipboardData) {
			clipboardData.setData("Text", _tsvData);
		} else {
			var cellPos = $(".slick-cell-range-select").position();
			if (cellPos==null) {
				cellPos= $(_grid.getActiveCellNode()).position();
			}
			var input = getHiddenInput();
			input.css({left: cellPos.left+"px", top: cellPos.top+"px"});
			input.val(_tsvData).focus().select();
		}
	}

	function directFocus() {
		this._focused = document.activeElement;
		var cellPos = $(".slick-cell-range-select").position(),
			textArea = getHiddenInput();

		if (!cellPos) {
			return;
		}
		textArea.css({left: cellPos.left+"px", top: cellPos.top+"px"});
		textArea.val("").focus().select();
	}

	function handlePaste() {
		if (typeof _ranges == "undefined")
			return;

		if (_grid.getEditorLock().isActive()) {
			return;
		}

		$(this._focused).val("").focus();
		var contents = "",
			to = _ranges,
			data = _grid.getData().getItems(),
			columns = _grid.getColumns();

		if (window.clipboardData) {
			contents = window.clipboardData.getData("Text");
		} else {
			contents = getHiddenInput().val();
		}

		var rows = contents.split("\n");
		//paste from the cell out.
		for (var i = 0; i <= rows.length-1; i++) {
			if (rows[i]=="" && i==rows.length-1)	//skip last empty row in excel.
				continue;

			var cols = rows[i].replace(/\r/,'').split("\t");
			for (var j = 0; j <= cols.length-1; j++) {
				var editable = columns[to.fromCell +j].editable;
				if (!(editable==undefined ? true : editable))
					continue;

				// trigger the cell edit functions.
				_grid.trigger(_grid.onBeforeEditCell, {
					row: to.fromRow + i,
					cell: to.fromCell + j,
					item: _grid.getDataItem(to.fromRow + i),
					column: columns[to.fromCell + j] });

				data[to.fromRow + i][columns[to.fromCell +j].field] = (cols[j]=="undefined" ? "" : cols[j]);
				_grid.invalidateRow(to.fromRow + i);

				// Trigger the cell change event with the new data
				_grid.trigger(_grid.onCellChange, {
							row: to.fromRow + i,
							cell: to.fromCell + j,
							item: _grid.getDataItem(to.fromRow + i),
							cellValue : data[to.fromRow + i][columns[to.fromCell + j].field]
				});
			}
		}
		_grid.render();

		if (_grid.getOptions().showSummaryRow) {
			_grid.updateSummaryRow();
		}
	}

	function getHiddenInput() {
		if (!_textarea) {
			_textarea= $("<textarea class='export-input'></textarea>").appendTo($(_canvas.filter(":visible:last"))).css({"position":"absolute" , "z-index":"-1" });
		}
		return _textarea;
	}

	$.extend(this, {
	"init": init,
	"destroy": destroy,
	"name": "CellRangeSelector",

	"onBeforeCellRangeSelected": new Slick.Event(),
	"onCellRangeSelected": new Slick.Event(),
	"excelExport": excelExport
	});
}
})(jQuery);

/*
* Paging Control.
*/
(function($) {
	function SlickGridPager(dataView, grid, $container){
		var $status;
		var $nextButton;
		var $prevButton;
		var $lastButton;
		var $firstButton;
		var $records;	//show number of records

		function init() {
			dataView.onPagingInfoChanged.subscribe(function(e,pagingInfo) {
				updatePager(pagingInfo);
			});

			constructPagerUI();
			updatePager(dataView.getPagingInfo());
		}

		function getNavState() {
			var cannotLeaveEditMode = !Slick.GlobalEditorLock.commitCurrentEdit();
			var pagingInfo = dataView.getPagingInfo();

			var lastPage = Math.floor(pagingInfo.totalRows/pagingInfo.pageSize);
			if (Math.floor(pagingInfo.totalRows/pagingInfo.pageSize)==pagingInfo.totalRows/pagingInfo.pageSize)
				lastPage -= 1;

			if (pagingInfo.totalRows==-1)
				lastPage = pagingInfo.pageNum+1;

			var canGotoFirst = !cannotLeaveEditMode && pagingInfo.pageSize != 0 && pagingInfo.pageNum > 0,
				canGotoLast  = !cannotLeaveEditMode && pagingInfo.pageSize != 0 && pagingInfo.pageNum != lastPage,
				canGotoPrev  = !cannotLeaveEditMode && pagingInfo.pageSize != 0 && pagingInfo.pageNum > 0,
				canGotoNext  = !cannotLeaveEditMode && pagingInfo.pageSize != 0 && pagingInfo.pageNum < lastPage;

			if (pagingInfo.pageNum==-1 || pagingInfo.pageNum==99999) {
				if (pagingInfo.isLastPage) {
					canGotoLast = false;
					canGotoNext = false;
				} else {
					canGotoLast = true;
					canGotoNext = true;
				}

				if (pagingInfo.isFirstPage) {
					canGotoPrev = false;
					canGotoFirst = false;
				} else {
					canGotoPrev = true;
					canGotoFirst = true;
				}
			}

			return {
				canGotoFirst:	canGotoFirst,
				canGotoLast:	canGotoLast,
				canGotoPrev:	canGotoPrev,
				canGotoNext:	canGotoNext,
				pagingInfo:		pagingInfo,
				lastPage:		lastPage
			}
		}

		function setPageSize(n) {
			dataView.setPagingOptions({pageSize:n});
			dataView.requestNewPage("pageSize");
			grid.getOptions().pageSize = n;
			grid.trigger(grid.onPersonalizationChanged, grid.getGridPersonalizationInfo('PageSize'));
			$container.find('.inforTextbox.recordsPerPage').val(n);
		}

		function goToPage(input) {
			var n = parseInt(input.val()),
				state = getNavState();

			if ( n-1 > state.lastPage ) {
				n = state.lastPage+1;
				input.val(n);
			}

			if ( n <= 0 ) {	//do not allow zero or less than zero
				n = 1;
				input.val(n);
			}

			if (n!= input.data("oldVal")) {
				dataView.setPagingOptions({pageNum: n-1}, "page");	//page sizes are zero indexed...
				input.data("oldVal",n);
			}
		}

		function ensureValidKey(event) {
			//0-9
			if (event.keyCode >= 48 && event.keyCode <= 57) {
				return;
			}
			//numpad
			if (event.keyCode >= 91 && event.keyCode <= 105) {
				return;
			}
			//disallow the rest
			event.preventDefault();
		}

		function gotoFirst() {
			if ($(this).is("button") && $(this).hasClass("disabled")) {
				return;
			}

			if (getNavState().canGotoFirst)
				dataView.setPagingOptions({pageNum: 0}, "first");
		}

		function gotoLast() {
			if ($(this).is("button") && $(this).hasClass("disabled")) {
				return;
			}

			var state = getNavState();
			if (state.canGotoLast)
				dataView.setPagingOptions({pageNum: state.lastPage}, "last");
		}

		function gotoPrev() {
			if ($(this).is("button") && $(this).hasClass("disabled")) {
				return;
			}

			var state = getNavState();
			if (state.canGotoPrev)
				dataView.setPagingOptions({pageNum: state.pagingInfo.pageNum-1}, "previous");
		}

		function gotoNext() {
			if ($(this).is("button") && $(this).hasClass("disabled")) {
				return;
			}
			var state = getNavState();
			if (state.canGotoNext)
				dataView.setPagingOptions({pageNum: state.pagingInfo.pageNum+1}, "next");
		}

		function constructPagerUI() {
			$container.empty();

			var $navLeft = $("<span class='slick-pager-nav' />").appendTo($container),
				pagingMode = grid.getOptions().pagingMode,
				showButtons = (pagingMode==PagingModes.PagerServerSide || pagingMode==PagingModes.PagerClientSide),
				icon_prefix = "<button type='button' class='inforGridPagingButton ",
				icon_suffix = "><span></span></button>",
				options = grid.getOptions();

			if (showButtons) {
				$firstButton = $(icon_prefix + (Globalize.culture().isRTL ? " lastPage" : " firstPage") +"' title='"+Globalize.localize("First")+"'" + icon_suffix)
						.click(gotoFirst)
						.appendTo($navLeft);

				$prevButton = $(icon_prefix + (Globalize.culture().isRTL ? " nextPage" : " previousPage") +"' title='"+Globalize.localize("Previous")+"'" + icon_suffix)
						.click(gotoPrev)
						.appendTo($navLeft);

				$status = $("<span class='slick-pager-status' />").appendTo($container);

				var $navRight = $("<span class='slick-pager-nav' />").appendTo($container);

				$nextButton = $(icon_prefix + (Globalize.culture().isRTL ? " previousPage" : " nextPage") +"' title='"+Globalize.localize("Next")+"'" + icon_suffix)
				.click(gotoNext)
					.appendTo($navRight);

				$lastButton = $(icon_prefix + (Globalize.culture().isRTL ? " firstPage" : " lastPage") +"' title='"+Globalize.localize("Last")+"'" + icon_suffix)
						.click(gotoLast)
						.appendTo($navRight);

				$container.children().wrapAll("<div class='slick-pager' />");
			}

			if (grid.getOptions().multiSelect==true) {
				if (showButtons)
					$("<span class='inforToolbarSpacer'></span>").appendTo($container);

				$selectedRecords =	$("<div class='slick-records-status' />").appendTo($container);	 //show a selected count
				$("<span class='inforToolbarSpacer'></span>").appendTo($container);
			}
			$records = $("<div class='slick-record-status' />").appendTo($container);		//show number of records

			//add an optional page size selector.
			if (options.showPageSizeSelector){
				var $div = $("<span class='slick-pager-status recordsPerPage'></span>").appendTo($container),
					$pageSizeInput = $("<input class='inforTextbox recordsPerPage'>").val(dataView.getPagingInfo().pageSize).appendTo($div).mask("999"),
					typeTimer;

				//call when done typing
				$pageSizeInput.before("<label class='inforLabel recordsPerPage'>"+Globalize.localize("RecordsPerPage")+"</label>")
					.keyup(function(){
						var val = $(this).val();
						clearTimeout(typeTimer);
						if (val) {
							typeTimer = setTimeout(function() {
								setPageSize(parseInt(val, 10));
							}, 600);
						}
					});
				$div.appendTo($container);
			}
		}

		function updatePager(pagingInfo) {
			var state = getNavState();
			var pagingMode = grid.getOptions().pagingMode;
			var showButtons = (pagingMode==PagingModes.PagerServerSide || pagingMode==PagingModes.PagerClientSide);

			if (showButtons) {
				//set the disabled button state
				if (!state.canGotoFirst)
					$firstButton.addClass("disabled");
				else
					$firstButton.removeClass("disabled");

				if (!state.canGotoLast)
					$lastButton.addClass("disabled");
				else
					$lastButton.removeClass("disabled");

				if (!state.canGotoNext)
					$nextButton.addClass("disabled");
				else
					$nextButton.removeClass("disabled");

				if (!state.canGotoPrev)
					$prevButton.addClass("disabled");
				else
					$prevButton.removeClass("disabled");

				//show the page status
				if (pagingInfo.totalRows == 0) {	//show number of records START
					$status.css({"padding-top": "4px" ,"margin-top":""}).text(Globalize.localize("NoRecordsFound"));
					$container.find(".inforGridPagingButton").hide();
					$records.html("");
					if (grid.getOptions().multiSelect==true)
						$selectedRecords.html("");
					return;
				}

				if ((pagingInfo.totalRows==-1 && grid.getDataLength()==0)) {
					$nextButton.addClass("disabled");
					$lastButton.addClass("disabled");
					$prevButton.addClass("disabled");
					$firstButton.addClass("disabled");
					$records.html(Globalize.localize("Displaying") + " " + 0  )
					$status.css({"padding-top": "4px" ,"margin-top":""}).text(Globalize.localize("NoRecordsFound"));
					return;
				}
				
				if (pagingInfo.pageSize == 0 || pagingInfo.pageSize == pagingInfo.totalRows) {
					$status.css("padding-top","4px").text(Globalize.localize("ShowingAll")+" " + pagingInfo.totalRows + " "+Globalize.localize("Rows"));
					$container.find(".inforGridPagingButton").hide();
					if (grid.getOptions().multiSelect==true) {
						$selectedRecords.html(Globalize.localize("Selected") + " 0" );
					}
					return;
				}

				//Show the status text...
				var pageNum = (pagingInfo.pageNum+1),
					floor = Math.floor(pagingInfo.totalRows/pagingInfo.pageSize),
					pageCount = (floor+1);

				if (floor===pagingInfo.totalRows/pagingInfo.pageSize)
					pageCount = floor;

				$status.html(Globalize.localize("Page")+" <input class='inforTextbox' value='"+ pageNum +"'/>" + " " + Globalize.localize("Of") + " " + pageCount);
				$status.css({"padding-top": "" ,"margin-top":""});

				var pageNumTextBox = $status.find("input");
				var timeout = null;
				pageNumTextBox.keydown(ensureValidKey).keyup(function(evt) {
					var $input = $(this);
					clearTimeout(timeout);
					timeout = setTimeout(function() {
						goToPage($input);
					},700);
				}).data("oldVal",pageNum);

				//adjust the width
				if (pageNumTextBox) {
					if (pageCount>10)
						pageNumTextBox.width(15);

					if (pageCount>100)
						pageNumTextBox.width(18);

					if (pageCount>1000)
						pageNumTextBox.width(20);
				}

				$container.find(".inforGridPagingButton").show();
			}

			//Show the record selections
			var recEnd = (pagingInfo.pageNum+1) * pagingInfo.pageSize;
			var recBegin = recEnd - (pagingInfo.pageSize - 1);

			if (!showButtons) {	//continuous or live scrolling.. or none
				recBegin = (pagingInfo.totalRows>0 ? 1 :0 );
			}

			recEnd = (recEnd > pagingInfo.totalRows) ? pagingInfo.totalRows : recEnd;

			if (grid.getOptions().pagingMode==PagingModes.None)
				recEnd= pagingInfo.totalRows;

			if (pagingMode==PagingModes.ContinuousScrolling)
				$records.html(Globalize.localize("Displaying") + " " + recBegin + " - " + pagingInfo.totalRows );
			else
				$records.html(Globalize.localize("Displaying") + " " + recBegin + " - " + recEnd + " " + Globalize.localize("Of") + " " + pagingInfo.totalRows );

			if (grid.getOptions().multiSelect==true)
				$selectedRecords.html(Globalize.localize("Selected") + " 0" );

			if (pagingInfo.totalRows == 0)	{
				$records.html(Globalize.localize("NoRecordsFound"));
				if (grid.getOptions().multiSelect==true)
					$selectedRecords.html("");
			}

			//disable some things for no total count
			if (pagingInfo.totalRows == -1)	{
				var dataLength = grid.getDataLength();

				if (pagingInfo.pageNum == -1 || pagingInfo.pageNum==99999)
					$records.html(Globalize.localize("Displaying") + " " + dataLength +" " + Globalize.localize("Rows"));
				else
					$records.html(Globalize.localize("Displaying") + " " + Math.max(1,pagingInfo.pageSize*(pagingInfo.pageNum)) + " - " + parseInt(pagingInfo.pageSize*(pagingInfo.pageNum)+dataLength)  );

				if ($status) {
					$status.hide();
				}

				if (showButtons && pagingInfo.isFirstPage && pagingInfo.isLastPage) {
					$lastButton.addClass("disabled");
					$prevButton.addClass("disabled");
					$firstButton.addClass("disabled");
					$nextButton.addClass("disabled");
				}
			}
		}

		init();

		//Page Api...
		$.extend(this, {
			"setPageSize": setPageSize
		});
	}

	// Slick.Controls.Pager
	$.extend(true, window, { Slick: { Controls: { Pager: SlickGridPager }}});
})(jQuery);

/*
* Column Picker Control.
*/
(function($) {
	function ColumnPicker(grid, options) {
		var $menu;

		var defaults = {
			fadeSpeed: 200
		};

		function init() {
			options = $.extend({}, defaults, options);
			var isInLookup = $(grid.getCanvasNode()).closest(".inforLookupGridBoxShadow").length>0,
				isInDialog = $(grid.getCanvasNode()).closest(".inforDialog").length>0,
				maxHeight = 100,
				$overlay;

			$menu = $("<span class='slick-columnpicker' style='display:none;position:absolute;z-index:"+(isInLookup || isInDialog ? 2044 : 1013)+";' />").appendTo(document.body);

			$menu.on("click", updateColumn);
		}

		function open(button) {
			$menu.empty();

			var $li, $input, i,
				filter,
				columns = grid.getColumns(true);

			filter = function(term) {
				$menu.find("li").each(function() {
					var li = $(this),
						text = li.text();

					if (text.indexOf(term) !== 0) {
						li.hide();
					}
					if (!term && text) {
						li.show();
					}
				});
			};

			//add search box..
			var searchField = $('<input class="inforSearchField" type="text" style="width:100px" placeholder="' + Globalize.localize("Search") + '"/>').appendTo($menu)
				.inforSearchField({
					click: function (event) {
						filter($(event.input).val());
					},
					cancel: function (event) {
						filter("");
					}
				});

			var cols = $('<div class="slick-columnpicker-cols"></div>').appendTo($menu);

			for (var i=0; i<columns.length; i++) {

				if (columns[i].name=="" || columns[i].id=="#" || columns[i].id=="")
					continue;

				$li = $("<li />").appendTo(cols);

				$input = $("<input type='checkbox' class='inforCheckbox' />")
						.attr("id", columns[i].id)
						.data("id", columns[i].id)
						.appendTo($li);

				$input.inforCheckbox().css({"left":"0" , "top":"0"});

				if (grid.getColumnIndex(columns[i].id) != null)
					$input.setValue(true);

				if ($.inArray(columns[i].id, ['selector', 'indicator-icon', 'checkbox-selector', 'drilldown'])< 0)
				{
					$("<label class='inforCheckboxLabel' for='" + columns[i].id + "' />")
						.text(columns[i].name)
						.appendTo($li.find("div.inforCheckboxContainer"));
				}
			}

			var leftCss = button.offset().left-$menu.width();
			if (Globalize.culture().isRTL)
				leftCss = button.offset().left+3;

			$menu
				.css("top", button.offset().top)
				.css("left", leftCss )
				.css("max-height", $(window).height() + $(window).scrollTop() - button.offset().top - 15)
				.fadeIn(options.fadeSpeed, function() {
					searchField.width($menu.width() - 15);
				});

			cols.css("max-height", $(window).height() + $(window).scrollTop() - button.offset().top - 40);
			//columns to skip from showing in the list
			$menu.find('#indicator-icon, #selector, #checkbox-selector, #drilldown').closest('li').hide();

			//dismiss on click out..
			$(document).on('click.inforColumnPicker', function(e) {
				$(document).off('click.inforColumnPicker');
				$menu.fadeOut(options.fadeSpeed);
			});
		}

		function updateColumn(e) {
			e.stopPropagation();

			var $target = $(e.target);
			if ($target.is(":checkbox")) {
				//either hide or show this particular column
				if ($target.is(":checked")) {
					grid.showColumn($target.attr("id"));
				} else {
					grid.hideColumn($target.attr("id"));
				}
				grid.updateFilterRow();
			}
		}

		init();

		//Create callable methods...
		$.extend(this, {
			"open": open
		});
	}

	// Slick.Controls.ColumnPicker
	$.extend(true, window, { Slick: { Controls: { ColumnPicker: ColumnPicker }}});
})(jQuery);

/*
* Row Grouping and Totals.
*/
(function($) {
	$.extend(true, window, {
		Slick: {
			Data: {
				GroupItemMetadataProvider: GroupItemMetadataProvider
			}
		}
	});


	/*
	* Provides item metadata for group (Slick.Group) and totals (Slick.Totals) rows produced by the DataView.
	* This metadata overrides the default behavior and formatting of those rows so that they appear and function
	* correctly when processed by the grid.
	*
	* This class also acts as a grid plugin providing event handlers to expand & collapse groups.
	* If "grid.registerPlugin(...)" is not called, expand & collapse will not work.
	*/
	function GroupItemMetadataProvider(options) {
		var _grid;
		var _defaults = {
			groupCssClass: "slick-group",
			totalsCssClass: "slick-group-totals",
			groupFocusable: true,
			totalsFocusable: false,
			toggleCssClass: "tree-expand inforIconButton",
			toggleExpandedCssClass: "open",
			toggleCollapsedCssClass: "closed",
			enableExpandCollapse: true
		};

		options = $.extend(true, {}, _defaults, options);

		function defaultGroupCellFormatter(row, cell, value, columnDef, item) {

			if (!options.enableExpandCollapse) {
				return item.title;
			}

			return "<button class='" + options.toggleCssClass + " " +
					(item.collapsed ? options.toggleCollapsedCssClass : options.toggleExpandedCssClass) +
					"'><span></span></button>" + item.title; 
		}

		function defaultTotalsCellFormatter(row, cell, value, columnDef, item) {
			return (columnDef.groupTotalsFormatter && columnDef.groupTotalsFormatter(item, columnDef)) || "";
		}

		function init(grid) {
			_grid = grid;
			_grid.onClick.subscribe(handleGridClick);
			_grid.onKeyDown.subscribe(handleGridKeyDown);

		}

		function destroy() {
			if (_grid) {
				_grid.onClick.unsubscribe(handleGridClick);
				_grid.onKeyDown.unsubscribe(handleGridKeyDown);
			}
		}

		function handleGridClick(e, args) {
			var item = this.getDataItem(args.row);
			if (item && item instanceof Slick.Group && ($(e.target).hasClass(options.toggleCssClass) || $(e.target).parent().hasClass(options.toggleCssClass))) {
				if (item.collapsed) {
					this.getData().expandGroup(item.value);
				}
				else {
					this.getData().collapseGroup(item.value);
				}

				e.stopImmediatePropagation();
				e.preventDefault();
			}
		}

		// TODO:  add -/+ handling
		function handleGridKeyDown(e) {
			if (options.enableExpandCollapse && (e.which == $.ui.keyCode.SPACE)) {
				var activeCell = this.getActiveCell();
				if (activeCell) {
					var item = this.getDataItem(activeCell.row);
					if (item && item instanceof Slick.Group) {
						if (item.collapsed) {
							this.getData().expandGroup(item.value);
						}
						else {
							this.getData().collapseGroup(item.value);
						}

						e.stopImmediatePropagation();
						e.preventDefault();
					}
				}
			}
		}

		function getGroupRowMetadata() {
			return {
				selectable: false,
				focusable: options.groupFocusable,
				cssClasses: options.groupCssClass,
				columns: {
					0: {
						colspan: "*",
						formatter: defaultGroupCellFormatter,
						editor: null
					}
				}
			};
		}

		function getTotalsRowMetadata() {
			return {
				selectable: false,
				focusable: options.totalsFocusable,
				cssClasses: options.totalsCssClass,
				formatter: defaultTotalsCellFormatter,
				editor: null
			};
		}

		return {
			"init":     init,
			"destroy":  destroy,
			"getGroupRowMetadata":  getGroupRowMetadata,
			"getTotalsRowMetadata": getTotalsRowMetadata
		};
	}
})(jQuery);

/*
* Auto ToolTips Plugin
*/
(function ($) {
$.extend(true, window, {
	"Slick": {
	"AutoTooltips": AutoTooltips
	}
});

function AutoTooltips(options) {
	var _grid,
		_commentPopup;

	function init(grid) {
	_grid = grid;
	_grid.onMouseEnter.subscribe(handleMouseEnter);
	_grid.onMouseLeave.subscribe(handleMouseLeave);
	}

	function destroy() {
		_grid.onMouseEnter.unsubscribe(handleMouseEnter);
	}

	function handleMouseLeave(e, args) {
		var cell = _grid.getCellFromEvent(e);

		if (cell) {
			var $node = $(_grid.getCellNode(cell.row, cell.cell));
			if ($node.hasClass("error") && !$node.hasClass("editable")) {	//show tool tip
				$("#inforTooltip").stop().delay(300).hide();
			}
		}
	}

	function handleMouseEnter(e, args) {
		var cell = _grid.getCellFromEvent(e);
		if (cell) {
		var node = _grid.getCellNode(cell.row, cell.cell),
			$node = $(node),
			col = _grid.getColumns()[cell.cell],
			row = _grid.getData().getItem(cell.row);

		if ($node.hasClass("error") && !$node.hasClass("editable")) {	//show tool tip
			if (row.validationMessages) {
				$node.attr("title", row.validationMessages.get(cell.cell).validationResults.msg).inforToolTip({maxWidth: 300, show: false, isErrorTooltip: true}).off("click");
				$node.stop().delay(200).inforToolTip("open");
			}
		}
		
		var drillDown = $node.children(".drilldown");
		if (drillDown.length === 1 && drillDown.attr("title") && !drillDown.hasClass("uneditable")) {	//show tool tip
				drillDown.stop().delay(200).inforToolTip({maxWidth: 300, show: true, position: {my: "left+12", at: "right"}, arrowClass: "arrowLeft"});
		}

		if ($node.hasClass("status-indicator")) {	//show tool tip
			var errorDiv = $node.find(".error");
			if (row.validationMessages) {
				errorDiv.attr("title", row.validationMessages.toString()).inforToolTip({maxWidth: 400, show: false, isErrorTooltip: true}).off("click");
				errorDiv.stop().delay(100).inforToolTip("open");
			} else {
				var nodeIcon = $node.find(".inforAlertIconSmall"),
					title = nodeIcon.attr("title");
				if (title) {
					nodeIcon.inforToolTip({maxWidth: 400, arrowClass: "arrowLeft", show: false, position: {
						my:  (!this.isRTL ? "left+10 center+1" : "right center+1"),
						at: (!this.isRTL ? "right+10 center+1" : "left center+1"),
						collision: "fit flip"
					}}).off("click");
					nodeIcon.stop().delay(100).inforToolTip("open");
				}
			}
		}

		if (node && ($node.innerWidth() < node[0].scrollWidth) && !$node.hasClass("non-data-cell")) {
			var text = $.trim($node.text()),
				isDropDown = ($node.html().toString().indexOf("inforDataGridDropDownList") != -1);

			//check for long text cell editor tooltip
			if (col.longTextTooltip){
				_commentPopup =_grid.showCommentsPopup($(e.currentTarget).offset(), text, false);
				return;
			}

			if (!isDropDown) {
				$node.attr("title", text);
			}
		} else {
			$node.removeAttr("title");
			if (_commentPopup)
				_commentPopup.hide();
			}
		}
	}

	$.extend(this, {
		"init": init,
		"destroy": destroy
	});
}
})(jQuery);

/*
* Infor DataGrid Plugin wraper.
*/
(function($) {

	var sortcol = "json_number";
	var slickOptions = {};

	PagingModes = {
		None : "None",
		LiveScrolling : "LiveScrolling",	//not supported yet...
		PagerServerSide : "PagerServerSide",
		ContinuousScrolling : "ContinuousScrolling",
		PagerClientSide : "PagerClientSide"
	}

	$.fn.inforDataGrid = function(options) {

		/* The Settings available for this control only. */
		var settings = {
			columns: null,  //The Column Collection
			dataset: [], //The JSON data
			idProperty:'id', //The field name that is the unique key field in the data
			editable: true, //If true you can enter cells and edit
			showCheckboxes:true, //Should we show the row selection checkboxes
			showDrillDown: true,  //Should we show the drill down column.
			drillDown: null,	  //The Drill Down Callback function when a drill down is clicked
			drillDownTooltip: null,	//a drill down tooltip.
			showStatusIndicators: true, //Should we show the status indicator: new/edit/error indicator
			showGridSettings: true, //should we show the grid settings button on the top left
			showFilter: true,	//Should we display the Filter Bar and filtering options.
			forceFitColumns: false, //allow the columns to resize to fit the width the screen for a small number of columns.
			multiSelect: true, //can we select more than one row at a time.
			showHeaderContextMenu: true,
			enableRowReordering: false,	//allow rows to be reordered...
			showFooter: false, 	//show the paging footer?
			syncColumnCellResize: true,
			enableCellNavigation: true,	//can click into cells.
			pageSize: 0,	//Paging Page size. 0 = all rows no paging. Reccomend 50, 100 or 200.
			pagingMode: PagingModes.None,		// see PagingModes
			enableGrouping: false,	//Enable the grouping features.
			rowHeight: 25,	//Change This if using multiline editor
			fillHeight: true,	//should the grid size itself to the bottom of the page. use if grid is on the bottom and nothing underneath
			savePersonalization: true,	//should the personalization settings be saved in a cookie? Or you use onPersonalizationChanged
			enableCellRangeSelection: true,	//allows you to select/copy a range of cells.
			selectOnRowChange: false, //always select row when you click it.
			showExport: false,	//adds an export function to the footer.
			exportScriptUrl: "http://usmvvwdev67.infor.com:8000/Html5Controls/Services/ExcelRelay.php",
			exportFileName: "Export.xls",
			showCellToolTips: true,	//Enable Tooltips for the cells that do not fit
			showColumnHeaders: true,	//hide headers
			disableClientSort: false,	//disable sort action on the client side - use if data is inconsistent
			disableClientFilter: false, //disable filter action on the client side - use if data is inconsistent
			selectChildren: true,	//select children rows in tree grid mode.
			showPageSizeSelector: false,	//shows a page size selector on the footer.
			frozenColumn: -1,	//start freezing columns at this col position
			selectRowInEditMode: false,	//default is to not select a row in edit mode.
			filterMenuOptions: [{label: Globalize.localize("RunFilter"), href: "#rf" },
								{label: Globalize.localize("FilterWithinResults"), id: "filterInResults", cssClass: "selected", href: "#fwr"},
								{label: Globalize.localize("ClearFilter"), href: "#cf"},
								{label: Globalize.localize("SavedFilters"), href: "#sf"}
							],	//Configurable list of options and actions for the grid filter menu
			gridMenuOptions: [{label: Globalize.localize("ShowFilterRow"), href: "#sfr", cssClass: "selected", id: "showFilter"},
							{label: Globalize.localize("ColumnPersonalization"), href: "#cp", cssClass: "columns" },
							{label: Globalize.localize("ResetToDefault"), href: "#re"},
							{label: "", href: "#", cssClass: "separator"},
							{label: Globalize.localize("ExportToExcel"), href: "#ex", cssClass: "export", condition: options.showExport }
							]//Configurable list of options and actions for the grid menu button
		};

		var selectedRowIds = [];	//Used for Filtering
		var gridObj = null;
		var dataView = null;

		var o = $.extend({}, settings, options); //Extend the options if any provided
		var $grid = $(this);

		/* Add Class for some default styling. */
		$grid.addClass('inforDataGrid');

		/* The Mapped Settings to the Slick grid */
		slickOptions = $.extend(o, {
				autoEdit: true,
				showHeaderRow: true,
				topPanelHeight: 25
			});

		//Create a DataView Which is used during sorting and selection.
		dataView = new Slick.Data.DataView({idProperty: o.idProperty, pagingMode: o.pagingMode });
		gridObj =  new Slick.Grid($grid, dataView, o.columns, slickOptions);
		$grid.data("gridInstance",gridObj);	//save a ref ro the grid so it can be accessed by selector.

		//re-render grid when dataView changes and in filtering
		dataView.onRowCountChanged.subscribe(function (e, args) {
			gridObj.updateRowCount();
			gridObj.render();
		});

		// Subscribe to events to update row selection
		dataView.onRowsChanged.subscribe(function (e, args) {
			gridObj.invalidateRows(args.rows);
			gridObj.render();

			if (selectedRowIds.length > 0) {
				// since how the original data maps onto rows has changed,
				// the selected rows in the grid need to be updated
				var selRows = [];
				for (var i = 0; i < selectedRowIds.length; i++) {
					var idx = dataView.getRowById(selectedRowIds[i]);
					if (idx != undefined)
						selRows.push(idx);
				}
				gridObj.setSelectedRows(selRows);
			}
			if (o.showSummaryRow)
				gridObj.updateSummaryRow();
		});

		gridObj.setSelectionModel(new Slick.RowSelectionModel({ selectActiveRow: false }));

		//Render the gridObj.
		dataView.setFilter(gridObj.filter);

		if (o.pagingMode==PagingModes.ContinuousScrolling) {
			dataView.activeReq = false;
			dataView.currentPage = 0;
			gridObj.onViewportChanged.subscribe(function(e,args) {
				var vp = gridObj.getViewport(),
					toPage = Math.floor((vp.bottom + 1) / o.pageSize);
				
				if (toPage > dataView.currentPage && !dataView.activeReq) {
					
					dataView.currentPage++;
					dataView.setPagingOptions({pageNum: toPage});
				}
			});
			//loading the first page - must be done in view.
		}

		//Attach listeners for loading indicators
		var $viewport = $grid.find(".slick-viewport:visible").last();
		dataView.onDataLoading.subscribe(function(e,args) {
			$viewport.inforBusyIndicator();
			$viewport.css("overflow","hidden");
		});

		dataView.onDataLoaded.subscribe(function(e,args) {
			if ($viewport.data("uiInforBusyIndicator")) {
				$viewport.inforBusyIndicator("close");
				$viewport.css("overflow","auto");
			}
		});

		if (o.showFooter && $grid.next(".inforGridFooter").length==0) {
			var $footer = $('<div class="inforGridFooter"></div>');
			$grid.after($footer);
			dataView.setPagingOptions({pageSize:o.pageSize});
			gridObj.pager = new Slick.Controls.Pager(dataView, gridObj, $footer);
		}

		//Attach Cell Change Event to Track Status
		if (o.showStatusIndicators) {
			gridObj.onCellChange.subscribe(function (e, args) {
				var newValue = "";
				// Set dirty icon when a cell is edited but not new
				if (args.item.indicator != "new" && args.item.indicator != "error") {
					newValue = "dirty";
				}
				
				if (args.item.indicator != newValue && newValue != "") {
					args.item.indicator = newValue;
					gridObj.updateCell(args.row, args.cell);
				}
			});
		}

		//Attach Validation Events to show validation indicator
		gridObj.onValidationMessage.subscribe(function (e, args) {
			if (!args.cellNode) {
				return;
			}

			if (o.showStatusIndicators) {
				var indicatorIcon = $(args.cellNode.parentNode).children(".status-indicator").children(".indicator-icon")

				//add tooltip
				if (args.validationResults.msg)
					$(indicatorIcon).attr("title", args.validationResults.msg).inforToolTip();
				else
					$(indicatorIcon).attr("title","");
			}
		});

		//Setup the Sorting
		if (!options.disableClientSort) {
			gridObj.onSort.subscribe(function (e, args) {
			var cols = args.sortColumns;

			dataView.currentPage = 0;
			dataView.sort(function (dataRow1, dataRow2) {
				for (var i = 0, l = cols.length; i < l; i++) {
				var sortCol = cols[i].sortCol,  
				sign = cols[i].sortAsc ? 1 : -1,
				value1 = gridObj.getDataItemValueForColumn(dataRow1, sortCol.field), 
				value2 = gridObj.getDataItemValueForColumn(dataRow2, sortCol.field),
				result;

				if (typeof value1 =="string" && typeof value2 =="string") {	// case insensitive sorting
					value1 = value1.toLowerCase();
					value2 = value2.toLowerCase();
				}

				if ((value1==undefined || value1==null))
						return -1;

				if ((value2==undefined || value2==null))
						return 1;

				result = (value1 == value2 ? 0 : (value1 > value2 ? 1 : -1)) * sign;
				if (result != 0) {
					return result;
				}
				}
				return 0;
			});

			gridObj.invalidate();
			gridObj.render();
			});
		}

		//attach the click event and button events and drill down.
		gridObj.onClick.subscribe(function(e,args) {
			var target = $(e.target);

			if (target.parent().hasClass("drilldown") && o.drilldown!=undefined) {
				//cell is uneditable.
				if (target.parent().hasClass("uneditable")) {
					return;
				}

				gridObj.getEditorLock().commitCurrentEdit();

				var item = dataView.getItem(args.row);
				o.drilldown(item);
			}

			//handle Grid buttons
			var target = $(e.target);
			if (target.parent().hasClass("gridButton")) {
				target = target.parent();
			}
			if (target.hasClass("gridButton")) {

				var columnId = target.attr("data-columnid");
				if (columnId!=undefined) {
					var columns = gridObj.getColumns(),
						idx = gridObj.getColumnIndex(columnId),
						columnDef = columns[idx],
						item = dataView.getItem(args.row);

					if (columnDef.buttonClick!=undefined) {
						if (target.parent().hasClass("inforToggleButton")) {
							target.parent().find("button").removeClass("checked")
							target.addClass("checked");
							item[columnId] = target.index();
						}
						columnDef.buttonClick(item);
					}
				}
			}

			// handle Tree Expand
			if ((target.hasClass("tree-expand") || target.parent().hasClass("tree-expand")) && gridObj.getOptions().treeGrid) {
				var item = gridObj.getData().getItem(args.row);
				if (item) {
					if (item.collapsed) {
					item.collapsed = false;
					gridObj.trigger(gridObj.onRowExpanded, { row: args.row, item: item});
					} else {
					item.collapsed = true;
					gridObj.trigger(gridObj.onRowCollapsed, { row: args.row, item: item});
					}
					gridObj.getData().updateItem(item[o.idProperty], item);
				}
				e.stopImmediatePropagation();
			}
		});

		// keep track of which rows are selected, in order to
		// reselect them when sorting
		gridObj.onSelectedRowsChanged.subscribe(function (e, args) {
			selectedRowIds = [];
			var rows = gridObj.getSelectedRows();
			for (var i = 0, l = rows.length; i < l; i++) {
				var item = dataView.getItem(rows[i]);
				if (item) {
					selectedRowIds.push($(item).attr(o.idProperty));
				}
			}
		});

		if (o.selectOnRowChange) {
			gridObj.onActiveCellChanged.subscribe(function (e, args) {
				gridObj.setSelectedRows([args.row]);
			});
		}
		
		gridObj.showGridSettings();

		if (o.showHeaderContextMenu)
			gridObj.onHeaderContextMenu.subscribe(handleHeaderContextMenu);

		//Row reordering
		if (o.enableRowReordering) {
			var moveRowsPlugin = new Slick.RowMoveManager();
			moveRowsPlugin.onBeforeMoveRows.subscribe(function(e,data) {
				for (var i = 0; i < data.rows.length; i++) {
					// no point in moving before or after itself
					if (data.rows[i] == data.insertBefore || data.rows[i] == data.insertBefore - 1) {
						e.stopPropagation();
						return false;
					}
				}
				return true;
			});
			moveRowsPlugin.onMoveRows.subscribe(function(e,args) {

				var extractedRows = [], left, right;
				var rows = args.rows;
				var insertBefore = args.insertBefore;
				var data = gridObj.getData().getItems();

				left = data.slice(0, insertBefore);
				right = data.slice(insertBefore, data.length);

				// Put in table order - the selection doesn't guarantee this
				rows.sort(function(a,b){return a-b});

				for (var i=0; i<rows.length; i++) {
					extractedRows.push(data[rows[i]]);
				}

				// Need to sort reverse numerically or else the splices below fail badly
				rows.reverse();

				for (var i=0; i<rows.length; i++) {
					var row = rows[i];
					if (row < insertBefore)
						left.splice(row,1);
					else
						right.splice(row-insertBefore,1);
				}

				data = left.concat(extractedRows.concat(right));

				var selectedRows = [];
				for (var j=0; j<rows.length; j++)
					selectedRows.push(left.length+j);

				gridObj.resetActiveCell();
				gridObj.updateData(data);
				gridObj.setSelectedRows(selectedRows);
				gridObj.render();
				gridObj.trigger(gridObj.onRowsMoved, { movedRows: extractedRows, positions: gridObj.getSelectedRows()});
			});

			gridObj.registerPlugin(moveRowsPlugin);
		}

		if (o.savePersonalization) {
			var cookieId = window.location.pathname+'#'+$grid.attr("id");
			var cookieContents = $.cookie(cookieId);
		}

		//process hidden columns
		var hiddenCols = [];
		for (var i = 0; i < o.columns.length; i++) {
			var col = o.columns[i];
			if (col.hidden == true) {
				hiddenCols.push(col.id);
			}
		}
		if (hiddenCols.length > 0) {
			gridObj.hideColumns(hiddenCols);
		}

		dataView.setItems(o.dataset);
		gridObj.setHeaderRowVisibility(o.showFilter);

		//save personalization in a cookie and restore settings
		if (o.savePersonalization) {
			gridObj.onPersonalizationChanged.subscribe(function (e, args) {
				delete args.grid;	//dont serialize the grid object.
				$.cookie(cookieId, JSON.stringify(args), { expires: 3650 });//convert the JSON to a string...
			});

			//restore previous - convert from string to JSON.
			if (cookieContents != null)
				gridObj.restorePersonalization(eval('(' + cookieContents + ')'));
		}

		if (o.showSummaryRow) {
			o.enableGrouping = true;	//needed to collect the grouping calcs..
		}

		if (o.enableGrouping) {
			//Add grouping and sum totals
			var groupItemMetadataProvider = new Slick.Data.GroupItemMetadataProvider();
			dataView.groupItemMetadataProvider = groupItemMetadataProvider;

			// register the group item metadata provider to add expand/collapse group handlers
			gridObj.registerPlugin(groupItemMetadataProvider);

			//need this to update the footer when a cell changes
			gridObj.onCellChange.subscribe(function (e, args) {
				dataView.refresh();
			});
		}

		//Enable Updating Totals on the Summary Row
		if (o.showSummaryRow) {
			gridObj.onCellChange.subscribe(function (e, args) {
				gridObj.updateSummaryRow();
			});

			dataView.onAggregatorsChanged.subscribe(function (e, args) {
				gridObj.updateSummaryRow();
			});
		}

		//excel copy and paste
		if (o.enableCellRangeSelection || o.showExport) {
			var _selector = new Slick.CellRangeSelector({enableCellRangeSelection: o.enableCellRangeSelection, exportScriptUrl:  o.exportScriptUrl, exportFileName: o.exportFileName});
			gridObj.registerPlugin(_selector);
		}

		if (o.showCellToolTips) {
			gridObj.registerPlugin(new Slick.AutoTooltips());
		}

		gridObj.resizeCanvas();

		if (o.variableRowHeight && o.variableRowHeightColumn != "rowHeight") {
			gridObj.onCellChange.subscribe(function (e, args) {
					var col = gridObj.getColumns()[args.cell];
					if (col && col.cssClass =="autoHeight" ) {
						gridObj.invalidateAllRows();
						gridObj.render();
						gridObj.resizeCanvas();
					}
				});
		}
		
		gridObj.isLookupGrid = $(this).is("#lookupGridDivId");
		return gridObj;
};

	function handleHeaderContextMenu(e, args) {
		//prevent normal menu
		e.preventDefault();

		if (args.column==undefined)
			return;

		if (args.column.builtin) {
			return;
		}

		//add the menu
		$("#gridHeaderMenuOptions").remove();
		var $menu = $('<ul id="gridHeaderMenuOptions" class="inforContextMenu"></ul>');
		if (args.column.sortable) {
			$menu.append('<li><span class="icon sortAsc"></span><a href="#sortAsc">'+Globalize.localize("SortAscending")+'</a></li>');
			$menu.append('<li><span class="icon sortDesc"></span><a href="#sortDesc">'+Globalize.localize("SortDescending")+'</a></li>');
		}
		
		if (args.grid.getOptions().showGridSettings) {
			$menu.append('<li><a href="#hide">'+Globalize.localize("HideColumn")+'</a></li>');
		}
		
		$('body').append($menu);
		//figure out which column we are on

		var $header = $(e.currentTarget);
		$header.inforContextMenu({
			menu: 'gridHeaderMenuOptions',
			invokeMethod: 'immediate',
			event: e,
			srcElement: $header,
			offsetLeft: -10,
			offsetTop: 7
		}, function(action, el, pos, item) {
			if (action=="hide")
				args.grid.hideColumn(args.column.id);

			if (action=="sortAsc")
				args.grid.setSortColumn(args.column.id, true);

			if (action=="sortDesc")
				args.grid.setSortColumn(args.column.id, false);
		});
	}

	// Add Ends With to String prototype
	String.prototype.endsWith = function (s) {
		return this.length >= s.length && this.substr(this.length - s.length) == s;
	}

	// Simple JavaScript Templating
	// John Resig - http://ejohn.org/ - MIT Licensed
	var cache = {};
	this.tmpl = function tmpl(str, data) {
	// Figure out if we're getting a template, or if we need to
	// load the template - and be sure to cache the result.
	var fn = !/\W/.test(str) ?
		cache[str] = cache[str] ||
		tmpl(document.getElementById(str).innerHTML) :

		// Generate a reusable function that will serve as a template
		// generator (and which will be cached).
		new Function("obj",
			"var p=[],print=function(){p.push.apply(p,arguments);};" +

			// Introduce the data as local variables using with(){}
			"with(obj){p.push('" +

			// Convert the template into pure JavaScript
			str
				.replace(/[\r\t\n]/g, " ")
				.replace(/\&lt;%=/g, "<%=")     //convert back to
                .replace(/%\&gt;/g, "%>")      //convert back to
				.split("<%").join("\t")
				.replace(/((^|%>)[^\t]*)'/g, "$1\r")
				.replace(/\t=(.*?)%>/g, "',$1,'")
				.split("\t").join("');")
				.split("%>").join("p.push('")
				.split("\r").join("\\'") + "');}return p.join('');");

	// Provide some basic currying to the user
	return data ? fn(data) : fn;
	};
}($));/*
* Infor Date Field Control.
*
*/
(function ($) {
	$.fn.inforDateField = function (options) {
		var settings = {
			buttonText: Globalize.localize('SelectDate'),
			dateFormat: Globalize.culture().calendar.patterns.d,	//use current short date format unless its set by the control prefs.
			openOnEnter: true,	//If the user hits enter the drop down will open when in the field.
			showQuickDates: false, //Changes the Today button to a Menu Button with additional input options
			quickDateOptions: [
				{label: Globalize.localize('Today'), offset: 0, period: 'T' },
				{label: Globalize.localize('OneWeekAgo'), offset: -7, period: 'D' },
				{label: Globalize.localize('OneMonthAgo'), offset: -1, period: 'M' },
				{label: Globalize.localize('SixMonthsAgo'), offset: -6, period: 'M' },
				{label: Globalize.localize('LastYear'), offset: -1, period: 'Y' },
				{label: Globalize.localize('NextWeek'), offset: 7, period: 'D' },
				{label: Globalize.localize('NextMonth'), offset: 1, period: 'M' },
				{label: Globalize.localize('NextYear'), offset: 1, period: 'Y' }
			],		//Overridable list of options for the quick dates menu
			isHijri : (Globalize.culture().calendar.name == "UmAlQura" || Globalize.culture().calendar.name == "Hijri" || Globalize.culture().calendar.name == "UmAlQura_TransliteratedEnglish"),
			showTimeInput: false, //Adds a simple input field for time (You should use a format that supports time as well).
			timeFormat: Globalize.culture().calendar.patterns.t, //Separated Globalize time format to use in the date picker time picker - should also be in the dateFormat
			validateInput: true,
			position: null,
			mask: null, //input mask
			showUTCTime: false,	//if true any selected days will be shown and adjusted to UTC time
			showTimezone: false	//show a time zone selector and related options kick in for time zones.
		};

		return this.each(function () {
			var o = $.extend({}, settings, options), //Extend the options if any provided
			$dateField = $(this);

			if ($dateField.data("initialized")) {
				return;
			}

			$dateField.inforTriggerField();
			$dateField.datepicker(o);
			
			if (o.mask) {
				$dateField.mask(o.mask);
			}
			
			if (o.validateInput) {
				$dateField.data("lastValue", $dateField.val()).focus(function () {
					var field = $(this);
					field.data("lastValue", field.val());
				}).off("blur.validate").on("blur.validate", function () {
					var field = $(this),
						parsedDate = Globalize.parseDate(field.val());

					if (parsedDate === null && o.dateFormat) {
						parsedDate = Globalize.parseDate(field.val(), o.dateFormat);
					}

					if (parsedDate === null && field.val() !== "") {
						field.val(field.data("lastValue"));
					}
				});
			}
		});
	};
} (jQuery));

/*
* jQuery UI Datepicker 1.8.13 - Completely Modified from this version.
*
* Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* http://docs.jquery.com/UI/Datepicker
*
* Depends:
*	jquery.ui.core.js
*/
(function ($) {

	var PROP_NAME = 'datepicker';
	var dpuuid = new Date().getTime();

	/* Date picker manager.
	Use the singleton instance of this class, $.datepicker, to interact with the date picker.
	Settings for (groups of) date pickers are maintained in an instance object,
	allowing multiple different settings on the same page. */

	function Datepicker() {
		this.debug = false; // Change this to true to start debugging
		this._curInst = null; // The current instance in use
		this._keyEvent = false; // If the last event was a key event
		this._disabledInputs = []; // List of date picker inputs that have been disabled
		this._datepickerShowing = false; // True if the popup picker is showing , false if not
		this._mainDivId = 'inforDatePicker-div'; // The ID of the main datepicker division
		this._inlineClass = 'inforDatePicker-inline'; // The name of the inline marker class
		this._appendClass = 'inforDatePicker-append'; // The name of the append marker class
		this._triggerClass = 'inforDatePickerButton'; // The name of the trigger marker class
		this._dialogClass = 'inforDatePicker-dialog'; // The name of the dialog marker class
		this._disableClass = 'inforDatePicker-disabled'; // The name of the disabled covering marker class
		this._unselectableClass = 'inforDatePicker-unselectable'; // The name of the unselectable cell marker class
		this._currentClass = 'inforDatePicker-current-day'; // The name of the current day marker class
		this._dayOverClass = 'inforDatePicker-days-cell-over'; // The name of the day hover marker class
		this._defaults = { // Global defaults for all the date picker instances
			culture: '', // use jQuery.culture by default
			showOn: 'button', // 'focus' for popup on focus,
			// 'button' for trigger button, or 'both' for either
			showAnim: 'fadeIn', // Name of jQuery animation for popup
			showOptions: {}, // Options for enhanced animations
			defaultDate: null, // Used when field is blank: actual date,
			// +/-number for offset from today, null for today
			appendText: '', // Display text following the input box, e.g. showing the format
			buttonText: '...', // Text for trigger button
			buttonImage: '', // URL for trigger button image
			buttonImageOnly: true, // True if the image appears alone, false if it appears on a button
			hideIfNoPrevNext: false, // True to hide next/previous month links
			// if not applicable, false to just disable them
			navigationAsDateFormat: false, // True if date formatting applied to prev/today/next links
			gotoCurrent: false, // True if today link goes back to current selection instead
			showOtherMonths: true, // True to show dates in other months, false to leave blank
			selectOtherMonths: true, // True to allow selection of dates in other months, false for unselectable
			showWeek: false, // True to show week of the year, false to not show it
			calculateWeek: this.iso8601Week, // How to calculate the week of the year,
			// takes a Date and returns the number of the week for it
			shortYearCutoff: '+10', // Short year values < this are in the current century,
			minDate: null, // The earliest selectable date, or null for no limit
			maxDate: null, // The latest selectable date, or null for no limit
			duration: 'fast', // Duration of display/closure
			beforeShowDay: null, // Function that takes a date and returns an array with
			// [0] = true if selectable, false if not, [1] = custom CSS class name(s) or '',
			// [2] = cell title (optional), e.g. $.datepicker.noWeekends
			beforeShow: null, // Function that takes an input field and
			// returns a set of custom settings for the date picker
			onSelect: null, // Define a callback function when a date is selected
			onChangeMonthYear: null, // Define a callback function when the month or year is changed
			onClose: null, // Define a callback function when the datepicker is closed
			numberOfMonths: 1, // Number of months to show at a time
			showCurrentAtPos: 0, // The position in multipe months at which to show the current month (starting at 0)
			stepMonths: 1, // Number of months to step back/forward
			stepBigMonths: 12, // Number of months to step back/forward for the big links
			altField: '', // Selector for an alternate field to store selected dates into
			altFormat: '', // The date format to use for the alternate field
			altField2: '', // Selector for an alternate field to store selected dates into
			altFormat2: '', // The date format to use for the alternate field
			constrainInput: true, // The input is constrained by the current date format
			showButtonPanel: false, // True to show button panel, false to not show it
			openOnEnter: true //If the user hits enter the drop down will open when in the field.
		};
		this.dpDiv = $('<div id="' + this._mainDivId + '" class="inforDatePicker inforDatePicker-widget inforDatePicker-widget-content"></div>');
	}

	$.extend(Datepicker.prototype, {
		/* Class name added to elements to indicate already configured with a date picker. */
		markerClassName: 'hasDatepicker',

		_widgetDatepicker: function () {
			return this.dpDiv;
		},

		/* Override the default settings for all instances of the date picker.
		@param  settings  object - the new settings to use as defaults (anonymous object)
		@return the manager object */
		setDefaults: function (settings) {
			extendRemove(this._defaults, settings || {});
			return this;
		},

		/* Attach the date picker to a jQuery selection.
		@param  target    element - the target input field or division or span
		@param  settings  object - the new settings to use for this date picker instance (anonymous) */
		_attachDatepicker: function (target, settings) {
			// check for settings on the control itself - in namespace 'date:'
			var inlineSettings = null;
			for (var attrName in this._defaults) {
				var attrValue = target.getAttribute('date:' + attrName);
				if (attrValue) {
					inlineSettings = inlineSettings || {};
					try {
						inlineSettings[attrName] = eval(attrValue);
					} catch (err) {
						inlineSettings[attrName] = attrValue;
					}
				}
			}
			var nodeName = target.nodeName.toLowerCase();
			var inline = (nodeName === 'div' || nodeName === 'span');
			if (!target.id) {
				this.uuid += 1;
				target.id = 'dp' + this.uuid;
			}
			var inst = this._newInst($(target), inline);
			inst.settings = $.extend({}, settings || {}, inlineSettings || {});
			if (nodeName === 'input') {
				this._connectDatepicker(target, inst);
			} else if (inline) {
				this._inlineDatepicker(target, inst);
				}
	},

		/* Create a new instance object. */
		_newInst: function (target, inline) {
			var id = target[0].id.replace(/([^A-Za-z0-9_])/g, '\\\\$1'); // escape jQuery meta chars
			return {id: id, input: target, // associated target
				selectedDay: 0, selectedMonth: 0, selectedYear: 0, // current selection
				drawMonth: 0, drawYear: 0, // month being drawn
				inline: inline, // is datepicker inline or not
				dpDiv: (!inline ? this.dpDiv : // presentation div
				$('<div class="' + this._inlineClass + ' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))
			};
		},

		/* Attach the date picker to an input field. */
		_connectDatepicker: function (target, inst) {
			var input = $(target),
				self = this;

			inst.append = $([]);
			inst.trigger = $([]);

			if (input.hasClass(this.markerClassName)) {
				return;
			}

			this._attachments(input, inst);

			input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).
				bind("setData.datepicker", function (event, key, value) {
					inst.settings[key] = value;
				}).bind("getData.datepicker", function (event, key) {
					return this._get(inst, key);
				});

			var altFields = $(this._get(inst, 'altField')).add(this._get(inst, 'altField2'));
			altFields.keydown(function (e) {
				e.target = input[0];
				self._doKeyDown(e, inst);
			}).keypress(function (e) {
				e.target = input[0];
				self._doKeyPress(e, inst);
			}).keyup(function (e) {
				e.target = input[0];
				self._doKeyUp(e, inst);
			});
			$.data(target, PROP_NAME, inst);
		},

		/* Make attachments based on settings. */
		_attachments: function (input, inst) {
			var appendText = this._get(inst, 'appendText');
			var isRTL = this._get(inst, 'isRTL');
			if (inst.append) {
				inst.append.remove();
			}

			if (appendText) {
				inst.append = $('<span class="' + this._appendClass + '">' + appendText + '</span>');
				input[isRTL ? 'before' : 'after'](inst.append);
			}
			input.unbind('focus', this._showDatepicker);
			if (inst.trigger) {
				inst.trigger.remove();
			}
			var showOn = this._get(inst, 'showOn');
			if (showOn == 'focus' || showOn == 'both') // pop-up date picker when in the marked field
				input.focus(this._showDatepicker);
			if (showOn == 'button' || showOn == 'both') { // pop-up date picker when button clicked
				var buttonText = this._get(inst, 'buttonText');
				var buttonImage = this._get(inst, 'buttonImage');
				inst.trigger = $(inst.input).closest(".inforTriggerField").find(".inforTriggerButton");
				inst.trigger.addClass(this._triggerClass).attr("tabIndex", -1).
					attr({ src: buttonImage, alt: buttonText, title: buttonText });

				inst.trigger.inforToolTip();
				input.parent().after(inst.trigger.parent());	//move the td
				input.focus(function () {
					if ($.datepicker._datepickerShowing && $.datepicker._lastInput != input[0]) {
						$.datepicker._hideDatepicker($.datepicker._lastInput, true);
					}
				});
				
				inst.trigger.click(function () {
					if ($.datepicker._datepickerShowing && $.datepicker._lastInput == input[0])
						$.datepicker._hideDatepicker();
					else
						$.datepicker._showDatepicker(input[0]);
					return false;
				});
			}
		},

		/* Attach an inline date picker to a div. Might be needed for standalone calendar. */
		_inlineDatepicker: function (target, inst) {
				var divSpan = $(target);
			if (divSpan.hasClass(this.markerClassName))
				return;
			divSpan.addClass(this.markerClassName).append(inst.dpDiv).
			bind("setData.datepicker", function (event, key, value) {
				inst.settings[key] = value;
			}).bind("getData.datepicker", function (event, key) {
				return this._get(inst, key);
			});
			$.data(target, PROP_NAME, inst);
			this._setDate(inst, this._getDefaultDate(inst), true);
			this._updateDatepicker(inst);
			this._updateAlternate(inst);
		},

		/* Is the first field in a jQuery collection disabled as a datepicker?
		@param  target    element - the target input field or division or span
		@return boolean - true if disabled, false if enabled */
		_isDisabledDatepicker: function (target) {
			if (!target) {
				return false;

			}
			for (var i = 0; i < this._disabledInputs.length; i++) {
				if (this._disabledInputs[i] == target)
					return true;

			}
			return false;
		},

		/* Retrieve the instance data for the target control.
		@param  target  element - the target input field or division or span
		@return  object - the associated instance data
		@throws  error if a jQuery problem getting data */
		_getInst: function (target) {
			try {
				return $.data(target, PROP_NAME);
			}
			catch (err) {
				throw 'Missing instance data for this datepicker';

			}
		},

		/* Redraw the date picker attached to an input field or division.
		@param  target  element - the target input field or division or span */
		_refreshDatepicker: function (target) {
			var inst = this._getInst(target);
			if (inst) {
				this._updateDatepicker(inst);
			}
		},

		/* Set the dates for a jQuery selection.
		@param  target   element - the target input field or division or span
		@param  date     Date - the new date */
		_setDateDatepicker: function (target, date) {
			var inst = this._getInst(target);
			if (inst) {
				this._setDate(inst, date);
				this._updateDatepicker(inst);
				this._updateAlternate(inst);
			}
		},

		/* Get the date(s) for the first entry in a jQuery selection.
		@param  target     element - the target input field or division or span
		@param  noDefault  boolean - true if no default date is to be used
		@return Date - the current date */
		_getDateDatepicker: function (target, noDefault) {
			var inst = this._getInst(target);
			if (inst && !inst.inline)
				this._setDateFromField(inst, noDefault);
			return (inst ? this._getDate(inst) : null);
		},

		/* Handle keystrokes. */
		_doKeyDown: function (event, inst) {
			if (!inst ) {
				inst = $.datepicker._getInst(event.target);
			}
			var handled = true;
			var isRTL = inst.dpDiv.is('.inforDatePicker-rtl');
			inst._keyEvent = true;
			if ($.datepicker._datepickerShowing)
				switch (event.keyCode) {

				case 9:
					$.datepicker._hideDatepicker();
					handled = false;
					break; // hide on tab out
				case 13:
					if (inst.input.closest("div").parent().hasClass("slick-headerrow-column"))	//let enter run the filter in the grid
						return;

					var sel = $('td.inforDatePicker-current-day' , inst.dpDiv);

					if (sel[0])
						$.datepicker._selectDay(event.target, inst.selectedMonth, inst.selectedYear, sel[0]);
					else
						$.datepicker._hideDatepicker();
					return false; // don't submit the form
				case 27:
					$.datepicker._hideDatepicker();
					break; // hide on escape
				case 33: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
							-$.datepicker._get(inst, 'stepBigMonths') :
							-$.datepicker._get(inst, 'stepMonths')), 'M');
					break; // previous month/year on page up/+ ctrl
				case 34: $.datepicker._adjustDate(event.target, (event.ctrlKey ?
							+$.datepicker._get(inst, 'stepBigMonths') :
							+$.datepicker._get(inst, 'stepMonths')), 'M');
					break; // next month/year on page down/+ ctrl
				case 35: if (event.ctrlKey || event.metaKey) $.datepicker._clearDate(event.target);
					handled = event.ctrlKey || event.metaKey;
					break; // clear on ctrl or command +end
				case 36: if (event.ctrlKey || event.metaKey) $.datepicker._gotoToday(event.target);
					handled = event.ctrlKey || event.metaKey;
					break; // current on ctrl or command +home
				case 37:
					$.datepicker._adjustDate(event.target, (isRTL ? +1 : -1), 'D');
					break; // -1 day on left
				case 38:
					$.datepicker._adjustDate(event.target, -7, 'D');

					break; // -1 week on up
				case 39:
					$.datepicker._adjustDate(event.target, (isRTL ? -1 : +1), 'D');
					break; // +1 day on right
			case 40:
					$.datepicker._adjustDate(event.target, +7, 'D');
					handled = event.ctrlKey || event.metaKey;
					break; // +1 week on down
				default: handled = false;

			}
			else if (event.keyCode == $.ui.keyCode.ENTER || event.keyCode == $.ui.keyCode.DOWN ) // display the date picker on enter
			{
				if (inst.input.closest("div").parent().hasClass("slick-headerrow-column")) {	//let enter run the filter in the grid
					return;
				}
				if (inst.input.attr("readonly") || inst.input.attr("disabled")){
					return;
				}

				if (inst.settings.openOnEnter) {
					$.datepicker._showDatepicker(event.target);
				} else {
					handled = false;
				}
			}
			else {
				handled = false;
			}
			if (handled) {
				event.preventDefault();
				event.stopPropagation();
			}
		},
		_quickDates: function (target, button){
			//open a menu on the menu button with some options for date input
			var menu = $("#inforQuickDatesMenu"),
				$button = $(button),
				inst = this._getInst($(target)[0]),
				options = this._get(inst, "quickDateOptions");

			//Add item if not there
			if (menu.length === 0) {
				$('<ul id="inforQuickDatesMenu" class="inforContextMenu"></ul>').appendTo("body");
				menu = $("#inforQuickDatesMenu");
			}

			//Clear the menu
			menu.empty();

			//loop the configurable options and add them
			$.map( options, function (opt) {
				//add the option and maybe a generic click handler function...
				var li = $("<li></li>"),
					a = $("<a></a>").attr("href","#").text(opt.label).attr("onclick",
						'DP_jQuery_' + dpuuid + '.datepicker._quickDateSelect(\'#' +inst.id + '\',' + opt.offset + ',\'' + opt.period + '\')');

				li.append(a);
				menu.append(li);
			});

			//show the menu...
			$button.inforContextMenu({
					menu: 'inforQuickDatesMenu',
					invokeMethod: 'immediate',
					position: {
						my: (Globalize.culture().isRTL ? "right top" : "left top"),
						at: (Globalize.culture().isRTL ? "right bottom" : "left bottom"),
						of: $button,
						offset: (Globalize.culture().isRTL ? "0 -2" : "0 -2")
					}
			});
		},
		_quickDateSelect: function (id, offset, period) {
			var target = $(id);
				inst = this._getInst(target[0]);

			if (period=="T") {
				this._selectToday(target);
				return;
			}
			
			this._selectToday(target);
			this._adjustDate(id, offset, period);
			this._selectDate(id);
		},
		selectToday: function (target){
			this._selectToday(target);
		},
		_selectToday: function (target){
			var todayDate = new Date(),
				target = $(target),
				inst = this._getInst(target[0]);

			inst.selectedHours = inst.drawHours = inst.currentHours = todayDate.getHours();
			inst.selectedMinutes = inst.drawMinutes= inst.currentMinutes = todayDate.getMinutes();
			inst.selectedSeconds = inst.drawSeconds = inst.selectedSeconds =  todayDate.getSeconds();

			if (this._get(inst,'showUTCTime')) {
				todayDate = new Date(todayDate.getUTCFullYear(), todayDate.getUTCMonth(), todayDate.getUTCDate(), todayDate.getUTCHours(), todayDate.getUTCMinutes(), todayDate.getUTCSeconds(), todayDate.getUTCMilliseconds());
			}

			if (this._get(inst, 'isHijri')) {
				todayDate = Globalize.culture().calendar.convert.fromGregorian(todayDate);
				inst.selectedDay = todayDate[2];
				inst.selectedMonth = todayDate[1];
				inst.selectedYear = todayDate[0];
				$.datepicker._selectDate(target, $.datepicker._formatDate(inst,
					todayDate[2], todayDate[1], todayDate[0]), inst.selectedHours, inst.selectedMinutes,inst.selectedSeconds);
				return;
			}

			inst.selectedDay = inst.drawDay  = inst.currentDay  = todayDate.getDate();
			inst.selectedMonth = inst.drawMonth = inst.currentMonth = todayDate.getMonth();
			inst.selectedYear = inst.drawYear = inst.currentYear = todayDate.getFullYear();
			
			$.datepicker._selectDate(target, $.datepicker._formatDate(inst,
					todayDate.getDate(), todayDate.getMonth(), todayDate.getFullYear(), inst.selectedHours, inst.selectedMinutes,inst.selectedSeconds));
		},
		/* Filter entered characters - based on date format. */
		_doKeyPress: function (event, inst) {
			if (!inst) {
				inst = $.datepicker._getInst(event.target);
			}
			if ($.datepicker._get(inst, 'constrainInput')) {

				var chars = $.datepicker._possibleChars(inst.settings.culture || $.datepicker._defaults.culture, $.datepicker._get(inst, 'dateFormat'));
				var chr = String.fromCharCode(event.charCode == undefined ? event.keyCode : event.charCode);

				//insert current date with a T
				if (chr.toLowerCase()=="t") {
					$.datepicker._selectToday(event.target);
					event.preventDefault();
				}
				if (chr.toLowerCase()=="-") {
					$.datepicker._quickDateSelect("#" + inst.id, -1, "D");
					event.preventDefault();
				}
				if (chr.toLowerCase()=="+") {
					$.datepicker._quickDateSelect("#" + inst.id, 1, "D");
					event.preventDefault();
				}
				
				return event.ctrlKey || (chr < ' ' || !chars || chars.indexOf(chr) > -1);
			}
		},

		/* Synchronise manual entry and field/alternate field. */
		_doKeyUp: function (event, inst) {
			if (!inst) {
				inst = $.datepicker._getInst(event.target);
			}

			if (inst.input.val() != inst.lastVal) {
				try {
				var date = $.datepicker.parseDate(
								(inst.input ? inst.input.val() : null),
								$.datepicker._get(inst, 'dateFormat'),
								inst.settings.culture)

				if (date) { // only if valid
						$.datepicker._setDateFromField(inst);
					//$.datepicker._updateAlternate(inst);
						$.datepicker._updateDatepicker(inst);
					}
				}
				catch (e) {
				}
			}
			return true;
		},

		/* Pop-up the date picker for a given input field.
		@param  input  element - the input field attached to the date picker or
		event - if triggered by focus */
		_showDatepicker: function (input) {
			$(".inforMenu").hide();
			input = input.target || input;
			if (input.nodeName.toLowerCase() != 'input') // find from button/image trigger
				input = $('input', input.parentNode)[0];
			if ($.datepicker._isDisabledDatepicker(input) || $.datepicker._lastInput == input) // already here
				return;
			var inst = $.datepicker._getInst(input);

			if ($.datepicker._curInst && $.datepicker._curInst != inst) {
				$.datepicker._curInst.dpDiv.stop(true, true);
			}
			var beforeShow = $.datepicker._get(inst, 'beforeShow');
			extendRemove(inst.settings, (beforeShow ? beforeShow.apply(input, [input, inst]) : {}));
			inst.lastVal = null;
			$.datepicker._lastInput = input;
			$.datepicker._setDateFromField(inst);

			//position beside.
			if (!$.datepicker._pos) {
				var pos = $(input).offset();
				$.datepicker._pos = [pos.left, pos.top-1];//$.datepicker._findPos(input);
				$.datepicker._pos[0] += input.offsetWidth+14; // add the width + trigger width
			}

			//position otherside
			if (Globalize.culture().isRTL) {
				var pos = $(input).offset();

				inst.dpDiv.hide().css("opacity", 1);
				$.datepicker._pos = [pos.left, pos.top-1];//$.datepicker._findPos(input);
				$.datepicker._pos[0] -= ($(input).width() + 26); // add the width + trigger width
			}

			var isFixed = false;
			$(input).parents().each(function () {
				isFixed |= $(this).css('position') == 'fixed';
				return !isFixed;
			});
			var leftVal = $.datepicker._pos[0] + (Globalize.culture().isRTL ? 2 : -2);
			var offset = {left: leftVal, top: $.datepicker._pos[1] };

			$.datepicker._pos = null;

			//to avoid flashes on Firefox
			inst.dpDiv.empty();
			inst.dpDiv.hide();

			// determine sizing offscreen
			inst.dpDiv.css({ position: 'absolute', display: 'block', top: '-1000px' });
			//fire before show.
			beforeShow = $.datepicker._get(inst, 'beforeShow');
			extendRemove(inst.settings, (beforeShow ? beforeShow.apply(input, [input, inst]) : {}));

			$.datepicker._updateDatepicker(inst);
			// fix width for dynamic number of date pickers
			// and adjust position before showing
			offset = $.datepicker._checkOffset(inst, offset, isFixed);
			inst.dpDiv.css({ position: (isFixed ? 'fixed' : 'absolute'), display: 'none',
				left: offset.left + 'px', top: offset.top + 'px'
			});
			if (!inst.inline) {
				var showAnim = $.datepicker._get(inst, 'showAnim');
				var duration = $.datepicker._get(inst, 'duration');
				var postProcess = function () {
					var cover = inst.dpDiv.find('iframe.inforDatePicker-cover'); // IE6- only
					if (!!cover.length) {
						var borders = $.datepicker._getBorders(inst.dpDiv);

						cover.css({ left: -borders[0], top: -borders[1],
							width: inst.dpDiv.outerWidth(), height: inst.dpDiv.outerHeight()
						});
					}
				};
				inst.dpDiv.zIndex($(input).zIndex() + 3000);

				$.datepicker._datepickerShowing = true;
				if ($.effects && $.effects[showAnim]) {
					inst.dpDiv.show(showAnim, $.datepicker._get(inst, 'showOptions'), duration, postProcess);
				} else {
					inst.dpDiv[showAnim || 'show']((showAnim ? duration : null), postProcess);
				}

				if (!showAnim || !duration) {
					postProcess();
				}

				if (inst.input.is(':visible') && !inst.input.is(':disabled')) {
					inst.input.focus();
				}
				$.datepicker._curInst = inst;
			}

			var position = $.datepicker._get(inst, 'position');
			if (position) { // position as defined
				position.of = $(input);
				$.datepicker.dpDiv.position(position);
			}

			//hide any tooltips
			setTimeout(function () {
				$("#inforTooltip").hide();
			},200);
		},
		_updateYearPanel: function (table,inst, centerYear) {
			//Add the formatted years in - 5 up and down from the current selected year
			var todayDate = new Date(),
				todayYear = (todayDate).getFullYear(),
				minDate = this._getMinMaxDate(inst, 'min'),
				maxDate = this._getMinMaxDate(inst, 'max');

			//corrects draw year for Hijri (Arabic) calendar
			todayYear = parseInt(Globalize.format(todayDate,'yyyy'), 10);

			var selectedYear = inst.selectedYear;
			//corrects year for Hijri (Arabic) calendar
			selectedYear = parseInt(Globalize.format(new Date(inst.selectedYear,inst.selectedMonth ,inst.selectedDay),'yyyy'), 10);

			//the click callback
			function selectYear() {
				table.find(".datePickerYear-selected").removeClass("datePickerYear-selected");
				$(this).addClass("datePickerYear-selected");
			}

			table.find(".datePickerYear-selected").removeClass("datePickerYear-selected");
			table.find(".datePickerMonthYearYear-current").removeClass("datePickerMonthYearYear-current");

			var i=0;
			centerYear = centerYear-4;
			table.find(".datePickerMonthYearGrid tr").each(function(index) {
				if (index <= 3) {
					return;
				}
				var row = $(this);
				row.find("td").each(function(index2) {
					var col = $(this).find("div");
					col.html(centerYear+i).click(selectYear);

					if (centerYear+i === todayYear) {
						col.addClass("datePickerMonthYearYear-current");
					}

					if (centerYear+i === selectedYear) {
						col.addClass("datePickerYear-selected");
					}
					i++;
				});
			});
		},
		_showDateMonthPanel: function (inst) {
			var self = this;
			inst.dpDiv.empty();
			inst.dpDiv.hide();
			//find the years and months and build the html
			var monthNamesShort  = this._get(inst, 'months').namesAbbr,
				okText  = this._get(inst, 'Ok'),
				nextText  = this._get(inst, 'Next'),
				prevText  = this._get(inst, 'Previous'),
				cancelText  = this._get(inst, 'Cancel'),
				table = $('<table cellspacing="0" cellpadding="0" class="inforDatePickerPanel"><tbody><tr><td align="left" style="vertical-align: top;"><table cellspacing="0" cellpadding="0" class="datePickerMonthYearPanel"><tbody><tr><td align="left" style="vertical-align: top;"><table class="datePickerMonthYearGrid"><tbody><tr><td><div class="datePickerMonthYearMonth">Jan</div></td><td><div class="datePickerMonthYearMonth">Apr</div></td><td> <div class="datePickerMonthYearMonth">Jul</div> </td><td><div class="datePickerMonthYearMonth">Oct</div></td></tr><tr><td><div class="datePickerMonthYearMonth">Feb</div></td><td><div class="datePickerMonthYearMonth">May</div></td><td><div class="datePickerMonthYearMonth">Aug</div></td><td><div class="datePickerMonthYearMonth">Nov</div></td></tr><tr class="inforBeforeYearButtonRow"><td><div class="datePickerMonthYearMonth">Mar</div></td><td><div class="datePickerMonthYearMonth">Jun</div></td><td><div class="datePickerMonthYearMonth">Sep</div></td><td><div class="datePickerMonthYearMonth">Dec</div></td></tr><tr class="inforYearButtonRow"><td></td><td class="datePickerPreviousYearCell"> <button type="button" title="'+prevText+'" class="inforIconButton datePickerPreviousYear"><span></span></button> </td><td class="datePickerNextYearCell"> <button type="button" title="'+nextText+'" class="inforIconButton datePickerNextYear"><span></span></button> </td><td></td></tr><tr ><td><div class="datePickerMonthYearYear">2008</div></td><td><div class="datePickerMonthYearYear">2010</div></td><td><div class="datePickerMonthYearYear">2012</div></td><td><div class="datePickerMonthYearYear">2014</div></td></tr><tr class="inforYearLastRow"><td><div class="datePickerMonthYearYear">2009</div></td><td><div class="datePickerMonthYearYear">2011</div></td><td><div class="datePickerMonthYearYear">2013</div></td><td><div class="datePickerMonthYearYear">2015</div></td></tr></tbody></table></td></tr></tbody></table></td></tr><tr ><td align="left" style="vertical-align: top;"><div class="inforDatePickerButtonPanel inforDatePickerMonthYearButtonPanel"><button style="display: inline-block;" class="inforFormButton default" type="button">'+okText+'</button><button style="display: inline-block;" class="inforFormButton" type="button">'+cancelText+'</button></div></td></tr></tbody></table> ');

			var todayDate = new Date(),
				todayYear = (todayDate).getFullYear(),
				currentYear = (inst.currentYear),
				minDate = this._getMinMaxDate(inst, 'min'),
				maxDate = this._getMinMaxDate(inst, 'max');
			
			//corrects draw year for Hijri (Arabic) calendar
			if (this._get(inst, 'isHijri')) {
				todayDate = Globalize.culture().calendar.convert.fromGregorian(todayDate);
				todayYear = todayDate[0];
			}

			if (currentYear==0) {
				currentYear = todayYear;
			} else {
				currentYear = parseInt(Globalize.format(new Date(inst.currentYear, inst.currentMonth, inst.currentDay), 'yyyy'), 10);
			}

			if (inst.settings.defaultDate) {	//center on default date if provided.
				currentYear = inst.settings.defaultDate.getFullYear();
			}

			self._updateYearPanel(table, inst, currentYear);

			//Add the formatted months in.
			var todayMonth = (new Date()).getMonth();
			if (this._get(inst, 'isHijri'))
				todayMonth = todayDate[1];

			var selectedMonth = inst.selectedMonth,
				i=0;

			function selectMonth(){
				table.find(".datePickerMonth-selected").removeClass("datePickerMonth-selected");
				$(this).addClass("datePickerMonth-selected");
			}

			table.find(".datePickerMonthYearGrid tr").each( function (index, ui) {
				if (index >= 3) {
					return;
				}
				var row = $(this);

				row.find("td").each(function(index2) {
					var col = $(this).find("div");
					col.data("month",i).html(monthNamesShort[i]).click(selectMonth);

					if (i==todayMonth) {
						col.addClass("datePickerMonthYearMonth-current");
					}

					if (i==selectedMonth) {
						col.addClass("datePickerMonth-selected");
					}
					i++;
				});
			});

			//set up the buttons...
			table.find(".inforFormButton:eq(0)").click(function () {
					//update selected month and year..and return
					var month = table.find(".datePickerMonth-selected").data("month");
					var year = table.find(".datePickerYear-selected").html();
					self._selectMonthYear(inst,month,year);
					self._updateDatepicker(inst);
			});
			table.find(".inforFormButton:eq(1)").click(function () {
					self._updateDatepicker(inst);
			});
			table.find(".datePickerPreviousYear").click(function () {
				currentYear=currentYear-1;
				self._updateYearPanel(table,inst,currentYear);
			});
			table.find(".datePickerNextYear").click(function () {
				currentYear=currentYear+1;
				self._updateYearPanel(table,inst,currentYear);
			});

			//add and animate..
			inst.dpDiv.append(table);
			inst.dpDiv.show();
			inst.dpDiv.find('[title]').inforToolTip();
		},
		_selectMonthYear: function (inst, month, year) {

			inst._selectingMonthYear = false;
			if (month!=undefined) {
				inst['selectedMonth' ] =
				inst['drawMonth'] = month;
			}

			if (year!=undefined) {
				inst['selectedYear' ] =
				inst['drawYear'] = parseInt(year, 10);
			}

			this._notifyChange(inst);
			this._adjustDate($("#"+inst.id));
		},
		/* Generate the date picker content. */
		_updateDatepicker: function (inst) {
			var self = this;
			var borders = $.datepicker._getBorders(inst.dpDiv);

			instActive = inst; // for delegate hover events
			inst.dpDiv.empty().append(this._generateHTML(inst));
			inst.dpDiv.find('[title]').inforToolTip(); 
			
			inst.dpDiv.find(".inforDatePickerPanelButton").show().click(function ()
			{
				self._showDateMonthPanel(inst);
			});

			var cover = inst.dpDiv.find('iframe.inforDatePicker-cover'); // IE6- only
			if (!!cover.length) { //avoid call to outerXXXX() when not in IE6
				cover.css({ left: -borders[0], top: -borders[1], width: inst.dpDiv.outerWidth(), height: inst.dpDiv.outerHeight() });
			}

			inst.dpDiv.find('.' + this._dayOverClass + ' a').mouseover();

			var numMonths = this._getNumberOfMonths(inst);
			var cols = numMonths[1];
			var width = 17;

			inst.dpDiv.removeClass('inforDatePicker-multi-2 inforDatePicker-multi-3 inforDatePicker-multi-4').width('');
			if (cols > 1)
				inst.dpDiv.addClass('inforDatePicker-multi-' + cols).css('width', (width * cols) + 'em');

			inst.dpDiv[(numMonths[0] != 1 || numMonths[1] != 1 ? 'add' : 'remove') +
			'Class']('inforDatePicker-multi');
			inst.dpDiv[(this._get(inst, 'isRTL') ? 'add' : 'remove') +
			'Class']('inforDatePicker-rtl');
			if (inst == $.datepicker._curInst && $.datepicker._datepickerShowing && inst.input &&


			// #6694 - don't focus the input if it's already focused
			// this breaks the change event in IE
			inst.input.is(':visible') && !inst.input.is(':disabled') && inst.input[0] != document.activeElement)
			inst.input.focus();

			if (this._get(inst, 'showUTCTime')) {
				var dFormat = this._get(inst, 'dateFormat');
				inst.input.off('change.datepicker').on('change.datepicker', function (e) {
					var field = $(this),
						parsedDate = Globalize.parseDate(field.val(), dFormat);

					self._setUtcMillis(inst, parsedDate);
				});
			}

			if (this._get(inst, 'showTimeInput')) {
				//attach validation on the date field and an event to update internal values for select
				$("#inforTimeInput").bind("change", function () {
					var format = self._get(inst, 'timeFormat');
						date = Globalize.parseDate($(this).val(), format);

					inst.drawHours = inst.selectedHours = parseInt((Globalize.format(date, "HH")==null ? 0 :Globalize.format(date, "HH")) , 10);
					inst.drawMinutes = inst.selectedMinutes = parseInt((Globalize.format(date, "mm")==null ? 0 :Globalize.format(date, "mm")), 10);
					inst.drawSeconds = inst.selectedSeconds = parseInt((Globalize.format(date, "ss")==null ? 0 :Globalize.format(date, "ss")), 10);
				}).bind("keypress", function (event) {
						if (event.keyCode == $.ui.keyCode.ENTER) {
							$(this).trigger("change");
							$.datepicker._selectDate("#"+inst.id,$.datepicker._formatDate(inst, inst.selectedDay, inst.selectedMonth, inst.selectedYear, inst.selectedHours, inst.selectedMinutes,inst.selectedSeconds) );
							return;
						}
						if ($.datepicker._get(inst, 'constrainInput')) {
							var chars = $.datepicker._possibleChars(inst.settings.culture || $.datepicker._defaults.culture, $.datepicker._get(inst, 'dateFormat'));
							var chr = String.fromCharCode(event.charCode == undefined ? event.keyCode : event.charCode);

							return event.ctrlKey || (chr < ' ' || !chars || chars.indexOf(chr) > -1);
						}
				});
			}

			if (this._get(inst, 'showTimezone')) {
				$("#inforTimezone").inforDropDownList({editable : false, typeAheadSearch: false});
			}
		},

		/* Retrieve the size of left and top borders for an element.
		@param  elem  (jQuery object) the element of interest
		@return  (number[2]) the left and top borders */
		_getBorders: function (elem) {
			var convert = function (value) {
				return { thin: 1, medium: 2, thick: 3}[value] || value;
			};
			return [parseFloat(convert(elem.css('border-left-width'))),
			parseFloat(convert(elem.css('border-top-width')))];
		},

		/* Check positioning to remain on screen. */
		_checkOffset: function (inst, offset, isFixed) {
			var dpWidth = inst.dpDiv.outerWidth();
			var dpHeight = inst.dpDiv.outerHeight();
			var inputWidth = inst.input ? inst.input.outerWidth() : 0;
			var inputHeight = inst.input ? inst.input.outerHeight() : 0;
			var viewWidth = document.documentElement.clientWidth + $(document).scrollLeft();
			var viewHeight = document.documentElement.clientHeight + $(document).scrollTop();

			offset.left -= (this._get(inst, 'isRTL') ? (dpWidth - inputWidth) : 0);
			offset.left -= (isFixed && offset.left == inst.input.offset().left) ? $(document).scrollLeft() : 0;
			offset.top -= (isFixed && offset.top == (inst.input.offset().top + inputHeight)) ? $(document).scrollTop() : 0;

			// now check if datepicker is showing outside window viewport - move to a better place if so.
			offset.left -= Math.min(offset.left, (offset.left + dpWidth > viewWidth && viewWidth > dpWidth) ?
			Math.abs(offset.left + dpWidth - viewWidth) : 0);
			offset.top -= Math.min(offset.top, (offset.top + dpHeight > viewHeight && viewHeight > dpHeight) ?
			Math.abs(dpHeight + inputHeight) : 0);

			return offset;
		},

		/* Find an object's position on the screen. */
		_findPos: function (obj) {
			var inst = this._getInst(obj);
			var isRTL = this._get(inst, 'isRTL');
			while (obj && (obj.type == 'hidden' || obj.nodeType != 1 || $.expr.filters.hidden(obj))) {
				obj = obj[isRTL ? 'previousSibling' : 'nextSibling'];
			}
			var position = $(obj).offset();
			return [position.left, position.top];
		},

		/* Hide the date picker from view.
		@param  input  element - the input field attached to the date picker */
		_hideDatepicker: function (input, noFocus) {
			var inst = this._curInst;
			if (!inst || (input && inst != $.data(input, PROP_NAME)))
				return;
			if (this._datepickerShowing) {
				var showAnim = this._get(inst, 'showAnim');
				var duration = this._get(inst, 'duration');
				var postProcess = function () {
					$.datepicker._tidyDialog(inst);
					this._curInst = null;
				};
				if ($.effects && $.effects[showAnim])
					inst.dpDiv.hide(showAnim, $.datepicker._get(inst, 'showOptions'), duration, postProcess);
				else
					inst.dpDiv[(showAnim == 'slideDown' ? 'slideUp' :
					(showAnim == 'fadeIn' ? 'fadeOut' : 'hide'))]((showAnim ? duration : null), postProcess);
				if (!showAnim)
					postProcess();
				var onClose = this._get(inst, 'onClose');
				if (onClose) {
					onClose.apply((inst.input ? inst.input[0] : null), [(inst.input ? inst.input.val() : ''), inst]);  // trigger custom callback
				}

				this._datepickerShowing = false;
				this._lastInput = null;
			}
		},

		/* Tidy up after a dialog display. */
		_tidyDialog: function (inst) {
			inst.dpDiv.removeClass(this._dialogClass).unbind('.inforDatePicker-calendar');
		},

		/* Close date picker if clicked elsewhere. */
		_checkExternalClick: function (event) {
			if (!$.datepicker._curInst)
				return;

			var $target = $(event.target);


			function hasScroll(el, direction) {
				direction = (direction === 'vertical') ? 'scrollTop' : 'scrollLeft';
				var result = !! el[direction];

				if (!result) {
					el[direction] = 1;
					result = !!el[direction];
					el[direction] = 0;
				}
				return result;
			}

			if ($target.is("html") && $("body").css("overflow")=="scroll") {	//ignore click on scrollbar
				return;
			}

			if ($target.closest(".inforMenu").length == 1) {	//ignore click on drop down.
				return;
			}

			if ($target[0].id != $.datepicker._mainDivId &&
				$target.parents('#' + $.datepicker._mainDivId).length == 0 &&
				!$target.hasClass($.datepicker.markerClassName) &&
				!$target.hasClass($.datepicker._triggerClass) &&
				$.datepicker._datepickerShowing) {
					$.datepicker._hideDatepicker();
				}
		},

		/* Adjust one of the date sub-fields. */
		_adjustDate: function (id, offset, period) {
			var target = $(id);
			var inst = this._getInst(target[0]);
			if (this._isDisabledDatepicker(target[0])) {
				return;
			}
			this._adjustInstDate(inst, offset +
			(period == 'M' ? this._get(inst, 'showCurrentAtPos') : 0), // undo positioning
			period);
			this._updateDatepicker(inst);
		},

		/* Action for current link. */
		_gotoToday: function (id) {
			var target = $(id);
			var inst = this._getInst(target[0]);
			if (this._get(inst, 'gotoCurrent') && inst.currentDay) {
				inst.selectedDay = inst.currentDay;
				inst.drawMonth = inst.selectedMonth = inst.currentMonth;
				inst.drawYear = inst.selectedYear = inst.currentYear;
			}
			else {
				var date = new Date();
				inst.selectedDay = date.getDate();
				inst.drawMonth = inst.selectedMonth = date.getMonth();
				inst.drawYear = inst.selectedYear = date.getFullYear();
			}
			this._notifyChange(inst);
			this._adjustDate(target);
		},

		/* Restore input focus after not changing month/year. */
		_clickMonthYear: function (id) {
			var target = $(id);
			var inst = this._getInst(target[0]);
			if (inst.input && inst._selectingMonthYear) {
				setTimeout(function () {
					inst.input.focus();
				}, 0);
			}
			inst._selectingMonthYear = !inst._selectingMonthYear;
		},
		/* Action for selecting a day. */
		_selectDay: function (id, month, year, td) {
			var target = $(id),
				inst = this._getInst(target[0]),
				formattedDate,
				utcDate;

			if ($(td).hasClass(this._unselectableClass) || this._isDisabledDatepicker(target[0])) {
				return;
			}

			inst.selectedDay = inst.currentDay = $('a', td).html();
			inst.selectedMonth = inst.currentMonth = month;
			inst.selectedYear = inst.currentYear = year;
			formattedDate = this._formatDate(inst, inst.currentDay, inst.currentMonth, inst.currentYear, inst.selectedHours, inst.selectedMinutes,inst.selectedSeconds);
			this._selectDate(id, formattedDate);
		},

		/* Erase the input field and hide the date picker. */
		_clearDate: function (id) {
			var target = $(id);
			this._selectDate(target, '');
		},
		_setUtcMillis: function (inst, selectedDate) {
			if (this._get(inst, 'showUTCTime')) {
				if (selectedDate) {
					selectedDate.setMinutes(selectedDate.getMinutes() - selectedDate.getTimezoneOffset());
					inst.input.attr("data-utcmillis", selectedDate.getTime());
				} else {
					inst.input.attr("data-utcmillis", null);
				}
			}
		},
		setUtcDate: function(id, millis) {
			var target = $(id),
				utcDate = null;

			if (millis) {
				utcDate = new Date(millis);
				utcDate.setMinutes(utcDate.getMinutes() + utcDate.getTimezoneOffset());
			}

			var inst = this._getInst(target[0]),
				dateStr = $.datepicker.formatDate(utcDate, this._get(inst, 'dateFormat')),
				dFormat = this._get(inst, 'dateFormat');

			if (dFormat.indexOf("zzz") > -1) {
				dateStr = dateStr.substr(0, dateStr.length - 6) + "+00:00";
			}

			inst.input.val(dateStr).attr("data-utcmillis", millis);
		},
		/* Update the input field with the selected date. */
		_selectDate: function (id, dateStr) {
			var target = $(id),
				dFormat = '',
				inst = this._getInst(target[0]);

			dateStr = (dateStr != null ? dateStr : this._formatDate(inst));

			//change the time zone format and set millis data attr
			if (this._get(inst, 'showUTCTime')) {
				//this._setUtcMillis(inst, selectedDate);
				dFormat = this._get(inst, 'dateFormat');
				if (dFormat.indexOf("zzz") > -1) {
					dateStr = dateStr.substr(0, dateStr.length - 6) + "+00:00";
				}
			}

			if (inst.input) {
				inst.input.val(dateStr);
			}

			this._updateAlternate(inst);

			var onSelect = this._get(inst, 'onSelect');
			if (onSelect) {
				onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);  // trigger custom callback
			} else if (inst.input) {
				inst.input.trigger('change'); // fire the change event
			}

			if (inst.inline) {
				this._updateDatepicker(inst);
			} else {
				this._hideDatepicker();
				this._lastInput = inst.input[0];
				inst.input.focus().select(); // restore focus
				this._lastInput = null;
			}
		},

		/* Update any alternate field to synchronise with the main field. */
		_updateAlternate: function (inst) {
			var altField = this._get(inst, 'altField'),
				date, dateStr, altField2;

			if (altField) { // update alternate field too
				altFormat = this._get(inst, 'altFormat') || this._get(inst, 'dateFormat');
				date = new Date(inst.selectedYear, inst.selectedMonth, inst.selectedDay);
				dateStr = this.formatDate(date, altFormat, inst.settings.culture);
				$(altField).each(function () { $(this).val(dateStr); });
			}

			altField2 = this._get(inst, 'altField2');
			if (altField2) { // update alternate field too
				altFormat2 = this._get(inst, 'altFormat2') || this._get(inst, 'dateFormat');
				date = new Date(inst.selectedYear, inst.selectedMonth, inst.selectedDay);
				dateStr = this.formatDate(date, altFormat2, inst.settings.culture);
				$(altField2).each(function () {  $(this).val(dateStr); });
			}
		},

		/* Set as beforeShowDay function to prevent selection of weekends.
		@param  date  Date - the date to customise
		@return [boolean, string] - is this date selectable?, what is its CSS class? */
		noWeekends: function (date) {
			var day = date.getDay();
			return [(day > 0 && day < 6), ''];
		},

		/* Set as calculateWeek to determine the week of the year based on the ISO 8601 definition.
		@param  date  Date - the date to get the week for
		@return  number - the number of the week within the year that contains this date */
		iso8601Week: function (date) {
			var checkDate = new Date(date.getTime());
			// Find Thursday of this week starting on Monday
			checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7));
			var time = checkDate.getTime();
			checkDate.setMonth(0); // Compare with Jan 1
			checkDate.setDate(1);
			return Math.floor(Math.round((time - checkDate) / 86400000) / 7) + 1;
		},

		/* Parse a string value into a date object.
		See formatDate below for the possible formats.

		@param  format    string - the expected format of the date
		@param  value     string - the date in the above format


		@param  settings  Object - attributes include:
		shortYearCutoff  number - the cutoff year for determining the century (optional)
		dayNamesShort    string[7] - abbreviated names of the days from Sunday (optional)
		dayNames         string[7] - names of the days from Sunday (optional)
		monthNamesShort  string[12] - abbreviated names of the months (optional)
		monthNames       string[12] - names of the months (optional)
		@return  Date - the extracted date value or null if value is blank */
		parseDate: function (value, format, culture) {
			return Globalize.parseDate(value, format, culture || this._defaults.culture);
	},

		/* Standard date formats. */
		ATOM: 'yyyy-mm-dd', // RFC 3339 (ISO 8601)
		COOKIE: 'ddd, dd mmm yyyy',
		ISO_8601: 'yyyy-mm-dd',
		RFC_822: 'ddd, d mmm yy',
		RFC_850: 'dddd, dd-mmm-yy',
		RFC_1036: 'ddd, d mmm yy',
		RFC_1123: 'ddd, d mmm yyyy',
		RFC_2822: 'ddd, d mmm yyyy',
		RSS: 'ddd, d mmm yy', // RFC 822
		TICKS: '!',
		TIMESTAMP: '@',
		W3C: 'yyyy-mm-dd', // ISO 8601

		_ticksTo1970: (((1970 - 1) * 365 + Math.floor(1970 / 4) - Math.floor(1970 / 100) +
		Math.floor(1970 / 400)) * 24 * 60 * 60 * 10000000),

	/*
@param  value     string - the date to format
@param  formats   string - the format of the date
@param  culture   string - the culture to format the date as, omit to use the datepicker default culture.
@return  string - the date in the above format */
	formatDate: function (date, format, culture) {
		return Globalize.format(date, format, culture || this._defaults.culture);
	},
	/* Extract all possible characters from the date format. */
	_possibleChars: function (culture, format) {
		var chars = '';
		var literal = false;
		// Check whether a format character is doubled
		var lookAhead = function (match) {
			var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) == match);
			if (matches)
				iFormat++;
			return matches;
		};
		for (var iFormat = 0; iFormat < format.length; iFormat++)
			if (literal)
				if (format.charAt(iFormat) == "'" && !lookAhead("'"))
					literal = false;
				else
					chars += format.charAt(iFormat);
			else
				switch (format.charAt(iFormat)) {
				case 'd': case 'm': case 'y': case '@':
					chars += '0123456789';
					break;
				case 'D': case 'M':
					chars += '0123456789';
					break;
				case ':':
					chars += ':';
					break;
				case 't':
					if (lookAhead("t"))
						chars += "PMA";
					break;
				case '/':
					chars += Globalize.culture().calendar["/"];
					break;
				case "'":
					if (lookAhead("'"))
						chars += "'";
					else
						literal = true;
					break;
				default:
					chars += format.charAt(iFormat);
			}
		return chars;
	},

	/* Get a setting value, defaulting if necessary. */
	_get: function (inst, name) {
			// try instance settings
			var val = inst.settings[name];
			if (typeof val === "undefined") {
				// then try global defaults
				val = this._defaults[name];
				if (typeof val === "undefined") {
					var cultureName = inst.settings.culture || this._defaults.culture,
						culture = Globalize.findClosestCulture(cultureName);
					// try a culture value or a culture calendar value
					// e.g. 'isRTL' (culture.isRTL) or 'days' (culture.calendar.days)
					val = culture[name];
					if (typeof val === "undefined") {
						val = culture.calendar[name];
						if (typeof val === "undefined") {
							// then try datepicker specific data for the culture
						val =  Globalize.localize(name, cultureName || this._defaults.culture);
						}
					}
				}
			}
			return val;
		},

		/* Parse existing date and initialise date picker. */
		_setDateFromField: function (inst, noDefault) {
			if (inst.input.val() == inst.lastVal) {
				return;
			}
			var dateFormat = this._get(inst, 'dateFormat');
			var dates = inst.lastVal = inst.input ? inst.input.val() : null;
			var date, defaultDate;
			date = defaultDate = this._getDefaultDate(inst);

			try {
				date = this.parseDate(dates, dateFormat, inst.settings.culture) || defaultDate;
			} catch (event) {
				dates = (noDefault ? '' : dates);
			}
			//parse the date using format for isHijri
			inst.selectedDay = parseInt(Globalize.format(date, "dd"), 10);	//date.getDate();
			inst.drawMonth = inst.selectedMonth = parseInt(Globalize.format(date, "MM")-1, 10);
			inst.drawYear = inst.selectedYear = parseInt(Globalize.format(date, "yyyy"), 10);

			inst.drawHours = inst.selectedHours = parseInt(Globalize.format(date, "HH"), 10);
			inst.drawMinutes = inst.selectedMinutes = parseInt(Globalize.format(date, "mm"), 10);
			inst.drawSeconds = inst.selectedSeconds = parseInt(Globalize.format(date, "ss"), 10);

			if (dateFormat.indexOf("zzz") > -1) {
				var dateStr = inst.input.val();
				inst.selectedTimezone =  dateStr.substr(dateStr.length - 5);
			}

			inst.currentDay = (dates ? parseInt(Globalize.format(date, "dd"), 10) : 0);
			inst.currentMonth = (dates ? parseInt(Globalize.format(date, "MM")-1, 10) : 0);
			inst.currentYear = (dates ? parseInt(Globalize.format(date, "yyyy"), 10) : 0);
			this._adjustInstDate(inst);
		},

		/* Retrieve the default date shown on opening. */
		_getDefaultDate: function (inst) {
			var defaultDate = new Date();
			if (this._get(inst, 'showUTCTime')) {
				defaultDate.setMinutes(defaultDate.getMinutes() + defaultDate.getTimezoneOffset());
			}
			return this._restrictMinMax(inst, this._determineDate(inst, this._get(inst, 'defaultDate'), defaultDate));
		},

		/* A date may be specified as an exact value or a relative one. */
		_determineDate: function (inst, date, defaultDate) {
			var offsetNumeric = function (offset) {
				var date = new Date();
				date.setDate(date.getDate() + offset);
				return date;
			};
			var offsetString = function (offset) {
				try {
					return $.datepicker.parseDate(offset, $.datepicker._get(inst, 'dateFormat'),
						inst.settings.culture);
				}
				catch (e) {
					// Ignore
				}
				var date = (offset.toLowerCase().match(/^c/) ?
					$.datepicker._getDate(inst) : null) || new Date();
				var year = date.getFullYear();
				var month = date.getMonth();
				var day = date.getDate();
				var pattern = /([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g;
				var matches = pattern.exec(offset);
				while (matches) {
					switch (matches[2] || 'd') {
						case 'd' : case 'D' :
							day += parseInt(matches[1], 10); break;
						case 'w' : case 'W' :
							day += parseInt(matches[1], 10) * 7; break;
						case 'm' : case 'M' :
							month += parseInt(matches[1], 10);
							day = Math.min(day, $.datepicker._getDaysInMonth(year, month, false));
							break;
						case 'y': case 'Y' :
							year += parseInt(matches[1], 10);
							day = Math.min(day, $.datepicker._getDaysInMonth(year, month, false));
							break;

					}
					matches = pattern.exec(offset);

				}
				return new Date(year, month, day);
			};
			date = (date == null ? defaultDate : (typeof date == 'string' ? offsetString(date) :
				(typeof date == 'number' ? (isNaN(date) ? defaultDate : offsetNumeric(date)) : date)));
			date = (date && date.toString() == 'Invalid Date' ? defaultDate : date);

			if (this._get(inst, 'showTimeInput')) {
				return date;
			}

			if (date) {
					date.setHours(0);
					date.setMinutes(0);
					date.setSeconds(0);
					date.setMilliseconds(0);
			}
			return this._daylightSavingAdjust(date);
	},

		/* Handle switch to/from daylight saving.
		Hours may be non-zero on daylight saving cut-over:
		> 12 when midnight changeover, but then cannot generate
		midnight datetime, so jump to 1AM, otherwise reset.
		@param  date  (Date) the date to check
		@return  (Date) the corrected date */
		_daylightSavingAdjust: function (date) {
			if (!date) return null;
			date.setHours(date.getHours() > 12 ? date.getHours() + 2 : 0);
			return date;
		},

		/* Set the date(s) directly. */
		_setDate: function (inst, date, noChange) {
			var clear = !(date);
			var origMonth = inst.selectedMonth;
			var origYear = inst.selectedYear;
			date = this._restrictMinMax(inst, this._determineDate(inst, date, new Date()));
			inst.selectedDay = inst.currentDay = date.getDate();
			inst.drawMonth = inst.selectedMonth = inst.currentMonth = date.getMonth();
			inst.drawYear = inst.selectedYear = inst.currentYear = date.getFullYear();

			inst.selectedHours = date.getHours();
			inst.selectedMinutes = date.getMinutes();
			inst.selectedSeconds = date.getSeconds();

			if ((origMonth != inst.selectedMonth || origYear != inst.selectedYear) && !noChange)
				this._notifyChange(inst);
			this._adjustInstDate(inst);
			if (inst.input) {
				inst.input.val(clear ? '' : this._formatDate(inst));
			}
		},

		/* Retrieve the date(s) directly. */
		_getDate: function (inst) {
			var startDate = (!inst.currentYear || (inst.input && inst.input.val() == '') ? null :
				this._daylightSavingAdjust(new Date(
				inst.currentYear, inst.currentMonth, inst.currentDay)));
				return startDate;
		},

		/* Generate the HTML for the current state of the date picker. */
		_generateHTML: function (inst) {
			var today = new Date();
			today = this._daylightSavingAdjust(new Date(today.getFullYear(), today.getMonth(), today.getDate())); // clear time

			if (this._get(inst, 'isHijri'))
				today = Globalize.culture().calendar.convert.fromGregorian(today);

			var isRTL = this._get(inst, 'isRTL');
			var showButtonPanel = this._get(inst, 'showButtonPanel');
			var hideIfNoPrevNext = this._get(inst, 'hideIfNoPrevNext');
			var navigationAsDateFormat = this._get(inst, 'navigationAsDateFormat');
			var numMonths = this._getNumberOfMonths(inst);
			var showCurrentAtPos = this._get(inst, 'showCurrentAtPos');
			var stepMonths = this._get(inst, 'stepMonths');
			var currentDate = this._daylightSavingAdjust((!inst.currentDay ? new Date(9999, 9, 9) :	new Date(inst.currentYear, inst.currentMonth, inst.currentDay)));

			var minDate = this._getMinMaxDate(inst, 'min');
			var maxDate = this._getMinMaxDate(inst, 'max');

			var drawMonth = inst.drawMonth - showCurrentAtPos;
			var drawYear = inst.drawYear;
			if (drawMonth < 0) {
				drawMonth += 12;
				drawYear--;
			}
			if (maxDate) {
				var maxDraw = this._daylightSavingAdjust(new Date(maxDate.getFullYear(),
				maxDate.getMonth() - (numMonths[0] * numMonths[1]) + 1, maxDate.getDate()));
				maxDraw = (minDate && maxDraw < minDate ? minDate : maxDraw);
				while (this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1)) > maxDraw) {
					drawMonth--;
					if (drawMonth < 0) {
						drawMonth = 11;
						drawYear--;
					}
				}
			}
			inst.drawMonth = drawMonth;
			//localize draw year...
			inst.drawYear = drawYear;

			var prevText = this._get(inst, 'Previous');
			prevText = (!navigationAsDateFormat ? prevText : this.formatDate(prevText,
			this._daylightSavingAdjust(new Date(drawYear, drawMonth - stepMonths, 1)),
			this._getFormatConfig(inst)));
			var prev = (this._canAdjustMonth(inst, -1, drawYear, drawMonth, this._get(inst, 'isHijri')) ?
			'<a class="inforDatePicker-prev l" onclick="DP_jQuery_' + dpuuid +
			'.datepicker._adjustDate(\'#' + inst.id + '\', -' + stepMonths + ', \'M\');"' +
			' title="' + prevText + '"><button type="button" class="inforIconButton ' + (isRTL ? 'inforNextMonthButton' : 'inforPrevMonthButton') + '" title="' + prevText  + '"><span></span></button></a>' :
			(hideIfNoPrevNext ? '' : '<a class="inforDatePicker-prev inforDatePicker-state-disabled" title="' + prevText + '"><span class="' + (isRTL ? 'inforNextMonthButton' : 'inforPrevMonthButton') + '">' + '</span></a>'));	//prevText - may need for screen reader
			var nextText = this._get(inst, 'Next');
			nextText = (!navigationAsDateFormat ? nextText : this.formatDate(nextText,
			this._daylightSavingAdjust(new Date(drawYear, drawMonth + stepMonths, 1)),
			this._getFormatConfig(inst)));
			var next = (this._canAdjustMonth(inst, +1, drawYear, drawMonth, this._get(inst, 'isHijri')) ?
			'<a class="inforDatePicker-next " onclick="DP_jQuery_' + dpuuid +
			'.datepicker._adjustDate(\'#' + inst.id + '\', +' + stepMonths + ', \'M\');"' +
			' title="' + nextText + '"><button type="button"  class="inforIconButton ' + (isRTL ? 'inforPrevMonthButton' : 'inforNextMonthButton') + '" title="' + nextText + '"><span></span></button></a>' :
			(hideIfNoPrevNext ? '' : '<a class="inforDatePicker-next inforDatePicker-state-disabled" title="' + nextText + '"><span class="inforIconButton ' + (isRTL ? 'inforPrevMonthButton' : 'inforNextMonthButton') + '">' + '</span></a>')); //nextText - may need for screen reader
			var currentText = this._get(inst, 'Today');
			var gotoDate = (this._get(inst, 'gotoCurrent') && inst.currentDay ? currentDate : today);
			currentText = (!navigationAsDateFormat ? currentText :
			this.formatDate(currentText, gotoDate, this._getFormatConfig(inst)));
			var controls = (!inst.inline ? '<button type="button" class="inforDatePicker-close inforDatePicker-state-default inforDatePicker-priority-primary inforDatePicker-corner-all" onclick="DP_jQuery_' + dpuuid +
			'.datepicker._hideDatepicker();">' + this._get(inst, 'closeText') + '</button>' : '');
			var buttonPanel = (showButtonPanel) ? '<div class="inforDatePicker-buttonpane inforDatePicker-widget-content">' + (isRTL ? controls : '') +
			(this._isInRange(inst, gotoDate) ? '<button type="button" class="inforDatePicker-current inforDatePicker-state-default inforDatePicker-priority-secondary inforDatePicker-corner-all" onclick="DP_jQuery_' + dpuuid +
			'.datepicker._gotoToday(\'#' + inst.id + '\');"' +
			'>' + currentText + '</button>' : '') + (isRTL ? '' : controls) + '</div>' : '';
			var firstDay = parseInt(this._get(inst, 'firstDay'), 10);
			firstDay = (isNaN(firstDay) ? 0 : firstDay);
			var showWeek = this._get(inst, 'showWeek');
			var dayNames = this._get(inst, 'days').names;
			var dayNamesMin = this._get(inst, 'days').namesShort;

			var monthNames = this._get(inst, 'months').names;
			var monthNamesShort = this._get(inst, 'months').namesAbbr;

			var beforeShowDay = this._get(inst, 'beforeShowDay');
			var showOtherMonths = this._get(inst, 'showOtherMonths');
			var selectOtherMonths = this._get(inst, 'selectOtherMonths');
			var defaultDate = this._getDefaultDate(inst);
			var html = '';
			var showTime = this._get(inst, 'showTimeInput');
			var showTimezone = this._get(inst, 'showTimezone');

			for (var row = 0; row < numMonths[0]; row++) {
				var group = '';
				for (var col = 0; col < numMonths[1]; col++) {
					var selectedDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, inst.selectedDay));

					if (showTime) {
						selectedDate = new Date(drawYear, drawMonth, inst.selectedDay, inst.selectedHours, inst.selectedMinutes, inst.selectedSeconds);
					}

					var cornerClass = ' inforDatePicker-corner-all';
					var calender = '';
					calender += '<div class="inforDatePicker-header">' +
					(/all|left/.test(cornerClass) && row == 0 ? (isRTL ? next : prev) : '') +
					(/all|right/.test(cornerClass) && row == 0 ? (isRTL ? prev : next) : '') +
					this._generateMonthYearHeader(inst, drawMonth, drawYear, minDate, maxDate,
					row > 0 || col > 0, monthNames, monthNamesShort) + // draw month headers
					'</div><table class="inforDatePicker-calendar"><thead class="inforDatePickerDaysOfWeek">' +
					'<tr>';
					var thead = (showWeek ? '<th class="inforDatePicker-week-col">' + this._get(inst, 'weekHeader') + '</th>' : '');
					for (var dow = 0; dow < 7; dow++) { // days of the week
						var day = (dow + firstDay) % 7;
						thead += '<th' + ((dow + firstDay + 6) % 7 >= 5 ? ' class="inforDatePicker-week-end"' : '') + '>' +
						'<span title="' + dayNames[day] + '">' + dayNamesMin[day] + '</span></th>';
					}
					calender += thead + '</tr></thead><tbody>';
					var daysInMonth = this._getDaysInMonth(drawYear, drawMonth, this._get(inst, 'isHijri'));
					if (drawYear == inst.selectedYear && drawMonth == inst.selectedMonth)
						inst.selectedDay = Math.min(inst.selectedDay, daysInMonth);
                    var dayOfFirstDayOfMonth = this._getFirstDayOfMonth(drawYear, drawMonth, this._get(inst, 'isHijri'));
                    var leadDays = (dayOfFirstDayOfMonth - firstDay + 7) % 7;
					var numRows = Math.ceil((leadDays + daysInMonth) / 7); // calculate the number of rows to generate
					var printDate = this._getCalDate(drawYear, drawMonth, 1, -leadDays, this._get(inst, 'isHijri'));	//this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1 - leadDays));
					
					for (var dRow = 0; dRow < numRows; dRow++) { // create date picker rows
						calender += '<tr>';
						var tbody = (!showWeek ? '' : '<td class="inforDatePicker-week-col">' + this._get(inst, 'calculateWeek')(printDate) + '</td>');
						for (var dow = 0; dow < 7; dow++) { // create date picker days
							var daySettings = (beforeShowDay ? beforeShowDay.apply((inst.input ? inst.input[0] : null), [new Date(printDate[0], printDate[1],printDate[2])]) : [true, '']);
							var otherMonth = (printDate[1] != drawMonth);

							var checkDate = new Date(printDate[0],printDate[1],printDate[2]);
							var unselectable = (otherMonth && !selectOtherMonths) || !daySettings[0] ||
							(minDate && checkDate < minDate) || (maxDate && checkDate > maxDate);

							tbody += '<td class="' +
							((dow + firstDay + 6) % 7 >= 5 ? ' inforDatePicker-week-end' : '') + // highlight weekends
							(otherMonth ? ' inforDatePicker-other-month' : '') + // highlight days from other months
							((printDate[3] == selectedDate.getTime() && drawMonth == inst.selectedMonth && inst._keyEvent) || // user pressed key
							(defaultDate.getTime() == printDate[3] && defaultDate.getTime() == selectedDate.getTime()) ?
							// or defaultDate is current printedDate and defaultDate is selectedDate
							' ' + this._dayOverClass : '') + // highlight selected day
							(unselectable ? ' ' + this._unselectableClass + ' inforDatePicker-state-disabled' : '') +  // highlight unselectable days
							(otherMonth && !showOtherMonths ? '' : ' ' + daySettings[1] + // highlight custom dates
							(this._equalDates(printDate,selectedDate) ? ' ' + this._currentClass : '') + // highlight selected day
							(this._equalDates(printDate,today) ? ' isToday' : '')) + '"' + // highlight today (if different)
							((!otherMonth || showOtherMonths) && daySettings[2] ? ' title="' + daySettings[2] + '"' : '') + // cell title
							(unselectable ? '' : ' onclick="DP_jQuery_' + dpuuid + '.datepicker._selectDay(\'#' +
							inst.id + '\',' + printDate[1]+ ',' + printDate[0] + ', this);return false;"') + '>' + // actions
							(otherMonth && !showOtherMonths ? '&#xa0;' : // display for other months
							(unselectable ? '<span class="inforDatePicker-state-default">' + printDate[2] + '</span>' :
							'<a class="inforDatePicker-state-default'   + // highlight selected day
							(otherMonth ? ' inforDatePicker-priority-secondary' : '') + // distinguish dates from other months
							'" id="' +
							((dow + firstDay + 6) % 7 >= 5 ? 'inforDatePicker-week-end' : 'inforDatePicker-week-day') +
							'" href="#">' + printDate[2]  + '</a>')) + '</td>';

							printDate = this._getCalDate(printDate[0], printDate[1], printDate[2], 1 , this._get(inst, 'isHijri'));
						}
						calender += tbody + '</tr>';
					}
					drawMonth++;
					if (drawMonth > 11) {
						drawMonth = 0;
						drawYear++;
					}
					calender += '</tbody></table>';
				}
				group += calender;

				//if today is restricted disable the button...
				var enableToday = (beforeShowDay ? beforeShowDay.apply((inst.input ? inst.input[0] : null), [today]) : [true, '']);

				// add the today bar
				var todayBar = '';
				todayBar += '<div class="inforDatePickerButtonPanel">';

				todayBar += '<button class="inforDatePickerTodayButton inforFormButton '+(!enableToday[0] ? ' disabled"': '"') +'type="button" style="display: inline-block;"';
				if (enableToday[0])
					todayBar += 'onclick="DP_jQuery_' + dpuuid + '.datepicker._selectToday(\'#' +inst.id + '\');return false;")';
				todayBar += '>'+currentText+'</button>'

				if (this._get(inst, 'showQuickDates')) {
					todayBar += '<button id="quickDates" class="inforMenuButton inforFormButton" type="button"'
					todayBar += 'onclick="DP_jQuery_' + dpuuid + '.datepicker._quickDates(\'#' +inst.id + '\', this );")';
					todayBar += '><span class="innerText">' + Globalize.localize("QuickDates")+'</span><div class="inforMenuButtonArrow"></div></button>';
				}
				todayBar += '</div>';

				if (showTime) {
					var curTime = Globalize.format(selectedDate, this._get(inst, 'timeFormat'));
					todayBar += '<div class="dateTimePanel"><label class="inforLabel" style="float:none;width:auto;">'+Globalize.localize('Time')+'</label><input id="inforTimeInput" class="inforTextbox" style="width:80px" value="'+curTime+'"/>';

					if (showTimezone) {
						var zones = this._get(inst, 'timezones'),
							options = "";

						for (var i=0; i < zones.length; i++) {
							options += "<option value='" + zones[i].offset +"'"+ (inst.selectedTimezone === zones[i].offset  ? "selected" : "" ) +">" + zones[i].label +"</option>";
						}

						todayBar += '<br><label class="inforLabel" style="float:none;width:auto;">'+Globalize.localize('Timezone')+'</label><select id="inforTimezone" class="inforDropdownlist" style="width:80px" >' + options + '</select>';
					}
					todayBar += (this._get(inst, 'showUTCTime') ? " UTC" : "") +'</div>';
				}

				group += todayBar
				html += group;
			}

			html += buttonPanel;

			inst._keyEvent = false;
			return html;
		},
		/* Return if the mm/yy/dd is all the same..*/
	_equalDates: function (date1, date2) {
			var d1 = null, d2=null;

			if (Object.prototype.toString.call(date1) === '[object Date]') {//is a date object
				d1 = date1.getFullYear().toString() + date1.getMonth().toString() + date1.getDate().toString();
			} else {
				d1 = date1[0].toString() + date1[1].toString() + date1[2].toString();
			}

			if (Object.prototype.toString.call(date2) === '[object Date]') {
				d2 = date2.getFullYear().toString() + date2.getMonth().toString() + date2.getDate().toString();
			} else {
				d2 = date2[0].toString() + date2[1].toString() + date2[2].toString();
			}

			return d1==d2;
		},
		/* Return the next day no matter what calendar (Hijri) */
		_getCalDate: function (syear, smonth, sday, adjust, isHijri) {
			if (!isHijri) {
				var startDate = new Date(syear, smonth, sday);
				var newDate = null;
				if (Object.prototype.toString.call(startDate) === '[object Date]') {	//is a date
					newDate  = new Date(startDate.getFullYear(), startDate.getMonth(), startDate.getDate()+(adjust==undefined ? 0 : adjust));
				} else {
					newDate  = new Date(startDate[0], startDate[1], startDate[2] + (adjust==undefined ? 0 : adjust));
				}

				newDate = this._daylightSavingAdjust(newDate);
				return [newDate.getFullYear(), newDate.getMonth(), newDate.getDate(), newDate.getTime()];
			}
			else {	
				return this._incrementHijriDate(syear, smonth, sday, adjust);
			}
		},
		/* Generate the month and year header. */
		_generateMonthYearHeader: function (inst, drawMonth, drawYear, minDate, maxDate,
			secondary, monthNames, monthNamesShort) {
			var html = '<div class="inforDatePicker-title">';
			var monthHtml = '',
				yearThenMonth = inst.settings.dateFormat.substr(0,1).toLowerCase() === "y",
				display = [];
			
			if (yearThenMonth) {
				display[1] = monthNames[drawMonth];
				display[0] = drawYear;
			} else {
				display[0] = monthNames[drawMonth];
				display[1] = drawYear;
			}
			
			// month selection
			monthHtml += '<span class="inforDatePicker-month">' + display[0] + '</span>';

			html += monthHtml + '&#xa0;';
			html += '<span class="inforDatePicker-year">' + display[1] + '</span><button type="button" title="'+ Globalize.localize("SelectMonthYear") +'" class="inforIconButton settings inforDatePickerPanelButton"><span></span></button>';
			html += '</div>';
			return html;
		},

		/* Adjust one of the date sub-fields. */
		_adjustInstDate: function (inst, offset, period) {
			var year = inst.drawYear + (period == 'Y' ? offset : 0);
			var month = inst.drawMonth + (period == 'M' ? offset : 0);

			var day = Math.min(inst.selectedDay, this._getDaysInMonth(year, month, false)) +
			(period == 'D' ? offset : 0);
			var date = this._restrictMinMax(inst,
			this._daylightSavingAdjust(new Date(year, month, day)));
			inst.selectedDay = date.getDate();
			inst.drawMonth = inst.selectedMonth = date.getMonth();
			inst.drawYear = inst.selectedYear = date.getFullYear();

			//corrects draw year for Hijri (Arabic) calendar
			inst.drawYear = parseInt(Globalize.format(date,'yyyy'), 10);

			if (period == 'M' || period == 'Y')
				this._notifyChange(inst);
		},

		/* Ensure a date is within any min/max bounds. */
		_restrictMinMax: function (inst, date) {
			var minDate = this._getMinMaxDate(inst, 'min');
			var maxDate = this._getMinMaxDate(inst, 'max');
			var newDate = (minDate && date < minDate ? minDate : date);
			newDate = (maxDate && newDate > maxDate ? maxDate : newDate);

			return newDate;
		},

		/* Notify change of month/year. */
		_notifyChange: function (inst) {
			var onChange = this._get(inst, 'onChangeMonthYear');
			if (onChange)
				onChange.apply((inst.input ? inst.input[0] : null),
				[inst.selectedYear, inst.selectedMonth + 1, inst]);
		},

		/* Determine the number of months to show. */
		_getNumberOfMonths: function (inst) {
			var numMonths = this._get(inst, 'numberOfMonths');
			return (numMonths == null ? [1, 1] : (typeof numMonths == 'number' ? [1, numMonths] : numMonths));
		},

		/* Determine the current maximum date - ensure no time components are set. */
		_getMinMaxDate: function (inst, minMax) {
			return this._determineDate(inst, this._get(inst, minMax + 'Date'), null);
		},
		/* Detach a datepicker from its control.
		@param  target    element - the target input field or division or span */
		_destroyDatepicker: function (target) {
			var $target = $(target);
			var inst = $.data(target, PROP_NAME);
			if (!$target.hasClass(this.markerClassName)) {
				return;
			}
			var nodeName = target.nodeName.toLowerCase();
			$.removeData(target, PROP_NAME);
			if (nodeName == 'input') {
				if (inst && inst.append)
					inst.append.remove();

				if (inst  && inst.trigger)
					inst.trigger.remove();
				$target.removeClass(this.markerClassName).
				unbind('focus', this._showDatepicker).
				unbind('keydown', this._doKeyDown).
				unbind('keypress', this._doKeyPress).
				unbind('keyup', this._doKeyUp);
			} else if (nodeName == 'div' || nodeName == 'span')
				$target.removeClass(this.markerClassName).empty();
		},
		/* Find the number of days in a given month. */
		_getDaysInMonth: function (year, month, isHijriCal) {
			if (isHijriCal) {
				return this._getDaysInMonthHijri(year, month);
			} else {
			    var daysinMonth = 32 - new Date(year, month, 32).getDate();
			    return daysinMonth;
			}
		},
		/* Find the day of the week of the first of a month. */
		_getFirstDayOfMonth: function (year, month, isHijriCal) {
			if (isHijriCal) {
				return this._getFirstDayOfMonthHijri(year, month);
			} else {
				return new Date(year, month, 1).getDay();
			}
		},

		 /* In the Hijri bitmap calendar array ("convert._yearInfo") calculate its index; revert to 0 if out-of-range */
		 _getHijriYearIndex: function (hijriYear) {
			var yrIx = hijriYear - 1318;
			if (yrIx < 0 || yrIx >= Globalize.culture().calendar.convert._yearInfo.length)
				return 0; // for an out-of-range year, simply returns 0
			else
				return yrIx;
		 },

		 /* Get the month pattern for the specified year */
		 _getDaysInMonthForHijriYear: function (hijriYear) {
		    var monthLengthBitmap = Globalize.culture().calendar.convert._yearInfo[this._getHijriYearIndex(hijriYear)][0];
			for (var M = 0; M < 12; M++)
			{
				monthDayCounts[M] = 29 + (monthLength & 1);
				monthLength = monthLength >> 1;
			}
			return monthDayCounts;
		 },

		/* For the Hijri calendar, find the number of days in the Hijri year,month; Month is 0-based */
		 _getDaysInMonthHijri: function (year, month) {
			var monthLengthBitmap = Globalize.culture().calendar.convert._yearInfo[this._getHijriYearIndex(year)][0];
			var monthDayCount = 0;
			for (var M = 0; M <= month; M++) {
				monthDayCount = 29 + (monthLengthBitmap & 1);
				if (M == month) {
					return monthDayCount;
				}
				monthLengthBitmap = monthLengthBitmap >> 1;
			}
			return 0;
		 },

        /* For the Hijri calendar, find the day of the week of the first of a month. */
        _getFirstDayOfMonthHijri: function (year, month) {
			var firstDayInGregorian = Globalize.culture().calendar.convert.toGregorian(year, month, 1);
			return (firstDayInGregorian === null ? 1 : firstDayInGregorian.getDay());
		 },

		 /* For the Hijri calendar, do LIMITED date increment/decrement (within next or prior month, only); returns a date-style array */
		 _incrementHijriDate: function(year, month, day, increment) {
			 var newDay = day + increment; //increment can be negative
			 if (newDay < 1) {
				 month--;
				 if (month < 0) {
					 month = 12 + month;
					 year--;
				 }
				 var daysInMo = this._getDaysInMonthHijri(year, month);
				 newDay = daysInMo + newDay;
			 } else {
				 var daysInMo = this._getDaysInMonthHijri(year, month);
				 if (newDay > daysInMo) {
					 newDay -= daysInMo;
					 month++;
					 if (month > 11) {
						 year++;
						 month -= 12;
					 }
				 }
			 }
			 var pseudoDate = new Array();
			 pseudoDate[0] = year;
			 pseudoDate[1] = month;
			 pseudoDate[2] = newDay;
			 return pseudoDate;
		 },

		/* Determines if we should allow a "next/prev" month display change. */
		_canAdjustMonth: function (inst, offset, curYear, curMonth, isHijriCal) {
			var numMonths = this._getNumberOfMonths(inst);
			var date = this._daylightSavingAdjust(new Date(curYear, curMonth + (offset < 0 ? offset : numMonths[0] * numMonths[1]), 1));
			if (offset < 0)
				date.setDate(this._getDaysInMonth(date.getFullYear(), date.getMonth(), isHijriCal));
			return this._isInRange(inst, date);
		},

		/* Is the given date in the accepted range? */
		_isInRange: function (inst, date) {
			var minDate = this._getMinMaxDate(inst, 'min');
			var maxDate = this._getMinMaxDate(inst, 'max');
			return ((!minDate || date.getTime() >= minDate.getTime()) &&
			(!maxDate || date.getTime() <= maxDate.getTime()));
		},

		/* Provide the configuration settings for formatting/parsing. */
		_getFormatConfig: function (inst) {
			var shortYearCutoff = this._get(inst, 'shortYearCutoff');
			shortYearCutoff = (typeof shortYearCutoff != 'string' ? shortYearCutoff :
			new Date().getFullYear() % 100 + parseInt(shortYearCutoff, 10));
			return { shortYearCutoff: shortYearCutoff,
				dayNamesShort: this._get(inst, 'dayNamesShort'), dayNames: this._get(inst, 'dayNames'),
				monthNamesShort: this._get(inst, 'monthNamesShort'), monthNames: this._get(inst, 'monthNames')
			};
		},
		/* Format the given date for display. */
		_formatDate: function (inst, day, month, year) {
			if (!day) {
				day = inst.currentDay = inst.selectedDay;
				month = inst.currentMonth = inst.selectedMonth;
				year = inst.currentYear = inst.selectedYear;
			}

			var date = null,
				formattedDate = "",
				format = this._get(inst, 'dateFormat');

			if (!this._get(inst, 'isHijri')) {
				date = (day ? (typeof day == 'object' ? day :
					this._daylightSavingAdjust(new Date(year, month, day))) :
					this._daylightSavingAdjust(new Date(inst.currentYear, inst.currentMonth, inst.currentDay)));

				if (this._get(inst, 'showTimeInput'))  {
					date = new Date(year, month, day, inst.selectedHours, inst.selectedMinutes, inst.selectedSeconds);
				}

			}else {
				date = Globalize.culture().calendar.convert.toGregorian(year, month, parseInt(day, 10), inst.selectedHours, inst.selectedMinutes, inst.selectedSeconds);
			}


			formattedDate = this.formatDate(date, format , inst.settings.culture);
			if (this._get(inst, 'showTimezone')) {
				var format = format.split('z').length -1,
					zone = $("#inforTimezone").val();

				if (format == 3) {
					formattedDate = formattedDate.substr(0, formattedDate.length - 6) + zone;
				}
			}
			
			//Check if the date is over max
			if (this._get(inst, 'isHijri')) {
				var maxYear = "1450",
					curYear = this.formatDate(date, "yyyy", inst.settings.culture);
				
				if (curYear > maxYear) {
					formattedDate = null;
				}
			}
			return formattedDate;
		}
	});

	/* jQuery extend now ignores nulls! */
	function extendRemove(target, props) {
		$.extend(target, props);
		for (var name in props)
			if (props[name] == null || props[name] == undefined)
				target[name] = props[name];
		return target;
	};

	$.fn.datepicker = function (options) {

		/* Verify an empty collection wasn't passed - Fixes #6976 */
		if (!this.length) {
			return this;
		}

		/* Initialise the date picker. */
		if (!$.datepicker.initialized) {
			$(document).mousedown($.datepicker._checkExternalClick).
			find('body').append($.datepicker.dpDiv);
			$.datepicker.initialized = true;
		}

		var otherArgs = Array.prototype.slice.call(arguments, 1);
		if (typeof options == 'string' && (options == 'isDisabled' || options == 'getDate' || options == 'widget'))
			return $.datepicker['_' + options + 'Datepicker'].
			apply($.datepicker, [this[0]].concat(otherArgs));
		if (options == 'option' && arguments.length == 2 && typeof arguments[1] == 'string')
			return $.datepicker['_' + options + 'Datepicker'].
			apply($.datepicker, [this[0]].concat(otherArgs));
		return this.each(function () {
			if (options==undefined)
				return;

			typeof options == 'string' ?
			$.datepicker['_' + options + 'Datepicker'].
				apply($.datepicker, [this].concat(otherArgs)) :
			$.datepicker._attachDatepicker(this, options);
		});
	};

	$.datepicker = new Datepicker(); // singleton instance
	$.datepicker.initialized = false;
	$.datepicker.uuid = new Date().getTime();

	// Add another global to avoid noConflict issues with inline event handlers
	window['DP_jQuery_' + dpuuid] = $;
})(jQuery);
/*
* Infor Dot Chart - SVG D3
*/
(function ($) {
$.widget("ui.inforDotChart", {
		options: {
			data:[{date: "1-Jan-12", value: 8.13},
				{date: "2-Feb-12", value: 153.98},
				{date: "1-Mar-12", value: 67.00},
				{date: "1-Apr-12", value: 89.70},
				{date: "1-May-12", value: 99.00},
				{date: "1-Jun-12", value: 80.28},
				{date: "1-Jul-12", value: 86.70},
				{date: "1-Aug-12", value: 84.98},
				{date: "1-Sep-12", value: 85.44},
				{date: "1-Oct-12", value: 73.34},
				{date: "1-Nov-12", value: 63.70},
				{date: "1-Dec-12", value: 80.13}],
			title: "Chart Title",
			titleOffset: [88, -16],
			subTitle: null,
			color: "#13A3F7",
			rotateXAxis: false
		},
		parseDate: null,
		_init: function () {
			var o = this.options,
				self = this,
				zone = (self.element.attr("id") ? "#" + self.element.attr("id"): "body"),
				margin = {top: 50, right: 20, bottom: 30, left: 50};
			
			self.width = 400 - margin.left - margin.right,
			self.height = 400 - margin.top - margin.bottom;
			$(self.element).addClass("inforDotChart");
			
			self.x = d3.time.scale().range([0, self.width]);
			self.y = d3.scale.linear().range([self.height, 0]);
			self.parseDate = d3.time.format("%d-%b-%y").parse;
			
		/*	self.xAxis = d3.svg.axis()
				.scale(self.x)
				.orient("bottom")
				.tickSize(2)
				.tickFormat(d3.time.format("%b"));	//d3.time.format("%b")	//option...

			self.yAxis = d3.svg.axis()
				.scale(self.y)
				.orient("left")
				.tickSize(0)
				.tickPadding(2)
				.ticks(5);*/
				
			self.xAxis = d3.svg.axis().scale(self.x)
				.orient("bottom").ticks(5).tickFormat(d3.time.format("%b"));	//d3.time.format("%b")	//option...
	
			self.yAxis = d3.svg.axis().scale(self.y)
			    .orient("left").ticks(5);
    
    
			var	area = d3.svg.area()
				.x(function(d) {return self.x(d.date); })
				.y0(self.height)
				.y1(function(d) {return self.y(d.value); });

			self.valueline = d3.svg.line()
				.x(function(d) { return self.x(d.date); })
				.y(function(d) { return self.y(d.value); });

			self.svg = d3.select(zone)
				.append("svg")
					.attr("width", self.width + margin.left + margin.right)
					.attr("height", self.height + margin.top + margin.bottom + 20)
				.append("g")
					.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

			function make_y_axis() {		// function for the y grid lines
				return d3.svg.axis()
					.scale(self.y)
					.orient("left")
					.ticks(5);
			}

			o.data.forEach(function(d) {
				d.date = self.parseDate(d.date);
				d.value = +d.value;
			});

			// Scale the range of the data
			self.x.domain(d3.extent(o.data, function(d) { return d.date; }));
			self.y.domain([0, d3.max(o.data, function(d) { return d.value; })]);

			// Add the filled area
			self.svg.append("path")
				.data(o.data)
				.attr("class", "area")
				.attr("d", area);

			self.svg.append("g")			// Draw the y Grid lines
				.attr("class", "grid")
				.call(make_y_axis()
					.tickSize(-self.width)
					.tickFormat("")
				);

			// Add the valueline path.
			self.svg.append("path")
				.attr("class", "line")
				.attr("d", self.valueline(o.data));

			// Add the X Axis
			self.svg.append("g")
				.attr("class", "x axis")
				.attr("transform", "translate(0," + self.height + ")")
				.call(self.xAxis)
				.selectAll("text")
				.style("text-transform", "uppercase")
				//.attr("dx", "-2.5em")
				.attr("dy", "2em")
				.attr("class", "xAxisText");
			
			if (self.options.rotateXAxis) {
				d3.selectAll(".xAxisText")
					.attr("dx", "-2.5em")
					.attr("dy", "-.4em")
					.attr("transform", function(d) {	
						return "rotate(-90)";
					});
			}	
			
			// Add the Y Axis
			self.svg.append("g")
				.attr("class", "y axis")
				.call(self.yAxis)
				.selectAll("text")
				.attr("dy", ".3em")
				.attr("dx", "-.5em");			
				
			// Add the title
			self.svg.append("text")
				.attr("x", self.options.titleOffset[0])							// places the title in the middle of the graph
				.attr("y", self.options.titleOffset[1])		// places the title in the middle of the top y margin
				.attr("text-anchor", "middle")			// aligns the text to the middle of the x,y point
				.attr("class", "chart-heading")
				.text(o.title);		// Title text

			// Define 'div' for tooltips
			var tooltip = d3.select("body").append("div")	// declare the properties for the div used for the tooltips
				.attr("class", "inforTooltip arrowBottom")	// apply the 'tooltip' class
				.style("opacity", 0);						// set the opacity to nil

			var formatTime = d3.time.format("%B");			// Format the date / time for tooltips

		/* Add a selection Element */
			self.selectdots = self.svg.selectAll("selectdot")
				.data(o.data)											
				.enter()
				.append("circle")
					.attr("r", 4)
					.attr("class", "selectdot")	
					.style("fill", "transparent")
					.style("cursor", "pointer")
					.style("stroke", function(d) {
					     return "#15688a";
					})
					.attr("opacity", "0")
					.attr("cx", function(d) { return self.x(d.date); })		
					.attr("cy", function(d) { return self.y(d.value); })
					.attr("id", function(d, i) { return "selectdot" + i; });
		
			
			/* draw the scatterplot*/
			self.dots = self.svg.selectAll("dot")									
							.data(o.data)										
						.enter()
						.append("circle")								
							.attr("class", "dot")		
							.attr("r", 3.5)		
							.style("fill", "#40b8ea")					 			
							.style("cursor", "pointer")
						//.transition()
						//	.duration(750)
			      			.attr("cx", function(d) { return self.x(d.date); })		
							.attr("cy", function(d) { return self.y(d.value); })
							.attr("id", function(d, i) { return "dot" + i; })
							.attr("opacity", "1")
							.on("mouseover", function(d, i) { // Tooltips						
								tooltip.transition()								
									.duration(300)								
									.style("opacity", 1);							
								
								tooltip.html(formatTime(d.date) + "<br/>"  + d.value)	
									.style("left", (d3.event.pageX) - 48 + "px")
									.style("width", 70 + "px")						
									.style("top", (d3.event.pageY - 65) + "px");	
								
								d3.select("#selectdot" + i).style("opacity", "1");
							})													
							.on("mouseout", function(d, i) {							
								tooltip.transition()
									.duration(500)
									.style("opacity", 0);
								
								d3.select("#selectdot" + i).style("opacity", "0");
							})
							// Selection
							.on("click", function(d, i) {
								var dot = d3.select("#selectdot" + i),
									isSelected = dot.classed("selected");
									
								dot.classed("selected", !isSelected);	
							});
		},
		update: function(data, title, subTitle) {
			var self = this,
				o = self.options;
			
			o.data = data;
			
			o.data.forEach(function(d) {
				d.date = self.parseDate(d.date);
				d.value = +d.value;
			});
			
			// Scale the range of the data again 
			self.x.domain(d3.extent(o.data, function(d) { return d.date; }));
			self.y.domain([0, d3.max(o.data, function(d) { return d.value; })]);

			// Make the changes
			this.svg.select(".line")   // change the line
				.transition().duration(400)
				.attr("d", self.valueline(o.data));
				
			this.svg.select(".x.axis") // change the x axis
				.transition().duration(400)
				.call(self.xAxis)
				.selectAll("text")
				.style("text-transform", "uppercase")
				.attr("dx", function () { return (self.options.rotateXAxis ? "-2.5em" : "");})
				.attr("dy", function () { return (self.options.rotateXAxis ? "-.3em" : "2.2em");})			
				.attr("transform", function(d) {	
					return (self.options.rotateXAxis ? "rotate(-90)" : "");
				});
				
			this.svg.select(".y.axis") // change the y axis
				.transition().duration(400)
				.call(self.yAxis);
			
			self.dots.data(o.data)
				.transition().duration(400)
				.attr("cx", function(d) { return self.x(d.date); })		
				.attr("cy", function(d) { return self.y(d.value); });
				
			self.selectdots.data(o.data)
				.attr("cx", function(d) { return self.x(d.date); })		
				.attr("cy", function(d) { return self.y(d.value); });
					
		}
	});
})(jQuery);
/*
* Infor Draggable List
*/
(function ($) {
	$.widget("ui.inforDraggableList", {
		options: {
			dropText: "Drop The Source Here",
			onChange: null
		},
		_create: function () {
			var elem = $(this.element),
			self = this;

			elem.find("ul").sortable({ connectWith: ".connected",
				cursor: "default",
				forcePlaceholderSize: true,
				placeholder: "inforDraggableListPlaceholder",
				cursor: "move",
				start: function(e, ui) {
					ui.placeholder.append("<a>" + self.options.dropText +"</a>");
				},
				change: function(e, ui) {
					if (self.options.onChange) {
						self.options.onChange(e, ui);
					}
				}
			}).disableSelection();
		}
	});
})(jQuery);
/*
* Infor DropDown List
*/
(function ($) {
	$.widget("ui.inforDropDownList", {
		options: {
			source: null,
			displayCodeOnly: false, //if true we show the option(s) value/id in the field
			editable: false,	//Cannot Type in the Drop Down.
			typeAheadSearch: false,	//disable type ahead search when editable=false
			delay: 700, //The delay in milliseconds the autocompleter waits after a keystroke to activate itself
			beforechange: null,
			maxHeight: 300,
			width: null,	//fixed width
			maxWidth: 300,	//max width contraint on the vertical size of the menu - ignored if less than field width
			selectFirst: true,	//if no value is marked selected - the first option will be selected.
			autoFocus: true,	//if no value is marked selected - focus the first element
			validateCodeInput: false, 	//allow user to type the code and validate its valid.
			openOnEnter: true,	//open /close dialog on enter.
			noFocus: false	//Drop Down never gets focus (Rich Text Editor)
		},
		_create: function () {
			var self = this,
			select = this.element,
			isKeyedIn = false;

			if (select.data("initialized")!=undefined)	//is wrapped
				return;

			var inlineCss=select.attr("style");
			select.data("initialized",true);
			select.css("display", "none");
			
			//Init the source function.
			if (self.options.source==null) {
				self.options.source=function (request, response) {
					response(select.children("option").map(function () {
						var elem = $(this),
							text = elem.html();

						if (text.indexOf("&nbsp")>-1)
							text = elem.text();

						if ((!request.term || text.toLowerCase().indexOf(request.term.toLowerCase()) === 0 ))
						return {
								id: this.value,
								label: (request.term =="" ? text : text.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)(" + $.ui.autocomplete.escapeRegex(request.term) + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<strong>$1</strong>")),
								value: text.replace( /\&lt;/g, '<' ).replace( /\&gt;/g, '>' ).replace( /\&amp;/g, '&' ),
								cssClass: elem.attr("class"),
								title: this.title
							};
					}));
				}
				}

			var input = $("<input role='combobox'>")
					.insertAfter(select)
					.autocomplete({
						displayCodeOnly: self.options.displayCodeOnly,
						source: self.options.source,
						delay: self.options.delay,
						editable: self.options.editable,
						autoFocus: self.options.autoFocus,
						typeAheadSearch: self.options.typeAheadSearch,
						openOnEnter: self.options.openOnEnter,
						maxWidth: self.options.maxWidth,
						width: self.options.width,
						maxHeight: self.options.maxHeight,
						change: function (e, ui) {
						if (!ui.item) {	//value was typed
							var value = this.value;
							if (input.css("text-transform")==="uppercase")
								value = value.toString().toUpperCase();

							var id = select.find(":contains('"+value+"')").val();
							if (self.options.validateCodeInput)
								id = value;

							select.data("selectedId",id);
							select.val(id);
							self._trigger("selected", e, {
										item: {
										id:  id,
										label: value,
										value: value
									}
							});
							return false;
							}
							select.val(ui.item.id);
							select.data("selectedId",ui.item.id);

							self._trigger("selected", e, {
								item: select.find("[value='" + (typeof ui.item.id =="string" ? ui.item.id.replace("'","&#039;") : ui.item.id) + "']")
							});
						},
						select: function (e, ui) {
						isKeyedIn = false;

						if (ui.item === undefined) {
							return;
						}
						select.data("selectedId",ui.item.id);

						if (self.options.displayCodeOnly)
								input.val(ui.item.id);

							//set selected icon..
						self._setSelectedIcon(ui.item,input);
						},
						minLength: 0
					})
					.keypress(function(e){
						isKeyedIn = true;
					})
					.keydown(function(e){
						if (e.which == 8) {
							return false;
						}
					})
					.change(function(e, item) {
						if (self.options.beforechange) {
							item = self.options.beforechange(e, item);
							input.val(item.value);

							setTimeout(function() {
								input.val(item.value);
							},175);
						}
						if (isKeyedIn) {
							item = null;
						}
						if (item) {
							select.val(item.id);
							select.data("selectedId",item.id);
							
							var value = (self.options.displayCodeOnly ? item.id : item.label);
							value = value.replace( /\&lt;/g, '<' ).replace( /\&gt;/g, '>' ).replace( /\&amp;/g, '&' );
							value = value.replace( /<\/strong>/gi, '' ).replace( /<strong>/gi, '' );
									
							if (self.options.displayCodeOnly) {
								select.val(item.id);
								$(this).val(value);
							}else {
								$(this).val(value);
							}

							var event = jQuery.Event("change");
							event.selectedItem = item;
							select.trigger(event);
						}
						if (self.options.validateCodeInput){
							var code = (input.css("text-transform")==="uppercase" ? input.val().toString().toUpperCase() : input.val()),
								option = select.find("option[value='" + code +"']"),
								found = option.length>=1

							option.prop("selected",true);
							//see if the code is found. If it is allow it. If not reset it..
							if (!found)
								input.val("");
						}
					})
					.addClass("inforDropDownList")
					.on("touchstart click", function(e){
						e.stopPropagation();	//stop clicking in field from firing parent clicks
					})
					.attr("tabindex", select.attr("tabindex"));
			
			if (self.options.openOnEnter) {
				input.keypress(function(e){
					if (e.which==13) {
						setTimeout(function(){
							$(this).closest(".inforTriggerField").find(".inforDropDownListButton").trigger("click");
						},1);
					}
				});
			}

			//when on a tab not initialized correctly - hope that the css is correct and dont copy it over.
			if (!select.is(":visible") && select.width()==0)
				input.css("width","");

			var $select = $(select);

			if (!self.options.selectFirst && select[0].selectedIndex===0) {
				select[0].selectedIndex = -1;
			}

			//use the new plugin to styling this control.
			input.inforTriggerField();

			//Create a label for the input same as the select for accessibility
			var assocLabel = $('label[for="' + select.attr("id")+ '"]');

			if (assocLabel.length > 0) {
				input.uniqueId();
				var newLabel = $("<label class='inforScreenReaderText'></label>").text(assocLabel.text()).attr("for", input.attr("id"));
				input.before(newLabel);
			}
			
			//add the trigger button and input to the object
			select.data("uiInforDropDownList").triggerButton = input.closest(".inforTriggerField").find("button");
			select.data("uiInforDropDownList").input = input;

			input.focus(function(e) {
				if (!e.isTrigger)
					select.trigger("focus");
			});

			var $div = input.closest(".inforTriggerField");
			//carry over other css.
			if (inlineCss!=undefined) {
				$div.attr("style",inlineCss);
				var width = $div.width();
				$div.width("");

				//copy the width
				input.width(width);
				input.attr("style",inlineCss);
				
				$div.css("display", "inline-block");
				//remove positional attributes
				input.css("position","").css("top","").css("left","");
			}

			if ($select.hasClass("backgroundColor")) {
				if (!$select.isEnabled() || $select.isReadOnly()) {
					input.closest('.inforTriggerField').addClass("backgroundColor");
				}
				input.data("backgroundColor", true);
			}
			//create a root id off this id to use style sheet css.
			if ($select.attr("id")) {
				input.closest('.inforTriggerField').attr("id",$select.attr("id")+"Container");
			}

			//attach button code.
			var button = input.parent().find(".inforTriggerButton")
				.attr("tabIndex","-1")
				.on("touchstart click", function (e) {
					// close if already visible
					if (input.autocomplete("widget").is(":visible")) {
						input.autocomplete("close");
						return false; //false prevents control from submitting form
					}
					$(".inforMenu").hide();
					// pass empty string as value to search for, displaying all results
					input.autocomplete("search", ""); //hide other open menus
					input.focus();
					return false; //false prevents control from submitting form
				});

			if (!self.options.editable) {
				input.autocomplete("makeSelectOnly", self.options.typeAheadSearch);
			}

			//Set the Initial Value.
			var item = $(select).find("option:selected");

			var value = (self.options.displayCodeOnly ? item.val() : item.html());
			if (value)
				value = value.replace( /\&lt;/g, '<' ).replace( /\&gt;/g, '>').replace( /\&amp;/g, '&');

			input.val(value);

			$(select).data("selectedId",item.val());

			//set initial icon...
			this._setSelectedIcon(item,input);

			//Carry forward the placeholder.
			if ($(select).attr('placeholder'))
				input.attr('placeholder',$(select).attr('placeholder'));

			if ($div.css("position")=="absolute")
				input.width(input.width());

			//Carry over the readonly and disabled styling
			if (!$select.is(":enabled"))
				$select.disable();

			if ($select.attr("readonly") !== undefined) {
				$select.readOnly();
			}
			
			//copy forward maxlength
			if ($(select).attr('maxlength') || self.options.maxLength) {
				input.attr('maxlength',( self.options.maxLength ? self.options.maxLength : $(select).attr('maxlength')));
				$(select).removeAttr('maxlength');	//not valid html really
			}
		},
		_setSelectedIcon: function(item,input) {
			var cssClass=cssClass = item.cssClass;
			if (cssClass==undefined && item.attr!=undefined)
				cssClass = item.attr("class");

			if (cssClass) {
				var $img = input.prev(".inforDropDownSelectedImage");

				if ($img.length==0) {
					$img = $('<div class="inforDropDownSelectedImage"></div>').addClass(cssClass);
					input.before($img);
					$img.css({"float":"left","height":"16px","width":"17px","background-repeat":"no-repeat"});
				} else {
					$img.attr("class","");
					$img.addClass("inforDropDownSelectedImage "+cssClass);
				}
			} else {
				input.css("text-indent","").prev(".inforDropDownSelectedImage").remove();
			}
		},
		destroy: function () {
			$(this.element).show().next().remove();
		},
		setCode: function(codeValue, noTrigger) {
			var $elem = this.element,
				selectedOption = $elem.find('option').filter(function() {return $.trim(this.value) === $.trim(codeValue);}).prop("selected",true),
				source = this.options.source,
				input = $elem.next().find("input"),
				value = selectedOption.html();

			//unselect others..
			$elem.find('option:selected').filter(function() {return $.trim(this.value) !== $.trim(codeValue);}).prop("selected",false);
			if (source && !noTrigger) {
				var response = function(data) {
					for (var i=0; i < data.length; i++) {
						if (data[i].id === codeValue) {
							value = data[i].label;
							if (selectedOption.length === 0) {
								$elem.empty().append('<option value="'+data[i].id +'" selected="selected">'+ data[i].label +'</option>');
							}
							break;
						}
					}
				}
				source({term: ""},response);
			}

			if (value!=undefined && typeof value == "string" && value.indexOf("&nbsp")>-1) {
				value = selectedOption.text();
			}
			if (value!=undefined && typeof value == "string") {
				value = value.replace( /\&lt;/g, '<' ).replace( /\&gt;/g, '>' ).replace( /\&amp;/g, '&' );
			}

			if (value == undefined || value === "") {
				input.val("");
				codeValue==null;
				$elem.prop("selectedIndex", -1);
			} else {
				if (this.options.displayCodeOnly) {
					input.val(codeValue);
				} else {
					input.val(value);
				}
			}

			$elem.data("selectedId", codeValue);
			//set the image
			this._setSelectedIcon(selectedOption,input);
			if (!noTrigger) {
				$elem.trigger("change");
			}
		}
	});
})(jQuery);

/*
* jQuery UI Autocomplete 1.8.13
*
* Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
*/
(function( $, undefined ) {

// used to prevent race conditions with remote data sources
var requestIndex = 0;

$.widget( "ui.autocomplete", {
	options: {
		displayCodeOnly: false,
		appendTo: "body",
		delay: 700,
		minLength: 1,
		position: {
			my: "left-1 top",	//RTL is at runtime and set below
			at: "left bottom",
			collision: "fit"
		},
		source: null,
		typeAheadSearch: true,
		openOnEnter: false,
		autoFocus: true, 	//focus the first field
		suggestHook: null 	//lookup behavior - just return the items and let the lookup control use its code to do it
	},
	pending: 0,
	isInGrid: false,
	_create: function() {
		var self = this,
			doc = this.element[ 0 ].ownerDocument,
			suppressKeyPress;

		this.element
			.addClass( "ui-autocomplete-input" )
			.attr( "autocomplete", "off" )
			.attr({
				role: "textbox",
				"aria-autocomplete": "list",
				"aria-haspopup": "true"
			})
			.bind( "keydown.autocomplete", function( e ) {
				self.handleKey(e);
			})
			.bind( "keypress.autocomplete", function( e ) {
				if ( suppressKeyPress ) {
					suppressKeyPress = false;
					e.preventDefault();
				}
			})
			.bind( "focus.autocomplete", function() {
				if ( self.options.disabled ) {
					return;
				}

				self.selectedItem = null;
				self.previous = self.element.val();
			})
			.bind("blur.autocomplete", function( e ) {
				if ( self.options.disabled ) {
					return;
				}
			});
		this._initSource();
		this.response = function() {
			return self._response.apply( self, arguments );
		};

		if (this.options.suggestHook==undefined) {	//do not add menus to the page for the lookup.
			this.menu = $("<ul></ul>")
				.addClass( "ui-autocomplete" )
				.appendTo( $( this.options.appendTo || "body", doc )[0] )
				// prevent the close-on-blur in case of a "slow" click on the menu (long mousedown)
				.mousedown(function( e ) {
					// clicking on the scrollbar causes focus to shift to the body
					// but we can't detect a mouseup or a click immediately afterward
					// so we have to track the next mousedown and close the menu if
					// the user clicks somewhere outside of the autocomplete
					var menuElement = self.menu.element[ 0 ];

					if ( !$( e.target ).closest( ".contextMenuItem" ).length ) {
						setTimeout(function() {
							$(document).one( 'mousedown', function( e ) {
								if ( e.target !== self.element[ 0 ] &&
									e.target !== menuElement &&
									!$.contains( menuElement, e.target ) ) {
										self.close();
									}
							});
						}, 100 );
					}
				})
				.menu({
					focus: function( e, ui ) {
						var item = ui.item.data( "item.autocomplete" );
						if ( false !== self._trigger( "focus", e, { item: item } ) ) {
							// use value to match what will end up in the input, if it was a key e
							if ( /^key/.test(e.originalEvent.type) && item) {
								if (self.options.displayCodeOnly) {
									self.element.val( item.id );
								} else {
									self.element.val(item.value);
								}
							}
						}
					},
					selected: function( e, ui ) {
						if (!ui.item)
							return;

						var item = ui.item.data( "item.autocomplete" ),
							previous = self.previous;

						// only trigger when focus was lost (click on menu)
						if ( self.element[0] !== doc.activeElement ) {
							self.element.focus();
							self.previous = previous;
							// #6109 - IE triggers two focus events and the second
							// is asynchronous, so we need to reset the previous
							// term synchronously and asynchronously :-(
							setTimeout(function() {
								self.previous = previous;
								self.selectedItem = item;
							}, 1);
						}

						if (item && false !== self._trigger( "select", e, { item: item } ) ) {
							if (self.options.displayCodeOnly)
								self.element.val( item.id );
							else {
								var value = item.label;
								if (value) {
									value = value.replace( /\&lt;/g, '<' ).replace( /\&gt;/g, '>' ).replace( /\&amp;/g, '&' );
									value = value.replace( /<\/strong>/gi, '' ).replace( /<strong>/gi, '' );
								}
								self.element.val(value);
							}
						}
						// reset the term after the select event
						// this allows custom select handling to work properly
						self.term = self.element.val();

						self.close( e );
						self.selectedItem = item;
						//textbox value has changed, trigger change event
						self.element.trigger('change', item);
					},
					blur: function( e, ui ) {
						var placeholder = self.element.attr("placeholder");
						// don't set the value of the text field if it's already correct
						// this prevents moving the cursor unnecessarily
						if ( self.menu.element.is(":visible") && self.element.val() !== self.term && (placeholder && placeholder !== self.term) ) {
							self.element.val( self.term );
						}
					}
				})
				.zIndex( this.element.zIndex() + 3000 )
				// workaround for jQuery bug #5781 http://dev.jquery.com/ticket/5781
				.css({ top: 0, left: 0 })
				.hide()
				.data( "uiMenu" );
		}

		if ( $.fn.bgiframe ) {
			this.menu.element.bgiframe();
		}
		this.isInGrid = (this.element.closest(".slick-cell").length==1);
	},
	handleKey: function (e){
		var self = this;

		if ( self.options.disabled || (self.element.attr( "readonly" ) &&  !self.element.hasClass("selectOnly"))) {
			return;
		}
		suppressKeyPress = false;

		var keyCode = $.ui.keyCode;
		switch( e.keyCode ) {
		case keyCode.PAGE_UP:
			if (self.menu.element.is(":visible"))
				self._move( "previousPage", e );

			break;
		case keyCode.PAGE_DOWN:
			if (self.menu.element.is(":visible"))
				self._move( "nextPage", e );

			break;
		case keyCode.UP:
			if (self.menu==undefined)
				return;	//in the grid

			if (!self.menu.element.is(":visible")) {
				if (!self.isInGrid)
					self.openList(false, e);

				return;
			}
			self._move( "previous", e );
			// pre moving cursor to beginning of text field in some browsers
			e.preventDefault();
			e.stopPropagation();	//prevent moving in the grid
			break;
		case keyCode.DOWN:
			if (self.menu==undefined)
				return;	//in the grid

			if (!self.menu.element.is(":visible")) {
				if (!self.isInGrid)
					self.openList(false, e);

				return;
			}
			self._move( "next", e );
			// prevent moving cursor to end of text field in some browsers
			e.preventDefault();
			e.stopPropagation();	//prevent moving in the grid
			break;
		//passthrough - ENTER NUMPAD ENTER and TAB all select the current element
		case keyCode.ENTER:
		case keyCode.TAB:
		case keyCode.NUMPAD_ENTER:
			if (self.menu && !self.menu.element.is(":visible") && !self.options.openOnEnter)
				return;
			
			if ($("#lookupGridDivId").is(":visible")) {
				$("#lookupGridDivId").parent().hide();
				return;
			}
			self.openList(e.keyCode==keyCode.TAB, e);
			break;
		case keyCode.ESCAPE:
			self.element.val( self.term );
			self.close( e );
			break;
		default:
			// keypress is triggered before the input value is changed
			clearTimeout( self.searching );
			self.searching = setTimeout(function() {
				// only search if the value has changed
				if ( self.term != self.element.val() && self.options.typeAheadSearch) {
					self.selectedItem = null;
					self.search( null, e );
				}
			}, self.options.delay );
			break;
		}
	},
	openList: function(isTab, e) {
		var self = this;
		if (self.menu==undefined)
				return;

		if ( !self.menu.active) {
				var isOpen = self.menu.element.closest(".inforMenu").is(":visible");
				if (isOpen)
					self.close( e );
				else {

					if (!isTab) {	//only open on ENTER or num_enter
						self._search("");
						e.stopPropagation();
					}

					if (!self.element.hasClass("selectOnly")) {
						//flush the typed in value when hitting enter to the select - webtop.
						var select = $(this).parent().prev();
						var value = this.value;
						var id = select.find(":contains('"+value+"')").val();
						select.data("selectedId",id);
						select.val(id);
						self._trigger("selected", e, {
									item: {
									id:  id,
									label: value,
									value: value
								}
							});
					}
				}
				return;
			}
			self.menu.select(e);
	},
	destroy: function() {
		this.element
			.removeClass( "ui-autocomplete-input" )
			.removeAttr( "autocomplete" )
			.removeAttr( "role" )
			.removeAttr( "aria-autocomplete" )
			.removeAttr( "aria-haspopup" );

		if (this.menu!=undefined && this.menu.element!=undefined)
			this.menu.element.closest(".inforMenu").remove();

		$.Widget.prototype.destroy.call( this );
	},
	makeSelectOnly: function(typeAheadSearch) {
		//Setup an editable type drop down styling and options. used in lookupfield and dropdown list
		var input = this.element,
			options = this.options,
			timeout = null,
			self = this
			button = input.closest(".inforTriggerFieldTable").find("button");

		input.addClass(("selectOnly"))
			.data("selectOnly", true)
			.attr("readonly","")

		if (typeAheadSearch) {
			input.focusin(function(){
					timeout = setTimeout(function(){
						input.select();
					},100);
				})
				.focusout(function(){
					clearTimeout(timeout);
				})
				.bind("keydown", function(e) {
					if (e.keyCode==8) {
						e.stopPropagation();
						e.preventDefault();
						return false;
					}
				})
				.bind("keypress",function(e) {
				if (!typeAheadSearch)
					return;

				if (!input.hasClass("selectOnly"))
					return;	//readonly...

				var charCode = e.charCode || e.keyCode,
				character = String.fromCharCode(charCode);

				if (e.ctrlKey || e.altKey)	//allow copy paste and other keyboard commands stuff
					return;

				if ($.inArray(charCode,[34,35,38,40,8])!=-1)	//ignore arrow up and down /page up and down and bcspace.
					return;

				if (!/^[a-zA-Z*!@#$%^&0-9]+$/i.test(character))	//allow only alpha numerics...
					return;

				//get the key that was pressed.
				if (!e.shiftKey)
					character = character.toLowerCase();
				else
					character = character.toUpperCase();

				//trigger a search on the delay
				clearTimeout( self.searching );
				self.searching = setTimeout(function() {
					// todo : only search if the value has changed
					input.autocomplete('search', character);
				}, options.delay);

				//when the user starts typing place an input field over...
				var tempInput = $("<input id='inforTempInput' autocomplete='off' class='inforTempInput'>");
				//hide the current text..
				input.css("color","white");

				input.parent(".inforTriggerField").css("position","relative").append(tempInput);
				
				tempInput.val(character).css("width", "15px")
				.putCursorAtEnd()
				.autoGrow({	//similute highlighted effect
					comfortZone: 6,
					minWidth: 16,
					maxWidth: input.width()-5
				})
				.bind("keydown", function(e) {
					if (e.which === 9) {
						input.autocomplete('handleKey',e);
						e.stopPropagation();
						e.preventDefault();
					}
					if ($.inArray(e.which,[34,35,37,38,39,40,13,9])!=-1) {
						e.stopPropagation();
						e.preventDefault();
						return false;
					}
				})
				.bind("keyup", function(e) {
					input.data('holder',input.attr('placeholder'));
					input.attr('placeholder','');

					//handle nav keys keys...
					if ($.inArray(e.which,[34,35,37,38,39,40,13,9])!=-1) {
						input.autocomplete('handleKey',e);
						e.stopPropagation();
						e.preventDefault();
						return false;
					} else {
						//trigger a search on the delay
						clearTimeout( self.searching );
						self.searching = setTimeout(function() {
							input.autocomplete('search', e.target.value);
						}, options.delay );
					}
				})
				.bind("blur",function(e) {
					if (self.menu && self.menu.isMenuClick) {
						return;
					}
					self._removeHidden(input);
				});
					
				e.preventDefault();
				return;
			}).bind("focus",function(e) {
			var $this = $(this);
			try {
				$this.select();
			} catch(err) {
				//Ignore unspecified errors in IE9
			}
			});
		} else {
			input.addClass("clickable");
			input.on("touchstart click", function (e) {
				if (input.prop("readonly") && !input.hasClass("selectOnly")) {
					return;
				}
				var btn = input.closest(".inforTriggerField").find(".inforTriggerButton");
				btn.trigger("click");
				input.select();
				e.stopPropagation();
			}).hover(function (e) {
				var btn = input.closest(".inforTriggerField").find(".inforTriggerButton");
				btn.addClass("ui-state-hover");
			},function (e) {
				var btn = input.closest(".inforTriggerField").find(".inforTriggerButton");
				btn.removeClass("ui-state-hover");
			});
		}
	},
	_removeHidden: function(input) {
		$("#inforTempInput").remove();
		input.css("color","");
		input.attr('placeholder',input.data('holder'));
	},
	_setOption: function( key, value ) {
		$.Widget.prototype._setOption.apply( this, arguments );
		if ( key === "source" ) {
			this._initSource();
		}
		if ( key === "appendTo" ) {
			this.menu.element.appendTo( $( value || "body", this.element[0].ownerDocument )[0] )
		}
		if ( key === "disabled" && value && this.xhr ) {
			this.xhr.abort();
		}
	},
	_initSource: function() {
		var self = this,
			array,
			url;
		if ( $.isArray(this.options.source) ) {
			array = this.options.source;
			this.source = function( request, response ) {
				response( $.ui.autocomplete.filter(array, request.term) );
			};
		} else if ( typeof this.options.source === "string" ) {
			url = this.options.source;
			this.source = function( request, response ) {
				if ( self.xhr ) {
					self.xhr.abort();
				}
				self.xhr = $.ajax({
					url: url,
					data: request,
					dataType: "json",
					autocompleteRequest: ++requestIndex,
					success: function( data, status ) {
						if ( this.autocompleteRequest === requestIndex ) {
							response( data );
						}
					},
					error: function() {
						if ( this.autocompleteRequest === requestIndex ) {
							response( [] );
						}
					}
				});
			};
		} else {
			this.source = this.options.source;
		}
	},
	search: function( value, e) {
		value = value != null ? value : this.element.val();

		// always save the actual value, not the one passed as an argument
		this.term = this.element.val();

		if ( value.length < this.options.minLength ) {
			return this.close( e );
		}

		clearTimeout( this.closing );
		if ( this._trigger( "search", e ) === false ) {
			return;
		}

		return this._search( value );
	},
	_search: function( value ) {
		var dataContext = null, column = null;
		this.pending++;
		
		if (this.element.closest(".inforSignInDialogControls").length == 0) {
			this.element.oldBackgroundPosition = this.element.css("background-position");
			this.element.addClass("inforBusyIndicator small").css("background-position", this.element.width() - 11);
		}
		
		//hide the cancel on a search.
		this.element.closest(".inforTriggerFieldTable").find(".inforTriggerSearchCancel").css("opacity",0);
		
		//if in a grid pass more options.
		if ($(this.element).closest(".inforDataGrid").length != 0) {
			var grid = $(this.element).closest(".inforDataGrid").data("gridInstance"),
				cell = grid.getActiveCell();
				
			if (cell) {
				dataContext = grid.getData().getItems()[cell.row];
			}
		}
		this.source( { term: value }, this.response, false, dataContext);
	},
	_response: function( content, columns, totalRows) {
		if ( !this.options.disabled && content) {
			content = this._normalize( content );
			this._suggest( content, columns, totalRows);
			this._trigger("open");
		} else {
			this.close();
		}
		this.pending--;
		if ( !this.pending ) {
			if (this.element.closest(".inforSignInDialogControls").length == 0) {
				this.element.removeClass("inforBusyIndicator small");
				this.element.css("background-position", this.element.oldBackgroundPosition);
			}
			//un hide the cancel on a search.
			this.element.closest(".inforTriggerFieldTable").find(".inforTriggerSearchCancel").css("opacity",1);
		}
	},
	close: function( e ) {
		if (this.menu==undefined)
			return;	//return

		$(document).off('mousedown.infordropdownlist');
		this._removeHidden(this.element);

		clearTimeout( this.closing );
		var $menu = this.menu.element.closest(".inforMenu"),
			self = this;

		if (e == undefined)
			$menu.hide();

		if ( $menu.is(":visible") ) {
			$menu.slideUp("fast",function() {
				//Caused issue when tabbing to select... self.element.focus().select();
			});
			this.menu.deactivate();
			this._trigger("close", e );
		}
	},
	_change: function( e ) {
		if ( this.previous !== this.element.val() ) {
			this._trigger( "change", e, { item: this.selectedItem } );
		}
	},
	_normalize: function( items ) {
		// assume all items have the right format when the first item is complete
		if ( items.length && items[0].label && items[0].value ) {
			return items;
		}
		return $.map( items, function(item) {
			if ( typeof item === "string" ) {
				return {
					label: item,
					value: item
				};
			}
			return $.extend({
				label: item.label || item.value,
				value: item.value || item.label
			}, item );
		});
	},
	_suggest: function(items, columns, totalRows) {
		//detect if this is a lookupfield. in this case show a grid..
		if (this.options.suggestHook!=undefined) {
			this.options.suggestHook(items, columns, totalRows);
			return;
		}

		var $menu = this.menu.element.closest(".inforMenu").zIndex( this.element.zIndex() + 90000 ),
			self = this;

		//empty it and add new items..
		var ul = $menu.find(".inforMenuOptions");
		ul.empty();
		this._renderMenu( ul, items );

		// Refresh should check if the active item is still in the dom, removing the need for a manual deactivate
		this.menu.deactivate();
		this.menu.refresh();

		// size and position menu
		ul.show();
		$menu.show().css("opacity",0);
		self.menu.isMenuClick = false;

		$(document).off('mousedown.infordropdownlist').on('mousedown.infordropdownlist', function( e ) {
			var target = $(e.target);
			if (target.is(".inforTriggerButton")) {
				return;
			}
			
			if ($(e.target).closest(".inforMenu").length == 0) {
				self.close();
			} else {
				self.menu.isMenuClick = true;
			}
		});
		
		$menu.css("height","");
		ul.css("height","").css("opacity", 1);
		this._resizeMenu();

		$menu.position($.extend({
				of: this.element
			}, this.options.position));
		
		//see if we need to adjust the positioning or size to fit on top
		var top = 0,
			trigger = this.element.closest(".inforTriggerField"),
			menuOpts = $menu.find(".inforMenuOptions");

		top = $menu.position().top;
		var fieldPos = (trigger.length == 0 ? this.element.offset() : trigger.offset()),
			roomOnTop = fieldPos.top,
			inputHeight = 20,
			roomOnBottom = $(document).height() - (fieldPos.top + inputHeight);

		//calc if it will fit better on top
		if (roomOnTop > roomOnBottom && roomOnTop < $menu.height()) {
			 $menu.height(roomOnTop - inputHeight);
			 ul.height(roomOnTop - inputHeight);
		}
		
		var isRTL = typeof Globalize != "undefined" && Globalize.culture().isRTL;
		$menu.position({
			my: (isRTL ? "right " : "left-1 ") + (roomOnTop > roomOnBottom && roomOnBottom < $menu.height() ? "bottom" : "top"),
			at: (isRTL ? "right " : "left ") + (roomOnTop > roomOnBottom && roomOnBottom < $menu.height() ? "top" : "bottom"),
			collision: "none",
			of: this.element
		});
	
		//position on the bottom and shrink...
		if (roomOnTop < roomOnBottom && roomOnBottom < $menu.height()) {
			 $menu.height(roomOnBottom - (fieldPos.top + inputHeight + 10));
			 ul.height(roomOnBottom - (fieldPos.top + inputHeight + 10));
		}
		
		
		var selectedElem = $menu.find("li.selected");
		if (this.options.autoFocus) {
			if (selectedElem.length==0)
				this.menu.next( new $.Event("mouseover") );
		}

		$menu.css("opacity",1).show();

		var hasImages = $menu.find(".inforDropDownImage").length>1;
		if (hasImages) {
			$menu.css("left", (parseInt($menu.css("left"))-17) + "px");
		}
		
		//scroll selected element into view
		if (selectedElem.length>0) {
			this.menu.activate(new $.Event("mouseover") , selectedElem);
		}
	},
	contentWidth: null,
	_resizeMenu: function() {
		this.menu.element.css("width","auto");
		
		var menuElem = this.menu.element.closest(".inforMenu");
		var width = this.element.closest(".inforTriggerField").width(),
			itemWidth = (menuElem.find(".contextMenuItem:first").length > 0 ? menuElem.find(".contextMenuItem:first")[0].offsetWidth + 20 : 0); //make the same width as the control
		
		//auto complete by itself
		if (this.element.closest(".inforTriggerField").length == 0) {
			width =	this.element.width() + 8;
		}
		
		if (this.options.width) {
			width = this.options.width;
			if (width == "auto") {
				width = menuElem[0].offsetWidth;
			}
		}
		menuElem.css({"min-width": this.options.minWidth, "max-height": this.options.maxHeight , "max-width": this.options.maxWidth});
		menuElem.find(".inforMenuOptions").css({"width": Math.max(width, itemWidth), "max-width": this.options.maxWidth});
		menuElem.css("border-color", "#13A3F7");
	},
	_renderMenu: function( ul, items ) {
		var self = this;
		$.each( items, function( index, item ) {
			self._renderItem( ul, item );
		});
	},
	_renderItem: function( ul, item) {
		var labelVal = item.label=="" ? String.fromCharCode(160) : item.label;//allow blank items

		var anchor = $( "<a></a>" ).addClass(item.cssClass).html( labelVal );
		if (item.title)
			anchor.attr("title",item.title);

		var li= $( "<li></li>" )
			.data( "item.autocomplete", item )
			.append( anchor )
			.appendTo( ul );


		//Match the Selected Item..
		if (this.term!="" && $.trim(this.term)==$.trim(item.label))
			li.addClass('selected');

		if (this.options.displayCodeOnly && this.term==item.id)
			li.addClass('selected');

		return li;
	},
	_move: function( direction, e ) {
		if (this.menu==undefined)
			return;

		if ( !this.menu.element.is(":visible") ) {
			this.search( null, e );
			return;
		}
		if ( this.menu.first() && /^previous/.test(direction) ||
				this.menu.last() && /^next/.test(direction) ) {
			//this.element.val( this.term );
			//this.menu.deactivate();
			return;
		}
		this.menu[ direction ]( e );
	},
	widget: function() {
		if (this.menu!=undefined)
			return this.menu.element;
		else
			return this.element;
	}
});

$.extend( $.ui.autocomplete, {
	escapeRegex: function( value ) {
		return value.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
	},
	filter: function(array, term) {
		var matcher = new RegExp( $.ui.autocomplete.escapeRegex(term), "i" );
		return $.grep( array, function(value) {
			return matcher.test( value.label || value.value || value );
		});
	}
});

}( jQuery ));

/*
* JQuery UI Menu
*
* Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*/
(function($) {

$.widget("ui.menu", {
	_create: function() {
		var self = this;
		this.element
			.addClass("inforMenuOptions")
			.attr({
				role: "listbox"
			})
			.on("touchstart click", function( e ) {
				if ( !$( e.target ).closest( ".contextMenuItem a" ).length ) {
					return;
				}
				e.preventDefault();
				e.stopPropagation();	//stop clicking in field from firing parent clicks
				self.select( e );
			});

		var id = this.element.attr("id"),
			menuDiv = $('<div class="inforMenu" role="listbox"></div>');
			
		if (id) {
			menuDiv.attr("id", id);
		} else {
			menuDiv.uniqueId();
		}
		
		$('body').append(menuDiv.append(this.element));
		this.element.css("display","");
		this.refresh();
	},

	refresh: function() {
		var self = this;

		// don't refresh list items that are already adapted
		var items = this.element.children("li:not(.contextMenuItem):has(a)")
			.addClass("contextMenuItem")
			.attr("role", "option");

		items.children("a")
			.attr("tabindex", -1)
			// mouseenter doesn't work with event delegation
			.mouseenter(function( e ) {
				self.activate( e, $(this).parent() );
			})
			.mouseleave(function() {
				self.deactivate();
			});
	},

	activate: function( e, item ) {
		this.deactivate();
		if (this.hasScroll()) {
			var offset = item.offset().top - this.element.offset().top,
				scroll = this.element.scrollTop(),
				elementHeight = this.element.height();
			if (offset < 0) {
				this.element.scrollTop( scroll + offset);
			} else if (offset >= elementHeight) {
				this.element.scrollTop( scroll + offset - elementHeight + item.height());
			}
		}
		this.active = item.addClass("selected").eq(0)
			.children("a").attr("id", "ui-active-menuitem")
			.end();
		this._trigger("focus", e, { item: item });
	},
	deactivate: function() {
		if (!this.active) { return; }

		this.active.removeClass("selected").children("a").removeAttr("id");
		this._trigger("blur");
		this.active = null;
	},
	next: function(e) {
		this.move("next", ".contextMenuItem:first", e);
	},
	previous: function(e) {
		this.move("prev", ".contextMenuItem:last", e);
	},
	first: function() {
		return this.active && !this.active.prevAll(".contextMenuItem").length;
	},
	last: function() {
		return this.active && !this.active.nextAll(".contextMenuItem").length;
	},
	move: function(direction, edge, e) {
		var selected = this.element.find(".selected");

		if (!this.active && selected.length==0) {
			this.activate(e, this.element.children(edge));
			return;
		} else {
			this.activate(e, selected);
		}
		var next = this.active[direction + "All"](".contextMenuItem").eq(0);
		if (next.length) {
			this.activate(e, next);
		} else {
			this.activate(e, this.element.children(edge));
		}
	},
	nextPage: function(e) {
		if (this.hasScroll()) {
			if (!this.active || this.last()) {
				var first = this.element.children(".contextMenuItem:first");
				this.activate(e, first);
				return;
			}
			var base = this.active.offset().top,
				height = this.element.height(),
				result = this.element.children(".contextMenuItem").filter(function() {
					var close = $(this).offset().top - base - height + $(this).height();
					return close < 10 && close > -10;
				});

			//try to catch this earlier when scrollTop indicates the last page anyway
			if (!result.length) {
				result = this.element.children(".contextMenuItem:last");
			}
			this.activate(e, result);
		} else {
			this.activate(e, this.element.children(".contextMenuItem")
				.filter(!this.active || this.last() ? ":first" : ":last"));
		}
	},
	previousPage: function(e) {
		if (this.hasScroll()) {
			//merge with no-scroll-else
			if (!this.active || this.first()) {
				this.activate(e, this.element.children(".contextMenuItem:last"));
				return;
			}

			var base = this.active.offset().top,
				height = this.element.height();
				result = this.element.children(".contextMenuItem").filter(function() {
					var close = $(this).offset().top - base + height - $(this).height();
					// TODO improve approximation
					return close < 10 && close > -10;
				});

			// try to catch this earlier when scrollTop indicates the last page anyway
			if (!result.length) {
				result = this.element.children(".contextMenuItem:first");
			}
			this.activate(e, result);
		} else {
			this.activate(e, this.element.children(".contextMenuItem")
				.filter(!this.active || this.first() ? ":last" : ":first"));
		}
	},

	hasScroll: function() {
		return this.element.height() < this.element[ $.fn.prop ? "prop" : "attr" ]("scrollHeight");
	},
	select: function( e ) {
		this._trigger("selected", e, { item: this.active });
	}
});

}(jQuery));

/*
* jQuery autoGrowInput plugin by James Padolsey
* See related thread: http://stackoverflow.com/questions/931207/is-there-a-jquery-autogrow-plugin-for-text-fieldss
*/
(function($){


$.fn.autoGrow = function(o) {

	o = $.extend({
		maxWidth: 1000,
		minWidth: 0,
		comfortZone: 70
	}, o);

	this.filter('input:text').each(function(){

		var minWidth = o.minWidth || $(this).width(),
			val = '',
			input = $(this),
			check = function() {
				if (val === (val = input.val())) {return;}

				// Enter new content into testSubject
				var escaped = $.escape(val);

				// Calculate new width + whether to change
				var testerWidth = escaped.textWidth(),
					newWidth = (testerWidth + o.comfortZone) >= minWidth ? testerWidth + o.comfortZone : minWidth,
					currentWidth = input.width(),
					isValidWidthChange = (newWidth < currentWidth && newWidth >= minWidth)
										|| (newWidth > minWidth && newWidth < o.maxWidth);

				// Animate width
				if (isValidWidthChange)
					input.width(newWidth);
			};

		$(this).bind('keydown keyup blur update', check);
	});

	var resizeTextArea = function(elem) {
		var str = elem.val(),
		cols = elem.attr("cols"),
		linecount = 0;

		$.each(str.split("\n"), function(index, value) {
			linecount += Math.ceil( value.length / cols ); // take into account long lines
		});

		elem.attr("rows",linecount + 1);
	};

	this.filter('textarea').each(function(){
		var elem = $(this);

		elem.css({"height":"auto","padding-bottom":"10px","overflow":"hidden" }).keydown(function(e){
			resizeTextArea($(e.currentTarget));
		});
		resizeTextArea(elem); //initial on load*/
	});
	return this;

};
})(jQuery);/*
	Infor FieldSet Control
*/
(function ($) {
	$.widget("ui.inforFieldSet", {
		options: {
			collapsible: true,
			initialState: 'open',
			onExpand: null,
			onCollapse: null,
			animate: true
		},
		_create: function () {
			var $div = $(this.element),
				o = this.options,
				self = this,
				elem = $(this.element),
				expandButton, label;

			self.isInitialized = false;

			//attach the click and logic to the expand button.
			$div.find(".inforExpandButton")
				.unbind('click')
				.attr("title", Globalize.localize("ExpandCollapse"))
				.click(function () {
					var $this = $(this);
					if ($this.hasClass("closed")) {
						self.expand(true);
					} else {
						self.collapse(true);
					}
				});

			//Set the initial state to either open or closed. Could do this by css or by the plugin.
			expandButton = $div.find(".inforExpandButton").first();

			//Aria Tags
			expandButton.attr({"role": "button", "aria-disabled": "false"});

			if (Globalize.culture().isRTL) {
				expandButton.addClass("inforRTLFlip");
			}

			if (expandButton.hasClass("closed") || o.initialState == "closed") {
				self.collapse(false);
			} else if (expandButton.hasClass("open") || o.initialState == "open") {
				self.expand(false);
			} else {
				self.expand(false);
			}

			//Hide the expander if we dont need it. Can also set in initial html
			if (!o.collapsible) {
				elem.find(".inforExpandButton:first").remove();
			}

			//Add hover states to releated elements

			if (o.collapsible && expandButton.length !== 0) {
				label = elem.find(".inforFieldSetLabel:first");
				
				$div.find(".inforFieldSetLabel:first").hover(function () {
					expandButton.addClass("hover");
					label.addClass("hover");
					elem.addClass("hover");
				}, function () {
					expandButton.removeClass("hover");
					label.removeClass("hover");
					elem.removeClass("hover");
				}).click(function () {
				}).click(function () {
					if (expandButton.hasClass("open")) {
						self.collapse(true);
					} else {
						self.expand(true);
					}
				});
			}
			self.isInitialized = true;
		},
		expand: function (animate) {
			var elem = $(this.element).find(".inforExpandButton:first").first(),
				label = $(this.element).find(".inforFieldSetLabel:first").first(),
				self = this,
				content = elem.nextAll("div.content").attr("aria-hidden", "false");

			elem.removeClass("closed").addClass("open");
			label.removeClass("closed").addClass("open");

			//size hidden grids.
			content.find('.inforDataGrid').each(function () {
				var grid = $(this);
				if (grid.data("gridInstance")) {
					grid.parent().css("opacity",0).show();
					grid.show().data("gridInstance").resizeCanvas();
					grid.parent().css("opacity",1);
				}
			});

			if (elem.length ==0) {
				content = $(this.element).find(".content:first");	//no expand button
			}
			
			var onComplete = function () {
				var panel = content;
				panel.find('.autoLabelWidth').find('.inforLabel').autoWidth();
				panel.find('.inforTabContainer').trigger("resize");

				if (self.isInitialized && self.options.onExpand) {
					self.options.onExpand(this);
				}

				panel.find('.inforDataGrid').each(function () {
					var grid = $(this);
					if (grid.data("gridInstance")) {
						grid.data("gridInstance").resizeCanvas();
					}
				});
			};
			
			if (animate && self.options.animate) {
				content.slideDown(function(){
					onComplete();
				});
			} else {
				content.show();
				onComplete();
			}
		},
		collapse: function (animate) {
			var elem = $(this.element).find(".inforExpandButton:first").first(),
				label = $(this.element).find(".inforFieldSetLabel:first").first(),
				self = this,
				content = elem.nextAll("div.content").attr("aria-hidden", "true");
			
			elem.removeClass("open").addClass("closed");
			label.removeClass("open").addClass("closed");
			if (animate && self.options.animate) {
				content.slideUp();
			} else {
				content.hide();
			}	
			
			if (self.isInitialized && self.options.onCollapse) {
				self.options.onCollapse(this);
			}
		}
	});
})(jQuery);/*
* Various Functions The handle Field states and setting field states.
*/
(function ($) {
	/*
	* Jquery Extensions to get the Value or Code of ((any control but not all included yet).
	*/
	$.fn.getValue = function () {
		var elem = this[0],
			$elem = $(elem),
			api, input, retVal, value;

		if (elem === undefined) {
			return undefined;
		}

		if (($.nodeName(elem, "select") && $elem.next().hasClass("inforTriggerField")) || $elem.hasClass("inforDataGridDropDownList")) {
			//its a drop down list..
			api = $elem.data("uiInforDropDownList");
			input = $elem.next().find('input');

			retVal = input.val();
			if (input.css("text-transform") === "uppercase") {
				retVal = retVal.toString().toUpperCase();
			}

			if (api && api.options.displayCodeOnly) {
				retVal = $elem.find("option[value='" + retVal + "']").html();
				if (!retVal) { //undefined check for empty list item
					retVal = $elem.find("option[value='']").html();
				}
			}

			return retVal;
		}

		if ($elem.hasClass("inforCheckbox")) {
			if ($.nodeName(elem, "div")) {
				$elem = $elem.find('input');
			}

			return ($elem.prop("checked") ? true : false);
		}

		if ($elem.hasClass("inforRadioButtonSet")) {
			value = $elem.find("input").serialize();
			return value.replace(/^.*\=/, "");  //ignore jslint
		}
		//May need this later - for setting the value
		//this.toggleClass(arguments.length).val.apply(this, arguments)
		return $elem.val();
	};

	/*
	* Jquery Extensions to set the Value or Code of (any control but not all included yet).
	*/
	$.fn.setValue = function (value) {
		return this.each(function () {
			var elem = this,
			$elem = $(elem),
			seekVal, api, retVal, oneToCheck, checked;
			
			//Drop Downs.
			if (($.nodeName(elem, "select") && $elem.next().hasClass("inforTriggerField")) || $elem.hasClass("inforDataGridDropDownList")) {
				if (value == undefined || value === "") {
					$elem.prop("selectedIndex", -1);
					$elem.next().find('input').val("");
					return null;
				}

				//its a drop down list - first set the selected value
				seekVal = $.trim(value); //converts to a string
				seekVal = seekVal.replace(/&nbsp;/gi, '').replace(/&#160;/gi, '');

				$elem.find("option:contains('" + seekVal + "')").prop("selected", true);
				$elem.find("option:selected").not("option:contains('" + seekVal + "')").removeProp();

				api = $elem.data("uiInforDropDownList");
				retVal = null;

				if (api && api.options.displayCodeOnly) {
					retVal = $elem.find("option:selected").attr("value");
					$elem.val(retVal);
					$elem.data("selectedId", retVal);
				} else {
				$elem.val(seekVal);
					retVal = value;
					$elem.data("selectedId", $elem.find("option:selected").attr("value"));
				}

				//set the input value
				var input = $elem.next().find('input');
				input.val(retVal);
				if (!$.support.placeholder) {
					if (retVal == "" && input.attr("placeholder")) {
						input.addClass("placeholder");
					} else {
						input.removeClass("placeholder");
					}
				}
				return retVal;
			}

			if ($elem.hasClass("inforRadioButtonSet")) {
				$elem.find("input").each(function () {
					var $this = $(this);
					$this.prop("checked", false);
					$this.parent().removeClass("checked");
				});

				oneToCheck = $elem.find("input[value='" + value + "']");
				oneToCheck.prop("checked", true);
				oneToCheck.parent().addClass("checked");
			}

			//Checkboxes...
			if ($elem.hasClass("inforCheckbox")) {
				//if its the input box we are good but if its the div get the input box.
				if ($.nodeName(elem, "div")) {
					$elem = $elem.find('input');
				}

				checked = false;
				//parse the value we can accept boolean,numeric or string
				if (typeof (value) == "number") {
					checked = (value == 1 ? true : false);
				}

				if (typeof (value) == "boolean") {
					checked = value;
				}

				if (typeof (value) == "string") {
					checked = ((value == "1" || value == "true") ? true : false);
				}

				//set the value
				if (checked) {
					$elem.prop("checked", true);
					$elem.parent().addClass("checked");
				} else {
					$elem.prop("checked", false);
					$elem.parent().removeClass("checked");
				}
				return true;
			}
		});
	};

	/*
	* Jquery Extensions to get the Value or Code of (any control)
	*/
	$.fn.getCode = function () {
		var elem = this[0],
			$elem = $(elem),
			api, input, value, seekVal, option, code;

		if ($.nodeName(elem, "select") && $elem.next().hasClass("inforTriggerField")) {
			//get the value - find the code in the select list and return the option = value.
			api = $elem.data("uiInforDropDownList");
			input = $elem.next().find('input');
			value = null;

			value = input.val();
			if (input.css("text-transform") === "uppercase") {
				value = value.toString().toUpperCase();
			}

			if (api && api.options.displayCodeOnly) {
				return value;
			}

			seekVal = value.replace(/&nbsp;/gi, '').replace(/&#160;/gi, '');
			seekVal = $.trim(seekVal);

			if (seekVal == "") {
				option = $elem.find("option[value='" + seekVal + "']");
			} else {
				option = $elem.find('option:contains("' + seekVal + '")');
			}
			code = option.attr("value");

			if (option.length > 1) {
				option.each(function (i, optVal) {
					if ($(optVal).html() == seekVal) {
						code = $(optVal).attr("value");
					}
				});
			}

			if (!code) {
				code = $elem.data("selectedId");
			}
			return code;
		}
		return null;
	};

	/*
	* Infor Required Plugin. Makes any element have a required indicator icon to the top left.
	*/
	$.fn.required = function (options) {
		return this.each(function () {
			var required = $('<span class="inforRequiredIndicator"></span>'),
				elem = $(this),
				label = null,
				trigger = elem.closest(".inforTriggerField"),
				location = (elem.is(".inforCheckbox") ? elem.closest(".inforCheckboxContainer") : elem),
				hasLabel = (trigger.length === 1 ? trigger.prev().is(".inforLabel") : location.prev().is(".inforLabel"));

			if (hasLabel){
				location = (trigger.length === 1 ? trigger.prev() : location.prev());
			}

			if (elem.attr("id")) {
				label = $("label[for='" + elem.attr("id")+ "']");
				if (label.length === 1) {
					hasLabel = true;
				}
				location = label;
			}

			//extra case for drop downs
			if (elem.is("select") && !hasLabel) {
				required.css("top", (!Globalize.culture().isRTL ? "-6px" : "0px"));
			}

			if (elem.is("textarea") && !hasLabel) {
				required.css("top", "-" + elem.height() + "px");
			}

			if (elem.hasClass("inforHyperlink") && !hasLabel) {
				required.css("top", "-3px");
			}

			if (elem.hasClass("inforRadioButtonSet")) {
				location = elem.find(".inforTopLabel");
				hasLabel = true;
			}

			if ($(this).hasClass("inforCheckbox")) {
				location = elem.closest(".inforCheckboxContainer").prev(".inforLabel");
				required.css((!Globalize.culture().isRTL ? {
						"top": "-6px",
						"left": "7px",
						"margin-left": "-9px"
					} : {
						"top": "0px",
						"left": "0",
						"margin-left": "-15px"
					}));
			}

			//move the indicator for trigger fields.
			if (trigger.length == 1 && !hasLabel) {
				elem = trigger;
				required.css("top", (!Globalize.culture().isRTL ? "-6px" : "0px"));
				location = elem.closest(".inforTriggerField");
			}

			elem.attr("aria-required", "true");

			if (!Globalize.culture().isRTL) {
				if (location.find(".inforRequiredIndicator").length === 0) {
					if (hasLabel) {
						location.append(required);
					} else {
						location.before(required);
					}
				}
			} else {
				if (location.find(".inforRequiredIndicator").length === 0) {
					if (hasLabel) {
						location.prepend(required);
					} else {
						location.after(required);
					}
				}
			}
		});
	};

	/*
	* Adds a function that can easily disable a complex field to jquery.
	*/
	$.fn.disable = function (options) {
		var settings = {
			readonly: false
		};
		return this.each(function () {

			var o = $.extend({}, settings, options),
				$control = $(this),
				targetClass = (!o.readonly ? "disabled" : "readonly"),
				$next;

			if ($control.hasClasses(['inforLookupField', 'inforTimeField', 'inforCalculatorField', 'inforSpinner', 'inforDateField', 'inforUrlField', 'inforSearchField', 'inforFileField', 'inforEmailField'])) {
				if ($control.hasClass(targetClass)) {
					return;
				}

				$control.addClass(targetClass).attr(targetClass, targetClass).closest(".inforTriggerField").addClass(targetClass);
				if ($control.hasClass("inforFileField")) {
					$next = $control.next();
					$next.addClass(targetClass).attr(targetClass, targetClass).data("selectOnly", $next.hasClass("selectOnly"));
					$next.removeClass("selectOnly");
				}
				if ($control.hasClass("inforLookupField")) {
					$control.data("selectOnly", $control.hasClass("selectOnly"));
					$control.removeClass("selectOnly");
				}

				if (!$control.data("backgroundColor")) {
					$control.data("backgroundColor", $control.closest(".inforTriggerField").hasClass("backgroundColor"));
				}
				if ($control.data("backgroundColor")) {
					$control.closest(".inforTriggerField").addClass("backgroundColor");
				}
				return;
			}

			if ($control.hasClass("inforRichTextEditor")) {
				$control.prev(".inforToolbar").fadeOut();
				$control.attr(targetClass, targetClass);
				$control.attr("contenteditable", "false");
			}
			
			if ($control.hasClass("inforSwapList")) {
				$control.find(".inforListBox").addClass("disabled");
				$control.find("button").attr("disabled","");
				$control.addClass("disabled");
			}
				
			if ($control.hasClass("inforDropDownList")) {
				var $div = $control.next();
				if ($div.hasClass(targetClass)) {
					return;
				}
				var $input = $div.find("input");
				if (!$input.data("selectOnly")) {
					$input.data("selectOnly", $input.hasClass("selectOnly"));
				}
				$input.attr(targetClass, targetClass).removeClass("selectOnly");
				$div.addClass(targetClass);

				if (!$input.data("backgroundColor")) {
					$input.data("backgroundColor", $input.closest(".inforTriggerField").hasClass("backgroundColor"));
				}
				if ($input.data("backgroundColor")) {
					$input.closest(".inforTriggerField").addClass("backgroundColor");
				}
			return;
			}

			if ($control.hasClass("inforRadioButtonSet")) {
				$control.find("input").attr("disabled", "disabled").addClass("disabled").parent().addClass("disabled");
				$control.addClass("disabled");
				return;
			}
			
			if ($control.hasClasses(["inforCheckbox", "inforRadioButton"])) {
				$control.attr("disabled", "disabled");
				$control.parent().addClass("disabled");
				$control.parent().parent().removeClass("inforCheckboxFocus").addClass("disabled");
				if ($control.hasClass("inforCheckbox")) {
					$control.closest(".inforCheckboxContainer").addClass("disabled");
				}
				return;
			}

			if ($control.hasClass("inforIconButton") && !$control.hasClass("inforSplitButton")) {
				$control.attr(targetClass, targetClass).attr("aria-disabled", "true");
				return;
			}

			if ($control.hasClass("inforTextButton")) {
				$control.attr(targetClass, targetClass).attr("aria-disabled", "true").addClass(targetClass);
			}

			if ($control.hasClass("inforSplitButton")) {
				$control.parent(".inforSplitButtonContainer").addClass(targetClass);
				$control.addClass(targetClass).attr(targetClass, "").attr("aria-disabled", "true");
				$control.next().addClass(targetClass).attr(targetClass, "").attr("aria-disabled", "true");
				return;
			}

			if ($control.hasClass("inforMenuButton")) {
				$control.addClass(targetClass).attr(targetClass, targetClass).attr("aria-disabled", "true");
				return;
			}

			if ($control.hasClass("inforFormButton")) {
				$control.attr(targetClass, targetClass).addClass(targetClass).attr("aria-disabled", "true");
				return;
			}

			if ($control.hasClasses(["inforTextbox", "inforTextArea"])) {
				$control.addClass(targetClass);
				$control.attr(targetClass, "");
			}

			if ($control.hasClass("inforDualListExchange")) {
				$control.addClass("disabled").inforDualListExchange("option", "enabled", "false");
				return;
			}

			if ($control.hasClass("inforTree")) {
				$control.addClass("disabled").bind('before.jstree', function (event, data) {
					var isSelectable = false;
					if (!isSelectable && (data.func == 'select_node' || data.func == 'hover_node')) {
						event.stopImmediatePropagation();
						return false;
					}

					if ($control.hasClass("disabled") && (data.func == 'check_node' || data.func == 'uncheck_node')) {
						event.stopImmediatePropagation();
						return false;
					}
				});
			}
		});
	};

	/*
	* Adds a function that can easily enable a complex field to jquery.
	*/
	$.fn.enable = function () {

		return this.each(function () {
			var $control = $(this),
				targetClass = "disabled readonly";

			if ($control.hasClasses(['inforLookupField', 'inforCalculatorField', 'inforSpinner', 'inforDateField', 'inforTimeField', 'inforUrlField', 'inforSearchField', 'inforFileField', 'inforEmailField'])) {
				$control.removeClass(targetClass).removeAttr(targetClass).closest(".inforTriggerField").removeClass(targetClass);
				if ($control.hasClass("inforFileField")) {
					var $next = $control.next();
					$control.removeAttr("disabled");
					$next.removeClass(targetClass).removeAttr(targetClass);
					if ($next.data("selectOnly")) $next.data("selectOnly");
				}

				if ($control.hasClass("inforLookupField") && $control.data("selectOnly")) {
					if ($control.data("autocomplete")) $control.autocomplete("makeSelectOnly", false, $control.data("autocomplete").options.typeAheadSearch);
					else $control.attr("readonly", "").addClass("selectOnly");
				}
				if ($control.data("backgroundColor")) {
					$control.closest(".inforTriggerField").removeClass("backgroundColor");
					$control.removeClass("backgroundColor");
				}
				return;
			}

			if ($control.hasClass("inforSwapList")) {
				$control.find(".inforListBox").removeClass("disabled");
				$control.find("button").removeAttr("disabled","");
				$control.removeClass("disabled");
			}
			
			if ($control.hasClass("inforRichTextEditor")) {
				$control.prev(".inforToolbar").fadeIn();
				$control.removeAttr(targetClass).attr("contenteditable", "true");
			}
			
			if ($control.hasClass("inforDropDownList")) {
				var $div = $control.next();
				var $input = $div.find("input");
				$input.removeAttr(targetClass);
				$div.removeClass(targetClass);
				if ($input.data("selectOnly")) {
					$input.addClass("selectOnly").attr("readonly", "");
				}
				if ($input.data("backgroundColor")) {
					$input.closest(".inforTriggerField").removeClass("backgroundColor");
				}
				return;
			}

			if ($control.hasClass("inforRadioButtonSet")) {
				$control.find("input").removeAttr("disabled").removeClass("disabled").parent().removeClass("disabled");
				$control.removeClass("disabled");
				return;
			}
			
			if ($control.hasClasses(["inforCheckbox", "inforRadioButton"])) {
				$control.removeAttr("disabled");
				$control.removeAttr(targetClass);
				
				$control.parent().removeClass(targetClass);
				$control.parent().parent().removeClass(targetClass);

				if ($control.hasClass("inforCheckbox")) {
					$control.closest(".inforCheckboxContainer").removeClass(targetClass);
				}
				return;
			}

			if ($control.hasClass("inforIconButton") && !$control.hasClass("inforSplitButton")) {
				$control.removeAttr(targetClass).attr("aria-disabled", "false");
				return;
			}

			if ($control.hasClass("inforTextButton")) {
				$control.removeAttr(targetClass).removeClass(targetClass).attr("aria-disabled", "false");
				return;
			}

			if ($control.hasClass("inforSplitButton")) {
				$control.removeClass(targetClass).removeAttr(targetClass).attr("aria-disabled", "false");
				$control.next().removeClass(targetClass).removeAttr(targetClass).attr("aria-disabled", "false");
				$control.parent().removeClass(targetClass).attr("aria-disabled", "false");
				return;
			}

			if ($control.hasClass("inforMenuButton")) {
				$control.removeClass(targetClass).removeAttr(targetClass).attr("aria-disabled", "false");
				return;
			}

			if ($control.hasClass("inforFormButton")) {
				$control.removeAttr(targetClass).removeClass(targetClass).attr("aria-disabled", "false");
				return;
			}

			if ($control.hasClasses(["inforTextbox", "inforTextArea"])) {
				$control.removeClass(targetClass);
				$control.removeAttr(targetClass);
			}

			if ($control.hasClass("inforTree")) {
				$control.removeClass("disabled").unbind('before.jstree');
			}
			return;
		});
	};

	/*
	* Adds an isDisabled Function to jQuery.
	* Returns true if the control is Enabled.
	*/
	$.fn.isEnabled = function () {
		if (this.length == 0) return false;

		if (this[0].attributes["disabled"] == undefined) return true;

		if (this[0].attributes["disabled"].value == 'disabled' || this[0].attributes["disabled"].value == '') return false;

		return false;
	};

	/*
	* Adds an isReadOnly Function to jQuery.
	* Returns true if the control is readOnly.
	*/
	$.fn.isReadOnly = function () {
		if (this.length == 0) {
			return false;
		}

		if (this.hasClass("inforCheckbox")) {
			return this.closest(".inforCheckboxContainer").hasClass("readonly");
		}

		if (this[0].attributes["readonly"] == undefined) {
			return false;
		}

		if (this[0].attributes["readonly"].value == 'readonly' || this[0].attributes["readonly"].value == ''){
			return true;
		}
		return false;
	};

	/*
	* Makes an object readonly. Fx for the checkboxes and radio buttons
	*/

	$.fn.readOnly = function () {
		return this.each(function () {
			$(this).disable({
				readonly: true
			});
		});
	};

	/*
	* Toggles the Checkbox State.
	*/
	$.fn.toggleChecked = function () {
		var checkbox = $(this),
			checked = false;

		if (!checkbox.hasClass("inforCheckbox")){
			return false;
		}

		checked = !checkbox.prop('checked');
		checkbox.prop('checked', checked);

		if (checked) {
			checkbox.parent().addClass("checked");
		} else {
			checkbox.parent().removeClass();
		}
		checkbox.trigger("change");
		return checked;
	};

	$.fn.formatNumber = function () {
		this.each(function () {
			var $input = $(this),
				format = $input.attr("data-number-format"),
				sourceFormat = $input.attr("data-number-source-format"),
				isDecimal = false,
				isTrim = (format != undefined ? format.substr(0, 1).toLowerCase() === "t" && format !== "n0" : false),
				val = $input.val();
			
			if  (isTrim) {
				format = format.replace("t","n");
			}
			
			if (!sourceFormat) $input.attr("data-number-source-format", sourceFormat = "en-US");

			var rawValue = Globalize.parseFloat(val, 10, sourceFormat);

			if (isNaN(rawValue)) //try to format it in current format
				rawValue = Globalize.parseFloat(val, 10);

			if (!format && $input.hasClass("numericOnly")) {
				$input.attr("data-number-format", format = "n0");
			}
			
			if (!format && $input.hasClass("decimalOnly")) {
				$input.attr("data-number-format", format = "n2");
			}
			
			isDecimal = $input.hasClass("decimalOnly");
			
			if (format && val && isDecimal) {
				val = Globalize.format(rawValue, format);
				$input.val(val);
			}
			
			if (format && val && isDecimal && isTrim) {
				val = val.replace(/0*$/, '');	//remove trailing zeros
				if (val.indexOf(".") == val.length -1) {
					val = val.replace(".", '');
				}
				if (val.indexOf(",") == val.length -1) {
					val = val.replace(",", '');
				}
				$input.val(val);
			}
		});
	};

	/*
	* Get the location of the cursor within the input field
	*/
	$.fn.getCursorPosition = function() {
		var input = this.get(0);
		if (!input) return; // No (input) element found
		if ('selectionStart' in input) {
			// Standard-compliant browsers
			return input.selectionStart;
		} else if (document.selection) {
			// IE
			input.focus();
			var sel = document.selection.createRange();
			var selLen = document.selection.createRange().text.length;
			sel.moveStart('character', -input.value.length);
			return sel.text.length - selLen;
		}
	}

	/*
	* Restricts the input on a Input Field to Numeric.
	*/
	$.fn.numericOnly = function (allowDecimal, onlyAllowPositive) {
		var $input = $(this),
			format = $input.attr("data-number-format");

		if (format) {
			//prevent pasting in bad values..
			$input.bind('paste', function () {
				var el = $(this);
				setTimeout(function () {
					el.formatNumber();
				}, 100);
			});
		}

		$input.keydown(function (event) {
			var key = event.keyCode;

			//Allow one , and one .
			if ((!event.shiftKey && key == 190) || (!event.shiftKey && key == 188) || (!event.shiftKey && key == 110)) {
				if (!allowDecimal) {
					event.preventDefault();
					return;
				}

				if (key == 188 && $input.val().indexOf(",") > -1) {
					event.preventDefault();
					return;
				}

				if (key == 190 && $input.val().indexOf(".") > -1) {
					event.preventDefault();
					return;
				}

				return;
			}

			//allow one dash (negative) at the start
			if (!onlyAllowPositive && (key == 189 || key == 109 || key == 173)) {
				if ($input.getCursorPosition() != 0 || $input.val().indexOf("-") > -1 ) {
					event.preventDefault();
					return;
				}
				return;
			}

			//allow enter
			if (key == 13) return;

			// Allow: backspace, delete, tab and escape
			if (key == 46 || key == 8 || key == 9 || key == 27 ||
				// Allow: Ctrl+A
			(key == 65 && event.ctrlKey === true) ||
				// Allow: Ctrl+C
			(key == 67 && event.ctrlKey === true) ||
				// Allow: Ctrl+X
			(key == 88 && event.ctrlKey === true) ||
				// Allow: Ctrl+V
			(key == 86 && event.ctrlKey === true) ||
				// Allow: home, end, left, right
			(key >= 35 && key <= 39)) {
				// let it happen, don't do anything
				return;
			} else {
				// Ensure that it is a number and stop the keypress
				if ((key < 48 || key > 57) && (key < 96 || key > 105)) {
					event.preventDefault();
				}
			}

		});

		var format = $input.attr("data-number-format");
		if (format) {
			$input.formatNumber();
		}
		return $input;
	};

	/*
	* Allows you to track dirty fields and add the dirty indicator...
	*/
	$.fn.trackDirty = function (settings) {
		var isDirty = "isDirty";
		var config = {
			className: "inforDirtyIndicator",
			onDirtyChangeCallback: null
		},
		changeCallback = function () {
			var el = this,
				$el = $(el),
				isChangedBack = $el.data("originalValue") === $el.getValue();

			if ($el.hasClass("inforRadioButton")) {
				isChangedBack = $el.parent().parent().find('input:radio:checked') === $el.data("originalValue");
			}

			if (($el.attr("readonly") || $el.attr("disabled")) && !$el.hasClass("selectOnly") && !$el.is("select")) {
				return;
			}

			if ($el.is("input.inforDropDownList")) { //change fires on the select element
				return;
			}

			if ($el.is("select")) {
				isChangedBack = ($el.data("originalValue") === $el.val());
			}

			//Handle Setting back to orginal value - the value is set at plugin initialization
			if (isChangedBack) {
				$el.data(isDirty, false).removeClass("inforDirty");
				if ($el.is(".inforCheckbox")) {
					$el.closest(".inforCheckboxContainer").find("span").removeClass("inforDirty");
				}
				if ($el.is("select")) {
					$el.next().next().find("input").removeClass("inforDirty");
				}
				return;
			}

			if ($el.data(isDirty) === true) {
				return;
			}

			$el.data(isDirty, true).addClass("inforDirty");
			if ($el.is(".inforCheckbox")) {
				$el.closest(".inforCheckboxContainer").find("span").addClass("inforDirty").css("background-position", "left top");
			}
			
			if ($el.is("select")) {
				$el.next().next().find("input").addClass("inforDirty");
			}
			
			if (config.onDirtyChangeCallback) {
				config.onDirtyChangeCallback.apply(el);
			}
		};

		if (settings) $.extend(config, settings);

		this.each(function () {
			var $this = $(this),
				originalVal = $this.getValue();

			if ($this.is("select")) {
				originalVal = $this.getCode();
			}

			if (originalVal == undefined) {
				originalVal = null;
			}

			if ($this.hasClass("inforRadioButton")) {
				originalVal = $this.parent().parent().find('input:radio:checked');
			}

			$this.data("originalValue", originalVal);
			$this.filter(":input").change(changeCallback);
			$this.find(":input").on("change", changeCallback);
		});

		return this;
	};

	/*
	* Allows you to set field widths to the longest..
	*/
	$.fn.autoWidth = function (options) {
		var settings = {
			limitWidth: false
		}

		if (options) {
			$.extend(settings, options);
		}

		var maxWidth = 0,
			isCheckboxLabel = false,
			filtered = this.not(".noAutoWidth");

		filtered.css("width", "auto");

		filtered.each(function () {
			var $this = $(this);
			if ($this.width() > maxWidth) {
				if (settings.limitWidth && maxWidth >= settings.limitWidth) {
					maxWidth = settings.limitWidth;
				} else {
					maxWidth = $this.width();
				}
			}
			if ($this.hasClass("inforCheckboxLabel")) isCheckboxLabel = true;
		});

		filtered.width(maxWidth + (isCheckboxLabel ? 2 : 0));
	}

	// Add :dirty selector
	$.extend($.expr[":"], {
		dirty: function (a) {
			return $(a).data("isDirty") === true;
		}
	});

	// Add : hasClasses
	$.fn.extend({
		hasClasses: function (selectors) {
			var self = this, i;

			for (i in selectors) {
				if ($(self).hasClass(selectors[i])) {
					return true;
				}
			}
			return false;
		}
	});

	/* Override the jquery hide function to add better behavior for controls */
	$.fn.baseHide = $.fn.hide;
	$.fn.hide = function (duration, easing, callback) {
		var elem,
		i = 0,
			j = this.length;

		for (; i < j; i++) {
			elem = $(this[i]);
			if (elem.hasClasses(['inforLookupField', 'inforTimeField', 'inforDateField', 'inforUrlField', 'inforSpinner', 'inforSearchField', 'inforEmailField', 'inforCalculatorField'])) {
				elem.closest(".inforTriggerField").hide(duration, easing, callback);

				if (elem.prev().is(".inforRequiredIndicator")) {
					elem.prev().hide();
				}
			} else if (elem.hasClass("inforDropDownList") && elem.data("initialized")) {
				elem.next().hide(duration, easing, callback);

				if (elem.prev().is(".inforRequiredIndicator")) {
					elem.prev().hide();
				}
			} else if (elem.is(".inforCheckbox") && (elem.attr("type") == "checkbox")) {
				elem.closest(".inforCheckboxContainer").hide(duration, easing, callback);
			} else {
				elem.baseHide(duration, easing, callback)
			}
		}
		return this;
	};

	/* Override the jquery show function to add better behavior for controls */
	$.fn.baseShow = $.fn.show;
	$.fn.show = function (duration, easing, callback) {
		var elem,
		i = 0,
			j = this.length;

		for (; i < j; i++) {
			elem = $(this[i]);

			if (elem.hasClasses(['inforLookupField', 'inforTimeField', 'inforDateField', 'inforUrlField', 'inforSpinner', 'inforSearchField', 'inforEmailField', 'inforCalculatorField'])) {
				elem.closest(".inforTriggerField").show(duration, easing, callback);
				if (elem.prev().is(".inforRequiredIndicator")) {
					elem.prev().show();
				}
			} else if (elem.hasClass("inforDropDownList") && elem.data("initialized")) {
				elem.next().show(duration, easing, callback);
				if (elem.prev().is(".inforRequiredIndicator")) {
					elem.prev().show();
				}
			} else if (elem.is(".inforCheckbox") && (elem.attr("type") == "checkbox")) {
				elem.closest(".inforCheckboxContainer").show(duration, easing, callback);
			} else {
				elem.baseShow(duration, easing, callback)
			}
		}
		return this;
	};

	/* Add maxlength for ie */
	$.fn.maxLength = function(value) {
		if (!navigator.userAgent.toLowerCase().match(/msie/)) {
			return this;
		}

		this.each(function(){
			var $control = $(this),
				maxlength = $control.attr('maxlength');

			if (typeof maxlength !== 'undefined' && maxlength !== false) {
				$control.on('keydown blur', function() {
					setTimeout(function() {
						// Store the maxlength and value of the field.
						var val = $control.val();

						// Trim the field if it has content over the maxlength.
						if (val.length > maxlength) {
							$control.val(val.slice(0, maxlength)).trigger("change");
						}
					},1);
				}).on("paste", function(){
					$(this).trigger("keydown");
				});
			}
		});

		return this;
	}
})(jQuery);


/*
	Masked Input plugin for jQuery
	Copyright (c) 2007-2013 Josh Bush (digitalbush.com)
	Licensed under the MIT license (http://digitalbush.com/projects/masked-input-plugin/#license)
	Version: 1.3.1
*/
(function($) {
	function getPasteEvent() {
    var el = document.createElement('input'),
        name = 'onpaste';
    el.setAttribute(name, '');
    return (typeof el[name] === 'function')?'paste':'input';             
}

var pasteEventName = getPasteEvent() + ".mask",
	ua = navigator.userAgent,
	iPhone = /iphone/i.test(ua),
	android=/android/i.test(ua),
	caretTimeoutId;

$.mask = {
	//Predefined character definitions
	definitions: {
		'9': "[0-9]",
		'a': "[A-Za-z]",
		'*': "[A-Za-z0-9]"
	},
	dataName: "rawMaskFn",
	placeholder: "  "	//ensp    
};

$.fn.extend({
	//Helper Function for Caret positioning
	caret: function(begin, end) {
		var range;

		if (this.length === 0 || this.is(":hidden")) {
			return;
		}

		if (typeof begin === 'number') {
			end = (typeof end === 'number') ? end : begin;
			return this.each(function() {
				if (this.setSelectionRange) {
					this.setSelectionRange(begin, end);
				} else if (this.createTextRange) {
					range = this.createTextRange();
					range.collapse(true);
					range.moveEnd('character', end);
					range.moveStart('character', begin);
					range.select();
				}
			});
		} else {
			if (this[0].setSelectionRange) {
				begin = this[0].selectionStart;
				end = this[0].selectionEnd;
			} else if (document.selection && document.selection.createRange) {
				range = document.selection.createRange();
				begin = 0 - range.duplicate().moveStart('character', -100000);
				end = begin + range.text.length;
			}
			return { begin: begin, end: end };
		}
	},
	unmask: function() {
		return this.trigger("unmask");
	},
	mask: function(mask, settings) {
		var input,
			defs,
			tests,
			partialPosition,
			firstNonMaskPos,
			len;

		if (!mask && this.length > 0) {
			input = $(this[0]);
			return input.data($.mask.dataName)();
		}
		settings = $.extend({
			placeholder: $.mask.placeholder, // Load default placeholder
			completed: null
		}, settings);


		defs = $.mask.definitions;
		tests = [];
		partialPosition = len = mask.length;
		firstNonMaskPos = null;

		$.each(mask.split(""), function(i, c) {
			if (c === '?') {
				len--;
				partialPosition = i;
			} else if (defs[c]) {
				tests.push(new RegExp(defs[c]));
				if (firstNonMaskPos === null) {
					firstNonMaskPos = tests.length - 1;
				}
			} else {
				tests.push(null);
			}
		});

		return this.trigger("unmask").each(function() {
			var input = $(this),
				buffer = $.map(
				mask.split(""),
				function(c) {
					if (c !== '?') {
						return defs[c] ? settings.placeholder : c;
					}
				}),
				focusText = input.val();

			function seekNext(pos) {
				while (++pos < len && !tests[pos]);
				return pos;
			}

			function seekPrev(pos) {
				while (--pos >= 0 && !tests[pos]);
				return pos;
			}

			function shiftL(begin,end) {
				var i,
					j;

				if (begin<0) {
					return;
				}

				for (i = begin, j = seekNext(end); i < len; i++) {
					if (tests[i]) {
						if (j < len && tests[i].test(buffer[j])) {
							buffer[i] = buffer[j];
							buffer[j] = settings.placeholder;
						} else {
							break;
						}

						j = seekNext(j);
					}
				}
				writeBuffer();
				input.caret(Math.max(firstNonMaskPos, begin));
			}

			function shiftR(pos) {
				var i,
					c,
					j,
					t;

				for (i = pos, c = settings.placeholder; i < len; i++) {
					if (tests[i]) {
						j = seekNext(i);
						t = buffer[i];
						buffer[i] = c;
						if (j < len && tests[j].test(t)) {
							c = t;
						} else {
							break;
						}
					}
				}
			}

			function keydownEvent(e) {
				var k = e.which,
					pos,
					begin,
					end;

				//backspace, delete, and escape get special treatment
				if (k === 8 || k === 46 || (iPhone && k === 127)) {
					pos = input.caret();
					begin = pos.begin;
					end = pos.end;

					if (end - begin === 0) {
						begin=k!==46?seekPrev(begin):(end=seekNext(begin-1));
						end=k===46?seekNext(end):end;
					}
					clearBuffer(begin, end);
					shiftL(begin, end - 1);

					e.preventDefault();
				} else if (k === 27) {//escape
					input.val(focusText);
					input.caret(0, checkVal());
					e.preventDefault();
				}
			}

			function keypressEvent(e) {
				var k = e.which,
					pos = input.caret(),
					p,
					c,
					next;

				if (e.ctrlKey || e.altKey || e.metaKey || k < 32) {//Ignore
					return;
				} else if (k) {
					if (pos.end - pos.begin !== 0){
						clearBuffer(pos.begin, pos.end);
						shiftL(pos.begin, pos.end-1);
					}

					p = seekNext(pos.begin - 1);
					if (p < len) {
						c = String.fromCharCode(k);
						if (tests[p].test(c)) {
							shiftR(p);

							buffer[p] = c;
							writeBuffer();
							next = seekNext(p);

							if(android){
								setTimeout($.proxy($.fn.caret,input,next),0);
							}else{
								input.caret(next);
							}

							if (settings.completed && next >= len) {
								settings.completed.call(input);
							}
						}
					}
					e.preventDefault();
				}
			}

			function clearBuffer(start, end) {
				var i;
				for (i = start; i < end && i < len; i++) {
					if (tests[i]) {
						buffer[i] = settings.placeholder;
					}
				}
			}

			function writeBuffer() { input.val(buffer.join('')); }

			function checkVal(allow) {
				//try to place characters where they belong
				var test = input.val(),
					lastMatch = -1,
					i,
					c;

				for (i = 0, pos = 0; i < len; i++) {
					if (tests[i]) {
						buffer[i] = settings.placeholder;
						while (pos++ < test.length) {
							c = test.charAt(pos - 1);
							if (tests[i].test(c)) {
								buffer[i] = c;
								lastMatch = i;
								break;
							}
						}
						if (pos > test.length) {
							break;
						}
					} else if (buffer[i] === test.charAt(pos) && i !== partialPosition) {
						pos++;
						lastMatch = i;
					}
				}
				if (allow) {
					writeBuffer();
				} else if (lastMatch + 1 < partialPosition) {
					input.val("");
					clearBuffer(0, len);
				} else {
					writeBuffer();
					input.val(input.val().substring(0, lastMatch + 1));
				}
				return (partialPosition ? i : firstNonMaskPos);
			}

			input.data($.mask.dataName,function(){
				return $.map(buffer, function(c, i) {
					return tests[i]&&c!==settings.placeholder ? c : null;
				}).join('');
			});

			if (!input.attr("readonly")) {
				input
				.one("unmask", function() {
					input
						.unbind(".mask")
						.removeData($.mask.dataName);
				})
				.bind("focus.mask", function() {
					clearTimeout(caretTimeoutId);
					var pos;

					focusText = input.val();
					pos = checkVal();
					
					caretTimeoutId = setTimeout(function(){
						writeBuffer();
						if (pos == mask.length) {
							input.caret(0, pos);
						} else {
							input.caret(pos);
						}
					}, 10);
				})
				.bind("blur.mask", function() {
					checkVal();
					if (input.val() != focusText)
						input.change();
				})
				.bind("keydown.mask", keydownEvent)
				.bind("keypress.mask", keypressEvent)
				.bind(pasteEventName, function() {
					setTimeout(function() { 
						var pos=checkVal(true);
						input.caret(pos); 
						if (settings.completed && pos == input.val().length)
							settings.completed.call(input);
					}, 0);
				});
			}
			checkVal(); //Perform initial check for existing values
		});
	}
});
})(jQuery);/*
* Infor Form Pattern - A Control to handle Basic Form Functionality.
*/
(function($){
	$.fn.inforForm = function( options ) {
		var settings = {
			trackDirty: true,
			autoWidth: true
		};

		return this.each(function() {
			$('body').addClass("inforHidden");
			var	o = $.extend({}, settings, options); //Extend the options if any provided

			$(this).find('*').each(function(){
				var $this = $(this);

				if ($this.hasClass("inforRadioButton")) {
					$this.inforRadioButton();
					return;
				}
				
				if ($this.hasClass("inforApplicationNav")) {
					$this.inforApplicationNav();
					return;
				}
			
				if ($this.hasClass("inforIconButton") && $this.children("span").length==0) {
					$this.append('<span></span>');
					return;
				}
				
				if ($this.hasClass("inforIconButton") && ($this.hasClass("disabled") || $this.attr("disabled"))) {
					$this.disable();
				}

				if ($this.hasClass("inforMenuButton") && $this.children().length === 0) {
					$this.inforMenuButton();
				}
				
				if ($this.hasClass("inforColorPicker")) {
					$this.inforColorPicker();
				}

				if ($this.hasClass("inforSplitButton") && $this.children().length === 0) {
					$this.inforSplitButton();
				}

				if ($this.hasClass("inforToggleButton")) {
					$this.inforToggleButton();
				}

				if ($this.hasClass("inforAccordion")) {
					$this.inforAccordion();
					return;
				}

				if ($this.hasClass("inforFieldSet")) {
					$this.inforFieldSet();
					return;
				}

				if ($this.is("select") && $this.hasClass("inforDropDownList")) {
					$this.inforDropDownList();
				}

				if ($this.hasClass("inforDateField") && $this.closest(".inforTriggerField").length===0) {
					$this.inforDateField();
				}

				if ($this.hasClass("inforTimeField") && $this.closest(".inforTriggerField").length===0) {
					$this.inforTimeField();
				}

				if ($this.hasClass("inforSearchField")) {
					$this.inforSearchField();
				}

				if ($this.hasClass("inforEmailField")) {
					$this.inforTriggerField();
				}

				if ($this.hasClass("inforEmailField")) {
					$this.inforTriggerField();
				}

				if ($this.hasClass("inforUrlField")) {
					$this.inforTriggerField();
				}

				if ($this.hasClass("inforCalculatorField")) {
					$this.inforCalculatorField();
				}

				if ($this.hasClass("inforSpinner")) {
					$this.inforSpinner();
				}

				if ($this.hasClass("inforListBox")) {
					$this.inforListBox();
				}

				if ($this.hasClass("inforRichTextEditor")) {
					$this.inforRichTextEditor();
				}

				if ($this.hasClass("inforCheckbox") && $this.children().length === 0) {
					$this.inforCheckbox();
				}

				if ($this.hasClass("required")) {
					$this.required();
				}
				
				if ($this.attr("data-mask")) {
					$this.mask($this.attr("data-mask"));
				}
				
				if ($this.hasClass("inforScrollableArea")) {
					$this.inforScrollableArea();
				}

				if ($this.hasClass("inforTabContainer")) {
					$this.inforTabset();
				}

				if (($this.hasClass("numericOnly") || $this.attr("data-number-format") == "n0") && !$this.parent().is(".slick-headerrow-column")) {
					$this.numericOnly();
				}

				if ($this.hasClass("decimalOnly") || $this.attr("data-number-format")) {
					$this.addClass("decimalOnly").numericOnly(true);
				}

				if ($this.is("button") && ($this.attr("title"))) {
					$this.inforToolTip();
				}

				if ($this.attr("data-localizedText")){
					var attrVal = $this.attr("data-localizedText"),
					properties = attrVal.split(', '),
					obj = {};

					$.each(properties,function(index, property) {
						var tup = property.split(':'),
						target = (tup.length === 1 ? "html" : tup[0]),
						translated = (tup.length === 1 ? Globalize.localize(tup[0]) : Globalize.localize(tup[1]));

						if (target==="html") {
							$this.html(translated);
						}

						if (target==="text") {
							$this.text(translated);
						}

						if (target==="placeholder") {
							$this.attr("placeholder", translated);
						}

						if (target==="title") {
							$this.attr("title", translated).inforToolTip();
						}
					});
				}

			});

			if (o.trackDirty) {
				$(":input").not(".noTrackDirty").not("button").each(function() {
					var input = $(this);
					if (input.closest(".slick-headerrow-column").length === 0) {
						input.trackDirty();
					}
				});
			}

			if (o.autoWidth) {
				$('.autoLabelWidth').each(function() {
					var container = $(this);
					container.find('.inforLabel').autoWidth();
				});
			}

			//testing preventing FOUC - seems to work...Need a loading element
			$('body').css("opacity","").removeClass("inforHidden");
		});
	};

	$.fn.inforScrollableArea = function(  ) {

		return this.each(function() {
			var $area = $(this);
			//set the max height of this area to the bottom of the form and track any resize events...
			handleResize($area);
			$(window).on("throttledresize.inforScrollableArea",function(){
				handleResize($area);
			});

			$area.on("resize",function(){
				handleResize($area);
			});
			$area.data("uiInforScrollableArea",handleResize);
		});

		function handleResize($area) {
			var top = ($area.parent().hasClass("inforWizardPage")) ? $area.closest(".inforWizard").offset().top : $area.offset().top;
			var maxHeight=$(window).height()-top;
			//take into account the next thing below it
			var next = $area.next().not(".inforContextMenu, .inforMenu, div.transparentOverlay, script").height();
			maxHeight = maxHeight-next;

			if ($area.parent().attr("id") === "bottomPane") {
				$area.parent().css("overflow", "hidden");
			}

			var bottomMargin = parseInt($area.css("margin-bottom"), 10);
			if (!isNaN(bottomMargin)) {
				maxHeight -= bottomMargin;
			}

			maxHeight = Math.floor(maxHeight);
			$area.css("max-height",maxHeight);
			$area.height(maxHeight);
			var dialog = $area.closest(".inforDialog");
			
			if (dialog.length>0){
				//size to the bottom of the dialog.
				maxHeight = dialog.find(".inforDialogContent").height()-15;
			}
            if ($area.parent().hasClass("inforWizardPage")) {
                var buttonBar = $area.closest(".inforWizardContainer").children(".inforWizardBottomButtonBar");
                $area.parent().children("div").each(function() {
                	var $this = $(this), height = maxHeight-buttonBar.outerHeight()-15;
                	$this.css({"max-height":height ,"min-height":height, "height":height});
                });
                $area.css("overflow","auto");
            } else if ($area.hasClass("inforTabContainer") || $area.hasClass("ui-tabs")) {
				$area.children("div").not(".inforTabButton").each(function() {
					var $this = $(this),
						height = maxHeight-($area.hasClass("inforVerticalTabs") ? 15 : $area.hasClass("inforModuleTabs") ? 35 : 26);
					
					if (navigator.userAgent.toLowerCase().match(/msie 8.0/)) {
						height -= 16;
					}
					
					$this.css({"max-height":height  ,"min-height":height});
					if ($this.css("overflow")!=="hidden") {
						$this.css("overflow" ,"auto");
					}
				});
				$area.css("overflow","hidden");
			} else if (navigator.userAgent.toLowerCase().match(/msie 8.0/) && ($area.parent().attr("id")==="bottomPane" || $area.hasClass("ui-tabs"))) {
				$area.css("max-height", maxHeight-16);
				
			}
		}
	};
}(jQuery));/*
* Infor ListBox Plugin. Credits to
*  jQuery selectBox (version 1.0.7): https://github.com/claviska/jquery-selectBox
*/
(function ($) {
	$.widget("ui.inforListBox", {
		options: {
			showCheckboxes: false
		},
		_init: function () {
			var self = this,
				select = $(this.element),
				control, options, size, optionHeight, padding;

			// Disable for iOS devices (their native controls are more suitable for a touch device)
			if (navigator.userAgent.match(/iPad|iPhone|Android/i)) {
				return false;
			}

			//already initialized..
			if (select.data('selectBoxControl') || !select.is("select")) {
				return false;
			}

			control = $('<div/>');
			// Inherit class names, style, and title attributes
			// Generate control
			options = self.getOptions();
			control.addClass(select.attr('class'))
				.addClass('inforListBox')
				.append(options)
				.data('inforListBoxOption', options)
				.attr('style', select.attr('style') || '')
				.attr('title', select.attr('title') || '')
				.attr('tabindex', '0')
				.css('display', 'inline-block')
				.on('focus.inforListBox', function () {
					control.addClass('focus');
					select.trigger('focus');
				})
				.on('blur.inforListBox', function () {
					control.removeClass('focus');
					select.trigger('blur');
				})
				.on('keypress.inforListBox', function (event) {
					self._handleKeyPress(event);
				})
				.on('keydown.inforListBox', function (event) {
					self._handleKeyDown(event);
				}).bind('mousedown.inforListBox', function () {
					control.addClass("focus").focus();
				})
				.insertAfter(select);

			if (self.options.showCheckboxes) {
				control.addClass("showCheckboxes");
			}

			if (select.attr('disabled')) {
				control.addClass('inforListBoxDisabled');
			}

			// Auto-height based on size attribute
			if (!select[0].style.height) {
				size = select.attr('size') ? parseInt(select.attr('size'), 10) : 7;
				optionHeight = (this.options.showCheckboxes ? 20 : 18);
				padding = 10; //top and bottom padding

				control.height((optionHeight * size) + padding);
			}

			this._disableSelection(control);

			// Store data for later use and show the control
			select.addClass('selectBox')
				.data('selectBoxControl', control)
				.hide();
			
			if (select.attr("disabled")) {
				control.attr("disabled", "");
			}

		},
		getOptions: function () {
			var options = $('<ul class="inforListBoxOption" />'),
				select = $(this.element),
				hasOptGroups = select.find('OPTGROUP').length,
				self = this, text;

			if (hasOptGroups) {
				select.find('OPTGROUP').each(function () {
					var optgroup = $('<li class="inforListBoxOptGroup" />'),
						checkbox;

					optgroup.text($(this).attr('label'));
					options.append(optgroup);

					$(this).find('OPTION').each(function () {
						var li = $('<li />'),
							a = $('<a />'),
							$this = $(this);
						li.addClass($this.attr('class'));

						text = $this.html();
						if (text === "" || text === undefined) {  //ignore jslint
							text = '\xa0';
						}
						a.attr('rel', $this.val()).html(text).appendTo(li);

						if ($this.attr("title")) {
							a.attr("title", $this.attr("title")).inforToolTip();
						}

						options.append(li);

						if (self.options.showCheckboxes) {
							checkbox = $('<input type="checkbox" tabindex="-1" class="inforCheckbox noTrackDirty" />');
							a.prepend(checkbox);
							checkbox.inforCheckbox().bind("click", function () {
								self.isCheckClick = true;
							});
						}

						if ($this.attr('disabled')) {
							li.addClass('inforListBoxDisabled');
						}

						if ($this.attr('selected')) {
							li.addClass('isSelected');
							li.find("input.inforCheckbox").setValue(true);
						}
					});

				});

			} else {

				select.find('OPTION').each(function () {
					var li = $('<li />'),
						a = $('<a />'),
						$this = $(this);

					li.addClass($this.attr('class'));
					var text = $this.html();
					if (!text) {
						text = '\xa0';
					}

					a.attr('rel', $this.val()).html(text);
					if ($this.attr("title")) {
						a.attr("title", $this.attr("title")).inforToolTip();
					}

					li.append(a);
					if (self.options.showCheckboxes) {
						var checkbox = $('<input type="checkbox"  tabindex="-1" class="inforCheckbox noTrackDirty" />');
						a.prepend(checkbox);
						checkbox.inforCheckbox().bind("click", function () {
							self.isCheckClick = true;
						});
					}
					if ($this.attr('disabled')) {
						li.addClass('inforListBoxDisabled');
					}
					if ($this.attr('selected')) {
						li.addClass('isSelected');
						li.find("input.inforCheckbox").setValue(true);
					}
					options.append(li);
				});

			}

			options.find('A')
			.bind('click.selectBox', function (event) {
				self._selectOption($(this).parent(), event);
			});

			this._disableSelection(options);
			return options;
		},
		isCheckClick: false,
		_selectOption: function (li, event) {
			var select = $(this.element),
				control = select.data('selectBoxControl');

			if (control.hasClass('inforListBoxDisabled')) {
				return false;
			}

			if (li.length === 0 || li.hasClass('inforListBoxDisabled')) {
				return false;
			}

		
			// If event.shiftKey is true, this will select all options between li and the last li selected
			if ((event.shiftKey) && control.data('selectBox-last-selected')) {
				li.toggleClass('isSelected');

				var affectedOptions;
				if (li.index() > control.data('selectBox-last-selected').index()) {
					affectedOptions = li.siblings().slice(control.data('selectBox-last-selected').index(), li.index());
				} else {
					affectedOptions = li.siblings().slice(li.index(), control.data('selectBox-last-selected').index());
				}

				affectedOptions = affectedOptions.not('.inforListBoxOptGroup, .inforListBoxDisabled');

				if (li.hasClass('isSelected')) {
					affectedOptions.addClass('isSelected');
				} else {
					affectedOptions.removeClass('isSelected');
				}
			} else if (event.ctrlKey || event.metaKey || this.isCheckClick) {
				li.toggleClass('isSelected');
				this.isCheckClick = false;
			} else {
				li.siblings().removeClass('isSelected');
				li.addClass('isSelected');
			}

			if (control.hasClass('selectBox-dropdown')) {
				control.find('.selectBox-label').text(li.text());
			}

			li.siblings().each(function () {
				var $li = $(this);
				if ($li.hasClass('isSelected')) {
					$li.find("input.inforCheckbox").setValue(true);
				} else {
					$li.find("input.inforCheckbox").setValue(false);
				}
			});

			if (li.hasClass('isSelected')) {
				li.find("input.inforCheckbox").setValue(true);
			} else {
				li.find("input.inforCheckbox").setValue(false);
			}

			// Update original control's value
			var i = 0,
				selection = [];
			
			control.find('.isSelected A').each(function () {
				selection[i++] = $(this).attr('rel');
			});
				
			// Remember most recently selected item
			control.data('selectBox-last-selected', li);

			// Change callback
			if (select.val() !== selection) {
				select.val(selection);
				select.trigger('change');
			}
		},
		_disableSelection: function (selector) {
			$(selector)
				.css('MozUserSelect', 'none')
				.bind('selectstart', function (event) {
					event.preventDefault();
				});
		},
		typeTimer: null,
		typeSearch: '',
		_handleKeyPress: function (event) {
			var select = $(this.element),
				control = select.data('selectBoxControl'),
				options = control.data('inforListBoxOption'),
				self = this;

			if (control.hasClass('inforListBoxDisabled')) {
				return;
			}
			switch (event.keyCode) {
				case 9:
					// tab
				case 27:
					// esc
				case 13:
					// enter
				case 37:
					// left
				case 39:
					// right
					// Don't interfere with the keydown event!
					break;
				default:
					// Type to find
					event.preventDefault();

					clearTimeout(self.typeTimer);
					self.typeSearch += String.fromCharCode(event.charCode || event.keyCode);

					options.find('A').each(function () {
						if ($(this).text().substr(0, self.typeSearch.length).toLowerCase() === self.typeSearch.toLowerCase()) {
							self._selectOption($(this).parent(), event);
							self._scrollTo($(this).parent());
							return false;
						}
					});
					// Clear after a brief pause
					self.typeTimer = setTimeout(function () {
						self.typeSearch = '';
					}, 1000);
					break;
			}
		},
		_scrollTo: function (li) {
			if (!li || li.length === 0) {
				return;
			}
			
			var select = $(this.element),
				scrollBox = select.data('selectBox-control'),
				top = parseInt(li.offset().top - scrollBox.position().top, 10),
				bottom = parseInt(top + li.outerHeight(), 10);

			if (top < 0) {
				scrollBox.scrollTop(li.offset().top - scrollBox.offset().top + scrollBox.scrollTop());
			}
			if (bottom > scrollBox.height()) {
				scrollBox.scrollTop((li.offset().top + li.outerHeight()) - scrollBox.offset().top + scrollBox.scrollTop() - scrollBox.height());
			}
		},
		_handleKeyDown: function (event) {
			var select = $(this.element),
				control = select.data('selectBoxControl'),
				self = this;

			if (control.hasClass('inforListBoxDisabled')) {
				return;
			}
			
			switch (event.keyCode) {
				case 8:
					// backspace
					event.preventDefault();
					self.typeSearch = '';
					break;
				case 27:
					// esc
					break;
				case 40:
					// down
					var next = control.find(".isSelected:last").nextAll(":not(.inforListBoxDisabled)").first();
					this._scrollTo(next);
					this._selectOption(next, event);
					event.preventDefault();
					break;
				case 38:
					// up
					var prev = control.find(".isSelected:first").prevAll(":not(.inforListBoxDisabled)").first();
					this._scrollTo(prev);
					this._selectOption(prev, event);
					event.preventDefault();
					break;
			}
		},
		setOptions: function () {
			var $select = $(this.element),
				control = $select.data('selectBoxControl');

			if (!control) {
				return;
			}
			
			// Remove old options
			control.data('inforListBoxOption').remove();

			// Generate new options
			var options = this.getOptions($select);
			control.data('inforListBoxOption', options);
			control.append(options);
		},
		refresh: function () {
			this.setOptions($(this.element).html());
		},
		clear: function () {
			var $select = $(this.element);

			$select.children().remove();
			this.refresh();
		},
		add: function (data, suppressRefresh) {
			var $select = $(this.element),
				option = $('<option value="' + data.optionValue + '">' + data.optionText + '</option>');

			if (data.optionId) {
				option.attr("id", data.optionId);
			}
			if (data.selected) {
				option.attr("selected", "");
			}
			if (data.optionTitle) {
				option.attr("title", data.optionTitle);
			}
			$select.append(option);

			if (suppressRefresh) {
				return;
			}
			this.refresh();
		},
		rename: function (data) {
			var $select = $(this.element),
				option = $select.find('option[value="' + data.optionValue + '"]');

			option.html(data.optionText);
			if (data.optionTitle) {
				option.attr("title", data.optionTitle);
			}
			this.refresh();
		},
		remove: function (data) {
			var $select = $(this.element);

			$select.find('option[value="' + data.optionValue + '"]').remove();
			this.refresh();
		},
		removeSelected: function () {
			var $select = $(this.element),
				selectedOptions = $select.children('option:selected');

			selectedOptions.remove();
			this.refresh();
		},
		moveSelectedUp: function () {
			var $select = $(this.element),
				$selectedOptions = $select.children('option:selected'),
				prev = $selectedOptions.first().prev();

			$selectedOptions.insertBefore(prev);
			this.refresh();
		},
		moveSelectedDown: function () {
			var $select = $(this.element),
				$selectedOptions = $select.children('option:selected'),
				next = $selectedOptions.last().next();

			$selectedOptions.insertAfter(next);
			this.refresh();
		},
		value: function (value) {
			var $select = $(this.element),
				li, control,
				options, i;

			$select.val(value);
			control = $select.data('selectBoxControl');
			if (!control) {
				return;
			}

			options = control.data('inforListBoxOption');

			// Update label
			control.find('.selectBox-label').text($select.find('OPTION:selected').text() || '\u00A0');

			// Update control values
			options.find('.isSelected').removeClass('isSelected');
			options.find("input.inforCheckbox").setValue(false);

		},
		destroy: function () {
			var select = $(this.element),
				control = select.data('selectBoxControl'),
				options;

			if (!control) {
				return;
			}
			options = control.data('inforListBoxOption');

			options.remove();
			control.remove();
			select.removeClass('selectBox')
				.removeData('selectBoxControl')
				.removeData('selectBoxSettings')
				.show();
		}
	});
}(jQuery));
/*
* Infor Trigger Field
*/
(function ($) {
	$.widget("ui.inforLookupField", {
		options: {
			gridOptions: null, //full column options for the inforDataGrid
			returnField: "id", //id to return from the selected row - matches whats in the grid dataset.
			height: "auto", //height of the grid popup (minus shadows)
			width: 300, //width of the grid popup
			editable: false, //can the user type in the grid.
			typeAheadSearch: true, //disable type ahead search when editable=false
			onPageRequested: null, //Fires when Paging Make this the same as the datagrid with subscribe?
			sortColumnId: null, //set the sort indication.
			sortAsc: null, //set the sort indication.
			beforeSearch: null, //function call that fires before search is activated. params: ui, options
			source: null, //attach a source function you might use this to do web requests to return back the data on autocomplete.
			url: null, //You can provide aurld to the control it will load the assocaited page into the lookup and find a grid there
			ajaxOptions: null //optional ajaxOptions to control the request
		},
		associatedGrid: null,
		gridDivId: "lookupGridDivId", //use a uuid not needed should only be one in a page at once.
		input: null,
		originalDataSet: null,
		selectedIds: [], //The selected Rows.
		_init: function () {
			var self = this,
			$input = $(this.element),
			newOpts = null,
			gridDiv;

			this.input = $input;

			//attach a default source matcher in case one is not provided.
			if (!self.options.source) {
				self.options.source = function (request, response) {
					if (self.options.beforeSearch) {
						newOpts = self.options.beforeSearch($input, self.options);
						if (newOpts) {
							self.options = newOpts;
						}
					}
					
					if (self.options.url || self.options.ajaxOptions) {
						gridDiv = self._createGridDiv();

						if (!self.options.ajaxOptions) {
							self.options.ajaxOptions = {
								url: self.options.url,
								type: "GET",
								dataType: "html",
								complete: function (jqXHR, status) {
									gridDiv.html(jqXHR.responseText);
									self._search(request, response, gridDiv);
								}
							};
						} else {
							self.options.ajaxOptions.complete = function (jqXHR, status) {
								gridDiv.html(jqXHR.responseText);
								self._search(request, response, gridDiv);
							};
							self.options.ajaxOptions.dataType = "html";
						}
						$.ajax(self.options.ajaxOptions);
					} else {
						
						//set back the dataset
						if (self.originalDataSet) {
							self.options.gridOptions.dataset = self.originalDataSet;
							self.originalDataSet = null;
						}
						self._search(request, response);
					}
				};
			}

			//use the auto complete for lookup functionality when typing...
			$input.autocomplete({
				source: self.options.source,
				showAsGrid: true,
				minLength: 0,
				suggestHook: function (results, columns, totalRows) {
					//show a grid popup with these results.
					self._openGridPopup(results, columns, totalRows);
				},
				typeAheadSearch: self.options.typeAheadSearch
			})
				.change(function (event, item) {
					if (item) { //copy the id to select id's
						self.selectedIds = [];
						self.selectedIds.push(item.id);
					}
				});

			//when clicking open a grid popup
			$input.inforTriggerField({
				click: function (event) {
					if (self.options.click) {
						self.options.click(event);
						return;
					}

					//close grid if open (enter to open / enter to close again
					if (self.associatedGrid) {
						self.destroy();
					}
					$input.focus();
					// pass empty string as value to search for displaying all results
					$input.autocomplete("search", ""); //$input.val()
					return;
				}
			});

			//Setup an editable type drop down styling and options
			if (!self.options.editable) {
				$input.data("selectOnly", true).autocomplete("makeSelectOnly", self.options.typeAheadSearch, $input.isReadOnly());
			}
		},
		_createGridDiv: function () {
			var $gridDiv = $("<div></div>").attr("id", this.gridDivId).addClass("inforLookupGrid").appendTo("body");
			$gridDiv.wrap("<div style='display:none' class='inforLookupGridBoxShadow'></div");

			return $gridDiv;
		},
		_search: function (request, response, gridDiv) {
			var self = this,
				count = 0,
				timer;

			if (gridDiv) { //we used an ajax url
				self.associatedGrid = gridDiv.find(".inforDataGrid:first").data("gridInstance");
				if (!self.associatedGrid) {
					timer = setInterval(function () {
						var elem = gridDiv.find(".inforDataGrid:first").data("gridInstance");
						if (elem !== undefined || count == 5) {
							self.associatedGrid = elem;
							clearTimeout(timer);
							self.options.gridOptions = self.associatedGrid.getOptions();
							self.options.gridOptions.dataset = self.associatedGrid.getData().getItems();
							self._completeResponse(request, response);
						}
						count++;
					}, 400);
				} else {
					self.options.gridOptions = self.associatedGrid.getOptions();
					self.options.gridOptions.dataset = self.associatedGrid.getData().getItems();
					self._completeResponse(request, response);
				}
			} else {
				self._completeResponse(request, response);
			}
		},
		_completeResponse: function (request, response) {
			var self = this,
				emptyRecord = [{}];
			
			if (!self.options.gridOptions) {
				return {};
			}

			if (self.options.gridOptions.dataset.length === 0) {
				emptyRecord[0][self.options.idProperty] = "";
				emptyRecord[0][self.options.gridOptions.idProperty] = "";
				response(emptyRecord);
			}

			response($(self.options.gridOptions.dataset).map(function () {
				var text = null;
				if (self.associatedGrid) {
					text = self.getDataItemValueForColumn(this, self.options.returnField);
				} else {
					text = this[self.options.returnField];
				}
				
				if ((!request.term || (text ? text.toLowerCase().indexOf(request.term.toLowerCase()) > -1 : false))) {
					return this;
				}
			}));
		},
		getGrid: function () {
			return this.associatedGrid;
		},
		setCode: function (codeValue) {
			var self = this, i, selectValue, row;

			this.selectedIds = [];

			//find the code value provided and set the associated text value in the input field and add to the selectedIds
			if (typeof (codeValue) == "object") { //should handle multiselect but no way to close dialog yet.
				for (i = 0; i < codeValue.length; i++) {
					this.selectedIds.push({
						id: codeValue[i]
					});
				}
			} else {
				this.selectedIds.push({
					id: codeValue
				});
			}

			selectValue = "";
			if (!this.selectedIds) {
				return;
			}

			$.each(this.selectedIds, function (index, value) {
				if (typeof value.id == "number" && isNaN(value.id)) {
					return;
				}

				row = self.getRowById(value.id);

				if (row) {
					selectValue += self.getDataItemValueForColumn(row, self.options.returnField) + 
							(self.selectedIds.length - 1 != index ? "," : "");
				}
			});

			//remove last ,
			this.input.val(selectValue);
		},
		dataView : null,
		getItemCache : {},
		getDataItemValueForColumn: function(item, field) {
			var self = this;
			if (!item[field]) {
				var fn = self.getItemCache[field] = self.getItemCache[field] || new Function(["item", "field"], "with(item){try{return "+field+";}catch(e){return null;}}"); 
				return fn(item, field);
			} else {
				return item[field];
			}
		},
		getRowById: function (id) { //return the dataset row for the given id..using idProperty
			if (!this.options.gridOptions) {
				return null;
			}

			var dataset = this.options.gridOptions.dataset,
				response, i;


			if (!this.dataView) {
				this.dataView = new Slick.Data.DataView({idProperty: this.options.gridOptions.idProperty});
				this.dataView.setItems(this.options.gridOptions.dataset);

				//Execute Source..
				if (this.options.source) {
					response = function (data) {
						dataset = data;
					};
					this.options.source("", response);
				}
			}
			return this.dataView.getItemById(id);
		},
		destroy: function() {
			if (this.associatedGrid) {
				this.associatedGrid.destroy(true); //destroyed inside the grid editor
				this.associatedGrid = null;
			}
		},
		_closeGridPopup: function (isCancel) {
			//remove grid and page elements and animate
			var $gridDiv = $("#" + this.gridDivId),
				self = this,
				cell = this.input.closest(".slick-cell");

			$gridDiv.parent().css("opacity", 0); //improves appearance on ie 8 during fade out..
			$gridDiv.hide((isCancel ? "fade" : "fadeOut"), function () {
				$(".inforLookupGridBoxShadow").remove();
			});

			$("#inforLookupOverlay").remove();
			this.input.removeClass("inforBusyIndicator small");

			//destroy grid
			if (!cell || (cell && !cell.hasClass("hasComboEditor") && cell.length > 0)) {
				this.destroy();
			}

			//set back the dataset
			if (this.originalDataSet) {
				this.options.gridOptions.dataset = this.originalDataSet;
				this.originalDataSet = null;
			}

			$(window).unbind("throttledresize.inforLookupField");
			this.input.closest(".inforTriggerField").addClass("focus");
		},
		_openGridPopup: function (dataset, columns, totalRows) {
			var self = this,
				$gridDiv, isRTL, minHeight, ds, $overlay, selectedRows, dataRows, i, j, header, closeButton, dataView, filterExpr, columnFilterObject;
			
			if (!this.element.is(":focus")) {
				return;
			}
			
			//switch out the dataset with the passed in filtering one.
			if (dataset) {
				self.originalDataSet = self.options.gridOptions.dataset;
				//refresh the datagrid...
				self.options.gridOptions.dataset = dataset;
			} else if (self.originalDataSet) {
				self.options.gridOptions.dataset = self.originalDataSet;
				self.originalDataSet = null;
			}
			
			if (columns) {
				self.options.gridOptions.columns = columns;
			}

			//create a grid object..
			$gridDiv = $("#" + this.gridDivId);
			if ($gridDiv.length === 0) {
				$gridDiv = self._createGridDiv();
			}

			//set height and width
			if (self.options.height == "auto" ) {
				$gridDiv.width(self.options.width).css("height", "auto");
				$gridDiv.parent().width(self.options.width).css("height", "auto");
			} else {
				$gridDiv.width(self.options.width).css("height", self.options.height);
				$gridDiv.parent().width(self.options.width).css("height", self.options.height + (self.options.gridOptions.showFooter ? 23 : 0) + (self.options.gridOptions.multiSelect ? 26 : 0));
				self.options.gridOptions.fillToBottom = false;
			}
			
			if (self.options.width == "auto" ) {
				var setWidth = $gridDiv.find(".inforDataGrid").css("width");
				$gridDiv.width(setWidth);
				$gridDiv.parent().width(setWidth);
			}
			
			//position under the field
			isRTL = Globalize.culture().isRTL;
			this.root = $gridDiv.parent();
			this.root.show();

			//create and open the grid...
			//if there is less rows than the width use auto height..each row is 22 pixels + the header + the optional filter row.
			minHeight = (self.options.gridOptions.dataset.length * 22) + 26 + (self.options.gridOptions.showFilter ? 26 : 0);
			if (minHeight < self.options.height || self.options.height == "auto") {
				self.options.gridOptions.autoHeight = true;
			} else {
				self.options.gridOptions.autoHeight = false;
			}

			self.options.gridOptions.enableCellNavigation = false;
			self.options.gridOptions.enableCellRangeSelection = false;

			//Use different routine for paging to update data
			if (totalRows) {
				ds = self.options.gridOptions.dataset;
				self.options.gridOptions.dataset = [];
			}

			if ((self.options.url || self.options.ajaxOptions) && !this.associatedGrid) {
				this.associatedGrid = $("#" + this.gridDivId).find(".inforDataGrid:first").data("gridInstance");
			}

			if (self.options.url || self.options.ajaxOptions) {
				this.associatedGrid.resizeCanvas();
			} else {
				this.associatedGrid = $("#" + this.gridDivId).inforDataGrid(self.options.gridOptions);
			}

			if (self.options.sortColumnId && self.options.sortAsc) {
				this.associatedGrid.setSortColumn(self.options.sortColumnId, self.options.sortAsc);
			}

			//Set total count for paging
			if (totalRows && ds) {
				this.associatedGrid.mergeData(ds, 0, parseInt(totalRows, 10));
			}

			//add a close bar for multi select
			if (self.options.gridOptions.multiSelect) {
				header = $("<div class='inforLookupHeader'></div>");
				closeButton = $('<button class="inforCloseButton" type="button" title="Close"></button>').click(function () {
					self._select();
				});

				header.append(closeButton);
				if ($gridDiv.parent().find('.inforLookupHeader').length == 0) {
					$gridDiv.parent().prepend(header);
				}
			}

			//add modal overlay..
			//create a grid object..
			$overlay = $("#inforLookupOverlay");
			if ($overlay.length === 0) {
				$overlay = $('<div id="inforLookupOverlay"></div>').addClass('inforLookupOverlay')
					.appendTo(document.body)
					.css({
						width: $(window).width(),
						height: $(window).height()
					}).click(function () {
						if (self.options.gridOptions.multiSelect) {
							self._select();
						} else {
							self._closeGridPopup(true);
						}
					});
			}

			$overlay.css({
				width: $(window).width(),
				height: $(window).height()
			});

			this.input.removeClass("inforBusyIndicator small");

			//select the selected rows based on the current value(s)..This would fail if the id was not selected.
			if (self.selectedIds.length > 0) {
				selectedRows = [];
				dataRows = this.associatedGrid.getData().getItems(); //search requires one scan of the data...
				for (i = 0; i < self.selectedIds.length; i++) {
					selectedRows.push(this.associatedGrid.getData().getIdxById(self.selectedIds[i].id));
				}
				this.associatedGrid.setSelectedRows([]);
				this.associatedGrid.setSelectedRows(selectedRows);
				//scroll to last selected
				this.associatedGrid.scrollRowIntoView(selectedRows[selectedRows.length-1]);
			}

			//selected rows events
			if (!self.options.gridOptions.multiSelect) {
				this.associatedGrid.onClick.subscribe(function () {
					self._select();
				});
			}

			//setup paging
			if (self.options.onPageRequested) {
				dataView = this.associatedGrid.getData();
				dataView.onPageRequested.subscribe(function (e, args) {
					e.datagrid = self.associatedGrid;
					//pass in the term as a filter arg
					if (!args.filters) {
						if (self.input.val() === "") {
							args.filters = undefined;
						} else {
							columnFilterObject = {};
							filterExpr = {
								value: self.input.val(),
								operator: "contains",
								filterType: TextFilter()    //ignore jslint - comes from the datagrid
							};

							columnFilterObject[self.options.gridOptions.idProperty] = filterExpr;
							args.filters = columnFilterObject;
						}
					}
					self.options.onPageRequested(e, args);
				});
			}

			//move the status area to the far left because it looks off when this dialog is not full page width
			$gridDiv.parent().find(".slick-record-status").css("float", (Globalize.culture().isRTL ? "right" : "left"));

			//adjust position on resize
			$(window).unbind("throttledresize.inforLookupField");
			$(window).bind("throttledresize.inforLookupField", function () {
				self._handleResize();
			});

			self.setPosition();
			this.input.closest(".inforTriggerField").addClass("focus");
		},
		resizeTimer: null,
		windowHeight: null,
		windowWidth: null,
		root: null,
		getSelectedValues: function () {
			return this.selectedIds;
		},
		setPosition: function () {
			var self = this,
				height, top;

			self.root.position({
				my: (Globalize.culture().isRTL ? "right-1 top+1" : "left-1 top+1"),
				at: (Globalize.culture().isRTL ? "right bottom" : "left bottom"),
				collision: "flipfit",
				of: self.input
			});

			$("#inforLookupOverlay").height($(window).height()).width($(window).width());

			self.windowHeight = $(window).height();
			self.windowWidth = $(window).width();

			if (self.root.offset().top < self.input.offset().top) {
				self.root.position({
					my: (Globalize.culture().isRTL ? "right bottom" : "left bottom"),
					at: (Globalize.culture().isRTL ? "right top" : "left top"),
					collision: "fit",
					offset: "-1 -1",
					of: self.input
				});
			}

			if ((self.input.offset().top + self.options.height) > $(window).height()) {
				self.root.css("top",-self.options.height);
				self.associatedGrid.resizeCanvas();
				self.root.position({
					my: (Globalize.culture().isRTL ? "right bottom" : "left bottom"),
					at: (Globalize.culture().isRTL ? "right top" : "left top"),
					collision: "fit",
					offset: "-1 -1",
					of: self.input
				});
			}
		},
		_select: function () {
			var self = this,
				grid = self.associatedGrid,
				item, fieldValue, selectedRows, selectedRowData, itemValue, i;

			if (!grid) {
				return;
			}

			setTimeout(function () {
				self.selectedIds = [];
				fieldValue = "";
				selectedRows = grid.getSelectedRows();
				selectedRowData = [];

				for (i = 0; i < selectedRows.length; i++) {
					item = grid.getDataItem(selectedRows[i]);
					itemValue = self.getDataItemValueForColumn(item, self.options.returnField);
					self.selectedIds.push({
						id: item[self.options.gridOptions.idProperty],
						value: itemValue 
					});
					fieldValue += itemValue + (i + 1 == selectedRows.length ? "" : ",");
					selectedRowData.push(item);
				}

				self.input.val(fieldValue);
				self._closeGridPopup(false);
				self.input.trigger("change"); //trigger change so that the right events fire and dirty shows up.

				var event = jQuery.Event("select"); //fire the select event.
				event.selectedRows = selectedRowData;
				self.input.trigger(event);
				self.input.data("isChanged", true);
			}, 50); //so select event happens first
		},
		_handleResize: function () {
			var self = this;
			if (self.resizeTimer) {
				clearTimeout(self.resizeTimer);
			}

			if (self.windowHeight != $(window).height() || self.windowWidth != $(window).width()) {
				self.resizeTimer = setTimeout(function () {
					self.setPosition();
				}, 100);
			}
		},
		_setOption: function () {
			$.Widget.prototype._setOption.apply(this, arguments);
			this.dataView = null;
		}
	});
}(jQuery));
/*
* Infor Menu Button
*/
(function ($) {
	$.fn.inforMenuButton = function (options) {
		var settings = {
			menuId: null,
			callback: null,
			source: null, //allows you to do an ajax call.
			delay: 500, //delay for loading indicator when using source
			iframeFix: false,//pass iframe fix to close menus on iframe click
			backgroundIFrame: false // pass backgroundIFrame to open an iFrame overtop of submenus for pdf/applet issues
		};

		return this.each(function () {
			var o = $.extend({}, settings, options),
			$textButton = $(this),
			isIconButton = false,
			menuPosition = {
				my: "center top",
				at: "center bottom",
				of: $textButton,
				offset: "0 0",
				collision: "flipfit"
			},
			html, innerText, arrow, response;

			//handle icon buttons.
			if ($textButton.hasClasses(["exportExcel", "new", "print", "save", "settings", "generate"])) {
				isIconButton = true;
			}

			//wrap it
			if ($textButton.find('.inforMenuButtonArrow').length === 0) {
				html = $textButton.wrapInner("<span class='innerText'></span>");

				if (isIconButton) {
					$textButton.addClass("inforIconButton");
					innerText = $textButton.find(".innerText").html();
					if (innerText) {
						$textButton.attr("title", innerText).find(".innerText").html("");
					}
				}

				arrow = $("<div class=\"inforMenuButtonArrow\" />");
				$textButton.append(arrow);

				if (o.source) {
					$textButton.click(function (e) {
						//show loading indicator in the menu
						var menu = $("#" + o.menuId).empty(),
							cancelled = false,
							delay = null;

						delay = setTimeout(function () {
							menu.append("<li style=\"margin-left:20px;\"><a>Loading...</a></li><div id=\"inforLoadingOverlay\" class=\"inforBusyIndicator small\" style=\"position: absolute; top: 7px; left: 5px;\"></div>");
							//show the menu...in loading state
							$textButton.inforContextMenu({
								menu: o.menuId,
								event: e,
								backgroundIFrame: o.backgroundIFrame,
								iframeFix: o.iframeFix,
								invokeMethod: 'immediate',
								position: menuPosition,
								onClose: function () {
									cancelled = true;
								}
							});
						}, o.delay);

						//setup a response
						response = function () {
							clearTimeout(delay);

							if (cancelled) {
								return;
							}

							//show menu.
							$textButton.inforContextMenu({
								menu: o.menuId,
								invokeMethod: 'immediate',
								position: menuPosition,
								event: e
							});
						};
						//Wait for the callback...
						o.source(response);
					});
				} else if (o.menuId) {

					$textButton.inforContextMenu({
						menu: o.menuId,
						invokeMethod: 'toggle',
						position: menuPosition,
						iframeFix: o.iframeFix,
						backgroundIFrame: o.backgroundIFrame,
						beforeOpening: function () {
							$(".inforMenuButton").removeClass("active"); //find others and remove.
							$textButton.addClass("active");
						},
						onClose: function () {
							$textButton.removeClass("active");
						}
					}, (!o.callback ? null : function (action, el, pos, item) {
						if ($textButton.hasClass('disabled')) {
							return;
						}
						o.callback(action, el, pos, item);
					}));
				}

				//set the initial disabled state.
				if ($textButton.hasClass('disabled')) {
					$textButton.disable();
				}

				if ($textButton.prop("disabled")) {
					$textButton.disable();
				}
			}
		});
	};
}(jQuery));/*
* Infor MessageDialog and Dialog is heavily based on jQuery UI Dialog 1.8.13
*/
(function ($, undefined) {
	var uiDialogClasses =
		'inforDialog' ,
	sizeRelatedOptions = {
		buttons: true,
		height: true,
		maxHeight: true,
		maxWidth: true,
		minHeight: true,
		minWidth: true,
		width: true
	},
	resizableRelatedOptions = {
		maxHeight: true,
		maxWidth: true,
		minHeight: true,
		minWidth: true
	},
	attrFn = $.attrFn || {
		val: true,
		css: true,
		html: true,
		text: true,
		data: true,
		width: true,
		height: true,
		offset: true,
		click: true
	};
	$.widget("ui.inforDialog", {
		options: {
			autoOpen: true,
			buttons: {},
			closeOnEscape: false,
			closeText: 'Close',
			dialogType: 'General',
			draggable: true,
			hide: null,
			height: 'auto',
			maxHeight: false,
			maxWidth: false,
			messageTitle: '',
			minHeight: 150,
			minWidth: 150,
			modal: false,
			icon: 'blank',
			minimizable: false, //Adds a min and max button
			detailedMessage: '',
			autoFocus: true,	//focus the first tabbable field.
			position: {
				my: 'center',
				at: 'center',
				collision: 'fit',
				using: function (pos) {
					var $this = $(this);

					$this.css({
						position: 'absolute',
						left: '48%',
						'margin-left': 0 - ($(this).width() / 2),
						top: '38%',
						'margin-top': (0 - ($(this).height() / 3))
					});

					/*nned to call twice for some reason to center in the page...*/
					$this.css({
						position: 'absolute',
						left: '48%',
						'margin-left': 0 - ($(this).width() / 2),
						top: '38%',
						'margin-top': (0 - ($(this).height() / 3))
					});

					//center in a scrollable area.
					if ($this.parent().is("body") && $this.parent().height() > $(window).height()+5 && $(window).scrollTop()>0) {
						$this.css("margin-top",0);
						$this.css("top", $(window).scrollTop() + Math.max($(window).height()/2 - $this.height()/2 - 20 ,5) + "px");
						return;
					}
				}
			},
			resizable: false,
			show: null,
			stack: true,
			title: '',
			width: 300,
			zIndex: 2000,
			close: null,	//a call back that fires when the close x is clicked.
			beforeClose: null //a callback that fires when the close button is clicked.
		},
		_create: function () {
		var self = this,
			options = self.options,
			title = options.title || '&#160;',
			uiDialog = (self.uiDialog = $('<div><div class="inforDialogTitleBar"></div></div>'))
				.appendTo(document.body)
				.hide()
				.addClass(uiDialogClasses)
				.css({
					zIndex: options.zIndex
				})
				// setting tabIndex makes the div focusable
				// setting outline to 0 prevents a border on focus in Mozilla
				.attr('tabIndex', -1).css('outline', 0).keydown(function (event) {
					if (options.closeOnEscape && event.keyCode &&
						event.keyCode === $.ui.keyCode.ESCAPE) {

						self.close(event);
						event.preventDefault();
					}
				})
				.mousedown(function (event) {
					self.moveToTop(false, event);
				});

				this.element.addClass("inforDialogContent");

				var titlebar = uiDialog.find(".inforDialogTitleBar")
				if (options.icon || options.dialogType!="General") {
					titlebar.append("<div class='inforIcon "+options.icon+"'></div>");
				}
				titlebar.append($('<div class="caption"></div>').html(title));
				titlebar.append('<button type="button" class="inforCloseButton"></button>');

				if (options.messageTitle)
					uiDialog.append('<div class="shortMessage"></div>');

				uiDialog.append('<div class="detailedMessage"></div>');

				self.element.show()
					.removeAttr('title')
					.appendTo(uiDialog);

				if (options.buttons)
					uiDialog.append('<div class="dialogButtonBar"></div>');

				//Add remove events for the inforCloseButton
				uiDialogTitlebarClose = uiDialog.find(".inforCloseButton");
				uiDialogTitlebarClose.attr("title",Globalize.localize(options.closeText))
					.inforToolTip()
					.click(function (event) {
							self.close(event);
							return false;
						});

				if (options.resizable && $.fn.resizable) {
					self._makeResizable();
				}

				self._isOpen = false;

				if (options.minimizable) {
					self._makeMinimizable();
				}
	},
	_init: function () {
		if (this.options.autoOpen) {
				this.open();
			}
		},
		widgetEventPrefix : 'dialog',
		destroy: function () {
			var self = this;

			if (self.overlay) {
				self.overlay.destroy();
			}
			self.uiDialog.hide();
			self.element
			.unbind('.dialog')
			.removeData('dialog')
			.hide().appendTo('body');
			self.uiDialog.remove();
			return self;
		},

		widget: function () {
			return this.uiDialog;
		},

		close: function (event) {
			var self = this,
			maxZ, thisZ;

			if (false === self._trigger('beforeClose', event)) {
				return;
			}

			if (self.overlay) {
				self.overlay.destroy();
			}

			$(document).unbind('keydown.inforDialog'+self.uiDialog.find(".inforDialogContent").attr("id"));

			if (self.firstTabbable)
				self.firstTabbable.remove();

			self._isOpen = false;

			if (self.options.hide) {
				self.options.hide.complete = function() {
					self._trigger('close', event);
				};
				self.uiDialog.hide(self.options.hide);
			} else {
				self.uiDialog.hide();
				self._trigger('close', event);
			}

			// adjust the maxZ to allow other modal dialogs to continue to work (see #4309)
			if (self.options.modal) {
				maxZ = 0;
				$('.inforDialog').each(function () {
					if (this !== self.uiDialog[0]) {
						thisZ = $(this).css('z-index');
						if (!isNaN(thisZ)) {
							maxZ = Math.max(maxZ, thisZ);
						}
					}
				});
				$.ui.inforDialog.maxZ = maxZ;
			}

			self.options.position = '';         // reset any previously sent dialog positions

			if (self.options.minimizable && self.isMinimized) {
				self.maximize(true);
			}

			return self;
		},

		isOnTop: function () {
			var isLast = $('.inforDialog:visible').last()[0]==this.uiDialog[0];
			return isLast;
			},

		isOpen: function () {
			return this._isOpen;
		},

		// the force parameter allows us to move modal dialogs to their correct
		// position on open
		moveToTop: function (force, event) {
			var self = this,
			options = self.options;

			if ((options.modal && !force) ||
			(!options.stack && !options.modal)) {
				return self._trigger('focus', event);
			}

			if (options.zIndex > $.ui.inforDialog.maxZ) {
				$.ui.inforDialog.maxZ = options.zIndex;
			}
			if (self.overlay) {
				$.ui.inforDialog.maxZ += 1;
				self.overlay.$el.css('z-index', $.ui.inforDialog.overlay.maxZ = $.ui.inforDialog.maxZ);
			}
			$.ui.inforDialog.maxZ += 1;
			self.uiDialog.css('z-index', $.ui.inforDialog.maxZ);
			self._trigger('focus', event);

			return self;
		},
		firstTabbable: null,
		open: function () {
			if (this._isOpen) { return; }

			var self = this,
				uiDialogTitle,
				$topDiv = $(self.element.parent()),
				options = self.options,
				uiDialog = self.uiDialog;

			//set messages
			if (self.options.messageTitle!='')
				uiDialog.find(".shortMessage").html(self.options.messageTitle);

			uiDialogTitle = uiDialog.find(".caption").uniqueId().html(self.options.title);

			uiDialog.attr({
				role: "dialog",
				"aria-labelledby": uiDialogTitle.attr( "id" )
			});

			//for any of the message types - info/error/confirmation/warning show an icon
			var imageClass = "";
			if (options.dialogType == "Information")
				imageClass = "blank";

			if (options.dialogType == "Confirmation")
				imageClass = "blank";

			if (options.dialogType == "Error")
				imageClass = "error";

			if (options.dialogType == "Alert")
				imageClass = "alert";

			if (options.dialogType == "General") {
				imageClass = options.icon;
			}

			self._createButtons(options.buttons);

			//hide/show the close button
			if (!self.options.showTitleClose)
				uiDialog.find(".inforCloseButton").hide();
			else
				uiDialog.find(".inforCloseButton").show();

			//add/update remove the severity image.
			if (imageClass) {
				var severityImage = uiDialog.find(".inforIcon");
				if (imageClass == "") {
					severityImage.remove();
				} else {
					severityImage.attr("class", "").addClass("inforIcon "+imageClass);
				}
			}

			//Add/update remove the Detail Message
			//detailedMessage
			if (options.dialogType =="General")
				uiDialog.find(".detailedMessage").remove();
			else
				uiDialog.find(".detailedMessage").html(self.options.detailedMessage);

			self.overlay = options.modal ? new $.ui.inforDialog.overlay(self) : null;
			//set the title
			$topDiv.find(".caption").html(self.options.title);
			
			self.moveToTop(true);
			//options.show
			self._size();
			uiDialog.show().css("visibility","");
			self._position(options.position);
			
			if (options.draggable && $.fn.draggable) {
				self._makeDraggable();
			} else {
				self.uiDialog.find(".inforDialogTitleBar").wrap("<div class='noDragHandle'></div>");
			}
			
			self.uiDialog.find('.autoLabelWidth').find('.inforLabel').autoWidth();
			uiDialog.hide();
			uiDialog.show("fade", 300, function(){
				self._sizeToFit();
				self._isOpen = true;
				setTimeout(function () {
					self._trigger('open');
					//find and refresh all grids..
					uiDialog.find(".inforDataGrid").each(function () {
						var grid = $(this).data("gridInstance");
						if (grid) {
							grid.reinit();
						}
					});
				}, 10);
			});

			self.firstTabbable = $("<button type='button' id='tabFocusField' ></button>")
				.css({"opacity":"0" ,"position":"absolute" ,"left":"-400px"})
				.focus(function(e) {
					self.uiDialog.find(':tabbable:first').focus();
					return;
				}).prependTo("body");

			// prevent tabbing out of modal and non-modal dialogs
			var content = self.uiDialog.find(".inforDialogContent");
				uid = content.attr("id");
			if (!uid){
				uid = content.uniqueId();
			}

			$(document).bind('keydown.inforDialog'+content.attr("id"), function (event) {
					var isSignIn = self.uiDialog.hasClass("inforSignInDialog"),
						defaButton = self.uiDialog.find(".inforFormButton.default");

					if ($(event.target).is("textarea") || $(event.target).hasClass("inforDropDownList")) {
						return; 	//ignore enter if in a text area.
					}

					if (event.keyCode==13 && !$(event.target).is(":button") && !$(event.target).is(".inforSearchField") && $(event.target).closest(".inforDataGrid").length === 0) {
						
						if (!self.isOnTop() && !isSignIn)
							return;

						//find the default button and press it...
						if (!defaButton.is(":focus") && defaButton.is(":visible")) {
							defaButton.trigger('click');
						}
						return;
					}

					if (event.keyCode !== $.ui.keyCode.TAB) {
						return;
					}

					var tabbables = $(':tabbable', self.uiDialog),
					first = tabbables.filter(':first'),
					last = tabbables.filter(':last');

					if (event.target.nodeName =="HTML") {
						//tabbed in from the address bar to the page
						first.focus(1);
						return false;
					}
					if (event.target === last[0] && !event.shiftKey) {
						first.focus(1);
						return false;
					} else if (event.target === first[0] && event.shiftKey) {
						last.focus(1);
						return false;
					}
			});

			// set focus to the first tabbable element in the content area or the first button
			// if there are no tabbable elements, set focus on the dialog itself
			if (self.options.autoFocus) {
				setTimeout(function(){
					var firstInput = self.uiDialog.find('input:first:visible:tabbable');

					if (firstInput.length==0)
						firstInput= self.uiDialog.find('textarea:first:visible:tabbable');

					if (firstInput.length==0)
						firstInput = self.uiDialog.find('button.default');

					if (firstInput.length>0) {
						firstInput.focus();
						firstInput.select();
					} else {
						self.uiDialog.focus();
					}
				}, 100);
			}

			setTimeout(function(){
				$("#inforTooltip").hide();
			}, 300);

			//refresh any grids.
			self.uiDialog.find(".inforDataGrid").each(function() {
					var grid = $(this).data("gridInstance");
					if (grid)
						grid.resizeCanvas();
			});

			return self;
		},
		_sizeToFit: function() {	//size to fit the window.
			var padding = 110,	//top header and bottom buttons.
				elem = this.element,
				options = this.options,
				topDiv = $(elem.parent()),
				autoHeight = elem.height(),
				isFixedSize = (options.minWidth == options.width && options.minHeight == options.height);

			//center in a scrollable area.
			if (topDiv.parent().is("body") && topDiv.parent().parent().height() > $(window).height()+5 && $(window).scrollTop()>0) {
				topDiv.css("top",$(window).scrollTop() + Math.max($(window).height()/2 - topDiv.height()/2 - 20),5);
				return;
			}

			if (isFixedSize && options.height!="auto" && options.width!="auto") {
				return;
			}

			if (topDiv.length==0) {
				return;
			}

			var topPos = topDiv.offset().top;

			if (autoHeight + padding > $(window).height() ) {
				//shrink and add scrolling..
				autoHeight = $(window).height() - padding - 38;
				elem.height(autoHeight);
				elem.css({"overflow-y" : "scroll", "padding-right" : "20px"});
				topDiv.css({"top": "5px", "margin-top":"0"});
			}
		},
		_createButtons: function (buttons) {
			var self = this,
				hasButtons = false,
				uiButtonBar = self.uiDialog.find(".dialogButtonBar");

			// if we already have a button pane, remove it
			uiButtonBar.empty();

			if (typeof buttons === 'object' && buttons !== null) {
				$.each(buttons, function () {
					return !(hasButtons = true);
				});
			}
			if (hasButtons) {
				$.each(buttons, function (name, props) {
					props = $.isFunction(props) ?
					{ click: props, text: name} :
					props;
					var button = $('<button type="button" class="inforFormButton"></button>')
					.click(function () {
						props.click.apply(self.element[0], arguments);
					})
					.appendTo(uiButtonBar);
				$.each(props, function (key, value) {
						if (key === "click") {
							return;
						}
						if (key === "text") {
						button.html(value);
						return
						}
						if (key === "isDefault" && value==true) {
							button.addClass("default");
						}
						if (key in attrFn) {
						button[key](value);
						} else {
						button.attr(key, value);
						}
					});
					if ($.fn.button) {
						button.button();
					}
				});
			}
		},
		minimize: function() {
			var self = this;

			self.isMinimized = true;
			self.normalStyle = self.uiDialog.attr('style');
			self.normalWidth = self.uiDialog[0].style.width;

			self.uiDialog.css({"height":"16px",
							"min-height": "16px",
							"width": self.uiDialog.find(".caption").html().textWidth()+150,
							"bottom": 0,
							"left": "",
							"top": "",
							"margin-left": "",
							"margin-top": "",
							"position": "fixed"
			});
			self.uiDialog.contents().not(".dragHandle").hide();
			self.uiDialog.find(".inforDialogTitleBar").css("border-bottom","none");

			self.maxButton.removeAttr("disabled").focus();
			self.minButton.attr("disabled",'');
		},
		maximize: function(hidden) {
			var self = this;
			self.isMinimized = false;
			if (hidden)
				self.normalStyle += ";visibility:hidden";

			self.uiDialog.attr('style',self.normalStyle).css("width",self.normalWidth);
			self.uiDialog.contents().not(".dragHandle").show();
			self.uiDialog.find(".inforDialogTitleBar").css("border-bottom","1px solid #B3B3B3");

			self.maxButton.attr("disabled",'');
			self.minButton.removeAttr("disabled",'').focus();
		},
		_makeMinimizable: function() {
			var self = this;

			self.minButton = $('<button class="inforMinimizeButton" type="button"></button>').attr("title", Globalize.localize("Minimize")).inforToolTip(),
			self.maxButton = $('<button class="inforMaximizeButton" type="button" disabled></button>').attr("title", Globalize.localize("Maximize")).inforToolTip(),
			self.isMinimized = false;
			self.normalStyle = {};

			self.uiDialog.find(".inforCloseButton").after(self.maxButton,self.minButton);
			self.minButton.click(function(){
				self.minimize();
			});

			self.maxButton.click(function(){
				self.maximize();
			});
		},
		_makeDraggable: function () {
			var self = this,
			options = self.options,
			doc = $(document),
			containmentCoords,
			heightBeforeDrag;

			function filteredUi(ui) {
				return {
					position: ui.position,
					offset: ui.offset
				};
			}

			if (!self.uiDialog.find(".inforDialogTitleBar").parent().is(".dragHandle")) {
				self.uiDialog.find(".inforDialogTitleBar").wrap("<div class='dragHandle'></div>");
			}

			containmentCoords = [
				Math.abs(parseInt(self.uiDialog.css("margin-left"), 10)),
				Math.abs(parseInt(self.uiDialog.css("margin-top"), 10)),
				($(document).width() - self.uiDialog.width() - parseInt(self.uiDialog.css("margin-left"), 10) - 30),
				($(document).height() - self.uiDialog.height() - parseInt(self.uiDialog.css("margin-top"), 10) - 45)
			];

			self.uiDialog.draggable({
				cancel: '.inforCloseButton,.inforMaximizeButton,.inforMinimizeButton',
				handle: '.dragHandle',
				containment: containmentCoords,	//'document'
				scroll: false,
				start: function (event, ui) {
					heightBeforeDrag = options.height === "auto" ? "auto" : $(this).height();
					$(this).height($(this).height());
					self._trigger('dragStart', event, filteredUi(ui));
					$(".inforMenu").hide();	//closes any open drop downs or menus.
				},
				drag: function (event, ui) {
					self._trigger('drag', event, filteredUi(ui));
				},
				stop: function (event, ui) {
					options.position = [ui.position.left - doc.scrollLeft(),
					ui.position.top - doc.scrollTop()];
					if (!self.isMinimized)
						$(this).height(heightBeforeDrag);
					self._trigger('dragStop', event, filteredUi(ui));
				}
			});
		},

		_makeResizable: function (handles) {
			var self = this;

			self.uiDialog.resizable({
				handles: "se",
				minWidth: (self.options.minWidth < 250 ? 250 : self.options.minWidth),
				minHeight: (self.options.minHeight < 100 ? 100 : self.options.minHeight),
				maxWidth: self.options.maxWidth,
				maxHeight: self.options.maxHeight,
				alsoResize: $(self.element, self.element.parent()),
				start: function() {
					var ifr = self.element.find('iframe'),
						overlay = $("<div id='rsOverlay'></div>");
						
					if (ifr.length > 0) {
						overlay.css({height: ifr.height(), position:"absolute", top: ifr.position().top, left:0, width: "100%"});
						ifr.parent().append(overlay);
					}
				},
				stop: function(){
					$('#rsOverlay').remove();
				}
			});

			//move the resize element so its placed in the right spot
			var bottom = self.uiDialog.find(".dialogBottomRight");
			self.uiDialog.find(".ui-resizable-handle").appendTo(bottom).css({"position":"relative", "top":"1px" , "left": "5px"});
		},

		_minHeight: function () {
			var options = this.options;

			if (options.height === 'auto') {
				return options.minHeight;
			} else {
				return Math.min(options.minHeight, options.height);
			}
		},

		_position: function (position) {
		var myAt = [],
			offset = [0, 0],
			isVisible;

			if (position) {
				if (typeof position === 'string' || (typeof position === 'object' && '0' in position)) {
					myAt = position.split ? position.split(' ') : [position[0], position[1]];
					if (myAt.length === 1) {
						myAt[1] = myAt[0];
					}

					$.each(['left', 'top'], function (i, offsetPosition) {
						if (+myAt[i] === myAt[i]) {
							offset[i] = myAt[i];
							myAt[i] = offsetPosition;
						}
					});

					position = {
						my: myAt.join(" "),
						at: myAt.join(" "),
						offset: offset.join(" ")
					};
				}

				position = $.extend({}, $.ui.inforDialog.prototype.options.position, position);
			} else {
				position = $.ui.inforDialog.prototype.options.position;
			}

			// need to show the dialog to get the actual offset in the position plugin
			isVisible = this.uiDialog.is(':visible');
			if (!isVisible) {
				this.uiDialog.show();
			}

			this.uiDialog.position($.extend({ of: window }, position));

			if (!isVisible) {
				this.uiDialog.hide();
			}
		},

		_setOptions: function (options) {
			var self = this,
			resizableOptions = {},
			resize = false;

			$.each(options, function (key, value) {
				self._setOption(key, value);

				if (key in sizeRelatedOptions) {
					resize = true;
				}
				if (key in resizableRelatedOptions) {
					resizableOptions[key] = value;
				}
			});

			if (resize) {
				this._size();
			}
			if (this.uiDialog.is(":data(ui-resizable)")) {
				this.uiDialog.resizable("option", resizableOptions);
			}
		},

		_setOption: function (key, value) {
			var self = this,
			uiDialog = self.uiDialog;

			switch (key) {
				//handling of deprecated beforeclose (vs beforeClose) option
				//Ticket #4669 http://dev.jqueryui.com/ticket/4669
				//TODO: remove in 1.9pre
				case "beforeclose":
					key = "beforeClose";
					break;
				case "buttons":
					self._createButtons(value);
					break;
				case "disabled":
					if (value) {
						uiDialog.addClass('inforMessageDialogDisabled');
					} else {
						uiDialog.removeClass('inforMessageDialogDisabled');
					}
					break;
				case "draggable":
					var isDraggable = uiDialog.is(":data(draggable)");
					if (isDraggable && !value) {
						uiDialog.draggable("destroy");
					}

					if (!isDraggable && value) {
						self._makeDraggable();
					}
					break;
				case "position":
					self._position(value);
					break;
				case "resizable":
					// currently resizable, becoming non-resizable
					var isResizable = uiDialog.is(":data(resizable)");
					if (isResizable && !value) {
						uiDialog.resizable('destroy');
					}

					// currently resizable, changing handles
					if (isResizable && typeof value === 'string') {
						uiDialog.resizable('option', 'handles', value);
					}

					// currently non-resizable, becoming resizable
					if (!isResizable && value !== false) {
						self._makeResizable(value);
					}
					break;
				case "title":
					// convert whatever was passed in o a string, for html() to not throw up
					$(".inforMessageDialogTitle", self.uiDialogTitlebar).html("" + (value || '&#160;'));
					break;
			}

			$.Widget.prototype._setOption.apply(self, arguments);
		},

		_size: function () {
			/* If the user has resized the dialog, the .inforDialog and .inforMessageDialogContent
			* divs will both have width and height set, so we need to reset them
			*/
			var options = this.options,
				nonContentHeight,
				minContentHeight,
				isVisible = this.uiDialog.is(":visible"),
				isFixedSize = !("auto" == options.width && options.height == "auto");

			// reset content sizing
			this.element.show().css({
				width: 'auto',
				minHeight: 0,
				height: 0
			});

			// reset wrapper sizing
			// determine the height of all the non-content elements
			nonContentHeight = this.uiDialog.css({
				height: 'auto',
				width: options.width
			})
			.height();
			
			if (options.maxWidth && options.width == "auto" && parseInt(this.uiDialog.width(),10) > options.maxWidth) {
				this.element.css("width", options.maxWidth);
			}
			minContentHeight = Math.max(0, (options.minHeight=="auto" ? 0 : options.minHeight) - nonContentHeight);

			if (options.height === "auto") {
				this.uiDialog.show();
				var autoHeight = this.element.css("height", "auto").height();

				if (!isVisible) {
					this.uiDialog.hide();
				}
				
				this.element.height(Math.max(autoHeight, minContentHeight));
				
			} else {
				this.element.height(Math.max(options.height - nonContentHeight, 0));
			}

			if (this.uiDialog.is(':data(resizable)')) {
				this.uiDialog.resizable('option', 'minHeight', this._minHeight());
			}

			if (isFixedSize) {
				this.uiDialog.css({
					height: options.height,
					width: options.width
				});
			}
		}
	});

	$.extend($.ui.inforDialog, {
		maxZ: 0,

		overlay: function (dialog) {
			this.$el = $.ui.inforDialog.overlay.create(dialog);
		}
	});

	$.extend($.ui.inforDialog.overlay, {
		instances: [],
		// reuse old instances due to IE memory leak with alpha transparency (see #5185)
		oldInstances: [],
		maxZ: 0,
		events: $.map('focus,mousedown,mouseup,keydown,keypress,click'.split(','),
		function (event) { return event + '.inforOverlay'; }).join(' '),
		create: function (dialog) {
			if (this.instances.length === 0) {
				// allow closing by pressing the escape key
				$(document).on('keydown.dialog-overlay', function (event) {
					if (dialog.options.closeOnEscape && event.keyCode &&
					event.keyCode === $.ui.keyCode.ESCAPE) {

						dialog.close(event);
						event.preventDefault();
					}
				});
				$(document).on('click.dialog-overlay', function (event) { 
					if ($(event.target).is(".inforFileField") && $(event.target).closest(".inforDialog").length === 0) {
						event.preventDefault();
					}
				});
			}

			var $el = (this.oldInstances.pop() || $('<div></div>').addClass('inforOverlay'))
			.appendTo(document.body)
			.css({
				width: "100%",
				height: $(document).height() + 'px'
			});

			if ($.fn.bgiframe) {
				$el.bgiframe();
			}

			this.instances.push($el);
			return $el;
		},

		destroy: function ($el) {
			var indexOf = $.inArray($el, this.instances);
			if (indexOf != -1) {
				this.oldInstances.push(this.instances.splice(indexOf, 1)[0]);
			}

			if (this.instances.length === 0) {
				$([document, window]).off('.dialog-overlay');
			}

			$el.remove();

			// adjust the maxZ to allow other modal dialogs to continue to work (see #4309)
			var maxZ = 0;
			$.each(this.instances, function () {
				maxZ = Math.max(maxZ, this.css('z-index'));
			});
			this.maxZ = maxZ;
		}
	});

	$.extend($.ui.inforDialog.overlay.prototype, {
		destroy: function () {
		$.ui.inforDialog.overlay.destroy(this.$el);
		}
	});

	function closeWindow(windowDtl) {
		windowDtl.close(windowDtl);
	}

	function f_clientWidth() {
		return f_filterResults(
						window.innerWidth ? window.innerWidth : 0,
						document.documentElement ? document.documentElement.clientWidth : 0,
						document.body ? document.body.clientWidth : 0
					);
	}

	function f_filterResults(n_win, n_docel, n_body) {
		var n_result = n_win ? n_win : 0;
		if (n_docel && (!n_result || (n_result > n_docel)))
			n_result = n_docel;
		return n_body && (!n_result || (n_result > n_body)) ? n_body : n_result;
	}

} (jQuery));

/*
* Infor Message Dialog Plugin
*/
(function ($) {
	$.fn.inforMessageDialog = function (options) {
		var settings = {
			title: "Error Dialog",
			shortMessage: "An Error Occured",
			detailedMessage: "Longer text related to the error.",
			dialogType: "Error",
			buttons: null,
			dialogHtml: null,
			modal: true,
			resizable: false,
			minimizable: false, //Adds a min and max button
			width: null, //allows you to specify a fixed height/width
			height: null,	//allows you to specify a fixed height/width
			showTitleClose: true, //allows you to hide the close button.
			beforeClose: null, //allows you to fire events on close
			closeOnEscape: true, //allows the user to hit escape to cancel
			draggable: true, //can the user drag around the dialog
			position: null,	//set the position...
			autoFocus: true //set focus to first
			//Not possible to change due to new styles innerPadding: true
		};

		return this.each(function() {
			$.fx.speeds._default = 200;	//adjusts anmiation speed.

			var	o = $.extend({}, settings, options);

			if (o.dialogType=='General')
			{
				elementToAdd=$(o.dialogHtml);
				o.shortMessage='';
				dialogArea = $(this);
			} else {
				if ($("#inforMessageDialog").length==0)
					$('body').append('<div id="inforMessageDialog"></div>');

				var dialogArea = $("#inforMessageDialog");
				dialogArea.empty();
			}

			o.buttons=createMessageButtons(o.buttons,o.dialogType);
			dialogArea.inforDialog({
					autoOpen: true,                        // auto open the dialog, usually set to false otherwise the popup appears when the page is loaded
					show: ({effect: 'fade',  duration: 300}),	//effect: 'drop', direction: "up"
					hide: ({effect: 'fade', duration: 300}),
					resizable: o.resizable,                        // can the popup be re-sized
					title: o.title,                  // title for the popup
					messageTitle: o.shortMessage,        // message for the error
					showTitleClose: o.showTitleClose,                   // show the close "X" in the title bar
					dialogType: o.dialogType,                    // what type of dialog to show - General/Info/Error/Confirmation/Warning
					buttons: o.buttons,
					draggable: o.draggable,                         // can the popup be moved around the screen
					modal: o.modal,
					icon: o.icon,
					minWidth: (o.minWidth!=undefined ? o.minWidth : (o.width!=undefined ? o.width : 'auto')),
					minHeight: (o.minHeight!=undefined ? o.minHeight : (o.height!=undefined ? o.height : 'auto')),
					maxHeight: (o.maxHeight!=undefined ? o.maxHeight : ( o.dialogType=="General" ? undefined : 400)),
					maxWidth: (o.maxWidth!=undefined ? o.maxWidth : ( o.dialogType=="General" ? undefined : 600)),
					height: (o.height!=undefined ? o.height : 'auto'),
					width : (o.width!=undefined ? o.width : 'auto'),
					detailedMessage: o.detailedMessage,
					beforeClose: o.beforeClose,
					close: o.close,
					closeOnEscape: o.closeOnEscape,
					position: o.position,
					open: o.open,
					autoFocus: o.autoFocus,
					minimizable: o.minimizable
				});

			return ;
		});

		function createMessageButtons(buttons,dialogType){
		/*Set the right type of button*/
			if (buttons!=null)
				return buttons;

			switch(dialogType)
			{
			case "Information":
			return [{
							text: Globalize.localize("Close"),
							click: function() { $(this).inforDialog("close"); },
							isDefault: true
						}];
			break;
			case "General":
				return [{
							text: Globalize.localize("Ok"),
							click: function() { $(this).inforDialog("close"); },
							isDefault: true
						},{
							text: Globalize.localize("Cancel"),
							click: function() { $(this).inforDialog("close"); }
						}];
				break;
			case "Confirmation":
				return  [{
							text: Globalize.localize("Yes"),
							click: function() { $(this).inforDialog("close"); },
							isDefault: true
						},{
							text: Globalize.localize("No"),
							click: function() { $(this).inforDialog("close"); }
						},{
							text: Globalize.localize("Cancel"),
							click: function() { $(this).inforDialog("close"); }
						}];
				break;
			case "Alert":
				return [{
							text: Globalize.localize("Ok"),
							click: function() { $(this).inforDialog("close"); },
							isDefault: true
						}];
				break;
			case "Error":
				return [{
							text: Globalize.localize("Ok"),
							click: function() { $(this).inforDialog("close"); },
							isDefault: true
						}];
				break;
			default:
				break;
			}
			return buttons;
		}
};
})(jQuery);/*
* Infor Pie Chart - SVG D3
*/
(function ($) {
$.widget("ui.inforPieChart", {
		options: {
			data:  [{label: "20%", value: 20, tooltip: "20 Percent"},
					{label: "50%", value: 50, tooltip: "50 Percent"},
					{label: "10%", value: 10, tooltip: "10 Percent"},
					{label: "15%", value: 15, tooltip: "15 Percent"}],
			title: "Chart Title"
		},
		_init: function () {
			var o = this.options,
				self = this,
				zone = (self.element.attr("id") ? "#" + self.element.attr("id"): "body"),
				width = 185,
				height = 240,
				radius = Math.min(width, height) / 2,
				color = d3.scale.ordinal().range(["#13a3f7", "#2db329", "#ffaa00", "#a352cc", "#e63262", "#d5000e", "#737373",
						"#00c2b4", "#61c5ff", "#9ed927", "#ffd500", "#ff574d", "#ff80a2", "#c680ff",
						"#b3b3b3", "#6dd9d1", "#005ce6", "#00733a", "#ff6400", "#b3000c", "#bf2951", "#7533a6", "#595959", "#00898c"]);
						
			self.donut = d3.layout.pie().sort(null).value(function(d) { return d.value; });
			self.arc = d3.svg.arc().innerRadius(radius - 10).outerRadius(radius - 45);

			var data = o.data;
			self.svg = d3.select(zone).append("svg:svg")
				.attr("width", width)
				.attr("height", height)
				.style("font-family", "Arial,helvetica,sans-serif")
				.append("g")
					.attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

			self.title = self.svg.append("text")
				.attr("transform", function() { return "translate(0,-100)";})
				.style({"text-anchor":"middle", "fill":"#888A90" , "font-size": "16px", "font-weight": "400"})
				.text(o.title);

			var tooltip = $("#svgtooltip");
			if (tooltip.length == 0) {
				tooltip = $("<div id='svgtooltip' class='inforTooltip arrowBottomLeft'>").hide();
				$("body").append(tooltip);
			}
			
			var g = self.svg.selectAll("path")
				.data(self.donut(data))
				.enter().append("g")
				.attr("class", "arc")
				.on("mouseover", function(d) {
					if (d.data.tooltip) {
						tooltip.text(d.data.tooltip).show();
					}
				})
				.on("mousemove", function (d, i, e) {
					var pos = d3.event.currentTarget.getBoundingClientRect();
					tooltip.css("left", (pos.left)+"px").css("top",(pos.top - tooltip.height() - 30)+"px");
				})
				.on("mouseout", function() {
					tooltip.hide();
				});

				//.style("cursor", "pointer")
				//.on("click", function() {
				//	//Future selected styling... d3.select(this).attr("transform", "translate(1,1)");
				//});

			self.arcs = g.append("svg:path")
					.attr("fill", function(d, i) { return color(i); })
					.attr("d", self.arc)
					.each(function(d) { this._current = d;});
			
			self.labels = g.append("text")
					.attr("transform", function(d) { return "translate(" + self.arc.centroid(d) + ")"; })
					.attr("dy", ".35em")
					.attr("class", "label")
					.style({"text-anchor":"middle", "fill":"white", "font-size": "14px", "font-weight": "400", "pointer-events": "none"})
					.text(function(d) { return d.data.label; });
					
			g.append("title").text(function(d) {return d.data.tooltip;});
		},
		update: function(data, title) {
			var self = this;

			self.arcs = self.arcs.data(self.donut(data));
			self.arcs.transition().duration(750).attrTween("d", arcTween);

			self.labels.data(self.donut(data));
			self.labels.transition().duration(600)
				.attr("transform", function(d) {return "translate(" + self.arc.centroid(d) + ")"; })
				.text(function(d) { return d.data.label; })
				.style("fill-opacity", function(d) {return d.value === 0 ? 1e-6 : 1;});

			self.title.text(title);

			// Store the currently-displayed angles in this._current.
			// Then, interpolate from this._current to the new angles.
			function arcTween(a) {
				var i = d3.interpolate(this._current, a);
					this._current = i(0);
					return function(t) {
					return self.arc(i(t));
				};
			}
		}
	});
})(jQuery);
/*
 * Infor Inline Popup
 */
(function($) {
	$.widget('ui.inforPopover', {
		options: {
			content: null,
			//internal html to show.
			autoClose: true,
			//remove it when it is closed
			onClose: null,
			//call back when dialog is closed
			onShow: null,
			//call back when dialog is shown (after animation)
			placement: 'bottom',
			//can be top/left/bottom/right or none
			draggable: true,
			remove: false,
			width: '276',
			maxWidth: '276',
			animate: true,
			title: null,
			//optional title for info tip
			trigger: 'click' //supports click and manual (future hover and focus)
		},
		_init: function() {
			//Wrap contents in the styled popup
			var wrapper = $('<div></div>').addClass('inforPopover').append(this.options.content).appendTo('body'),
				self = this;
			if (self.options.placement !== 'none') {
				wrapper.addClass(self.options.placement);
			}
			if (self.options.width) {
				wrapper.css('width', self.options.width);
			}
			if (self.options.width) {
				wrapper.css('max-width', self.options.maxWidth);
			}
			if (self.options.title) {
				wrapper.append($('<h3 class="inforPopoverTitle"></h3>').append(self.options.title));
			}
			wrapper.append($('<div></div>').addClass('arrow'));
			wrapper.append($('<div></div>').addClass('inforPopoverContent').append(self.options.content).clone());
			if (self.options.draggable) {
				wrapper.draggable();
			}
			if (self.options.trigger == 'click') {
				self.element.attr('aria-haspopup', 'true').click(function(e) {
					self._open(e);
				});
			}
			self.wrapper = wrapper;
			if (self.options.trigger == 'manual') {
				self._open(null);
			}
			if (self.options.trigger == 'hover') {
				var isInPopup = false;
				
				wrapper.on("mouseenter", function(e) {
					isInPopup = true;
				}).on("mouseleave", function(e) {
					isInPopup = false;
					setTimeout(function() {
						if (!isInPopup) {
							self._close(e);
						}
					}, 300);
				});
				
				self.element.attr('aria-haspopup', 'true').hover(function(e) {
					if (!isInPopup && !wrapper.is(":visible")) {
						self._open(e);
					} else {
						isInPopup = true;
					}
				}, function(e) {
					isInPopup = false;
					if (self.options.autoClose) {
						setTimeout(function() {
							if (!isInPopup) {
								self._close(e);
							}
						}, 300);
					}
				});
			}
		},
		_open: function(e) {
			var self = this,
				elem = $(this.element);
			if (self.options.placement === 'right') {
				self.options.position = {
					my: 'left center',
					at: 'right+18 center'
				};
			}
			if (self.options.placement === 'bottom') {
				self.options.position = {
					my: 'center top',
					at: 'center bottom+18'
				};
			}
			if (self.options.placement === 'left') {
				self.options.position = {
					my: 'right center',
					at: 'left-18 center'
				};
			}
			if (self.options.placement === 'top') {
				self.options.position = {
					my: 'center bottom',
					at: 'center top-18'
				};
			}
			if (self.options.position.of === undefined) {
				self.options.position.of = elem;
			}
			//click to close
			if (self.options.autoClose) {
				setTimeout(function(e) {
					$(document).on('click.inforPopover', function(e) {
						if ($(e.target).closest('.inforPopover').length === 0 && self.element[0] != $(e.target)[0]) {
							self._close(e);
						}
					}).on('keydown.inforPopover', function(e) {
						if (e.which == 27) {
							self._close(e);
						}
					});
				}, 100);
			}
			if (self.wrapper.is(':visible')) {
				self._close(e);
			} else {
				self.wrapper.fadeIn((self.options.animate ? 'slow' : 0), function(e) {
					if (self.options.onShow) {
						self.options.onShow(e, self.wrapper);
					}
				}).position(self.options.position);
			}
		},
		_close: function(e) {
			var self = this;
			if (self.options.onClose) {
				self.options.onClose(e, self.wrapper);
			}
			self.wrapper.fadeOut((self.options.animate ? 'slow' : 0));
			if (self.options.remove) {
				self.wrapper.remove();
			}
			if (self.options.position.of) {
				self.options.position.of.focus();
			}
			$(document).off('click.inforPopover').off('keydown.inforPopover');
		}
	});
}(jQuery));/*
* Infor Radio Button
*/
(function ($) {
	$.widget( "ui.inforRadioButton", {
		_init: function() {
			this.create();
		},
		create: function() {
			//Wrap the buttons in a label
			var radio = this.element,
			label = null,
			startLabel = radio.next("label"),
			groupName = radio.attr("name");
			
			if (radio.parent().hasClass("inforRadioButtonSet")) {
				radio.parent().attr("role","radiogroup");
			}
			radio.parent().find("br, span, label").attr("role", "presentation");
			radio.addClass("inforRadioButton");
			
			if (!radio.parent().hasClass("inforRadioButtonLabel")) {
				label = $('<label class="inforRadioButtonLabel" for="'+radio.attr("id")+'"></label>');
				radio.empty();

				if (radio.is(":checked")) {
					label.addClass("checked");
					radio.attr("aria-checked","true").attr("role", "radio");
				}
				
				if (radio.is(":disabled")) {
					label.addClass("disabled");
					radio.attr("aria-disabled","true");
				}
				
				//set initial states and values
				radio.wrap(label);

				radio.on("touchstart click", function () {
					var $this=$(this),
						others = $('input[name="'+groupName+'"]');
					
					//uncheck everything else in that group
					others.parent().removeClass("checked");
					others.attr("aria-checked", "false");
					$this.parent().addClass("checked").removeClass("hover");
					$this.attr("aria-checked","true");
				});

				radio.focusin(function () {
					var $this=$(this);
					//unfocus everything else in that group
					$('input[name="'+groupName+'"]').parent().removeClass("focus");
					$this.parent().addClass("focus");
				});

				radio.focusout(function () {
					$(this).parent().removeClass("focus");
				});
				
				//add hover states
				radio.hover(function() {
					$(this).parent().addClass("hover");
				}, function() {
					$(this).parent().removeClass("hover");
				});

				label = $("<span class='labelText'>"+startLabel.html()+"</span>");
				//update label
				radio.after(label);

				label.hover(function() {
					if (!$(this).parent().hasClass("disabled")) {
						$(this).parent().addClass("hover");
					}
				}, function() {
					if (!$(this).parent().hasClass("disabled")) {
						$(this).parent().removeClass("hover");
					}
				});

				startLabel.remove();
			}
		}
	});
})(jQuery);/*
* Infor Rich Text Editor
*/
(function ($) {
$.widget("ui.inforRichTextEditor", {
		options: {
			//https://developer.mozilla.org/en-US/docs/Rich-Text_Editing_in_Mozilla#Executing_Commands
			buttons: [{icon: 'fontname', execCommand: 'fontname',  title: 'Font Name'},
					{icon: 'fontsize', execCommand: 'fontsize',  title: 'Font Size'},
					{icon: 'spacer'},
					{icon: 'bold', execCommand: 'bold', title: 'Make Text Bold', isToggle: true},
					{icon: 'italic', execCommand: 'italic', title: 'Make Text Italicized', isToggle: true },
					{icon: 'underline', execCommand: 'underline', title: 'Make Text Underlined', isToggle: true },
					{icon: 'strikeThrough', execCommand: 'strikeThrough', title: 'Make Text Striked Through', isToggle: true },
					{icon: 'spacer'},
					{icon: 'forecolor', execCommand: 'forecolor',  title: 'Font Color'},
					{icon: 'backcolor', execCommand: 'backcolor',  title: 'Highlight Color'},
					{icon: 'spacer'},
					{icon: 'justifyLeft', execCommand: 'justifyLeft', title: 'Align Content Left'},
					{icon: 'justifyCenter', execCommand: 'justifyCenter', title: 'Align Content Center'},
					{icon: 'justifyRight', execCommand: 'justifyRight', title: 'Align Content Right'},
					{icon: 'spacer'},
					{icon: 'outdent', execCommand: 'outdent', title: 'Decrease Indent'},
					{icon: 'indent', execCommand: 'indent', title: 'Increase Indent'},
					{icon: 'spacer'},
					{icon: 'bulletList', execCommand: 'insertunorderedlist', title: 'Create a Bulleted List'},
					{icon: 'numberList', execCommand: 'insertorderedlist', title: 'Create a Numbered List'},
					{icon: 'spacer'},
					{icon: 'image', execCommand: 'image', title: 'Insert an Image', click: function(e, self) {alert("Comming Soon. It works to paste an image From the Clipboard");}},
					{icon: 'links', execCommand: 'links', title: 'Insert a Link', click: function(e, self) {self.insertLink($(e.currentTarget));}}
					]
		},
		_init: function () {	//Init the Graph
			var self = this,
				editor = $(this.element);
			
			if (self.isInitialized) {
				return;
			}
			
			self.isInitialized = true;
			
			//The magic is the contenteditable attribute
			editor.addClass("inforRichTextEditor").attr("contenteditable", true);
			self._addButtons();
			
			if (editor.attr("readonly")) {
				editor.prev(".inforToolbar").hide();
				editor.attr("contenteditable", "false");
			}
		},
		_addButtons: function () {
			var self = this,
				html = '', i,
				toolbarClick = false,
				editor = $(this.element),
				tb, container;
			
			container = $("<div class='inforRichTextContainer'></div>");
			if (editor.attr("id")) {
				container.attr("id", editor.attr("id") + "Container");
			}
			
			if (editor.css("position") == "absolute") {
				container.css({position: "absolute", left: editor.css("left"), top: editor.css("top"), bottom: editor.css("bottom")});
				editor.css({position: "", left: "", top: "", bottom: ""});
			}
			
			if (editor.css("width")) {
				//container.css("width", editor.css("width"));
				//editor.css("width", "");
			}

			editor.wrap(container);
			tb = $("<div class='inforToolbar inforRTToolbar' ></div>").insertBefore(editor);

			//Create buttons
			$.each(self.options.buttons, function (name, props) {
				if (props.icon ==="spacer") {
					$('<span class="inforToolbarSpacer"></span>').appendTo(tb);
					return;
				}

				if (props.icon === 'fontname') {
					html = '<select class="inforDropDownList" style="width: 70px"> <option>Arial</option> <option>Arial Black</option> <option>Courier New</option> <option>Times New Roman</option> </select>';
					//add color picker
					self.fontsize = $(html).appendTo(tb);
					self.fontsize.inforDropDownList({editable: false, noFocus: true, autoFocus: false, typeAheadSearch: false})
					.on("change", function() {
						$(self.element).focus();
						self._restoreSelection();
						document.execCommand('fontname', false, this[this.selectedIndex].value);
					})
					.next().find("input").add(self.fontsize.next().find("button")).on("mouseover", function() {
						self._saveSelection();
					});
					return;
				}

				if (props.icon === 'forecolor') {
					//add color picker
					self.colorpicker = $('<input type="text" class="inforColorPicker" >').appendTo(tb);
					self.colorpicker.before('<span class="inforRTColorButton"></span>');
					self.colorpicker.inforColorPicker().change(function() {
						$(self.element).focus();
						document.execCommand('forecolor', false, $(this).val());
					});
					var picker = self.colorpicker.closest(".inforTriggerField");
					picker.find("input").hide();
					picker.find(".inforColorButton").attr("style", "border-right: none !important; margin-left: -1px !important");
					return;
				}

				if (props.icon === 'backcolor') {
					//add color picker
					self.colorpicker = $('<input type="text" class="inforColorPicker" >').appendTo(tb);
					self.colorpicker.before('<span class="inforRTBackColorButton"></span>');
					self.colorpicker.inforColorPicker().change(function() {
						$(self.element).focus();
						document.execCommand('backcolor', false, $(this).val());
					});
					var picker = self.colorpicker.closest(".inforTriggerField");
					picker.find("input").hide();
					picker.find(".inforColorButton").attr("style", "border-right: none !important; margin-left: -1px !important");
					return;
				}

				if (props.icon === 'fontsize') {
					html = '<select class="inforDropDownList" style="margin-left: 4px; width: 80px"><option value="1">10px</option> <option value="2">13px</option> <option value="3">16px</option> <option value="4">18px</option> <option value="5">24px</option> <option value="6">32px</option><option value="48px">48px</option> </select>';
					//add color picker
					self.fontsize = $(html).appendTo(tb);
					self.fontsize.inforDropDownList({editable: false, noFocus: true, autoFocus: false, typeAheadSearch: false}).change(function() {	//.inforDropDownList()
						$(self.element).focus();
						self._restoreSelection();
						document.execCommand('fontsize', false, this[this.selectedIndex].value);
					})
					.next().find("input").add(self.fontsize.next().find("button")).on("mouseover", function() {
						self._saveSelection();
					});
					return;
				}

				var button = $('<button type="button" class="inforIconButton"><span></span></button>').appendTo(tb)
				.click(function (e) {
					if (props.click) {
						props.click(e, self);
						return;
					}

					document.execCommand(props.execCommand, false, props.args);
					$(self.element).focus();
					
					if (props.isToggle) {
						$(this).toggleClass("checked");
					}
				})
				.addClass(props.icon).addClass(props.isToggle ? "inforToggleButton" : "").attr("title", props.title).inforToolTip();
			});

			/*
			editor.focus(function (e) {
				tb.parent().fadeIn("slow");
			}).blur(function(e) {
				setTimeout(function () {
					if (!toolbarClick) {
						tb.parent().fadeOut("slow");
					} else {
						toolbarClick = false;
					}
				}, 300);
			});

			$("<div id='inforRteToolbar'></div>").inforPopover({content: tb, autoClose: false}).mousedown(function () {
				toolbarClick = true;
			}).hide(); */
		},
		_saveSelection: function () {
			if (window.getSelection) {
				sel = window.getSelection();
				if (sel.getRangeAt && sel.rangeCount) {
					this.selRange = sel.getRangeAt(0);
				}
			} else if (document.selection && document.selection.createRange) {
				this.selRange = document.selection.createRange();
			}
		},
		_restoreSelection: function () {
			if (this.selRange) {
				if (window.getSelection) {
					sel = window.getSelection();
					sel.removeAllRanges();
					sel.addRange(this.selRange);
				} else if (document.selection && range.select) {
					range.select();
				}
			}
		},
		insertLink: function (button) {
				var self = this;

				self._saveSelection();
				$("body").append('<div id="rteLinkDialog" style="display:none"><label style="width: 100px;" for="link" class="inforLabel">Link</label><input type="text" name="link" id="link" class="inforTextbox" style="width: 210px;margin-bottom:4px" value="http://"/></div>');

				//Invoke the dialog on it
				$('#rteLinkDialog').inforMessageDialog({
					title: "Link",
					dialogType: "General",
					width: 400,
					icon: 'outputFiles',
					height: "auto",
					modal: false,
					autoFocus: false,
					position: {my: "left top", at: "right top", of: button, using: function(a, b, c) {
						$(b.element.element).css({"position": "absolute", "left": button.position().left + "px" , "top": button.position().top + "px" });

					}},
					modal: false,
					close: function(event, ui) {
						$('#rteLinkDialog').remove();
					},
					buttons: [{
						id: 'okButton',
						text: Globalize.localize("Ok"),
						click: function() {
							$(this).inforDialog("close");
							$("#okButton").addClass("active");
							$(self.element).focus();
							self._restoreSelection();

							var selected = document.getSelection();
							document.execCommand("insertHTML", false, "<a target='_blank' class='inforHyperLink' href='"+$(this).find("#link").val()+"'>"+selected+"</a> ");
						},
						isDefault: true
						}, {
							text: Globalize.localize("Cancel"),
							click: function() {
								$(this).inforDialog("close");
							}
						}]
				});

				setTimeout(function () {
					$("#link").focus().putCursorAtEnd();
				}, 100);
		}
	});
})(jQuery);
/*
* Infor Sign in Dialog.
*/
(function ($, undefined) {
	$.widget("ui.inforSignInDialog", {
		options: {
			login: null, // callback that fires when a login occurs.
			title: null,
			enforcePassword: true, //button is disabled until they type
			autoFocus: true //focus the first input field
		},
		_create: function () {
			var self = this,
				password = $("#password"),
				user = $("#userId");
			
			self.element.inforForm();
			
			//Set Focus to password field...
			if (self.options.autoFocus) {
				setTimeout(function(){
					var userId = $.cookie("inforSignInDialog:userId");
					if (userId && password.is(":enabled")) {
						password.focus().select();
					} else {
						user.focus().select();
					}
				}, 200);
			}
			
			if (self.options.enforcePassword) {
				password.add(user).keypress(function () {
					if (password.val().length > 0 && user.val().length > 0) {
						$(".inforSignInButton").enable();
					} else {
						$(".inforSignInButton").disable();
					}
				});
			} else {
				$(".inforSignInButton").enable();
			}
			
			//Jack the click 
			$(".inforSignInButton").on("click.inforSigninDialog", function () {
				self.login();
			});
			self._restoreSavedInfo();
		},
		_restoreSavedInfo: function () {
			//Note: There is no way to securely encrypt the data while still having
			//access to it from your Javascript since in order to do so, the (publicly visible) Javascript would have to contain both the decoding algorithm and any secret key used to encrypt the data!
			if (typeof localStorage !== "undefined") {
				var userId = localStorage.getObject("infor.signin.settings");
			}
			
			if (userId) {
				this.element.find("#userId").val(userId);
				this.element.find("#password").focus();
				this.element.find("#rememberPassword").setValue(true);
			}
		},
		saveLoginInfo: function (userId) {
			if (typeof localStorage !== "undefined") {
				localStorage.setObject("infor.signin.settings", userId);
			}
		},
		_clearInfo: function () {
			if (typeof localStorage !== "undefined") {
				localStorage.setObject("infor.signin.settings", null);
			}
			this.element.find("#userId").val("");	//clears the value in the browser
		},
		login: function () {
			if (this.options.login) {
				var idField = this.element.find("#userId"),
				userId = idField.val(),
				password = this.element.find("#password").val(),
				rememberPassword = this.element.find("#rememberPassword").getValue(),
				result = this.options.login(userId, password);

				if (result) {
					$(".inforSignInDialog").hide();
					//Save In a Cookie.
					if (rememberPassword) {
						this.saveLoginInfo(userId,password);
					} else {
						this._clearInfo();
					}
				}
			}
		},
		cancel: function () {
			if (this.options.cancel) {
				this.options.cancel();
			}
			$(".inforSignInDialog").hide();
		},
		showError: function (errorMessage, input) {
			var statusArea = null;

			if (input) {
				input.parent().find(".error").removeClass("error");
				input.validationMessage("remove");
				input.validationMessage("show", errorMessage, true);
				input.parent().find(".inforErrorIcon").css({"margin-left":"-14px", "left":"-11px"});
			} else {	//use status area..
				statusArea = this.element.find(".statusArea");
				if (statusArea.length === 0) {
					//statusArea = $("<div class='statusArea'></div>").append("<div class='inforAlertIcon error'></div>").append($("<div class='errorText'></div>").text(errorMessage)); 
					statusArea = $("<div class='statusArea' role='alert'></div>").append($("<div class='errorText' ></div>").text(errorMessage));
					this.element.find(".inforSignInButton").before(statusArea);
				} else {
					statusArea.find(".errorText").text(errorMessage);
				}
			}
		},
		clearError: function () {
			var statusArea = self.element.find(".statusArea");
			statusArea.remove();

			this.dialog.find("input").validationMessage("remove");
		}
});
})(jQuery);
/*
* Infor List Grid Control
*/
(function ($) {
	$.widget("ui.inforSimpleList", {
		options: {
			dataset: [],
			columns: [],
			showDrillDown: true,
			onDrillDown: function(e) {}	//drill down callback.
		},
		_create: function () {
			var self = this,
				o = this.options,
				rowHtml = "",
				headerRow = "",
				tableHtml = $("<table></table>").addClass("inforSimpleList");
			
			//loop the data set and create an html table which we style
			for (var i = 0; i < o.dataset.length; i++) {
				rowHtml = "<tr>";
				headerRow = "<thead class='inforScreenReaderText'><tr>";
				
				if (o.showDrillDown) {
					rowHtml += "<td>" + "<a href='#' class='drilldown'><span></span></a>" + "</td>";
					headerRow += "<th></th>";
				}
				
				for (var j = 0; j < o.columns.length; j++) {
					var formatter = (o.columns[j].formatter ? o.columns[j].formatter : self._defaultFormatter);
					rowHtml += "<td>";
					
					if (o.columns[j].name) {
						rowHtml += "<span class='inforListGridLabel'>" + o.columns[j].name + "</span>";
					}
					rowHtml += formatter(i, j, o.dataset[i][o.columns[j].field], o.columns[j], o.dataset[i]) + "</td>";
					headerRow += "<th>" + o.columns[j].name + "</th>"
				}
				rowHtml += "</tr>";
				headerRow += "</tr></thead>";
				tableHtml.append(rowHtml);
			}
			
			tableHtml.prepend(headerRow);
			self.element.append(tableHtml);
			
			if (o.showDrillDown) {
				self.element.on("click", ".drilldown", o.onDrillDown);
			}
		},
		_defaultFormatter: function(row, cell, value, columnDef, dataContext) {
			return (value === null || value === undefined) ? "" : value;
		}
	});
})(jQuery);/*
* Infor Slide In Message 
*/
(function ($) {
	$.widget("ui.inforSlideInMessage", {
		options: {
			autoDismiss: true, // automatically close the message
			autoDismissTimeout: 5000, // time to keep window open if auto dismiss is true - shouldn't need to change this.
			message: null, // actual message to show
			messageType: 'Info', // Info or Alert
			messageTitle: null, // title for message
			showClose: true // show the close "X" or not
		},
		_init: function () {
			var self = this;
			self.open();
		},
		open: function () {
			var self = this,
				options = self.options,
				divTag = $('.inforSlideInMessage'),
				isOpen = divTag.is(":visible"),
				centerWidth, closeButton, severityImage, messageDiv, prevImage, prevclass, currMessage, f;

			//remove the last message
			if (!isOpen) {
				divTag.remove();
				divTag = $('<div style="display:none" class="inforSlideInMessage"><div class="popupMiddleCenter"><div class="popupMiddleCenterInner content"><div class="inforCloseButton"></div></div></div>');
			}
			
			if (options.errorMessage) {
				options.message = options.errorMessage;	//backwards support
			}
			
			severityImage = null;
			
			//adjust the images and background - there is a hierarchy

			if (options.messageType == 'Info') {
				severityImage = $("<div class='inforIcon'></div>").removeClass("alert").addClass("info");
				divTag.removeClass("alert").addClass("info");
			}

			if (options.messageType == 'Alert') {
				severityImage = $("<div class='inforIcon'></div>").removeClass("info").addClass("alert");
				divTag.removeClass("info").addClass("alert");
			}

			//Create a message area object
			messageDiv = $('<div class="messageField"><div class="header">' + (options.messageTitle === null ? '' : options.messageTitle) + '</div><div class="body message">' + (options.message === null ? '' : options.message) + '</div></div>');

			divTag.find(".popupMiddleCenterInner").append(messageDiv);
			prevImage = $(".inforIcon").last();

			if (isOpen) {
				messageDiv.addClass("indent");
			}

			prevclass = (prevImage.length === 0 ? "" : prevImage.attr("class").toLowerCase().replace("inforIcon ", ""));
			currMessage = options.messageType.toLowerCase();

			if (prevImage.length === 0 || prevclass != currMessage) {
				if (prevImage.length === 0) {
					messageDiv.before(severityImage).removeClass("indent");
				} else {
					messageDiv.before(severityImage.css("margin-top", "8px")).removeClass("indent").css("margin-top", "10px");
				}
			}

			//setup the auto dismiss...
			if (options.autoDismiss && !isOpen) {
				f = function () {
					if (options.messageType == "Info" || options.messageType == "Alert") {
						self.close();
					} else {
						clearTimeout(f);
					}
				};
				setTimeout(f, options.autoDismissTimeout);
			}

			//setup the close button
			closeButton = divTag.find(".inforCloseButton");
			closeButton.attr("title", Globalize.localize("Close"));

			if (options.showClose) {
				closeButton.show();
				closeButton.click(function () {
					self.close();
				});
			} else {
				if (!isOpen) {
					closeButton.hide();
				}
			}

			//add and animate
			if (!isOpen) {
				$('body').append(divTag);
				divTag.css("opacity", "1").show("slide", {
					direction: 'up',
					duration: 220,
					easing: "linear"
				});
			}
		},
		close: function () {
			var msgDiv = $(".inforSlideInMessage");

			msgDiv.fadeTo('slow', 0, function () {
				msgDiv.hide().css("opacity", "1");
			});
		}
	});
})(jQuery);/*
* Infor UI Slider
*
* Mostly Based on jqueryUi Slider
*
* Copyright 2012 jQuery Foundation and other contributors
* Released under the MIT license.
* http://jquery.org/license
*/
(function ($, undefined) {

	// number of pages in a slider
	// (how many times can you page up/down to go through the whole range)
	var numPages = 5;

	$.widget("ui.inforSlider", $.ui.mouse, {
		version: "1.9.1",
		widgetEventPrefix: "slide",

		options: {
			animate: true,
			distance: 0,
			max: 100,
			min: 0,
			orientation: "horizontal",
			range: "min",
			step: 1,
			value: 0,
			values: null,
			showValueLabel: true,
			showMinMaxLabel: false,
			showSteps: false
		},

		_create: function () {
			var i, handleCount,
				o = this.options,
				existingHandles = this.element.find(".inforSliderHandle"),
				handle = "<a class='inforSliderHandle' role='slider' href='#'></a>",
				handles = [],
				self = this;

			this._keySliding = false;
			this._mouseSliding = false;
			this._animateOff = true;
			this._handleIndex = null;
			this._detectOrientation();
			this._mouseInit();

			this.element
				.addClass("inforSlider" +
				" " + this.orientation + " " + (o.range === true ? "range" : "") +
				(o.disabled ? " inforSliderDisabled" : "")).attr("role", "application");

			this.range = $([]);

			if (o.range) {
				if (o.range === true) {
					if (!o.values) {
						o.values = [this._valueMin(), this._valueMin()];
					}
					if (o.values.length && o.values.length !== 2) {
						o.values = [o.values[0], o.values[0]];
					}
				}

				this.range = $("<div></div>")
					.appendTo(this.element)
					.addClass("inforSliderRange" +
					((o.range === "min" || o.range === "max") ? " inforSliderRange " + o.range : ""));
			}

			handleCount = (o.values && o.values.length) || 1;

			for (i = existingHandles.length; i < handleCount; i++) {
				handles.push(handle);
			}

			this.handles = existingHandles.add($(handles.join("")).appendTo(this.element));

			this.handle = this.handles.eq(0);

			this.handles.add(this.range).filter("a")
				.click(function (event) {
					event.preventDefault();
				})
				.mouseenter(function () {
					if (!o.disabled) {
						$(this).addClass("hover").parent().addClass("hover");
					}
				})
				.mouseleave(function () {
					$(this).removeClass("hover").parent().removeClass("hover");
				})
				.focus(function () {
					if (!o.disabled) {
						$(".inforSlider .focus").removeClass("focus");
						$(this).addClass("focus").parent().addClass("focus");
						$(self.labels).each(function () {
							$(this).addClass("sliding");
						});
					} else {
						$(this).blur();
					}
				})
				.blur(function () {
					$(this).removeClass("focus").parent().removeClass("focus");
					$(self.labels).each(function () {
						$(this).removeClass("sliding");
					});
				});

			this.handles.each(function (i) {
				$(this).data("uiInforSliderHandleIndex", i);
			});

			this._on(this.handles, {
				keydown: function (event) {
					var allowed, curVal, newVal, step,
						index = $(event.target).data("uiInforSliderHandleIndex");

					switch (event.keyCode) {
					case $.ui.keyCode.HOME:
					case $.ui.keyCode.END:
					case $.ui.keyCode.PAGE_UP:
					case $.ui.keyCode.PAGE_DOWN:
					case $.ui.keyCode.UP:
					case $.ui.keyCode.RIGHT:
					case $.ui.keyCode.DOWN:
					case $.ui.keyCode.LEFT:
						event.preventDefault();
						if (!this._keySliding) {
							this._keySliding = true;
							$(event.target).addClass("ui-state-active");
							allowed = this._start(event, index);
							if (allowed === false) {
								return;
							}
						}
						break;
					}

					step = this.options.step;
					if (this.options.values && this.options.values.length) {
						curVal = newVal = this.values(index);
					} else {
						curVal = newVal = this.value();
					}

					switch (event.keyCode) {
					case $.ui.keyCode.HOME:
						newVal = this._valueMin();
						break;
					case $.ui.keyCode.END:
						newVal = this._valueMax();
						break;
					case $.ui.keyCode.PAGE_UP:
						newVal = this._trimAlignValue(curVal + ((this._valueMax() - this._valueMin()) / numPages));
						break;
					case $.ui.keyCode.PAGE_DOWN:
						newVal = this._trimAlignValue(curVal - ((this._valueMax() - this._valueMin()) / numPages));
						break;
					case $.ui.keyCode.UP:
					case $.ui.keyCode.RIGHT:
						if (curVal === this._valueMax()) {
							return;
						}
						newVal = this._trimAlignValue(curVal + step);
						break;
					case $.ui.keyCode.DOWN:
					case $.ui.keyCode.LEFT:
						if (curVal === this._valueMin()) {
							return;
						}
						newVal = this._trimAlignValue(curVal - step);
						break;
					}

					this._slide(event, index, newVal);
				},
				keyup: function (event) {
					var index = $(event.target).data("uiInforSliderHandleIndex");

					if (this._keySliding) {
						this._keySliding = false;
						this._stop(event, index);
						this._change(event, index);
						$(event.target).removeClass("ui-state-active");
					}
				}
			});

			if (o.showValueLabel) {
				this.labels = [];
				this.labels[0] = $('<span class="inforSliderLabel">0</span>').insertAfter(this.handles[0]);
				if (o.range) {
					this.labels[1] = $('<span class="inforSliderLabelRight">0</span>').insertAfter(this.handles[1]);
				}
			}
			
			if (o.showSteps) {
				this.stepLabels = [], this.stepTicks = [];
				var count = 0;
				for (i = o.min; i <= o.max; i += o.step) {
					this.stepLabels[count] = $('<span class="inforSliderLabel">' + count +'</span>').css({"left": (100 * o.step/(o.max*o.step)) * count + "%" , "margin-left": (count === o.max ? "-9px" : "2px")}).insertBefore(this.handles[0]);
					this.stepTicks[count] = $('<span class="inforSliderTick" tabindex="-1"></span>').css({"left": (100 * o.step/(o.max*o.step)) * count + "%", "margin-left": (count === o.max ? "-9px" : "2px")}).insertBefore(this.handles[0]);
					this.stepTicks[count].perc = (100 * o.step/(o.max*o.step)) * count;
					count++;
				}
			}
			
			if (o.showMinMaxLabel) {
				this.rangeLabels = [];
				this.rangeLabels[0] = $('<span class="inforSliderRangeLabel" style="float:left">' + o.min + '</span>').insertBefore(this.handles[0]);
				this.rangeLabels[1] = $('<span class="inforSliderRangeLabel">' + o.max + '</span>').insertAfter(this.handles[0]);
				if (o.orientation === "vertical") {
					this.rangeLabels[1].css("top", $(this.element).height() - 28).css("left", "-18px");
					this.rangeLabels[0].html(o.max);
					this.rangeLabels[1].html(o.min);
				}
			}
			this._refreshValue();
			this._animateOff = false;
		},
		_destroy: function () {
			this.handles.remove();
			this.range.remove();

			this.element
				.removeClass("inforSlider" +
				" inforSliderHorizontal" +
				" inforSliderVertical" +
				" inforSliderDisabled");

			this._mouseDestroy();
		},

		_mouseCapture: function (event) {
			var position, normValue, distance, closestHandle, index, allowed, offset, mouseOverHandle,
				that = this,
				o = this.options;

			if (o.disabled) {
				return false;
			}

			this.elementSize = {
				width: this.element.outerWidth(),
				height: this.element.outerHeight()
			};
			this.elementOffset = this.element.offset();

			position = { x: event.pageX, y: event.pageY };
			normValue = this._normValueFromMouse(position);
			distance = this._valueMax() - this._valueMin() + 1;
			this.handles.each(function( i ) {
				var thisDistance = Math.abs( normValue - that.values(i) );
				if (( distance > thisDistance ) ||
					( distance === thisDistance &&
						(i === that._lastChangedValue || that.values(i) === o.min ))) {
					distance = thisDistance;
					closestHandle = $( this );
					index = i;
				}
			});

			allowed = this._start( event, index );
			if ( allowed === false ) {
				return false;
			}
			this._mouseSliding = true;

			this._handleIndex = index;

			closestHandle
				.addClass( "ui-state-active" )
				.focus();

			offset = closestHandle.offset();
			mouseOverHandle = !$( event.target ).parents().addBack().is(".inforSliderHandle");
			this._clickOffset = mouseOverHandle ? { left: 0, top: 0 } : {
				left: event.pageX - offset.left - ( closestHandle.width() / 2 ),
				top: event.pageY - offset.top -
					( closestHandle.height() / 2 ) -
					( parseInt( closestHandle.css("borderTopWidth"), 10 ) || 0 ) -
					( parseInt( closestHandle.css("borderBottomWidth"), 10 ) || 0) +
					( parseInt( closestHandle.css("marginTop"), 10 ) || 0)
			};

			if ( !this.handles.hasClass( "ui-state-hover" ) ) {
				this._slide( event, index, normValue );
			}
			this._animateOff = true;
			return true;
		},

		_mouseStart: function () {
			return true;
		},

		_mouseDrag: function (event) {
			var position = {
				x: event.pageX,
				y: event.pageY
			},
				normValue = this._normValueFromMouse(position);

			this._slide(event, this._handleIndex, normValue);

			return false;
		},

		_mouseStop: function (event) {
			this.handles.removeClass("ui-state-active");
			this._mouseSliding = false;

			this._stop(event, this._handleIndex);
			this._change(event, this._handleIndex);

			this._handleIndex = null;
			this._clickOffset = null;
			this._animateOff = false;

			return false;
		},

		_detectOrientation: function () {
			this.orientation = (this.options.orientation === "vertical") ? "vertical" : "horizontal";
		},

		_normValueFromMouse: function (position) {
			var pixelTotal,
				pixelMouse,
				percentMouse,
				valueTotal,
				valueMouse;

			if (this.orientation === "horizontal") {
				pixelTotal = this.elementSize.width;
				pixelMouse = position.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0);
			} else {
				pixelTotal = this.elementSize.height;
				pixelMouse = position.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0);
			}

			percentMouse = (pixelMouse / pixelTotal);
			if (percentMouse > 1) {
				percentMouse = 1;
			}
			if (percentMouse < 0) {
				percentMouse = 0;
			}
			if (this.orientation === "vertical") {
				percentMouse = 1 - percentMouse;
			}

			valueTotal = this._valueMax() - this._valueMin();
			valueMouse = this._valueMin() + percentMouse * valueTotal;

			return this._trimAlignValue(valueMouse);
		},

		_start: function (event, index) {
			var uiHash = {
				handle: this.handles[index],
				value: this.value()
			};
			if (this.options.values && this.options.values.length) {
				uiHash.value = this.values(index);
				uiHash.values = this.values();
			}
			return this._trigger("start", event, uiHash);
		},

		_slide: function (event, index, newVal) {
			var otherVal,
				newValues,
				allowed;

			if (this.options.values && this.options.values.length) {
				otherVal = this.values(index ? 0 : 1);

				if ((this.options.values.length === 2 && this.options.range === true) &&
					((index === 0 && newVal > otherVal) || (index === 1 && newVal < otherVal))) {
					newVal = otherVal;
				}

				if (newVal !== this.values(index)) {
					newValues = this.values();
					newValues[index] = newVal;
					// A slide can be canceled by returning false from the slide callback
					allowed = this._trigger("slide", event, {
						handle: this.handles[index],
						slider: $(this.handles[index]).parent(),
						value: newVal,
						values: newValues
					});

					otherVal = this.values(index ? 0 : 1);
					if (allowed !== false) {
						this.values(index, newVal, true);
					}
				}
			} else {
				if (newVal !== this.value()) {
					// A slide can be canceled by returning false from the slide callback
					allowed = this._trigger("slide", event, {
						handle: this.handles[index],
						slider: $(this.handles[index]).parent(),
						value: newVal
					});

					if (allowed !== false) {
						this.value(newVal);
					}
				}
			}
		},

		_stop: function (event, index) {
			var uiHash = {
				handle: this.handles[index],
				value: this.value()
			};
			if (this.options.values && this.options.values.length) {
				uiHash.value = this.values(index);
				uiHash.values = this.values();
			}

			this._trigger("stop", event, uiHash);
		},

		_change: function (event, index) {
			if (!this._keySliding && !this._mouseSliding) {
				var uiHash = {
					handle: this.handles[index],
					value: this.value()
				};
				if (this.options.values && this.options.values.length) {
					uiHash.value = this.values(index);
					uiHash.values = this.values();
				}

				this._trigger("change", event, uiHash);
			}
		},

		value: function (newValue) {
			if (arguments.length) {
				this.options.value = this._trimAlignValue(newValue);
				this._refreshValue();
				this._change(null, 0);
				return;
			}

			return this._value();
		},

		values: function (index, newValue) {
			var vals,
				newValues,
				i;

			if (arguments.length > 1) {
				this.options.values[index] = this._trimAlignValue(newValue);
				this._refreshValue();
				this._change(null, index);
				return;
			}

			if (arguments.length) {
				if ($.isArray(arguments[0])) {
					vals = this.options.values;
					newValues = arguments[0];
					for (i = 0; i < vals.length; i += 1) {
						vals[i] = this._trimAlignValue(newValues[i]);
						this._change(null, i);
					}
					this._refreshValue();
				} else {
					if (this.options.values && this.options.values.length) {
						return this._values(index);
					} else {
						return this.value();
					}
				}
			} else {
				return this._values();
			}
		},

		_setOption: function (key, value) {
			var i,
				valsLength = 0;

			if ($.isArray(this.options.values)) {
				valsLength = this.options.values.length;
			}

			$.Widget.prototype._setOption.apply(this, arguments);

			switch (key) {
			case "disabled":
				if (value) {
					this.handles.filter(".ui-state-focus").blur();
					this.handles.removeClass("ui-state-hover");
					this.handles.prop("disabled", true);
					this.element.addClass("ui-disabled");
				} else {
					this.handles.prop("disabled", false);
					this.element.removeClass("ui-disabled");
				}
				break;
			case "orientation":
				this._detectOrientation();
				this.element
					.removeClass("inforSliderHorizontal inforSliderVertical")
					.addClass("inforSlider-" + this.orientation);
				this._refreshValue();
				break;
			case "value":
				this._animateOff = true;
				this._refreshValue();
				this._change(null, 0);
				this._animateOff = false;
				break;
			case "values":
				this._animateOff = true;
				this._refreshValue();
				for (i = 0; i < valsLength; i += 1) {
					this._change(null, i);
				}
				this._animateOff = false;
				break;
			case "min":
			case "max":
				this._animateOff = true;
				this._refreshValue();
				this._animateOff = false;
				break;
			}
		},

		//internal value getter
		// _value() returns value trimmed by min and max, aligned by step
		_value: function () {
			var val = this.options.value;
			val = this._trimAlignValue(val);

			return val;
		},

		//internal values getter
		// _values() returns array of values trimmed by min and max, aligned by step
		// _values( index ) returns single value trimmed by min and max, aligned by step
		_values: function (index) {
			var val,
				vals,
				i;

			if (arguments.length) {
				val = this.options.values[index];
				val = this._trimAlignValue(val);

				return val;
			} else {
				// .slice() creates a copy of the array
				// this copy gets trimmed by min and max and then returned
				vals = this.options.values.slice();
				for (i = 0; i < vals.length; i += 1) {
					vals[i] = this._trimAlignValue(vals[i]);
				}

				return vals;
			}
		},

		// returns the step-aligned value that val is closest to, between (inclusive) min and max
		_trimAlignValue: function (val) {
			if (val <= this._valueMin()) {
				return this._valueMin();
			}
			if (val >= this._valueMax()) {
				return this._valueMax();
			}
			var step = (this.options.step > 0) ? this.options.step : 1,
				valModStep = (val - this._valueMin()) % step,
				alignValue = val - valModStep;

			if (Math.abs(valModStep) * 2 >= step) {
				alignValue += (valModStep > 0) ? step : (-step);
			}

			// Since JavaScript has problems with large floats, round
			// the final value to 5 digits after the decimal point (see #4124)
			return parseFloat(alignValue.toFixed(5));
		},

		_valueMin: function () {
			return this.options.min;
		},

		_valueMax: function () {
			return this.options.max;
		},

		_refreshValue: function () {
			var lastValPercent, valPercent, value, valueMin, valueMax,
				oRange = this.options.range,
				o = this.options,
				self = this,
				i,
				that = this,
				animate = (!this._animateOff) ? o.animate : false,
				_set = {};

			if (this.options.values && this.options.values.length) {
				this.handles.each(function (i) {
					valPercent = (that.values(i) - that._valueMin()) / (that._valueMax() - that._valueMin()) * 100;
					_set[that.orientation === "horizontal" ? "left" : "bottom"] = valPercent + "%";
					$(this).stop(1, 1)[animate ? "animate" : "css"](_set, o.animate);
					this.handle.attr("aria-valuemin", that._valueMin())
						.attr("aria-valuemax", that._valueMax())
						.attr("aria-valuenow", valPercent)
						.attr("aria-valuetext", valPercent)
						.attr("aria-labelledby", valPercent);
				
					if (that.options.range === true) {
						if (that.orientation === "horizontal") {
							if (i === 0) {
								that.range.stop(1, 1)[animate ? "animate" : "css"]({
									left: valPercent + "%"
								}, o.animate);
							}
							if (i === 1) {
								that.range[animate ? "animate" : "css"]({
									width: (valPercent - lastValPercent) + "%"
								}, {
									queue: false,
									duration: o.animate
								});
							}
						} else {
							if (i === 0) {
								that.range.stop(1, 1)[animate ? "animate" : "css"]({
									bottom: (valPercent) + "%"
								}, o.animate);
							}
							if (i === 1) {
								that.range[animate ? "animate" : "css"]({
									height: (valPercent - lastValPercent) + "%"
								}, {
									queue: false,
									duration: o.animate
								});
							}
						}
					}
					if (o.showValueLabel) {
						self.labels[i].html(100 - valPercent).css((that.orientation === "horizontal" ? "left" : "bottom"), valPercent + "%");
					}
					lastValPercent = valPercent;
				});
			} else {
				value = this.value();
				valueMin = this._valueMin();
				valueMax = this._valueMax();
				valPercent = (valueMax !== valueMin) ?
					(value - valueMin) / (valueMax - valueMin) * 100 :
					0;
				_set[this.orientation === "horizontal" ? "left" : "bottom"] = valPercent + "%";
				if (valPercent > 99) {
					_set["margin-left"] = "-12px";
				} else if (valPercent === 0) {
					_set["margin-left"] = "-2px";
				} else {
					_set["margin-left"] = "0px";
				}
					
				this.handle.stop(1, 1)[animate ? "animate" : "css"](_set, o.animate);
				this.handle.attr("aria-valuemin", valueMin)
					.attr("aria-valuemax", valueMax)
					.attr("aria-valuenow", value)
					.attr("aria-valuetext", value)
					.attr("aria-labelledby", value);
				
				if (oRange === "min" && this.orientation === "horizontal") {
					this.range.stop(1, 1)[animate ? "animate" : "css"]({
						width: valPercent + "%",
						paddingRight: (valPercent === 100 ? "0px" : "2px")
					}, o.animate);
				}
				if (oRange === "max" && this.orientation === "horizontal") {
					this.range[animate ? "animate" : "css"]({
						width: (100 - valPercent) + "%"
					}, {
						queue: false,
						duration: o.animate
					});
				}
				if (oRange === "min" && this.orientation === "vertical") {
					this.range.stop(1, 1)[animate ? "animate" : "css"]({
						height: valPercent + "%"
					}, o.animate);
				}
				if (oRange === "max" && this.orientation === "vertical") {
					this.range[animate ? "animate" : "css"]({
						height: (100 - valPercent) + "%"
					}, {
						queue: false,
						duration: o.animate
					});
				}
				
				if (o.showSteps) {
					for (i=0 ; i < this.stepTicks.length; i++) {
						var tick = this.stepTicks[i];
						if (tick.perc >= valPercent) {
							tick.addClass("afterHandle");
						} else {
							tick.removeClass("afterHandle");
						}
					}
				}
				
				if (o.showValueLabel) {
					self.labels[0].html(value).css((that.orientation === "horizontal" ? "left" : "bottom"), valPercent + "%");
				}
				
				if (o.qualityScales) {
					for (var index in o.qualityScales) { 
						if (value >= o.qualityScales[index].start && value <= o.qualityScales[index].end) {
							this.range.attr("class", "inforSliderRange min inforColor " + index);
						}
					}
				}
				if (o.stepLabels) {
					for (i=0; i< o.stepLabels.length; i++) { 
						this.stepLabels[i].html(o.stepLabels[i]);
						this.stepLabels[i].css("margin-left", "-" + ((o.stepLabels[i].textWidth()/2) - (i === o.stepLabels.length -1 ? -10 : 5)) + "px");
					}
				}
			}
		}
	});
}(jQuery));/*
* Infor Spinner  - Numeric Up / Down Editor
*/
(function ($) {
	$.widget("ui.inforSpinner", {
		options: {
			step: 1,	//specifies the legal number intervals
			max: Number.MAX_VALUE,
			min: null
		},
		input: null,
		downButton: null,
		upButton: null,
		_init: function () {
			var self = this,
			upInterval, downInterval, startVal;

			this.input = $(this.element);

			if (this.input.closest(".inforTriggerField").length > 0) {
				return;
			}

			//change attribute or chrome will add its own input
			this.input.get(0).type = 'text';
			
			//add aria tags
			this.input.attr("role", "spinbutton");
			
			//copy html5 attributes to settings.
			if (this.input.attr("step")) {
				this.options.step = parseInt(this.input.attr("step"), 10);
			}
			if (this.input.attr("max")) {
				this.options.max = parseInt(this.input.attr("max"), 10);
			}
			if (this.input.attr("min")) {
				this.options.min = parseInt(this.input.attr("min"), 10);
			}
			this.input.attr("aria-valuemax",this.options.max);
			this.input.attr("aria-valuemin",this.options.min);
			
			//add trigger button styling
			this.input.numericOnly(false).data("isInitialized", true).inforTriggerField();
			this.upButton = this.input.closest(".inforTriggerField").find(".inforSpinnerButtonUp");
			this.downButton = $('<button class="inforTriggerButton inforSpinnerButtonDown" type="button" tabindex="-1"><span></span></button>');
			this.upButton.after(this.downButton);
			this.input.closest(".inforTriggerField").addClass("inforSpinnerContainer");

			//add click - long press events
			this.upButton.on('mousedown', function () {
				upInterval = setInterval(function () { self.increment(self.options.step, upInterval); }, 200);
			}).on('mouseup mouseup mouseout', function () {
				clearInterval(upInterval);
			});

			this.downButton.on('mousedown', function () {
				downInterval = setInterval(function () { self.increment(-(self.options.step), downInterval); }, 200);
			}).on('mouseup mouseup mouseout', function () {
				clearInterval(downInterval);
			});

			this.upButton.click(function () {
				self.increment(self.options.step);
			});
			this.downButton.click(function () {
				self.increment(-(self.options.step));
			});

			//add support for mouse wheel - using the mousewheel plugin in shared.
			this.input.bind('mousewheel', function (event, delta) {
				self.increment(delta * self.options.step);
			});

			//add keyboard support  - using the hotkeys plugin in shared.
			this.input.bind('keydown', 'up', function () {
				self.increment(self.options.step);
			})
			.bind('keydown', 'down', function () {
				self.increment(-(self.options.step));
			})
			.bind('keyup', function (e) {
				self.increment(0, null, false);
			})
			.bind('blur', function (e) {
				self.increment(0, null, true);
			})
			.bind('focus', function () {
				$(this).select();
			});

			//set initial disabled on min and max
			startVal = parseInt(this.input.val(), 10);
			if (!isNaN(startVal)) {
				if (startVal >= this.options.max) {
					this.upButton.attr("disabled", "");
				}
				if (startVal <= this.options.min) {
					this.downButton.attr("disabled", "");
				}
			}
			this.input.attr("aria-valuemin",startVal);
		},
		increment: function (step, interval, enforceMinMax) {
			var newVal = parseInt(this.input.val(), 10);
			
			if (this.input.val() === "") {
				newVal = "";
				if (enforceMinMax && this.options.min !== null) {
					newVal = this.options.min;
					this.input.val(newVal).attr("aria-valuemin",newVal).trigger("change");
				}
				return;
			}
			
			if (isNaN(newVal)) {
				newVal = 0;
			}

			//validate based on max/min options and insert..
			newVal += step;

			this.downButton.removeAttr("disabled");
			this.upButton.removeAttr("disabled");

			if (newVal >= this.options.max && enforceMinMax) {
				newVal = this.options.max;
				this.upButton.attr("disabled", "");
				clearInterval(interval);
			}
			if (newVal <= this.options.min && enforceMinMax) {
				newVal = this.options.min;
				this.downButton.attr("disabled", "");
				clearInterval(interval);
			}
			
			this.input.val(newVal).attr("aria-valuemin",newVal).trigger("change");	//trigger dirty indicator.
		}
	});
} (jQuery));
/*
* Infor Split Button
*/
(function ($) {
	$.fn.inforSplitButton = function (options) {
		var settings = {
			menuId: null, //id on the form of the menu
			callback: null, //function to execute on a menu item click
			click: null, //function to execute on button part click
			backgroundIFrame: false, // pass backgroundIFrame to open an iFrame overtop of submenus for pdf/applet issues
			iframeFix: false //pass iframe fix to close menus on iframe click
		};

		return this.each(function () {
			var o = $.extend({}, settings, options),
				$textButton = $(this),
				buttonText = $textButton.html(),
				isIconButton = false,
				isDisabled, classes, $rightButton, container;

			if (!$textButton.parent().is(".inforSplitButtonContainer")) {

				isDisabled = $textButton.hasClass("disabled") || $textButton.is(":disabled");
				classes = $textButton.attr("class").replace("inforSplitButton", "").replace("disabled", "");

				if (classes === "" || classes === " ") {
					isIconButton = false;
				} else {
					$textButton.addClass("inforIconButton");
					if ($textButton.children("span").length === 0) {
						$textButton.append("<span></span>");
					}
					isIconButton = true;
				}

				$rightButton = $("<button type='button' class=\"inforSplitButtonArrow\"><span></span></button>");

				//wrap in a div and add the button on the right.
				container = $("<div class='inforSplitButtonContainer'></div>");
				if (isIconButton) {
					container.addClass("icon");
				}

				$textButton.wrap(container);
				$textButton.parent().append($rightButton);

				//attach the events.
				$textButton.click(function (e) {
					if ($textButton.parent().hasClass("disabled") || $textButton.hasClass("disabled")) {
						return;
					}

					if (o.click) {
						o.click(e);
					}
				});

				if (o.menuId !== null) {
					$rightButton.inforContextMenu({
						menu: o.menuId,
						invokeMethod: 'toggle',
						iframeFix: o.iframeFix,
						backgroundIFrame: o.backgroundIFrame,
						position: {
							my: "left top",
							at: "left bottom",
							of: $textButton,
							offset: "0 1",
							collision: "flip"
						},
						beforeOpening: function () {
							$rightButton.addClass("active");
						},
						onClose: function () {
							$rightButton.removeClass("active");
						}
					}, (!o.callback ? null : function (action, el, pos, item) {
						if ($textButton.hasClass('disabled')) {
							return;
						}
						o.callback(action, el, pos, item);
					}));
				}

				//set the initial disabled state.
				if (isDisabled) {
					$textButton.disable();
				} else {
					$textButton.enable();
				}

				//copy tab index..
				if ($textButton.attr("tabindex") == -1) {
					$textButton.parent().find("button").attr("tabindex", -1);
				}
			}
		});
	};

}(jQuery));/*
* Infor Splitter
*
* Based on original code by http://krikus.com/js/splitter but now completely overhauled.
*
* Which is Dual licensed under the MIT and GPL licenses:
*   http://www.opensource.org/licenses/mit-license.php
*   http://www.gnu.org/licenses/gpl.html
*/

(function ($) {
	$.widget("ui.inforSplitter", {
		options: {
			splitHorizontal: false, //vertical or horizontal
			splitVertical: true, //vertical or horizontal
			savePosition: true, //Save the split value to a cookie?
			initialSplitPerc: null, //initial split size.
			fixedSide: null //can be left or right. This side will stay exact amount of  pixels while the other side is responsive.
		},
		_splitBar: null,
		_splitButton: null,
		_sideA: null,
		_sideB: null,
		_windowHeight: null,
		_windowWidth: null,
		_perc: null,
		_create: function () {
			var $splitter = $(this.element),
				self = this,
				o = this.options,
				opts, perc, elementId, reinit, cookieId, cookieVal, rtl;

			this._windowHeight = $(window).height();
			this._windowWidth = $(window).width();
			$splitter.addClass("inforSplitter");

			this._perc = 0.20;

			// Default opts
			o.direction = (o.splitHorizontal ? 'h' : 'v');
			opts = $.extend({
				animSpeed: 100 //animation speed in ms
			}, {
				v: { // Vertical
					moving: "left",
					sizing: "width",
					eventPos: "pageX",
					splitbarClass: "inforSplitBarVertical",
					buttonClass: "inforSplitButtonVertical"
				},
				h: { // Horizontal
					moving: "top",
					sizing: "height",
					eventPos: "pageY",
					splitbarClass: "inforSplitBarHorizontal",
					buttonClass: "inforSplitButtonHorizontal"
				}
			}[o.direction], this.options);

			this.options = opts;

			if (o.direction == 'v') {
				this._sideA = $('#leftPane');
				this._sideB = $('#rightPane');
				if (this._sideA.length === 0 && this._sideB.length === 0) {
					this._sideA = $splitter.find('.leftPane:first');
					this._sideB = $splitter.find('.rightPane:first');
				}
				if (o.initialSplitPerc) {
					this._sideA.css("width", o.initialSplitPerc * 100 + "%");
					this._sideB.css("width", "75%");
				}
			} else {
				this._sideA = $('#topPane');
				this._sideB = $('#bottomPane');
				if (this._sideA.length === 0 && this._sideB.length === 0) {
					this._sideA = $splitter.find('.topPane:first');
					this._sideB = $splitter.find('.bottomPane:first');
				}
				if (o.initialSplitPerc) {
					this._sideA.css("height", o.initialSplitPerc * 100 + "%");
					this._sideB.css("height", "75%");
				}
			}

			//Create splitbar and setup elements
			this._splitBar = $("<div><span class='inforSplitButtonTop'></span><span class='inforSplitButtonMiddle'></span></div>");
			//this._splitBar = $("<div></div>");

			this._sideA.after(this._splitBar);
			this._splitBar.attr({
				"class": opts.splitbarClass,
				unselectable: "on"
			}).css({
				"user-select": "none",
				"-webkit-user-select": "none",
				"-moz-user-select": "none"
			}).draggable({
				iframeFix: true,
				scroll: false,
				cursor: (o.direction == 'v' ? "ew-resize" : "ns-resize"),
				axis: (o.direction == 'v' ? "x" : "y"),
				containment: this._splitBar.parent(),
				stop: function (event, ui) {
					self._endDrag(event, ui);
					self._splitBar.removeClass("dragging right left up down");
					$('body').enableSelection();
					$('iframe').contents().enableSelection();
				},
				drag: function (event, ui) {
					var thisX, lastX;
					// get the last left position (think x co-ordinate) to switch the styles.
					if (o.direction == 'v') {
						thisX = ui.offset.left;
						lastX = ui.helper.data('lastLeft') || thisX;

						if (thisX < lastX) {
							self._splitBar.removeClass("right").addClass("left");
						}
						if (thisX > lastX) {
							self._splitBar.removeClass("left").addClass("right");
						}
						ui.helper.data('lastLeft', thisX);
					} else {
						thisX = ui.offset.top;
						lastX = ui.helper.data('lastTop') || thisX;

						if (thisX < lastX) {
							self._splitBar.removeClass("down").addClass("up");
						}
						if (thisX > lastX) {
							self._splitBar.removeClass("up").addClass("down");
						}
						ui.helper.data('lastTop', thisX);
					}

					self._splitDrag(event, ui);
				},
				start: function (event, ui) {
					self._splitBar.css('z-index', '250').css("-webkit-user-select", "none");
					$splitter._initPos = self._splitBar.position();
					$splitter._initPos[opts.moving] -= self._splitBar[opts.sizing]();
					self._splitBar.addClass("dragging");
					$('body').disableSelection();
					$('iframe').contents().disableSelection();
				}
			});

			//set up the hover drag
			this._splitButton = $('<div></div>').attr({
				"class": opts.buttonClass,
				unselectable: "on"
			});

			//this._splitBar.append(this._splitButton);
			this._splitBar.append(this._splitButton).append("<span class='inforSplitButtonBottom'></span>");

			//reset size to default.
			this._setDimensions();

			perc = (((this._splitBar.position()[opts.moving] - $splitter.offset()[opts.moving]) / $splitter[opts.sizing]()) * 100).toFixed(1);

			if ($splitter.parent().hasClass("ui-tabs-panel")) {
				$splitter.parent().css({
					"overflow": "hidden",
					"padding": " 1px 0"
				});
			}

			//set size saved in the cookie
			if (o.savePosition) {
				elementId = $splitter.attr("id");
				rtl = (Globalize.culture().isRTL ? "rtl" : "");

				cookieId = window.location.pathname + 'inforSplitter' + rtl + '/#' + (!elementId ? "inforSplitter" + o.direction : elementId);
				cookieVal = $.cookie(cookieId);
				if (cookieVal) {
					perc = cookieVal;
				}
			}

			this.splitTo(perc);

			reinit = function () {
				self.splitTo(self._perc);
			};

			this.handleResize = function (e, force) {
				if (self._resizeTimer) {
					clearTimeout(self._resizeTimer);
				}
				if (self._windowHeight != $(window).height() || force) {
					self._setDimensions();
				}

				if (force || (self._windowHeight != $(window).height()) || (self._windowWidth != $(window).width())) {
					self._resizeTimer = setTimeout(reinit, 1);
					self._windowHeight = $(window).height();
					self._windowWidth = $(window).width();
				}
			};

			$(window).bind('throttledresize.inforSplitter', this.handleResize);
			this.handleResize();
		},
		_setDimensions: function () {
			var root = $(this.element),
				h = $(window).height() - root.offset().top,
				w = root.parent().width() - root.offset().left,
				middle = root.find(".inforSplitButtonMiddle:first");
			
			
			if (this.options.direction == 'v') {
				//look for content below
				if (root.parent().is(".inforScrollableArea")) {
					h = parseInt(root.parent().height(), 10);
				}
				root.height(h + "px");
				middle.height((h - 200) + "px");
				root.find(".inforSplitBarVertical").height(h);
				root.find(".inforSplitButtonVertical").css("top", (h/2));
				root.find(".inforSplitButtonBottom").height(h-middle.height());
			} else {
				root.height(h + "px");
				if (root.offset().left > 0) {
					w = root.parent().width();
				}
				middle.width((w - 200) + parseInt(root.offset().left, 10) + "px").height("10px");
				root.find(".inforSplitBarHorizontal").width(w);
				root.find(".inforSplitButtonTop").width(w-middle.width()).height(10);
				root.find(".inforSplitButtonBottom").height(10);
			}
		},
		destroy: function () {
			var elem = $(this.element);

			elem.find(".inforSplitBarVertical").remove();
			elem.find(".inforSplitBarHorizontal").remove();

			$(window).unbind('throttledresize.inforSplitter');
			$.Widget.prototype.destroy.apply(this, arguments);
		},
		_splitDrag: function (event, ui) {
			var o = this.options,
			$splitter = $(this.element),
			p = ui.offset, perc;

			perc = (((p[o.moving] - $splitter.offset()[o.moving]) / $splitter[o.sizing]()) * 100).toFixed(1);

			self.fixedRight = parseInt($splitter.width(), 10) - ui.position.left;
			this.splitTo(perc);
		},
		_endDrag: function (event, ui) {
			var o = this.options,
				$splitter = $(this.element),
				p = ui.offset, perc;

			$splitter.children().css("-webkit-user-select", "text"); // let Safari select text again
			$splitter._initPos = 0;
		},
		//Peforms split to a percentage
		getSplitPercentage: function () {
			return (this._perc);
		},
		resizeTimer: null,
		cookieTimer: null,
		//Peforms split to a percentage
		splitTo: function (perc) {
			var o = this.options,
			$splitter = $(this.element),
			percpx, children, savePerc, rtl, elementId, cookieId, barsize, splitsize, sizeA, sizeB;

			savePerc = perc;
			if (typeof Globalize != "undefined" && Globalize.culture().isRTL && o.direction === "v") {
				perc = 100 - perc;
			}

			this._perc = perc;
			this._setDimensions();

			clearTimeout(self.cookieTimer);
			self.cookieTimer = setTimeout(function() {
				if (o.savePosition) {
					elementId = $splitter.attr("id"),
					rtl = (Globalize.culture().isRTL ? "rtl" : "");

					cookieId = window.location.pathname + 'inforSplitter' + rtl + '/#' + (!elementId ? "inforSplitter" + o.direction : elementId);

					$.cookie(cookieId, savePerc, {
						expires: 3650
					});
				}
			}, 600);

			barsize = this._splitBar[o.sizing]();
			splitsize = $splitter[o.sizing]();

			percpx = Math.max(parseInt((splitsize / 100) * perc, 10), 0);

			if (o.fixedSide == "left" && o.direction == 'v') {
				var left = parseInt(this._splitBar.css("left"), 10);
				if (left >0) {
					percpx = left - 5;
				} else {
					percpx = this._sideA.width();
				}
			}

			if (o.fixedSide == "right" && o.direction == 'v') {
				var left = parseInt(this._splitBar.css("left"), 10);
				if (left > 0) {
					percpx = splitsize - (self.fixedRight);
				} else {
					self.fixedRight = this._sideB.width() + 20;
					percpx = splitsize - this._sideB.width() - 20;
				}
			}

			sizeA = Math.max(0, (percpx));
			sizeB = Math.max(0, (splitsize - (percpx === 0 ? 15 : percpx)) - barsize - 5);

			this._sideA.show().css(o.sizing, sizeA + 'px');
			this._sideB.show().css(o.sizing, sizeB + 'px');
			this._splitButton.show();

			if (this._splitBar.css("position") != "absolute") {
				this._splitBar.css("position", "absolute");
			}
			if (o.direction == 'h') {
				this._splitBar.css("top", this._sideA.height() + this._sideA.offset().top);
			} else {
				if (Globalize.culture().isRTL) {
					this._splitBar.css("left", this._sideB.width() + 22);
				} else {
					this._splitBar.css("left", this._sideA.width() + this._sideA.offset().left + 5);
				}
			}

			children = $splitter.children();

			children.trigger("resize");
			clearTimeout(self.resizeTimer);
			self.resizeTimer = setTimeout(function() {
				children.find(".inforDataGrid").each(function () {
					var grid = $(this).data("gridInstance");
					if (grid) {
						grid.resizeCanvas();
					}
				});
			}, 200);

			//call resize on any child splitters
			children.find(".inforSplitter").each(function (e) {
				var splitter = $(this).data("uiInforSplitter"),
					parent = $(this).parent().parent(".inforSplitter");
				if (splitter) {
					splitter.handleResize(e, true);
				}
			});
		}
	});
})(jQuery);
/*
* Infor Swap List
*/
(function ($) {
	$.widget("ui.inforSwapList", {
		options: {
			sortable: true,
			availableItemText: Globalize.localize("Available"), //Translated text for the top headers
			selectedItemText: Globalize.localize("Selected"),
			available: [],
			selected: []	
		},
		_init: function () {
			var elem = $(this.element),
				self = this,
				i, moveLeft, moveRight, leftList, rightList, leftLabel, rightLabel;
			
			//Append Structure
			leftList = $('<select multiple="multiple" size="5" class="inforListBox" ></select>').uniqueId();
			leftLabel = $('<label class="inforLabel noColon">' + Globalize.localize("Available") + '</label><br>').attr("for", leftList.attr("id"));
			elem.append($('<div class="inforSwapListLeft"></div>').append(leftLabel, leftList));
			
			rightList = $('<select multiple="multiple" size="5" class="inforListBox" ></select>').uniqueId();
			rightLabel = $('<label class="inforLabel noColon">' + Globalize.localize("Selected") + '</label><br>').attr("for", rightList.attr("id"));
			elem.append($('<div class="inforSwapListRight"></div>').append(rightLabel, rightList));
			
			//Add buttons functionality
			moveLeft = $('<button type="button" class="inforIconButton moveLeft" disabled><span></span></button>');
			moveRight = $('<button type="button" class="inforIconButton moveRight" disabled><span></span></button>');
			elem.find(".inforSwapListLeft").after($('<div class="inforSwapListButtons"></div>').append(moveLeft, moveRight));
		
			//Init list Boxes.
			elem.find(".inforListBox").inforListBox({showCheckboxes:false});
			
			//Clear inline css from listbox control
			elem.find("div.inforListBox:first").css({"height": "", "width": "", "display": "block"});
			elem.find("div.inforListBox:last").css({"height": "", "width": "", "display": "block"});
			
			//Set Items
			for (i=0; i < self.options.available.length; i++) {
				leftList.inforListBox("add", {optionValue: self.options.available[i].value, optionText: self.options.available[i].label});
			}
			
			for (i=0; i < self.options.selected.length; i++) {
				rightList.inforListBox("add", {optionValue: self.options.available[i].value, optionText: self.options.selected[i].label});
			}
			
			//Make Drag droppable
			if (self.options.sortable) {
				//append drag handles.
				if (elem.find(".inforListBoxOption .dragHandle").length === 0) {
					elem.find(".inforListBoxOption a").prepend('<span class="dragHandle"></span>');
				}
				elem.find(".inforListBoxOption").addClass("isLinked").sortable({handle: ".dragHandle", placeholder: "inforSortPlaceHolder", connectWith: ".isLinked" });
			}

			//Add Events
			leftList.on("change", function(){
				var elem = $(this);
				
				if (elem.hasClass("disabled")) {
					return;
				}
				
				if (elem.next().find(".isSelected").length) {
					moveLeft.enable();
				} else {
					moveLeft.disable();
				}
			});
			
			rightList.on("change", function(){
				var elem = $(this);
				
				if (elem.hasClass("disabled")) {
					return;
				}
				
				if (elem.next().find(".isSelected").length) {
					moveRight.enable();
				} else {
					moveRight.disable();
				}
			});
			
			leftList.next().on("dblclick", "a", function() {
				var elem = $(this).closest(".inforListBox");
				if (elem.hasClass("disabled")) {
					return;
				}
				rightList.next().find("ul").append(leftList.next().find(".isSelected"));
			});
			
			rightList.next().on("dblclick", "a", function() {		
				var elem = $(this).closest(".inforListBox");
				if (elem.hasClass("disabled")) {
					return;
				}
				leftList.next().find("ul").append(rightList.next().find(".isSelected"));
			});
			
			moveLeft.on("click", function(e) {
				var elem = $(this).closest(".inforListBox");
				if (elem.hasClass("disabled")) {
					return;
				}
				rightList.next().find("ul").append(leftList.next().find(".isSelected"));
			});
			moveRight.on("click", function(e) {
				var elem = $(this).closest(".inforListBox");
				if (elem.hasClass("disabled")) {
					return;
				}
				leftList.next().find("ul").append(rightList.next().find(".isSelected"));
			});
			
		}
	});
}($));/*
* Infor Switch - On/Off Switch
*/

(function ($) {
	$.widget("ui.inforSwitch", {
		options: {
		},
		_create: function () {
			var elem = $(this.element),
				self = this;

			//only needed for IE8 since it doesnt support the :checked selector.
			//So use the conditional import
			elem.find("label").click(function(){
				self._toggleChecked($(this));
			});

			elem.find("input:checked").each(function() {
				elem.find(".inforSwitchInner").css("margin-left",0);
				elem.find(".inforSwitchSwitch").css("right",0);
			});
		},
		_toggleChecked: function(label) {
			var input = label.parent().find("input");
			if (input.attr("checked")) {
				input.removeAttr("checked");
				input.parent().find(".inforSwitchInner").animate({marginLeft : "-100%"}, 200);
				input.parent().find(".inforSwitchSwitch").animate({right : "20px"}, 200);
			} else {
				input.attr("checked","");
				input.parent().find(".inforSwitchInner").animate({marginLeft : 0}, 200);
				input.parent().find(".inforSwitchSwitch").animate({right : 0}, 200);
			}
		}
});
})(jQuery);
/*
* jQuery UI Tabs 1.8.11
*
* Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* http://docs.jquery.com/UI/Tabs
*/
(function ($, undefined) {

	var tabId = 0,
		listId = 0;

	function getNextTabId() {
		return ++tabId;
	}

	function getNextListId() {
		return ++listId;
	}

	$.widget("ui.tabs", {
		options: {
			add: null,
			ajaxOptions: null,
			cache: false,
			cookie: null, // e.g. { expires: 7, path: '/', domain: 'jquery.com', secure: true }
			disable: null,
			disabled: [],
			enable: null,
			event: "click",
			idPrefix: "ui-tabs-",
			panelTemplate: "<div></div>",
			remove: null,
			select: null,
			spinner: null,
			tabTemplate: "<li><a href='#{href}'>#{label}</a></li>"
		},

		_create: function () {
			this._tabify(true);
		},

		_setOption: function (key, value) {
			if (key == "selected") {
				this.select(value);
			} else {
				this.options[key] = value;
				this._tabify();
			}
		},

		_tabId: function (a) {
			return a.title && a.title.replace(/\s/g, "_").replace(/[^\w\u00c0-\uFFFF-]/g, "") || this.options.idPrefix + getNextTabId(); //ignore jslint
		},

		_sanitizeSelector: function (hash) {
			// we need this because an id may contain a ":"
			return hash.replace(/:/g, "\\:");
		},

		_cookie: function () {
			var cookie = this.cookie || (this.cookie = this.options.cookie.name || "ui-tabs-" + getNextListId());
			return $.cookie.apply(null, [cookie].concat($.makeArray(arguments)));
		},

		_ui: function (tab, panel) {
			return {
				tab: tab,
				panel: panel,
				index: this.anchors.index(tab)
			};
		},

		_cleanup: function () {
			// restore all former loading tabs labels
			this.lis.filter(".ui-state-processing")
				.removeClass("ui-state-processing")
				.find("span:data(label.tabs)")
				.each(function () {
					var el = $(this);
					el.html(el.data("label.tabs")).removeData("label.tabs");
				});
		},

		_tabify: function (init) {
			var self = this,
				o = this.options,
				addState, removeState,
				hideFx, showFx, showTab, hideTab,
				fragmentId = /^#.+/; //ignore jslint Safari 2 reports '#' for an empty hash

			this.list = this.element.find("ol,ul").eq(0);
			this.lis = $(" > li:has(a[href])", this.list);

			this.anchors = this.lis.map(function () {
				return $("a", this)[0];
			});
			this.panels = $([]);

			this.anchors.each(function (i, a) {
				var href = $(a).attr("href"),
					// For dynamically created HTML that contains a hash as href IE < 8 expands
					// such href to the full page url with hash and then misinterprets tab as ajax.
					// Same consideration applies for an added tab with a fragment identifier
					// since a[href=#fragment-identifier] does unexpectedly not match.
					// Thus normalize href attribute...
					hrefBase = href.split("#")[0],
					baseEl, id, $panel;

				if (hrefBase && (hrefBase === window.location.toString().split("#")[0] || (baseEl = $("base")[0]) && hrefBase === baseEl.href)) {
					href = a.hash;
					a.href = href;
				}

				// inline tab
				if (fragmentId.test(href)) {
					self.panels = self.panels.add(self.element.find(self._sanitizeSelector(href)));
					// remote tab
					// prevent loading the page itself if href is just "#"
				} else if (href && href !== "#") {
					// required for restore on destroy
					$.data(a, "href.tabs", href);

					// TODO until #3808 is fixed strip fragment identifier from url
					// (IE fails to load from such url)
					$.data(a, "load.tabs", href.replace(/#.*$/, "")); //ignore jslint

					id = self._tabId(a);
					a.href = "#" + id;
					$panel = self.element.find("#" + id);
					if (!$panel.length) {
						$panel = $(o.panelTemplate)
							.attr("id", id)
							.addClass("ui-tabs-panel ui-corner-bottom")
							.insertAfter(self.panels[i - 1] || self.list);
						$panel.data("destroy.tabs", true);
					}
					self.panels = self.panels.add($panel);
					// invalid tab href
				} else {
					o.disabled.push(i);
				}
			});

			// initialization from scratch
			if (init) {
				// attach necessary classes for styling
				this.element.addClass("ui-tabs");
				this.panels.addClass("ui-tabs-panel");

				// Selected tab
				// use "selected" option or try to retrieve:
				// 1. from fragment identifier in url
				// 2. from cookie
				// 3. from selected class attribute on <li>
				if (o.selected === undefined) {
					if (window.location.hash) {
						this.anchors.each(function (i, a) {
							if (a.hash == window.location.hash) {
								o.selected = i;
								return false;
							}
						});
					}
					if (typeof o.selected !== "number" && o.cookie) {
						o.selected = parseInt(self._cookie(), 10);
					}
					if (typeof o.selected !== "number" && this.lis.filter(".ui-tabs-selected").length) {
						o.selected = this.lis.index(this.lis.filter(".ui-tabs-selected"));
					}
					o.selected = o.selected || (this.lis.length ? 0 : -1);
				} else if (o.selected === null) {
					o.selected = -1;
				}

				// sanity check - default to first tab...
				o.selected = (((o.selected >= 0 && this.anchors[o.selected]) || o.selected < 0) ? o.selected : 0);

				// Take disabling tabs via class attribute from HTML
				// into account and update option properly.
				// A selected tab cannot become disabled.
				o.disabled = $.unique(o.disabled.concat(
				$.map(this.lis.filter(".ui-state-disabled"), function (n, i) {
					return self.lis.index(n);
				}))).sort();

				if ($.inArray(o.selected, o.disabled) != -1) {
					o.disabled.splice($.inArray(o.selected, o.disabled), 1);
				}

				// highlight selected tab
				this.panels.addClass("ui-tabs-hide");
				this.lis.removeClass("ui-tabs-selected ui-state-active");
				// check for length avoids error when initializing empty list
				if (o.selected >= 0 && this.anchors.length) {
					self.element.find(self._sanitizeSelector(self.anchors[o.selected].hash)).removeClass("ui-tabs-hide");
					this.lis.eq(o.selected).addClass("ui-tabs-selected ui-state-active");

					// seems to be expected behavior that the show callback is fired
					self.element.queue("tabs", function () {
						self._trigger("show", null,
						self._ui(self.anchors[o.selected], self.element.find(self._sanitizeSelector(self.anchors[o.selected].hash))[0]));
					});

					this.load(o.selected);
				}
				// update selected after add/remove
			} else {
				o.selected = this.lis.index(this.lis.filter(".ui-tabs-selected"));
			}

			// set or update cookie after init and add/remove respectively
			if (o.cookie) {
				this._cookie(o.selected, o.cookie);
			}

			// disable tabs
			this.lis.each(function (index) {
				var $li = $(this);

				$li[$.inArray(index, o.disabled) != -1 && !$li.hasClass("ui-tabs-selected") ? "addClass" : "removeClass"]("ui-state-disabled");

				if ($li.hasClass("ui-state-disabled")) {
					$li.find("a").attr("tabindex", "-1");
				} else {
					$li.find("a").removeAttr("tabindex");
				}
			});

			// reset cache if switching from cached to not cached
			if (o.cache === false) {
				this.anchors.removeData("cache.tabs");
			}

			// remove all handlers before, tabify may run on existing tabs after add or option change
			this.lis.add(this.anchors).unbind(".tabs");

			if (o.event !== "mouseover") {
				addState = function (state, el) {
					if (el.is(":not(.ui-state-disabled)")) {
						el.addClass("ui-state-" + state);
					}
				};
				removeState = function (state, el) {
					el.removeClass("ui-state-" + state);
				};
				this.lis.bind("mouseover.tabs", function () {
					addState("hover", $(this));
				});
				this.lis.bind("mouseout.tabs", function () {
					removeState("hover", $(this));
				});
				this.anchors.bind("focus.tabs", function () {
					addState("focus", $(this).closest("li"));
					$(this).parent().addClass("ui-state-focus");
				});
				this.anchors.bind("blur.tabs", function () {
					removeState("focus", $(this).closest("li"));
					$(this).parent().removeClass("ui-state-focus");
				});
			}

			// Show a tab...
			showTab = showFx ? function (clicked, $show) {
				$(clicked).closest("li").addClass("ui-tabs-selected ui-state-active");
				$show.hide().removeClass("ui-tabs-hide") // avoid flicker that way
				.animate(showFx, showFx.duration || "normal", function () {
					self._trigger("show", null, self._ui(clicked, $show[0]));
				});
			} : function (clicked, $show) {
				$(clicked).closest("li").addClass("ui-tabs-selected ui-state-active");
				$show.removeClass("ui-tabs-hide");
				self._trigger("show", null, self._ui(clicked, $show[0]));
			};

			// Hide a tab, $show is optional...
			hideTab = hideFx ? function (clicked, $hide) {
				$hide.animate(hideFx, hideFx.duration || "normal", function () {
					self.lis.removeClass("ui-tabs-selected ui-state-active");
					$hide.addClass("ui-tabs-hide");
					self.element.dequeue("tabs");
				});
			} : function (clicked, $hide, $show) {
				self.lis.removeClass("ui-tabs-selected ui-state-active");
				$hide.addClass("ui-tabs-hide");
				self.element.dequeue("tabs");
			};

			// attach tab event handler, unbind to avoid duplicates from former tabifying...
			this.anchors.bind(o.event + ".tabs", function () {
				var el = this,
					$li = $(el).closest("li"),
					$hide = self.panels.filter(":not(.ui-tabs-hide)"),
					$show = self.element.find(self._sanitizeSelector(el.hash));

				// If tab is already selected and not collapsible or tab disabled or
				// or is already loading or click callback returns false stop here.
				// Check if click handler returns false last so that it is not executed
				// for a disabled or loading tab!
				if (($li.hasClass("ui-tabs-selected")) || $li.hasClass("ui-state-disabled") || $li.hasClass("ui-state-processing") || self.panels.filter(":animated").length || self._trigger("select", null, self._ui(this, $show[0])) === false) {
					this.blur();
					return false;
				}

				o.selected = self.anchors.index(this);

				self.abort();

				if (o.cookie) {
					self._cookie(o.selected, o.cookie);
				}

				// show new tab
				if ($show.length) {
					if ($hide.length) {
						self.element.queue("tabs", function () {
							hideTab(el, $hide);
						});
					}
					self.element.queue("tabs", function () {
						showTab(el, $show);
					});

					self.load(self.anchors.index(this));
				} else {
					throw "Tabs: Mismatching fragment identifier.";
				}
			});

			// disable click in any case
			this.anchors.bind("click.tabs", function () {
				return false;
			});
		},
		_getIndex: function (index) {
			// meta-function to give users option to provide a href string instead of a numerical index.
			// also sanitizes numerical indexes to valid values.
			if (typeof index == "string") {
				index = this.anchors.index(this.anchors.filter("[href$=" + index + "]"));
			}

			return index;
		},
		getIndex: function (index) {
			// meta-function to give users option to provide a href string instead of a numerical index.
			// also sanitizes numerical indexes to valid values.
			if (typeof index == "string") {
				index = this.anchors.index(this.anchors.filter("[href$=" + index + "]"));
			}

			return index;
		},
		destroy: function () {
			var o = this.options;

			this.abort();

			this.element.unbind(".tabs")
				.removeClass("ui-tabs")
				.removeData("tabs");

			this.list.removeClass("ui-helper-reset");

			this.anchors.each(function () {
				var href = $.data(this, "href.tabs"),
					$this;

				if (href) {
					this.href = href;
				}

				$this = $(this).unbind(".tabs");
				$.each(["href", "load", "cache"], function (i, prefix) {
					$this.removeData(prefix + ".tabs");
				});
			});

			this.lis.unbind(".tabs").add(this.panels).each(function () {
				if ($.data(this, "destroy.tabs")) {
					$(this).remove();
				} else {
					$(this).removeClass(["ui-tabs-selected",
						"ui-state-active",
						"ui-state-hover",
						"ui-state-focus",
						"ui-state-disabled",
						"ui-tabs-panel",
						"ui-corner-bottom",
						"ui-tabs-hide"].join(" "));
				}
			});

			if (o.cookie) {
				this._cookie(null, o.cookie);
			}

			return this;
		},

		_insertPanel: function ($panel, $li, index, lis, panels, list) {
			if (index >= lis.length) {
				$li.appendTo(list);
				$panel.appendTo(list[0].parentNode);
			} else {
				$li.insertBefore(lis[index]);
				$panel.insertBefore(panels[index]);
			}
		},

		add: function (url, label, index, insertPanelFunction) {
			if (index === undefined) {
				index = this.anchors.length;
			}
			if (insertPanelFunction === undefined) {
				insertPanelFunction = this._insertPanel;
			}
			var self = this,
				o = this.options,
				$panel,
				$li = $(o.tabTemplate.replace(/#\{href\}/g, url).replace(/#\{label\}/g, label)),
				id = !url.indexOf("#") ? url.replace("#", "") : this._tabId($("a", $li)[0]);

			$li.data("destroy.tabs", true);

			// try to find an existing element before creating a new one
			$panel = self.element.find("#" + id);

			if (!$panel.length) {
				$panel = $(o.panelTemplate)
					.attr("id", id)
					.data("destroy.tabs", true);
			}
			$panel.addClass("ui-tabs-panel ui-tabs-hide");

			insertPanelFunction($panel, $li, index, this.lis, this.panels, this.list);

			o.disabled = $.map(o.disabled, function (n, i) {
				return n >= index ? ++n : n;
			});

			this._tabify();

			if (this.anchors.length == 1) {
				o.selected = 0;
				$li.addClass("ui-tabs-selected ui-state-active");
				$panel.removeClass("ui-tabs-hide");
				this.element.queue("tabs", function () {
					self._trigger("show", null, self._ui(self.anchors[0], self.panels[0]));
				});

				this.load(0);
			}

			this._trigger("add", null, this._ui(this.anchors[index], this.panels[index]));
			return this;
		},

		remove: function (index) {
			index = this._getIndex(index);
			var o = this.options,
				$li = this.lis.eq(index).remove(),
				$panel = this.panels.eq(index).remove();

			// If selected tab was removed focus tab to the right or
			// in case the last tab was removed the tab to the left.
			if ($li.hasClass("ui-tabs-selected") && this.anchors.length > 1) {
				this.select(index + (index + 1 < this.anchors.length ? 1 : -1));
			}

			$li.add($('.inforMenu')).off('contextmenu.inforcontextmenu').unbind();

			o.disabled = $.map(
			$.grep(o.disabled, function (n, i) {
				return n != index;
			}),

			function (n, i) {
				return n >= index ? --n : n;
			});

			this._tabify();

			//this._trigger("remove", null, this._ui($li.find("a")[0], $panel[0]));
			return this;
		},

		enable: function (index) {
			index = this._getIndex(index);
			var o = this.options;
			if ($.inArray(index, o.disabled) == -1) {
				return;
			}

			this.lis.eq(index).removeClass("ui-state-disabled");
			o.disabled = $.grep(o.disabled, function (n, i) {
				return n != index;
			});

			this._trigger("enable", null, this._ui(this.anchors[index], this.panels[index]));
			return this;
		},

		disable: function (index) {
			index = this._getIndex(index);
			var o = this.options;
			// cannot disable already selected tab
			if (index != o.selected) {
				this.lis.eq(index).addClass("ui-state-disabled");

				o.disabled.push(index);
				o.disabled.sort();

				this._trigger("disable", null, this._ui(this.anchors[index], this.panels[index]));
			}

			return this;
		},

		select: function (index) {
			index = this._getIndex(index);
			if (index == -1) {
				return this;
			}
			this.anchors.eq(index).trigger(this.options.event + ".tabs");
			return this;
		},

		load: function (index) {
			index = this._getIndex(index);
			var self = this,
				o = this.options,
				a = this.anchors.eq(index)[0],
				url = $.data(a, "load.tabs"),
				tab = self.element.find(self._sanitizeSelector(a.hash));

			this.abort();

			// not remote or from cache
			if (!url || this.element.queue("tabs").length !== 0 && $.data(a, "cache.tabs")) {
				this.element.dequeue("tabs");
				return;
			}

			// load remote from here on
			this.lis.eq(index).addClass("ui-state-processing");

			if (o.spinner) {
				tab.inforBusyIndicator();
				tab.find("#inforLoadingOverlay").css({
					"top": ($(window).height() - tab.offset().top) / 2,
					"margin-top": "-16px",
					"left": "50%",
					"margin-left": "-16px"
				});
			}

			this.xhr = $.ajax($.extend({}, o.ajaxOptions, {
				url: url,
				success: function (r, s) {
					tab.html(r);

					// take care of tab labels
					self._cleanup();

					if (o.cache) {
						$.data(a, "cache.tabs", true);
					}

					self._trigger("load", null, self._ui(self.anchors[index], self.panels[index]));
					try {
						o.ajaxOptions.success(r, s);
					} catch (e) { }
				},
				error: function (xhr, s) {
					// take care of tab labels
					self._cleanup();

					self._trigger("load", null, self._ui(self.anchors[index], self.panels[index]));
					try {
						// Passing index avoid a race condition when this method is
						// called after the user has selected another tab.
						// Pass the anchor that initiated this request allows
						// loadError to manipulate the tab content panel via $(a.hash)
						o.ajaxOptions.error(xhr, s, index, a);
					} catch (event) { }
				}
			}));

			// last, so that load event is fired before show...
			self.element.dequeue("tabs");

			return this;
		},

		abort: function () {
			// stop possibly running animations
			this.element.queue([]);
			this.panels.stop(false, true);

			// "tabs" queue must not contain more than two elements,
			// which are the callbacks for the latest clicked tab...
			this.element.queue("tabs", this.element.queue("tabs").splice(-2, 2));

			// terminate pending requests from other tabs
			if (this.xhr) {
				this.xhr.abort();
				delete this.xhr;
			}

			// take care of tab labels
			this._cleanup();
			return this;
		},

		url: function (index, url) {
			this.anchors.eq(index).removeData("cache.tabs").data("load.tabs", url);
			return this;
		},

		length: function () {
			return this.anchors.length;
		}
	});

})(jQuery);

/*
* Infor Tabset Control
*/

(function ($) {
	$.widget("ui.inforTabset", {
		options: {
			editable: false, //Will allow you to double click in the headers to edit
			closable: false, //Will allow you to close headers
			sortable: false, //Will allow you to drag headers to sort
			addButton: false,
			rename: null,
			add: null,
			close: null,
			sort: null,
			showLoadingIndicator: false,
			animate: true, //add a cross fade animation.
			fillToBottom: true, //if true the control will stretch to the bottom of the page in height automatically.
			toolTips: {
				addButton: null,
				closeButton: null
			},
			moduleTabs: false, //special styled tabs for application level
			verticalTabs: false, // implements vertical tabs.
			contextMenuOptions: [{
				label: Globalize.localize("CloseTab"),
				href: "#close"
			}, {
				label: Globalize.localize("CloseOtherTabs"),
				href: "#closeOthers"
			}]
			// {label: Globalize.localize("CloseAllTabs"), href: "#closeAll"}
		},
		_init: function () {
			var o = this.options,
				$tabs = $(this.element),
				self = this,
				contH, tabObj, parents;

			//localize tooltips
			if (!o.toolTips.addButton) {
				o.toolTips.addButton = Globalize.localize("CreateTab");
			}

			if (!o.toolTips.closeButton) {
				o.toolTips.closeButton = Globalize.localize("CloseTab");
			}

			//Add close buttons if required
			if (o.closable) {
				this._addCloseButton($tabs, o);
			}

			if (o.editable) {
				this._addEditors($tabs, null, false, o);
			}

			if (o.addButton) {
				this._addAddButton($tabs, o);
			}

			$tabs.tabs({
				spinner: (o.showLoadingIndicator ? "<div class='inforBusyIndicator large'></div>" : "")
			});

			if ($(this.element).hasClass("inforModuleTabs")) {
				this.options.moduleTabs = true;
			}

			this._addButtons($tabs, o);

			//hide any visibile tooltips..
			$tabs.bind('tabsselect', function () {
				$("#inforTooltip").hide();

				if (o.editable) {
					$("input.inforTabHeaderEditor").trigger("blur");
				}
			});

			//refresh grids on show
			$tabs.bind('tabsshow', function (event, ui) {
				self._sizeInternalElements($(ui.panel), $tabs);
			});

			//Make the Tabs Sortable
			if (o.sortable) {
				if (!$tabs.find(".inforTabset a:first").prev().is(".inforDragHandle")) {
					$tabs.find(".inforTabset a").before("<div class='inforDragHandle'></div>").disableSelection();
				}
				
				$tabs.find(".inforTabset:first").sortable({
					tolerance: 'touch',
					axis: "x",
					forcePlaceholderSize: true,
					handle: ".inforDragHandle",
					placeholder: "inforDragPlaceholder",
					//We can ignore drag on some stuff with
					//items: 'li[id!=dropdownli]',
					start: function (event, ui) {
						ui.item.css("width","auto").addClass("ui-state-hover");
					},
					stop: function (e, ui) {
						ui.item.css({
							"position": "",
							"left": "",
							"top": ""
						}).removeClass("ui-state-hover");

						//post action to save tab index
						if (o.sort) {
							o.sort(this, ui, o);
						}
					}
				}).disableSelection();
			}

			//handle being in a splitter top pane
			if ($tabs.parent().is("#topPane")) {
				o.fillToBottom = false;
				$tabs.closest(".inforHorizontalSplitter").bind("resize", function (e) {
					$tabs.find(".ui-tabs-panel").height($tabs.parent().height() - 25);
				});
			}

			//handle being in a splitter bottom pane
			if ($tabs.parent().is("#bottomPane")) {
				o.fillToBottom = false;
				$tabs.closest(".inforHorizontalSplitter").bind("resize", function (e) {
					$tabs.find(".ui-tabs-panel").height($tabs.parent().height() - 45);
				});
				$tabs.find(".ui-tabs-panel").height($tabs.parent().height() - 45);
			}

			if (o.verticalTabs) {
				$tabs.addClass("inforVerticalTabs");
			}

			//setup scrolling on the tab control itself.
			if (o.fillToBottom) {
				$tabs.addClass("inforScrollableArea");
				$tabs.inforScrollableArea();
			} else {
				contH = $tabs.height();
				$tabs.find(".ui-tabs-panel").each(function () {
					var panel = $(this);
					panel.height(contH - 43);
					if (o.verticalTabs) {
						panel.height(contH - 9).css("overflow", "auto");
					}
				});
			}

			//set autowidth
			tabObj = $tabs.tabs({
				show: function (e, ui) {
					var lastOverflow, lastPos, gridOverflow, lastOpenedPanel;

					if (o.animate && !o.verticalTabs) {
						//add cross fade animation
						lastOpenedPanel = $(this).data("lastOpenedPanel");

						if (!$(this).data("topPositionTab")) {
							$(this).data("topPositionTab", $(ui.panel).position().top);
						}

						//Dont use the builtin fx effects. This will fade in/out both tabs, we dont want that
						//Fadein the new tab yourself
						$(ui.panel).hide().fadeIn(400);

						if (lastOpenedPanel) {
							lastOverflow = lastOpenedPanel.css("overflow");
							lastPos = lastOpenedPanel.css("position");
							gridOverflow = lastOpenedPanel.find(".slick-viewport").css("overflow");

							lastOpenedPanel.find(".slick-viewport").css("overflow", "hidden");
							// 1. Show the previous opened tab by removing the jQuery UI class
							// 2. Make the tab temporary position:absolute so the two tabs will overlap
							// 3. Set topposition so they will overlap if you go from tab 1 to tab 0
							// 4. Remove position:absolute after animation
							lastOpenedPanel.css("overflow", "hidden")
								.toggleClass("ui-tabs-hide")
								.css("position", "absolute")
								.css("top", $(this).data("topPositionTab") + "px")
								.fadeOut(400, function () {
									var panel = $(this);
									panel.css("position", (lastPos ? lastPos : ""));
									panel.css("overflow", (lastOverflow ? lastOverflow : ""));
									self._sizeInternalElements($(ui.panel), $tabs);

									if (gridOverflow) {
										panel.find(".slick-viewport").css("overflow", gridOverflow);
									}
								});
						}

						//Saving the last tab has been opened
						$(this).data("lastOpenedPanel", $(ui.panel));
					}

					$(ui.panel).find('.autoLabelWidth').each(function() {
						var container = $(this);
						container.find('.inforLabel').autoWidth();
					});
					
					self._scrollTabIntoView($tabs, $tabs.find("ul.inforTabset:first"));
					self._sizeInternalElements($(ui.panel), $tabs);
				}
			});

			if (o.moduleTabs) {
				$tabs.children(".inforTabset").addClass("inforModuleTabs");
			} else {
				$tabs.children(".inforTabset").addClass("inforNormalTabs");
			}

			//add levels
			parents = $tabs.parents(".ui-tabs");

			if (parents.length > 0) {
				parents.find(".inforTabset").not(".level0, .level1, .level2, .level3, .inforModuleTabs").each(function (index) {
					$(this).addClass("level" + ($(this).parents(".ui-tabs-panel").length + 1));
				});
			}

			if (o.verticalTabs) {
				tabObj.addClass("inforVerticalTabs");
				self._sizeVerticalTabs($tabs);
			}
			
			$tabs.find(".ui-tabs-panel:visible").find('.autoLabelWidth').each(function() {
				var container = $(this);
				container.find('.inforLabel').autoWidth();
			});
			
			//Find context Menus and initialize.
			$tabs.find("ul .inforContextMenu").each(function () {
				var menu = $(this),
					a = menu.prev();
					
				menu.parent().addClass("downArrow");	// ui-state-disabled
				a.inforContextMenu({
					menu: menu.attr("id"),
					invokeMethod: 'toggle',
					positionBelowElement: false,
					beforeOpening: function() {
						$(a.attr("href")).find(".inforTabSection").hide();
					},
					position: {my: "left top-1", at: "left bottom", of: a.parent()}
				}, function(id, a) {
					$("#"+id).parent().children("div").hide();
					$("#"+id).show();
				});
				menu.parent().appendTo("body");
			});
		},
		_sizeInternalElements: function (panel, $tabs) {
			panel.find(".inforDataGrid").each(function () {
				var grid = $(this).data("gridInstance");
				if (grid) {
					grid.reinit();
				}
			});

			panel.find(".ui-tabs").each(function () {
				//nested tabs
				var tab = $(this).data("uiInforTabset");
				if (tab) {
					tab.handleResize(null, true);
				}
			});

			panel.find(".inforSplitter").each(function () {
				var splitter = $(this).data("uiInforSplitter");
				if (splitter) {
					splitter.handleResize(null, true);
				}
			});

			if ($tabs.data("uiInforScrollableArea")) {
				$tabs.data("uiInforScrollableArea")($tabs);
			}
		},
		_setOption: function (key, value) {
			$.Widget.prototype._setOption.apply(this, arguments);
		},
		_addAddButton: function ($tabs, o) {
			if (!o.addButton) {
				return;
			}

			var $button = $("<button type='button' class=\'inforAddTabButton\' title='" + o.toolTips.addButton + "'><span class='rightSlice'></span></button>");

			$tabs.find('.inforTabset').append($button);

			$('.inforAddTabButton').click(function () {
				//Adding a new tab...
				var newId = "#tab" + $tabs.tabs().children().size();
				$tabs.inforTabset("add", newId, "New Tab", true);
			});
		},
		_adjustAddNewButton: function ($tabs, o) {
			if (!o.addButton) {
				return;
			}
			//moves this html so its always at the end
			var addTab = $tabs.find(".inforAddTabButton");
			addTab.remove();
			this._addAddButton($tabs, o);
		},
		_addEditors: function ($tabs, ui, isNew, o) {
			var list = $tabs.find('ol,ul').eq(0),
				lis = $('li:has(a[href])', list),
				last = null;

			lis.each(function () {
				var $thisA = $(this).find('a');
				last = $thisA;

				//replaces jeditable plugin in much less lines.
				$thisA.dblclick(function () {
					//add a text box to this elem
					var width = $thisA.width(),
						$input = $('<input class="inforTextbox noTrackDirty inforTabHeaderEditor">').val($thisA.text()).width(width);

					$thisA.css("opacity", "0").after($input);
					$input.css({
						"position": "absolute"
					});

					if (!o.moduleTabs) {
						$input.css({
							"left": $thisA.position().left + 2 + "px",
							"top": "2px"
						});
					} else {
						$input.css({
							"left": $thisA.position().left + 2 + "px",
							"top": "5px",
							"font-size": "1.5em"
						});
					}

					//Focus and add events
					$input.focus().select().blur(function () {
						var value = $input.val();
						$thisA.css("opacity", "").text(value);
						// execute callback
						if (!isNew && o.rename) {
							o.rename(this, value, o);
						}

						if (isNew && o.add) {
							o.add(this, $input, value, o);
						}

						$input.remove();
						isNew = false;
					});
				});
			});

			if (isNew) {
				last.trigger('dblclick');
			}
		},
		_addMenuToPage: function ($tabs, o) {
			var list = $tabs.find('ol,ul').eq(0),
				lis = $('li:has(a[href])', list),
				ul = $("<ul id='inforTabMenu' class='inforContextMenu'></ul>"),
				i = 0,
				text, tabLi, originalIndex;

			$("#inforTabMenu").parent(".inforMenu").remove();

			$tabs.after(ul);

			lis.each(function () {
				var $this = $(this),
					$thisA = $(this).find('a');

				if (!$thisA.parent().hasClass("inforHiddenTab")) {
					text = $thisA.html();
					tabLi = $("<li class='" + i + ($thisA.parent().hasClass("ui-state-disabled") ? " disabled" : "") + "'><a href='#" + i + "'>" + text + "</a></li>");

					if ($thisA.data("text")) {
						text = $thisA.data("text");
					}

					tabLi.data("tabItem", $this);
					//ui-state-disabled
					ul.append(tabLi);
				}
				i++;
			});

			//add sort behaviors
			if (o.sortable) {
				$(ul).addClass("connectedSortable").sortable({
					placeholder: 'inforDragPlaceholder',
					helper: 'clone',
					forcePlaceholderSize: true,
					revert: 100,
					delay: 500,
					connectWith: ".connectedSortable",
					start: function (event, ui) {
						originalIndex = ui.item.index();
					},
					stop: function (event, ui) {
						var elem = ui.item.data("tabItem");

						if (originalIndex == ui.item.index()) {
							return;
						}

						if (ui.originalPosition.top > ui.position.top) {
							list.children().eq(ui.item.index()).before(elem); //dragged up
						} else {
							list.children().eq(ui.item.index()).after(elem); //dragged down
						}
					}
				});
			}
		},
		closeTab: function (tabLi) {
			var tabIndex = tabLi.children('a').attr('href'),
				$tabs = $(this.element),
				self = this,
				o = this.options,
				closeOk;

			if (o.close) {
				closeOk = o.close($tabs, tabIndex, o);
				if (!closeOk) {
					return;
				}
			}
			//Remove tab using UI method
			tabLi.fadeOut(250, function () {
				$tabs.tabs("remove", tabIndex);
				self._refreshScroll($tabs);
			});
		},
		_addCloseButton: function ($tabs, o) {
			var list = $tabs.find('ol,ul').eq(0),
				lis = $('li:has(a[href])', list).not(".notClosable"),
				self = this,
				i, item,
				menu = $("#inforTabContextMenu");

			if (menu.length === 0) {
				menu = $('<ul id="inforTabContextMenu" class="inforContextMenu"></ul>');
				for (i = 0; i < o.contextMenuOptions.length; i++) {
					item = '<li><a href="' + o.contextMenuOptions[i].href + '">' + o.contextMenuOptions[i].label + '</a></li>';
					menu.append(item);
				}
				menu.appendTo("body");
			}

			lis.each(function () {
				var $thisLi = $(this);
				if ($thisLi.find(".inforTabCloseButton").length === 0) {
					$thisLi.append(
						$('<button></button>')
						.addClass('inforTabCloseButton')
						.attr('title', o.toolTips.closeButton)
						.on("click",function (e) {
							self.closeTab($(this).parent());
						}).append("<span></span>"));
						
					//add right click menu.
					$thisLi.inforContextMenu({
						menu: 'inforTabContextMenu'
					},

					function (action, el, pos) {
							var lis = null;

							if (action == "close") {
								self.closeTab(el);
							}

							if (action == "closeOthers") {
								lis = $('li:has(a[href])', $tabs.find('ol,ul').eq(0)).not(".notClosable");
								lis.not(el).each(function (e) {
									self.closeTab($(this));
								});
							}

							if (action == "closeAll") {
								lis = $('li:has(a[href])', $tabs.find('ol,ul').eq(0)).not(".notClosable");
								lis.each(function (e) {
									self.closeTab($(this));
								});
							}
						});
				}
				//If width not assigned, the hidden tabs width cannot be calculated properly in _adjustLeftPosition
			});
		},
		remove: function (tabId) {
			var $tabs = $(this.element),
				anchors, index;

			if ((typeof tabId) == "string") { //lookup the tab id...
				anchors = $tabs.tabs().data().tabs.anchors;
				index = anchors.index(anchors.filter("[href$=" + tabId + "]"));

				$tabs.tabs('remove', index);
				return;
			}

			$tabs.tabs('remove', tabId);
			this._refreshScroll($tabs);
		},
		add: function (tabId, label, enterEditMode, callback) {
			var $tabs = $(this.element),
				o = this.options,
				id = null,
				callbackEvent = null,
				callbackUi = null;

			tabId = !tabId.indexOf("#") ? tabId.replace(/ /g, "_").replace(/\./g, ' ') : tabId;

			$tabs.bind("tabsadd.add", function (event, ui) {
				id = $(ui.tab).attr("href");
				$tabs.tabs("select", id);
				callbackEvent = event;
				callbackUi = ui;
			});

			$tabs.tabs('add', tabId, label);
			$tabs.unbind("tabsadd.add");

			//Add extras.
			this._adjustAddNewButton($tabs, o);

			if (o.closable) {
				this._addCloseButton($tabs, o);
			}

			if (o.sortable) {
				$tabs.find('a[href="'+tabId+'"]').before("<div class='inforDragHandle'></div>").disableSelection();
			}
			
			if (enterEditMode && o.editable) {
				this._addEditors($tabs, this, true, o);
			}

			this._refreshScroll($tabs);

			if (callback) { //execute the callback
				callback(callbackEvent, callbackUi);
			}
		},
		_addButtons: function ($tabs, o) {
			var content = $tabs.find("ul.inforTabset:first"),
				self = this,
				width = 0,
				btnCount = 0,
				oldWidth = 0,
				oldheight,
				moduleButtons = $('<div class="inforTabButton"></div>'),
				chevron = $('<div class="inforTabButton"><button type="button" class="inforMoreButton">' + Globalize.localize("More").replace("...","") + '</button></div>');

			if (o.moduleTabs) {
				$tabs.find(".inforModuleHeaderRight:first").children().each(function (index, ui) {
					$(ui).appendTo(moduleButtons);
					btnCount++;
				});
			}

			content.after(chevron);

			if (o.moduleTabs) {
				content.after(moduleButtons);
			}

			chevron.find('button').bind("click", function (e) {
				self._addMenuToPage($tabs, o);
				var $button = $(this).parent();
				$("body").inforContextMenu({
					menu: 'inforTabMenu',
					invokeMethod: 'immediate',
					positionBelowElement: true,
					offsetTop: -2,
					position: {
						my: "right top",
						at: "right bottom",
						of: $button,
						collision: "fit"
					},
					event: e,
					onClose: function () {
						$("#inforTabMenu").parent().remove();
					}
				},

				function (action, el, pos, obj) {
					if (obj.hasClass("hiddenTab")) {
						var tabId = obj.attr("id");
						$tabs.inforTabset('add', tabId, obj.html(), false);
					} else { //reopen the tab.
						$tabs.tabs('select', parseInt(action, 10));
						if (!self.options.moduleTabs) {
							self._scrollTabIntoView($tabs, content);
						}
					}
				});
			});

			chevron.hide().addClass("inforHiddenTab");

			this._refreshScroll($tabs);

			var reinit = function () {
				self._refreshScroll($tabs);
				self._sizeVerticalTabs($tabs);
			};

			this.handleResize = function (e, force) {
				if (self._resizeTimer) {
					clearTimeout(self._resizeTimer);
				}

				if (force || (self._windowHeight != $(window).height()) || (self._windowWidth != $(window).width())) {
					self._resizeTimer = setTimeout(reinit, 1);
					self._windowHeight = $(window).height();
					self._windowWidth = $(window).width();
				}
			};

			$(window).unbind("throttledresize.inforTabset"+ $tabs[0].id).bind('throttledresize.inforTabset'+ $tabs[0].id, this.handleResize);
		},
		_sizeVerticalTabs: function ($tabs) {
			$tabs.find("li a").css("width", "auto");
			$tabs.find("li a").parent().css("width", "auto");

			var self = this,
				tabWidth = $tabs.find("li:first").width() + 28,
				ul, width;

			if (self.options.verticalTabs) {
				ul = $tabs.find("ul:first");
				width = $(window).width() - (ul.width() + ul.position().left + 84);

				//$tabs.find(".ui-tabs-panel").width(width);
				$tabs.find("li a").each(function () {
					var lia = $(this);
					lia.width(tabWidth);
					lia.parent().width(tabWidth);
				});
			}
		},
		_scrollTabIntoView: function ($tabs, content) {
			var sel = $tabs.find(".ui-tabs-selected:first"),
				moreWidth = 0, //$tabs.find(".inforMoreButton").parent().width(),
				left = 0,
				toElemOffset, totalOffset;
			
			if (sel.length == 0) {
				return;
			}
			
			toElemOffset = sel.position().left + sel.width(),
			totalOffset = $tabs.position().left + $tabs.width();

			$tabs.find(".inforTabButton").each(function () {
				moreWidth += $(this).width();
			});

			left = $tabs.width() - content.width() - 22 + (sel.is(":last-child") ?  moreWidth - 15 : sel.width());

			if (sel.length < 1) {
				return;
			}

			if (sel.is(":first-child") ) {
				left = 0;
			}

			//sel[0].scrollIntoView();	//sort of works...
			//sel.find("a").focus();
			content.css("left", left);
			if (toElemOffset < 0 || toElemOffset < totalOffset) {
			content.css("left", 0);
			}
		},
		_refreshScroll: function ($tabs) {
			var headerWidth = 32,
				self = this,
				tabsWidth = $tabs.width(),
				content = $tabs.find("ul.inforTabset:first"),
				overFlowButton = $tabs.find(".inforMoreButton"),
				maxWidth = content.parent().css("max-width");

			//calculate tabs width
			content.find("li").each(function () {
				headerWidth += $(this).outerWidth();
			});

			if (headerWidth < tabsWidth) {
				overFlowButton.parent().hide();
				content.css({
					"width": "auto",
					"left": "0"
				});
			} else {
				overFlowButton.parent().show().removeClass("inforHiddenTab"); //width("32px");
				content.width(headerWidth + overFlowButton.parent().width() + 20);

				if (maxWidth) {
					content.css("max-width", maxWidth);
				}

				self._scrollTabIntoView($tabs, content);

				//set tooltip on last tab
				$tabs.find("li a").each(function () {
					var a = $(this);
					if (!a.attr("title")) {
						a.attr("title", a.text());
					}
				});
			}
		}
	});
}(jQuery));/*
* Infor Tile Panel
*/
(function ($) {
	$.widget("ui.inforTilePanel", {
		options: {
			sortable: true
		},
		_init: function () {
			var self = this,
				panel = this.element,
				masonryOpts = {
					itemSelector: '.inforPanelItem',
					isAnimated: true,
					columnWidth: function (containerWidth) {
						return containerWidth / 250;
					},
					isRTL: Globalize.culture().isRTL
				};

			//Setup Tile Panel using jQuery Masonry Plugin.
			panel.addClass("inforTilePanel").masonry(masonryOpts);

			//Add Sortability.
			if (this.options.sortable) {
				this._addSortable(panel);
			}

			panel.find(".inforCountDown").each(function () {
				self._setupCountDowns($(this));
			});

			self._setupSettings(panel);
			self._setupExpand(panel);
			panel.parent().css("overflow", "auto"); //allow scrolling
			$("body").removeClass("inforHidden");
		},
		_setupExpand: function (panel) {
			var self = this;
			panel.find(".inforPanelExpand").each(function () {
				var expandBtn = $(this),
					item = expandBtn.closest(".inforPanelItem");

				expandBtn.attr("title", Globalize.localize("ExpandCollapse")).on("click", function () {
					self._toggleExpand($(this));
				});

				if (expandBtn.hasClass("expanded")) {
					this._toggleExpand(expandBtn);
				}  
			});
		},
		_toggleExpand: function (button) {
			var panel = this.element,
				item = button.closest(".inforPanelItem"),
				expanding = !item.hasClass("expanded");

			if (expanding) {
				item.addClass("expanded").css("height", item.height() * 2);
				button.addClass("up");
				item.find(".inforDataGrid").css("margin-top", "-8px").find(".slick-row:first").css("border", "");
			} else {
				item.removeClass("expanded").css("height", "");
				button.removeClass("up");
				item.find(".inforDataGrid").css("margin-top", "");
				item.find(".inforDataGrid").css("margin-top", "-8px").find(".slick-row:first").css("border", "none");
			}

			panel.masonry('reload');

			setTimeout(function () {
				item.find(".inforDataGrid").each(function () {
					var grid = $(this);
					grid.height(item.find(".inforPanelBody").height() + (!expanding ? -25 : -25));
					grid.data("gridInstance").resizeCanvas();
					if (!expanding) {
						grid.find(".slick-row:first").css("border", "none");
					}
				});
			}, 1);
		},
		_addSortable: function (panel) {
			panel.sortable({
				distance: 20,
				forcePlaceholderSize: true,
				items: '.inforPanelItem',
				placeholder: 'inforPanelPlaceholder inforPanelItem',
				tolerance: 'pointer',
				handle: '.inforPanelHeader',
				cursor: 'move',
				start: function (event, ui) {
					var item = ui.item,
						parent = ui.item.parent();

					ui.item.find(".inforPanelSettings").hide();
					item.addClass('inforPanelItemDragging');
					parent.masonry('option', {
						isAnimated: false
					}).masonry('reload').masonry('option', {
						isAnimated: true
					});
				},
				change: function (event, ui) {
					var parent = ui.item.parent();
					//.masonry( 'option', {isAnimated: false} ) ?? if we dont like the animaition.
					parent.masonry('option', {
						isAnimated: false
					}).masonry('reload').masonry('option', {
						isAnimated: true
					});
				},
				stop: function (event, ui) {
					var item = ui.item,
						parent = ui.item.parent();

					item.removeClass('inforPanelItemDragging');
					parent.masonry('option', {
						isAnimated: false
					}).masonry('reload').masonry('option', {
						isAnimated: true
					});
				}
			});
		},
		_setupCountDowns: function (panel) {
			var countTo = Date.parse(panel.text()),
				interval = setInterval(function () {
					var now = new Date(),
					diff = countTo - now,
					days, dd, hh, mm, ss, hours, mins, secs, html;

					days = Math.floor(diff / (1000 * 60 * 60 * 24));
					hours = Math.floor(diff / (1000 * 60 * 60));
					mins = Math.floor(diff / (1000 * 60));
					secs = Math.floor(diff / 1000);

					dd = days;
					hh = hours - days * 24;
					mm = mins - hours * 60;
					ss = secs - mins * 60;

					html = '<table><tbody><tr><td>' + dd + '</td><td>&nbsp;</td><td class="hour">' + hh + '</td><td class="min">' + mm + '</td><td>' + ss + '</td></tr><tr><td>Days</td><td>&nbsp;</td><td>Hours</td> <td>Minutes</td> <td>Seconds</td> </tr> </tbody></table>';
					panel.html(html).fadeIn();

					clearInterval(interval);    //ignore jslint
				}, 1000);
		},
		_setupSettings: function (panel) {
			//setup the settings animations - will go in the control
			panel.find(".inforPanelSettingsButton").click(function () {
				var panel = $(this).closest(".inforPanelItem");
				panel.find(".inforPanelHeader, .inforPanelBody, .inforPanelSettings").hide("");

				if (panel.hasClass("flipped")) {
					panel.removeClass("flipped");
					panel.find(".inforPanelHeader, .inforPanelBody").show("");

				} else {

					panel.addClass("flipped");
					panel.find(".inforPanelSettings").show("");
				}
			});
		},
		setupDragDrop: function (sourceGridDiv, sourcePane) {
			var sourceGrid = sourceGridDiv.data("gridInstance"),
				dragTarget = $("#campaignStatus"),
				i;

			//subscribe events to the drag source
			sourceGrid.onDragInit.subscribe(function (e) {
				// prevent the object from cancelling drag'n'drop by default
				e.stopImmediatePropagation();
			});

			sourceGrid.onDragStart.subscribe(function (e, dd) {
				var cell = sourceGrid.getCellFromEvent(e),
					data = sourceGrid.getData().getItems(),
					heightTotal, proxy, selectedRows, cellNode, width, height;

				if (!cell) {
					return;
				}

				dd.row = cell.row;
				if (!data[dd.row]) {
					return;
				}

				if (Slick.GlobalEditorLock.isActive()) {
					return;
				}

				e.stopImmediatePropagation();
				selectedRows = sourceGrid.getSelectedRows();

				if (!selectedRows.length || $.inArray(dd.row, selectedRows) == -1) {
					selectedRows = [dd.row];
					sourceGrid.setSelectedRows(selectedRows);
				}

				dd.rows = selectedRows;
				dd.count = selectedRows.length;

				//copy the cell nodes...
				proxy = $("<span class='inforDragProxy'></span>");
				heightTotal = 0;

				for (i = 0; i < selectedRows.length; i++) {
					cellNode = $(sourceGrid.getCellNode(selectedRows[i], 0));
					width = cellNode.width();
					height = cellNode.height();

					heightTotal += height;

					cellNode.clone().height(height).width(width)
						.css("top", (heightTotal - height > 0 ? heightTotal - height : 0)).removeClass("selected").appendTo(proxy);
				}

				proxy.width(width).height(heightTotal).appendTo("body");
				dd.helper = proxy;
				proxy.find('.autoLabelWidth').find('.inforLabel').autoWidth();
				proxy.find('.inforCardstackCell').css("padding", "10px").addClass("inforPanelBody");
				proxy.find('.inforCardstackHeading').css("left", "-75px");

				dragTarget.addClass("inforPanelDragTarget ");
				sourcePane.parent().find(".inforPanelItem").not(dragTarget).not(sourcePane).css({
					opacity: 0.1
				});
				return proxy;
			});

			sourceGrid.onDrag.subscribe(function (e, dd) {
				e.stopImmediatePropagation();
				dd.helper.css({
					top: e.pageY + 14,
					left: e.pageX + 14
				});
			});

			sourceGrid.onDragEnd.subscribe(function (e, dd) {
				e.stopImmediatePropagation();
				dd.helper.remove();
				dragTarget.removeClass("inforPanelDragTarget");
				sourcePane.parent().find(".inforPanelItem").not(dragTarget).not(sourcePane).css({
					opacity: 1
				});
			});

			dragTarget.bind("dropend", function (e, dd) {
				$(dd.available).removeClass("dragTarget");
			})
				.bind("drop", function (e, dd) {
					if (!dd.helper) {
						return; //to avoid this firing on row move/column drag exc..
					}

					$(this).find(".inforLabelLarge").html(dd.helper.find(".inforCardstackHeading").html());
				});

			$.drop({
				mode: true
			}); //set mode so that when we drag onto the element it drops as apposed to if the proxy touches it
		}
	});
}(jQuery));/*
* Infor Time Field
*/
(function ($) {
	$.widget("ui.inforTimeField", {
		options: {
			timeFormat: Globalize.culture().calendar.patterns.t, //Globalize Time Format https://github.com/jquery/globalize#dates
			interval: 30, //Interval in minutes between the times
			range: [8, 20] //Limit the intervals to a range. Fx working hours 9-5 (24 hour clock) 0-23
		},
		_init: function () {
			var self = this;
			self.input = $(this.element).attr("aria-haspopup", true);
			
			self.showPeriod = (self.options.timeFormat.indexOf("t") > -1);
			self.isHHLeadingZero = self.options.timeFormat.toLowerCase().indexOf("hh") > -1;
			self.isMMLeadingZero = self.options.timeFormat.toLowerCase().indexOf("mm") > -1;
			self.is24HZero = self.options.timeFormat.indexOf("H") > -1;

			//make sure its not initialized twice.
			if (self.input.data("isInitialized")) {
				return;
			}

			self._refreshTimes();

			//add trigger button styling
			self.input.data("isInitialized", true).inforTriggerField({
				editable: true,
				click: function () {
					var popupContents = self._addDropdowns();
					$(self.input).inforPopover({placement: "right", animate: false,  trigger: "manual", content: popupContents,
							onShow: function (e, ui) {
									ui.find(".inforDropDownList").inforDropDownList();
									ui.find("input:first").focus();
							},
							onClose: function (e, ui) {
								var hh = ui.find("select").eq(0).val(),
									mm = ui.find("select").eq(1).val(),
									tt = ui.find("select").eq(2).val(),
									date = "";

								date = hh + ":" + mm;
								if (self.showPeriod) {
									date += " " + tt;
								}

								self.input.val(date).focus();
						}});				}
			});

			self._handleEdits();
			if (self.element.val()){
				self._validate();
			}
		},
		_addDropdowns: function () {
			//append three drop downs.
			var self = this,
				i,
				hours = $("<select class='inforDropDownList'</select>"),
				mins = $("<select class='inforDropDownList'></select>"),
				ampm = $("<select class='inforDropDownList'></select>"),
				hhAdded = [], mmAdded = [],
				formattedD = self.input.val();
				selhh = formattedD.substr(0, formattedD.indexOf(":"));
				selmm = formattedD.substr(formattedD.indexOf(":")+1,2);
				seltt = formattedD.substr(formattedD.indexOf(" ")+1);
				
			self._refreshTimes();

			for (i = 0; i < self.times.length-1 ; i++) {
				var hh = self.times[i].substr(0, self.times[i].indexOf(":")),
					mm = self.times[i].substr(self.times[i].indexOf(":") + 1, 2),
					tt = self.times[i].substr(self.times[i].indexOf(" ") + 1),
					opt;
				
				if (self.showPeriod && ampm.find("option:contains('" + tt + "')").length === 0 ) {
					opt = $("<option>"+ tt +"</option>");
					if (tt === seltt) {
						opt.attr("selected","selected");
					}
					ampm.append(opt);
				}
				if ($.inArray(mm, mmAdded) == -1 ) {
					opt = $("<option>"+ mm +"</option>");
					mmAdded.push(mm);
					if (mm === selmm) {
						opt.attr("selected","selected");
					}
					mins.append(opt);
				}
				if ($.inArray(hh, hhAdded) == -1) {
					opt = $("<option>"+ hh +"</option>");
					hhAdded.push(hh);
					if (hh === selhh) {
						opt.attr("selected","selected");
					}
					hours.append(opt);
				}
			}
			self.popup= $("<div class='inforTimePopup'>").append(hours,  "<span>:</span>", mins);
			if (self.showPeriod) {
				self.popup.append(ampm);
			}
			return self.popup;
		},
		_refreshTimes: function() {
			var self = this,
				i = 0,
				hour = 0,
				formattedD = null,
				hh, mm, tt,
				date = new Date(2013, 1, 1, 0, 0, 0, 0);

			self.times = [], self.hours = [], self.minutes = [], self.periods = [];

			for (i = 0; i <= (1440 / self.options.interval) ; i++) {
				hour = date.getHours(),
				formattedD = Globalize.format(date, self.options.timeFormat);
				hh = formattedD.substr(0, formattedD.indexOf(":"));
				mm = formattedD.substr(formattedD.indexOf(":")+1,2);
				tt = formattedD.substr(formattedD.indexOf(" ")+1);

				if (hour >= self.options.range[0] && hour <= self.options.range[1]) {
					self.times.push(formattedD);
					if ($.inArray(hh, self.hours) === -1) {
						self.hours.push(hh);
					}
					if ($.inArray(mm, self.minutes) === -1) {
						self.minutes.push(mm);
					}
					if ($.inArray(tt, self.periods) === -1) {
						self.periods.push(tt);
					}
				}
				date.setMinutes(date.getMinutes() + self.options.interval);
			}
		},
		_getCursorPosition: function() {
			var self = this,
				input = self.input.get(0);

			if ('selectionStart' in input) {// Standard-compliant browsers
				return input.selectionStart;
			} else if (document.selection) {// IE fix
				input.focus();
				var sel = document.selection.createRange(),
				selLen = document.selection.createRange().text.length;

				sel.moveStart('character', - input.value.length);
				return sel.text.length - selLen;
			}
		},
		_handleEdits: function () {
			var self = this,
				oldValue = self.input.val();

			self.input.on("focus click",function () {
				if (self.input.prop("disabled")) {
					return;
				}

				var pos = self._getCursorPosition();
				self._highlight((pos >= 0 && pos <= 2 ? 'hour' : (pos >= 3 && pos <= 5 ? 'minute' : 'period')));
			});

			self.input.blur(function () {
				self._validate();
				if (oldValue !== self.input.val()) {
					self.input.trigger("change");
				}
			});

			self.input.keydown(function (e) {
				if (self.input.prop("disabled") || self.input.prop("readonly")) {
					return;
				}

				//handle keys
				switch (e.keyCode) {
					case 9: //tab
						switch (self.highlightedUnit) {
							case 'hour':
								if (!e.shiftKey) {
									e.preventDefault();
									self._highlight('minute');
								}
								break;
							case 'minute':
								if (e.shiftKey) {
									e.preventDefault();
									self._highlight('hour');
								} else if (self.showPeriod){
									e.preventDefault();
									self._highlight('period');
								}
								break;
							case 'period':
								if (e.shiftKey) {
									self._highlight('minute');
									e.preventDefault();
								}
								break;
						}
						break;
					case 37: // left arrow
						e.preventDefault();
						self._highlight((self.highlightedUnit === "hour" && self.showPeriod ? "period" : (self.highlightedUnit === "minute" ? "hour": "minute")));
						break;
					case 38: // up arrow
						e.preventDefault();
						switch (self.highlightedUnit) {
							case 'hour':
								self._increment('hour', 1);
								break;
							case 'minute':
								self._increment('minute', 1);
								break;
							case 'period':
								self._increment('period', 1);
								break;
						}
						break;
					case 39: // right arrow
						e.preventDefault();
						self._highlight((self.highlightedUnit === "hour" ? "minute" : (self.highlightedUnit === "minute" && self.showPeriod ? "period" : "hour")));
						break;
					case 40: // down arrow
						e.preventDefault();
						switch (self.highlightedUnit) {
								case 'hour':
								self._increment('hour', -1);
							break;
								case 'minute':
								self._increment('minute', -1);
							break;
								case 'period':
								self._increment('period', -1);
								break;
						}
						break;
				}
			});
		},
		_validate: function() {
			var self = this,
				arr, timeArray, hour, min, period,
				time = self.input.val();
			
			if (self.input.is('[readonly]')) {
				return;
			}
			
			if (self.showPeriod) {
				arr = time.split(' ');
				timeArray = arr[0].split(':');
				period = arr[1];
			} else {
				timeArray = time.split(':');
			}

			hour = parseInt(timeArray[0], 10);
			min = parseInt(timeArray[1], 10);

			if (isNaN(hour)) {
				hour = parseInt(self.hours[0], 10);
			}
			if (isNaN(min)) {
				min = parseInt(self.minutes[0], 10);
			}

			if (self.showPeriod) {	//handle over the time
				if (hour > 12) {
					hour = 12;
				} else if (hour < 1) {
					hour = 12;
				}
			}

			if (period === 'am' || period === 'a') {
				period = 'AM';
			} else if (period === 'pm' || period === 'p') {
				period = 'PM';
			}

			if (period !== 'AM' && period!== 'PM') {
				period = 'AM';
			} else {
				if (hour >= 24) {
					hour= 23;
				} else if (hour < 0) {
					hour = 0;
				}
			}

			if (self.isHHLeadingZero && hour < 9) {
				hour = "0" + hour;
			}

			if (self.isMMLeadingZero && min < 9) {
				min = "0" + min;
			}

			if (min < 0) {
				min = 0;
			} else if (min >= 60) {
				min = 59;
			}

			self.input.val(hour + ":" + min + (self.showPeriod ? " "+ period : ""));
		},
		_increment: function(unit, increment) {
			var self = this,
				val = this.input.val(),
				cur, pos;

			if (unit === "hour") {
				increment = (60 / self.options.interval) * increment;
				pos = $.inArray(val, self.times);
				if (self.times[pos + increment]) {
					val = self.times[pos + increment];
					self.input.val(val);
				}
			}
			if (unit === "minute") {
				pos = $.inArray(val, self.times);
				if (self.times[pos + increment]) {
					val = self.times[pos + increment];
					self.input.val(val);
				}
			}
			if (unit === "period") {
				cur = val.substr(val.length-2,2);
				pos = $.inArray(cur, self.periods);
				if (self.periods[pos + increment]) {
					val = val.substr(0, val.length-2) + self.periods[pos + increment] ;
				} else {
					val = val.substr(0, val.length-2) + self.periods[pos - increment] ;
				}
				self.input.val(val);
			}
			self._highlight(unit);
		},
		_select: function(obj, start, end) {
			if (obj.setSelectionRange) {
				obj.setSelectionRange(start, end);
			} else if (obj.createTextRange) {
				obj = obj.createTextRange();
				obj.collapse(true);
				obj.moveEnd('character', end);
				obj.moveStart('character', start);
				obj.select();
			}
		},
		_highlight: function (unit) {
			var input = this.input.get(0),
				self = this,
				formattedD = $(input).val();

			this.highlightedUnit = unit;

			setTimeout(function () {
				if (unit === "hour") {
					self._select(input, 0, formattedD.indexOf(":"));
				}
				if (unit === "minute") {
					self._select(input, formattedD.indexOf(":")+1, formattedD.indexOf(":")+3);
				}
				if (unit === "period") {
					self._select(input, formattedD.indexOf(" ")+1, formattedD.length);
				}
			}, 0);
		}
	});
}(jQuery));/*
* Infor Toggle Button - A Button set for several related text button options
*/
(function($) {
	$.widget("ui.inforToggleButton", {
		_init: function() {
			this.refresh();
		},
		refresh: function() {
			//move the buttons together and style them...
			var self = this.element,
			buttons = self.find(":button, :submit, :reset, :checkbox, :radio, a, :data(button)")
						.not(".inforTextButton").addClass((self.parent().is(".inforToolbar") ? "inforTextButton" : "inforFormButton")).click(function() {
				buttons.removeClass("checked").attr("aria-pressed", "false");
				$(this).addClass("checked").attr("aria-pressed", "true");
			});
			
			//single click toggle button
			if (self.is(".inforIconButton.inforToggleButton")) {
				self.click(function() {
					var btn = $(this);
					btn.toggleClass("checked");
					btn.attr("aria-pressed", btn.hasClass("checked"));
				});
			}
		}
	});
} (jQuery));/*
* Infor Tooltips - Based on jQuery UI Tooltip 1.9m2
*
* Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about)
* Dual licensed under the MIT (MIT-LICENSE.txt)
* and GPL (GPL-LICENSE.txt) licenses.
*
* http://docs.jquery.com/UI/Tooltip
*/
(function ($) {

	// role=application on body required for screenreaders to correctly interpret aria attributes
	if (!$(document.body).is('[role]')) {
		$(document.body).attr('role', 'application');
	}

	$.widget("ui.inforToolTip", {
		options: {
			tooltipClass: "inforTooltip",
			content: function () {
				return $(this).attr("title");
			}, //content of the tooltip (can be html_ by default it will pick up the title)
			position: null, //the position of the tooltip using jquery ui position options
			maxWidth: null, //the max width of the tooltip before wrapping
			isErrorTooltip: false, //is it an error (red style tooltip?). this is usually managed internally
			delay: 150, //delay before the tooltip will appear
			show : false,	//show the top immediately
			arrowClass: null
		},
		isRTL: false,
		_init: function () {
			var self = this,
			isSvg = false,
			tooltipText = this.element.attr("title"),
			translatedTip;

			if (!tooltipText) {	//look for a title element (svg format)
				tooltipText = this.element.find("title").text();
				isSvg = true;
			}

			if (!tooltipText) {
				return;
			}

			//try to translate the tooltip
			translatedTip = Globalize.localize(tooltipText);
			if (translatedTip) {
				tooltipText = translatedTip;
			}

			if (!this.element.hasClass("inforErrorIcon")) {
				this.element.attr("title", tooltipText);
			}

			//save the tooltip
			this.element.data("currentTitle", tooltipText);
			this.element.attr("title", "");
			if (isSvg) {
				this.element.find("title").remove();
			}

			this.tooltip = $("#inforTooltip");
			this.tooltipContent = this.tooltip.find("div.content");

			if (this.tooltip.length === 0) { //add it once to the dom.
				this.tooltip = $("<div></div>")
					.attr("id", "inforTooltip")
					.attr("role", "tooltip")
					.attr("aria-hidden", "true")
					.addClass(this.options.tooltipClass)
					.appendTo(document.body)
					.mousedown(function () {
						$(this).hide();
					})
					.hide();

				this.tooltipContent = $("<div class='content'></div>").appendTo(this.tooltip);
			}

			this.isRTL = this.tooltip.css("direction") == "rtl";

			//handle error Behavior
			if (this.element.hasClass("inforErrorIcon")) {
				this.tooltip.addClass("inforErrorTooltip");
				this.options.isErrorTooltip = true;
			}

			this.opacity = 1;
			if (!this.options.isErrorTooltip || (this.options.isErrorTooltip && this.element.parent().hasClass("status-indicator"))) {
				this.element.hoverIntent({
					over: function (event) {
						self.open(event);
					},
					timeout: this.options.delay,
					interval: this.options.delay,
					out: function (event) {
						self.close(event);
					}
				}).click(function() {
					self.tooltip.stop().hide();
				});

			} else {
				var elem = this.element,
					field = elem.data("field");

				if (field) {
					field.on("mouseenter.tooltip", function (e) {
						self._show(e, elem, elem.data("currentTitle"));
						this.current = elem;
					}).on("mouseleave.tooltip", function () {
						self.tooltip.stop().hide();
					});
				}

				if (elem.is(".slick-cell")) {
					return;
				}

				elem.on("click.tooltip", function (e) {
					self._show(e, elem, elem.data("currentTitle"));
					this.current = elem;
				}).on("mouseenter.tooltip", function (e) {
					self._show(e, elem, elem.data("currentTitle"));
					this.current = elem;
				}).on("mouseleave.tooltip", function () {
					self.tooltip.stop().hide();
				});
			}

			if (this.options.show) {
				this.open();
			}
		},
		enable: function () {
			this.options.disabled = false;
		},
		disable: function () {
			this.options.disabled = true;
		},
		_setOption: function (key, value) { //ignore jslint
			$.Widget.prototype._setOption.apply(this, arguments);
		},
		destroy: function () {
			$.Widget.prototype.destroy.apply(this, arguments);
		},
		widget: function () {
			return this.tooltip;
		},
		open: function (event) {
			var self = this,
				target = this.element, content;

			this.current = target;
			this.currentTitle = target.attr("title");

			content = this.options.content.call(target[0], function (response) {
				// ignore async responses that come in after the tooltip is already hidden
				if (self.current == target) {
					self._show(event, target, response);
				}
			});

			if (!content) {//use the data for error tooltips.
				content = target.data("currentTitle");
			}

			if (content) {
				self._show(event, target, content);
			}
		},
		_show: function (event, target, content) {
			var self = this,
				width = 0, offset, leftVal,
				allArrowClasses = "arrowTop arrowBottom arrowLeft arrowRight arrowTopLeft arrowBottomRight arrowLeftDown arrowLeftUp arrowBottomLeft arrowRightDown arrowRightUp arrowTopRigh arrowTopLeft";

			if (!content) {
				return;
			}

			target.attr("title", "");

			if (this.options.disabled) {
				return;
			}

			this.tooltipContent.html(content);

			if (this.options.isErrorTooltip) {
				this.tooltip.addClass("inforErrorTooltip");
			} else {
				this.tooltip.removeClass("inforErrorTooltip");
			}

			if (this.options.maxWidth) {
				this.tooltip.find(".content").css("max-width", this.options.maxWidth + "px");
			}

			if (this.element.next().hasClass("inforCheckbox")) {//flow to other side
				this.options.position.my = (!this.isRTL ? "left top" : "right top");
			}

			var pos = this.options.position;
			if (this.options.isErrorTooltip) {
				offset = (!this.isRTL ? "+10" : "-6");
				if (target.closest(".inforTriggerField").length > 0) {
					offset = "+17";
				}
				if (target.prev().is(".inforListBox")) {
					offset = "+10";
				}
				if (target.is(".slick-cell")) {
					offset = "+5";
				}

				pos = {
					my:  (!this.isRTL ? "left" + offset : "right" + offset),
					at: (!this.isRTL ? "right" + offset : "left" + offset),
					collision: "fit flip",
					of: target
				};
				this.tooltip.removeClass(allArrowClasses).addClass((!this.isRTL ? "arrowLeft" : "arrowRight"));
			} else {
				this.tooltip.removeClass(allArrowClasses).addClass("arrowTop");
			}

			if (!pos) {
				pos = {
					of: target, //(this.options.isErrorTooltip ? target : event)	//event for mouse - target for button
					collision: "fit flip",
					my: "top+19",
					at: "bottom"
				};
			}
			
			this.tooltip.css({
				top: 0,
				left: 0
			}).show().position(pos);

			if (target.offset().top > this.tooltip.offset().top && !this.options.isErrorTooltip) { //opened on top
				this.tooltip.removeClass(allArrowClasses).addClass("arrowBottom");
			}

			if (target.is("button")) {
				target.mousedown(function () {
					self.tooltip.hide();
				});
			}

			//position the arrow.
			width = (this.tooltip.width()) / 2;
			width = width - (width < 20 ? 9 : 11); //center the arrow
			
			//see if it flowed of the right side. if so show it under...
			if (this.options.isErrorTooltip) {
				if (target.data("field") && parseInt(this.tooltip.offset().left, 10) < parseInt(target.data("field").offset().left, 10) + parseInt(target.data("field").width(), 10)) {
					var pos = this.options.position;
					if (!pos) {
						pos = {
							of :  target.data("field"),
							my : "center top+10",
							at : "center bottom",
							collision: "fit flip"
						   };
					}
					this.tooltip.removeClass(allArrowClasses).addClass("arrowTop");
					this.tooltip.show().position(pos);
					
					//Check if we flipped and reverse the arrow.
					if (this.tooltip.offset().top < target.data("field").offset().top) {
						this.tooltip.removeClass(allArrowClasses).addClass("arrowBottom");
					}
				}
			}

			//detect if it overflowed the left side and the tip is too big
			if (parseInt(this.tooltip.css("left"), 10) == 0 && this.tooltip.width()/2 > target.offset().left + 25) {
				this.tooltip.removeClass(allArrowClasses).addClass("arrowTopLeft");
				this.tooltip.css("top",  '+=10px');
			}
			
			//add the aria accessability stuff
			this.tooltip.attr("aria-hidden", "false");
			target.attr("aria-describedby", this.tooltip.attr("id"));
			
			if (this.options.arrowClass) {
				this.tooltip.removeClass(allArrowClasses).addClass(this.options.arrowClass);
			}
			
			if (this.options.position) {
				if (!this.options.position.of) {
					this.options.position.of = target;
				}

				this.tooltip.position(this.options.position);
			}
			
			this.tooltip.hide().delay(this.options.delay).fadeIn();
			this._trigger("open", event);
		},
		close: function (event) {
			if (!this.current) {
				return;
			}

			var current = this.current.attr("title", this.currentTitle);
			this.current = null;
			if (!current) {
				return;
			}

			if (this.options.disabled) {
				return;
			}

			current.removeAttr("aria-describedby");
			this.tooltip.attr("aria-hidden", "true");

			if (this.tooltip.is(':animated')) {
				this.tooltip.stop().fadeTo("normal", 0, function () {
					$(this).hide().css("opacity", "");
				});
			} else {
				this.tooltip.stop().fadeOut();
			}
			this._trigger("close", event);
		}
	});

})(jQuery);/*
* Infor Tree Control.
*
* Modified and Trimmed version of jsTree 1.0-rc3
* http://jstree.com/
*
* Copyright (c) 2010 Ivan Bozhanov (vakata.com)
*
* Licensed same as jquery - under the terms of either the MIT License or the GPL Version 2 License
*   http://www.opensource.org/licenses/mit-license.php
*/

/*
* jsTree core
*/
(function ($) {

	// private variables
	var instances = [],			// instance array (used by $.jstree.reference/create/focused)
		focused_instance = -1,	// the index in the instance array of the currently focused instance
		plugins = {},			// list of included plugins
		prepared_move = {};		// for the move_node function

	$.inforTree = {};	//Special Namespace for some tree extensions.

	// jQuery plugin wrapper
	$.fn.inforTree = function (settings) {
		var isMethodCall = (typeof settings == 'string'), // is this a method call like $().jstree("open_node")
		args = Array.prototype.slice.call(arguments, 1),
			returnValue = this;

		// if a method call execute the method on all selected instances
		if(isMethodCall) {
			if(settings.substring(0, 1) == '_') { return returnValue; }
			this.each(function() {
				var instance = instances[$.data(this, "jstree_instance_id")],
					methodValue = (instance && $.isFunction(instance[settings])) ? instance[settings].apply(instance, args) : instance;
					if(typeof methodValue !== "undefined" && (settings.indexOf("is_") === 0 || (methodValue !== true && methodValue !== false))) { returnValue = methodValue; return false; }
			});
		}
		else {
			this.each(function() {
				// extend settings and allow for multiple hashes and $.data
				var instance_id = $.data(this, "jstree_instance_id"),
					a = [],
					b = settings ? $.extend({}, true, settings) : {},
					c = $(this),
					s = false,
					t = [];
				a = a.concat(args);
				if(c.data("jstree")) { a.push(c.data("jstree")); }
				b = a.length ? $.extend.apply(null, [true, b].concat(a)) : b;

				// if an instance already exists, destroy it first
				if(typeof instance_id !== "undefined" && instances[instance_id]) { instances[instance_id].destroy(); }
				// push a new empty object to the instances array
				instance_id = parseInt(instances.push({}),10) - 1;
				// store the jstree instance id to the container element
				$.data(this, "jstree_instance_id", instance_id);
				// clean up all plugins
				b.plugins = $.isArray(b.plugins) ? b.plugins : $.jstree.defaults.plugins.slice();
				b.plugins.unshift("core");
				// only unique plugins
				b.plugins = b.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");

				// extend defaults with passed data
				s = $.extend(true, {}, $.jstree.defaults, b);
				s.plugins = b.plugins;
				$.each(plugins, function (i, val) {
					if($.inArray(i, s.plugins) === -1) { s[i] = null; delete s[i]; }
					else { t.push(i); }
				});
				s.plugins = t;

				// push the new object to the instances array (at the same time set the default classes to the container) and init
				instances[instance_id] = new $.jstree._instance(instance_id, $(this).addClass("jstree jstree-" + instance_id), s);
				// init all activated plugins for this instance
				$.each(instances[instance_id]._get_settings().plugins, function (i, val) { instances[instance_id].data[val] = {}; });
				$.each(instances[instance_id]._get_settings().plugins, function (i, val) { if(plugins[val]) { plugins[val].__init.apply(instances[instance_id]); } });
				// initialize the instance
				if (instances[instance_id]) {
					instances[instance_id].init();
				}
			});
		}

		//If the parent is a left pane of the splitter override the overflow
		if ($(this).parent().is("#leftPane")) {
			$(this).parent().css("overflow", "hidden");
		}

		// return the jquery selection (or if it was a method call that returned a value - the returned value)
		return returnValue;
	};
	// object to store exposed functions and objects
	$.jstree = {
		defaults : {
			plugins : []
		},
		_focused : function () { return instances[focused_instance] || null; },
		_reference : function (needle) {
			// get by instance id
			if(instances[needle]) { return instances[needle]; }
			// get by DOM (if still no luck - return null
			var o = $(needle);
			if(!o.length && typeof needle === "string") { o = $("#" + needle); }
			if(!o.length) { return null; }
			return instances[o.closest(".jstree").data("jstree_instance_id")] || null;
		},
		_instance : function (index, container, settings) {
			// for plugins to store data in
			this.data = { core : {} };
			this.get_settings	= function () { return $.extend(true, {}, settings); };
			this._get_settings	= function () { return settings; };
			this.get_index		= function () { return index; };
			this.get_container	= function () { return container; };
			this.get_container_ul = function () { return container.children("ul:eq(0)"); };
			this._set_settings	= function (s) {
				settings = $.extend(true, {}, settings, s);
			};
		},
		_fn : { },
		plugin : function (pname, pdata) {
			pdata = $.extend({}, {
				__init		: $.noop,
				__destroy	: $.noop,
				_fn			: {},
				defaults	: false
			}, pdata);
			plugins[pname] = pdata;

			$.jstree.defaults[pname] = pdata.defaults;
			$.each(pdata._fn, function (i, val) {
				val.plugin		= pname;
				val.old			= $.jstree._fn[i];
				$.jstree._fn[i] = function () {
					var rslt,
						func = val,
						args = Array.prototype.slice.call(arguments),
						evnt = new $.Event("before.jstree"),
						rlbk = false;

					if(this.data.core.locked === true && i !== "unlock" && i !== "is_locked") { return; }

					// Check if function belongs to the included plugins of this instance
					do {
						if(func && func.plugin && $.inArray(func.plugin, this._get_settings().plugins) !== -1) { break; }
						func = func.old;
					} while(func);
					if(!func) { return; }

					// context and function to trigger events, then finally call the function
					if(i.indexOf("_") === 0) {
						rslt = func.apply(this, args);
					}
					else {
						rslt = this.get_container().triggerHandler(evnt, { "func" : i, "inst" : this, "args" : args, "plugin" : func.plugin });
						if(rslt === false) { return; }
						if(typeof rslt !== "undefined") { args = rslt; }

						rslt = func.apply(
							$.extend({}, this, {
								__callback : function (data) {
									this.get_container().triggerHandler( i + '.jstree', { "inst" : this, "args" : args, "rslt" : data, "rlbk" : rlbk });
								},
								__rollback : function () {
									rlbk = this.get_rollback();
									return rlbk;
								},
								__call_old : function (replace_arguments) {
									return func.old.apply(this, (replace_arguments ? Array.prototype.slice.call(arguments, 1) : args ) );
								}
							}), args);
					}

					// return the result
					return rslt;
				};
				$.jstree._fn[i].old = val.old;
				$.jstree._fn[i].plugin = pname;
			});
		},
		rollback : function (rb) {
			if(rb) {
				if(!$.isArray(rb)) { rb = [ rb ]; }
				$.each(rb, function (i, val) {
					instances[val.i].set_rollback(val.h, val.d);
				});
			}
		}
	};
	// set the prototype for all instances
	$.jstree._fn = $.jstree._instance.prototype = {};

	// core functions (open, close, create, update, delete)
	$.jstree.plugin("core", {
		__init : function () {
			this.data.core.locked = false;
			this.data.core.to_open = this.get_settings().core.initially_open;
			this.data.core.to_load = this.get_settings().core.initially_load;
		},
		defaults : {
			html_titles	: false,
			animation	: 500,
			initially_open : [],
			initially_load : [],
			open_parents : true,
			notify_plugins : true,
			rtl			: false,
			load_open	: false,
			strings		: {
				loading		: Globalize.localize("Loading"),
				new_node	: Globalize.localize("NewNode"),
				multiple_selection : "Multiple selection"
			}
		},
		_fn : {
			init	: function () {
				this.set_focus();
				if(this._get_settings().core.rtl) {
					this.get_container().addClass("jstree-rtl").css("direction", "rtl");
				}
				this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'><span>&#160;</span></ins>" + this._get_string("loading") + "</a></li></ul>");
				this.data.core.li_height = this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height() || 18;

				this.get_container()
					.delegate("li > ins", "click.jstree", $.proxy(function (event) {
							var trgt = $(event.target);
							// if(trgt.is("ins") && event.pageY - trgt.offset().top < this.data.core.li_height) { this.toggle_node(trgt); }
							this.toggle_node(trgt);
						}, this))
					.bind("mousedown.jstree", $.proxy(function () {
							this.set_focus(); // This used to be setTimeout(set_focus,0) - why?
						}, this))
					.bind("dblclick.jstree", function (event) {
						var sel;
						if(document.selection && document.selection.empty) { document.selection.empty(); }
						else {
							if(window.getSelection) {
								sel = window.getSelection();
								try {
									sel.removeAllRanges();
									sel.collapse();
								} catch (err) { }
							}
						}
					});
				if(this._get_settings().core.notify_plugins) {
					this.get_container()
						.bind("load_node.jstree", $.proxy(function (e, data) {
								var o = this._get_node(data.rslt.obj),
									t = this;
								if(o === -1) { o = this.get_container_ul(); }
								if(!o.length) { return; }
								o.find("li").each(function () {
									var th = $(this);
									if(th.data("jstree")) {
										$.each(th.data("jstree"), function (plugin, values) {
											if(t.data[plugin] && $.isFunction(t["_" + plugin + "_notify"])) {
												t["_" + plugin + "_notify"].call(t, th, values);
											}
										});
									}
								});
							}, this));
				}
				if(this._get_settings().core.load_open) {
					this.get_container()
						.bind("load_node.jstree", $.proxy(function (e, data) {
								var o = this._get_node(data.rslt.obj),
									t = this;
								if(o === -1) { o = this.get_container_ul(); }
								if(!o.length) { return; }
								o.find("li.jstree-open:not(:has(ul))").each(function () {
									t.load_node(this, $.noop, $.noop);
								});
							}, this));
				}
				this.__callback();
				this.load_node(-1, function () { this.loaded(); this.reload_nodes(); });
			},
			destroy	: function () {
				var i,
					n = this.get_index(),
					s = this._get_settings(),
					_this = this;

				$.each(s.plugins, function (i, val) {
					try { plugins[val].__destroy.apply(_this); } catch(err) { }
				});
				this.__callback();
				// set focus to another instance if this one is focused
				if(this.is_focused()) {
					for(i in instances) {
						if(instances.hasOwnProperty(i) && i != n) {
							instances[i].set_focus();
							break;
						}
					}
				}
				// if no other instance found
				if(n === focused_instance) { focused_instance = -1; }
				// remove all traces of jstree in the DOM (only the ones set using jstree*) and cleans all events
				this.get_container()
					.unbind(".jstree")
					.undelegate(".jstree")
					.removeData("jstree_instance_id")
					.find("[class^='jstree']")
						.andSelf()
						.attr("class", function () { return this.className.replace(/jstree[^ ]*|$/ig,''); });
				$(document)
					.unbind(".jstree-" + n)
					.undelegate(".jstree-" + n);
				// remove the actual data
				instances[n] = null;
				delete instances[n];
			},

			_core_notify : function (n, data) {
				if(data.opened) {
					this.open_node(n, false, true);
				}
			},

			lock : function () {
				this.data.core.locked = true;
				this.get_container().children("ul").addClass("jstree-locked").css("opacity","0.7");
				this.__callback({});
			},
			unlock : function () {
				this.data.core.locked = false;
				this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");
				this.__callback({});
			},
			is_locked : function () { return this.data.core.locked; },
			save_opened : function () {
				var _this = this;
				this.data.core.to_open = [];
				this.get_container_ul().find("li.jstree-open").each(function () {
					if(this.id) { _this.data.core.to_open.push("#" + this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")); }
				});
				this.__callback(_this.data.core.to_open);
			},
			save_loaded : function () { },
			reload_nodes : function (is_callback) {
				var _this = this,
					done = true,
					current = [],
					remaining = [];
				if(!is_callback) {
					this.data.core.reopen = false;
					this.data.core.refreshing = true;
					this.data.core.to_open = $.map($.makeArray(this.data.core.to_open), function (n) { return "#" + n.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"); });
					this.data.core.to_load = $.map($.makeArray(this.data.core.to_load), function (n) { return "#" + n.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"); });
					if(this.data.core.to_open.length) {
						this.data.core.to_load = this.data.core.to_load.concat(this.data.core.to_open);
					}
				}
				if(this.data.core.to_load.length) {
					$.each(this.data.core.to_load, function (i, val) {
						if(val == "#") { return true; }
						if($(val).length) { current.push(val); }
						else { remaining.push(val); }
					});
					if(current.length) {
						this.data.core.to_load = remaining;
						$.each(current, function (i, val) {
							if(!_this._is_loaded(val)) {
								_this.load_node(val, function () { _this.reload_nodes(true); }, function () { _this.reload_nodes(true); });
								done = false;
							}
						});
					}
				}
				if(this.data.core.to_open.length) {
					$.each(this.data.core.to_open, function (i, val) {
						_this.open_node(val, false, true);
					});
				}
				if(done) {
					// TODO: find a more elegant approach to syncronizing returning requests
					if(this.data.core.reopen) { clearTimeout(this.data.core.reopen); }
					this.data.core.reopen = setTimeout(function () { _this.__callback({}, _this); }, 50);
					this.data.core.refreshing = false;
					this.reopen();
				}
			},
			reopen : function () {
				var _this = this;
				if(this.data.core.to_open.length) {
					$.each(this.data.core.to_open, function (i, val) {
						_this.open_node(val, false, true);
					});
				}
				this.__callback({});
			},
			refresh : function (obj) {
				var _this = this;
				this.save_opened();
				if(!obj) { obj = -1; }
				obj = this._get_node(obj);
				if(!obj) { obj = -1; }
				if(obj !== -1) { obj.children("UL").remove(); }
				else { this.get_container_ul().empty(); }
				this.load_node(obj, function () { _this.__callback({ "obj" : obj}); _this.reload_nodes(); });
			},
			// Dummy function to fire after the first load (so that there is a jstree.loaded event)
			loaded	: function () {
				this.__callback();
			},
			// deal with focus
			set_focus	: function () {
				if(this.is_focused()) { return; }
				var f = $.jstree._focused();
				if(f) { f.unset_focus(); }

				this.get_container().addClass("jstree-focused");
				focused_instance = this.get_index();
				this.__callback();
			},
			is_focused	: function () {
				return focused_instance == this.get_index();
			},
			unset_focus	: function () {
				if(this.is_focused()) {
					this.get_container().removeClass("jstree-focused");
					focused_instance = -1;
				}
				this.__callback();
			},

			// traverse
			_get_node		: function (obj) {
				var $obj = $(obj, this.get_container());
				if($obj.is(".jstree") || obj == -1) { return -1; }
				$obj = $obj.closest("li", this.get_container());
				return $obj.length ? $obj : false;
			},
			_get_next		: function (obj, strict) {
				obj = this._get_node(obj);
				if(obj === -1) { return this.get_container().find("> ul > li:first-child"); }
				if(!obj.length) { return false; }
				if(strict) { return (obj.nextAll("li").size() > 0) ? obj.nextAll("li:eq(0)") : false; }

				if(obj.hasClass("jstree-open")) { return obj.find("li:eq(0)"); }
				else if(obj.nextAll("li").size() > 0) { return obj.nextAll("li:eq(0)"); }
				else { return obj.parentsUntil(".jstree","li").next("li").eq(0); }
			},
			_get_prev		: function (obj, strict) {
				obj = this._get_node(obj);
				if(obj === -1) { return this.get_container().find("> ul > li:last-child"); }
				if(!obj.length) { return false; }
				if(strict) { return (obj.prevAll("li").length > 0) ? obj.prevAll("li:eq(0)") : false; }

				if(obj.prev("li").length) {
					obj = obj.prev("li").eq(0);
					while(obj.hasClass("jstree-open")) { obj = obj.children("ul:eq(0)").children("li:last"); }
					return obj;
				}
				else { var o = obj.parentsUntil(".jstree","li:eq(0)"); return o.length ? o : false; }
			},
			_get_parent		: function (obj) {
				obj = this._get_node(obj);
				if(obj == -1 || !obj.length) { return false; }
				var o = obj.parentsUntil(".jstree", "li:eq(0)");
				return o.length ? o : -1;
			},
			_get_children	: function (obj) {
				obj = this._get_node(obj);
				if(obj === -1) { return this.get_container().children("ul:eq(0)").children("li"); }
				if(!obj.length) { return false; }
				return obj.children("ul:eq(0)").children("li");
			},
			get_path		: function (obj, id_mode) {
				var p = [],
					_this = this;
				obj = this._get_node(obj);
				if(obj === -1 || !obj || !obj.length) { return false; }
				obj.parentsUntil(".jstree", "li").each(function () {
					p.push( id_mode ? this.id : _this.get_text(this) );
				});
				p.reverse();
				p.push( id_mode ? obj.attr("id") : this.get_text(obj) );
				return p;
			},

			// string functions
			_get_string : function (key) {
				return this._get_settings().core.strings[key] || key;
			},

			is_open		: function (obj) { obj = this._get_node(obj); return obj && obj !== -1 && obj.hasClass("jstree-open"); },
			is_closed	: function (obj) { obj = this._get_node(obj); return obj && obj !== -1 && obj.hasClass("jstree-closed"); },
			is_leaf		: function (obj) { obj = this._get_node(obj); return obj && obj !== -1 && obj.hasClass("jstree-leaf"); },
			correct_state	: function (obj) {
				obj = this._get_node(obj);
				if(!obj || obj === -1) { return false; }
				obj.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();
				this.__callback({ "obj" : obj });
			},
			// open/close
			open_node	: function (obj, callback, skip_animation) {
				obj = this._get_node(obj);
				if(!obj.length) { return false; }
				if(!obj.hasClass("jstree-closed")) { if(callback) { callback.call(); } return false; }
				var s = skip_animation  ? 0 : this._get_settings().core.animation,
					t = this;
				if(!this._is_loaded(obj)) {
					obj.children("a").addClass("jstree-loading");
					this.load_node(obj, function () { t.open_node(obj, callback, skip_animation); }, callback);
				}
				else {
					if(this._get_settings().core.open_parents) {
						obj.parentsUntil(".jstree",".jstree-closed").each(function () {
							t.open_node(this, false, true);
						});
					}
					if(s) { obj.children("ul").css("display","none"); }
					obj.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading");
					if(s) { obj.children("ul").stop(true, true).slideDown(s, function () { this.style.display = ""; t.after_open(obj); }); }
					else { t.after_open(obj); }
					this.__callback({ "obj" : obj });
					if(callback) { callback.call(); }
				}
			},
			after_open	: function (obj) { this.__callback({ "obj" : obj }); },
			close_node	: function (obj, skip_animation) {
				obj = this._get_node(obj);
				var s = skip_animation ? 0 : this._get_settings().core.animation,
					t = this;
				if(!obj.length || !obj.hasClass("jstree-open")) { return false; }
				if(s) { obj.children("ul").attr("style","display:block !important"); }
				obj.removeClass("jstree-open").addClass("jstree-closed");
				if(s) { obj.children("ul").stop(true, true).slideUp(s, function () { this.style.display = ""; t.after_close(obj); }); }
				else { t.after_close(obj); }
				this.__callback({ "obj" : obj });
			},
			after_close	: function (obj) { this.__callback({ "obj" : obj }); },
			toggle_node	: function (obj) {
				obj = this._get_node(obj);
				if(obj.hasClass("jstree-closed")) { return this.open_node(obj); }
				if(obj.hasClass("jstree-open")) { return this.close_node(obj); }
			},
			open_all	: function (obj, do_animation, original_obj) {
				obj = obj ? this._get_node(obj) : -1;
				if(!obj || obj === -1) { obj = this.get_container_ul(); }
				if(original_obj) {
					obj = obj.find("li.jstree-closed");
				}
				else {
					original_obj = obj;
					if(obj.is(".jstree-closed")) { obj = obj.find("li.jstree-closed").andSelf(); }
					else { obj = obj.find("li.jstree-closed"); }
				}
				var _this = this;
				obj.each(function () {
					var __this = this;
					if(!_this._is_loaded(this)) { _this.open_node(this, function() { _this.open_all(__this, do_animation, original_obj); }, !do_animation); }
					else { _this.open_node(this, false, !do_animation); }
				});
				// so that callback is fired AFTER all nodes are open
				if(original_obj.find('li.jstree-closed').length === 0) { this.__callback({ "obj" : original_obj }); }
			},
			close_all	: function (obj, do_animation) {
				var _this = this;
				obj = obj ? this._get_node(obj) : this.get_container();
				if(!obj || obj === -1) { obj = this.get_container_ul(); }
				obj.find("li.jstree-open").andSelf().each(function () { _this.close_node(this, !do_animation); });
				this.__callback({ "obj" : obj });
			},
			clean_node	: function (obj) {
				obj = obj && obj != -1 ? $(obj) : this.get_container_ul();
				obj = obj.is("li") ? obj.find("li").andSelf() : obj.find("li");
				obj.removeClass("jstree-last")
					.filter("li:last-child").addClass("jstree-last").end()
					.filter(":has(li)")
						.not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
				obj.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();
				this.__callback({ "obj" : obj });
			},
			// rollback
			get_rollback : function () {
				this.__callback();
				return { i : this.get_index(), h : this.get_container().children("ul").clone(true), d : this.data };
			},
			set_rollback : function (html, data) {
				this.get_container().empty().append(html);
				this.data = data;
				this.__callback();
			},
			// Dummy functions to be overwritten by any datastore plugin included
			load_node	: function (obj, s_call, e_call) { this.__callback({ "obj" : obj }); },
			_is_loaded	: function (obj) { return true; },

			// Basic operations: create
			create_node	: function (obj, position, js, callback, is_loaded) {
				obj = this._get_node(obj);
				position = typeof position === "undefined" ? "last" : position;
				var d = $("<li />"),
					s = this._get_settings().core,
					tmp;

				if(obj !== -1 && !obj.length) { return false; }
				if(!is_loaded && !this._is_loaded(obj)) { this.load_node(obj, function () { this.create_node(obj, position, js, callback, true); }); return false; }

				this.__rollback();

				if(typeof js === "string") { js = { "data" : js }; }
				if(!js) { js = {}; }
				if(js.attr) { d.attr(js.attr); }
				if(js.metadata) { d.data(js.metadata); }
				if(js.state) { d.addClass("jstree-" + js.state); }
				if(!js.data) { js.data = this._get_string("new_node"); }
				if(!$.isArray(js.data)) { tmp = js.data; js.data = []; js.data.push(tmp); }
				$.each(js.data, function (i, m) {
					tmp = $("<a />");
					if($.isFunction(m)) { m = m.call(this, js); }
					if(typeof m == "string") { tmp.attr('href','#')[ s.html_titles ? "html" : "text" ](m); }
					else {
						if(!m.attr) { m.attr = {}; }
						if(!m.attr.href) { m.attr.href = '#'; }
						tmp.attr(m.attr)[ s.html_titles ? "html" : "text" ](m.title);
						if(m.language) { tmp.addClass(m.language); }
					}
					tmp.prepend("<ins class='jstree-icon'><span>&#160;</span></ins>");
					if(!m.icon && js.icon) { m.icon = js.icon; }
					if(m.icon) {
						if(m.icon.indexOf("/") === -1) { tmp.children("ins").addClass(m.icon); }
						else { tmp.children("ins").css("background","url('" + m.icon + "') center center no-repeat"); }
					}
					d.append(tmp);
				});
				d.prepend("<ins class='jstree-icon'><span>&#160;</span></ins>");
				if(obj === -1) {
					obj = this.get_container();
					if(position === "before") { position = "first"; }
					if(position === "after") { position = "last"; }
				}
				switch(position) {
					case "before": obj.before(d); tmp = this._get_parent(obj); break;
					case "after" : obj.after(d);  tmp = this._get_parent(obj); break;
					case "inside":
					case "first" :
						if(!obj.children("ul").length) { obj.append("<ul />"); }
						obj.children("ul").prepend(d);
						tmp = obj;
						break;
					case "last":
						if(!obj.children("ul").length) { obj.append("<ul />"); }
						obj.children("ul").append(d);
						tmp = obj;
						break;
					default:
						if(!obj.children("ul").length) { obj.append("<ul />"); }
						if(!position) { position = 0; }
						tmp = obj.children("ul").children("li").eq(position);
						if(tmp.length) { tmp.before(d); }
						else { obj.children("ul").append(d); }
						tmp = obj;
						break;
				}
				if(tmp === -1 || tmp.get(0) === this.get_container().get(0)) { tmp = -1; }
				this.clean_node(tmp);
				this.__callback({ "obj" : d, "parent" : tmp });
				if(callback) { callback.call(this, d); }
				return d;
			},
			// Basic operations: rename (deal with text)
			get_text	: function (obj) {
				obj = this._get_node(obj);
				if(!obj.length) { return false; }
				var s = this._get_settings().core.html_titles;
				obj = obj.children("a:eq(0)");
				if(s) {
					obj = obj.clone();
					obj.children("INS").remove();
					return obj.html();
				}
				else {
					obj = obj.contents().filter(function() { return this.nodeType == 3; })[0];
					return obj.nodeValue;
				}
			},
			set_text	: function (obj, val) {
				obj = this._get_node(obj);
				if(!obj.length) { return false; }
				obj = obj.children("a:eq(0)");
				if(this._get_settings().core.html_titles) {
					var tmp = obj.children("INS").clone();
					obj.html(val).prepend(tmp);
					this.__callback({ "obj" : obj, "name" : val });
					return true;
				}
				else {
					obj = obj.contents().filter(function() { return this.nodeType == 3; })[0];
					this.__callback({ "obj" : obj, "name" : val });
					return (obj.nodeValue = val);
				}
			},
			rename_node : function (obj, val) {
				obj = this._get_node(obj);
				this.__rollback();
				if(obj && obj.length && this.set_text.apply(this, Array.prototype.slice.call(arguments))) { this.__callback({ "obj" : obj, "name" : val }); }
			},
			// Basic operations: deleting nodes
			delete_node : function (obj) {
				obj = this._get_node(obj);
				if(!obj.length) { return false; }
				this.__rollback();
				var p = this._get_parent(obj), prev = $([]), t = this;
				obj.each(function () {
					prev = prev.add(t._get_prev(this));
				});
				obj = obj.detach();
				if(p !== -1 && p.find("> ul > li").length === 0) {
					p.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");
				}
				this.clean_node(p);
				this.__callback({ "obj" : obj, "prev" : prev, "parent" : p });
				return obj;
			},
			prepare_move : function (o, r, pos, cb, is_cb) {
				var p = {};

				p.ot = $.jstree._reference(o) || this;
				p.o = p.ot._get_node(o);
				p.r = r === - 1 ? -1 : this._get_node(r);
				p.p = (typeof pos === "undefined" || pos === false) ? "last" : pos; // TODO: move to a setting
				if(!is_cb && prepared_move.o && prepared_move.o[0] === p.o[0] && prepared_move.r[0] === p.r[0] && prepared_move.p === p.p) {
					this.__callback(prepared_move);
					if(cb) { cb.call(this, prepared_move); }
					return;
				}
				p.ot = $.jstree._reference(p.o) || this;
				p.rt = $.jstree._reference(p.r) || this; // r === -1 ? p.ot : $.jstree._reference(p.r) || this
				if(p.r === -1 || !p.r) {
					p.cr = -1;
					switch(p.p) {
						case "first":
						case "before":
						case "inside":
							p.cp = 0;
							break;
						case "after":
						case "last":
							p.cp = p.rt.get_container().find(" > ul > li").length;
							break;
						default:
							p.cp = p.p;
							break;
					}
				}
				else {
					if(!/^(before|after)$/.test(p.p) && !this._is_loaded(p.r)) {
						return this.load_node(p.r, function () { this.prepare_move(o, r, pos, cb, true); });
					}
					switch(p.p) {
						case "before":
							p.cp = p.r.index();
							p.cr = p.rt._get_parent(p.r);
							break;
						case "after":
							p.cp = p.r.index() + 1;
							p.cr = p.rt._get_parent(p.r);
							break;
						case "inside":
						case "first":
							p.cp = 0;
							p.cr = p.r;
							break;
						case "last":
							p.cp = p.r.find(" > ul > li").length;
							p.cr = p.r;
							break;
						default:
							p.cp = p.p;
							p.cr = p.r;
							break;
					}
				}
				p.np = p.cr == -1 ? p.rt.get_container() : p.cr;
				p.op = p.ot._get_parent(p.o);
				p.cop = p.o.index();
				if(p.op === -1) { p.op = p.ot ? p.ot.get_container() : this.get_container(); }
				if(!/^(before|after)$/.test(p.p) && p.op && p.np && p.op[0] === p.np[0] && p.o.index() < p.cp) { p.cp++; }
				//if(p.p === "before" && p.op && p.np && p.op[0] === p.np[0] && p.o.index() < p.cp) { p.cp--; }
				p.or = p.np.find(" > ul > li:nth-child(" + (p.cp + 1) + ")");
				prepared_move = p;
				this.__callback(prepared_move);
				if(cb) { cb.call(this, prepared_move); }
			},
			check_move : function () {
				var obj = prepared_move, ret = true, r = obj.r === -1 ? this.get_container() : obj.r;
				if(!obj || !obj.o || obj.or[0] === obj.o[0]) { return false; }
				if(obj.op && obj.np && obj.op[0] === obj.np[0] && obj.cp - 1 === obj.o.index()) { return false; }
				obj.o.each(function () {
					if(r.parentsUntil(".jstree", "li").andSelf().index(this) !== -1) { ret = false; return false; }
				});
				return ret;
			},
			move_node : function (obj, ref, position, is_copy, is_prepared, skip_check) {
				if(!is_prepared) {
					return this.prepare_move(obj, ref, position, function (p) {
						this.move_node(p, false, false, is_copy, true, skip_check);
					});
				}
				if(is_copy) {
					prepared_move.cy = true;
				}
				if(!skip_check && !this.check_move()) { return false; }

				this.__rollback();
				var o = false;
				if(is_copy) {
					o = obj.o.clone(true);
					o.find("*[id]").andSelf().each(function () {
						if(this.id) { this.id = "copy_" + this.id; }
					});
				}
				else { o = obj.o; }

				if(obj.or.length) { obj.or.before(o); }
				else {
					if(!obj.np.children("ul").length) { $("<ul />").appendTo(obj.np); }
					obj.np.children("ul:eq(0)").append(o);
				}

				try {
					obj.ot.clean_node(obj.op);
					obj.rt.clean_node(obj.np);
					if(!obj.op.find("> ul > li").length) {
						obj.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove();
					}
				} catch (e) { }

				if(is_copy) {
					prepared_move.cy = true;
					prepared_move.oc = o;
				}
				this.__callback(prepared_move);
				return prepared_move;
			},
			_get_move : function () { return prepared_move; }
		}
	});
})(jQuery);

/*
* jsTree ui plugin
* This plugins handles selecting/deselecting/hovering/dehovering nodes
*/
(function ($) {
	var scrollbar_width, e1, e2;
	$(function() {
		if (/msie/.test(navigator.userAgent.toLowerCase())) {
			e1 = $('<textarea cols="10" rows="2"></textarea>').css({ position: 'absolute', top: -1000, left: 0 }).appendTo('body');
			e2 = $('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({ position: 'absolute', top: -1000, left: 0 }).appendTo('body');
			scrollbar_width = e1.width() - e2.width();
			e1.add(e2).remove();
		}
		else {
			e1 = $('<div />').css({ width: 100, height: 100, overflow: 'auto', position: 'absolute', top: -1000, left: 0 })
					.prependTo('body').append('<div />').find('div').css({ width: '100%', height: 200 });
			scrollbar_width = 100 - e1.width();
			e1.parent().remove();
		}
	});
	$.jstree.plugin("ui", {
		__init : function () {
			this.data.ui.selected = $();
			this.data.ui.last_selected = false;
			this.data.ui.hovered = null;
			this.data.ui.to_select = this.get_settings().ui.initially_select;

			this.get_container()
				.delegate("a", "click.jstree", $.proxy(function (event) {
						event.preventDefault();
						event.currentTarget.blur();
						if(!$(event.currentTarget).hasClass("jstree-loading")) {
							this.select_node(event.currentTarget, true, event);
						}
					}, this))
				.delegate("a", "mouseenter.jstree", $.proxy(function (event) {
						if(!$(event.currentTarget).hasClass("jstree-loading")) {
							this.hover_node(event.target);
						}
					}, this))
				.delegate("a", "mouseleave.jstree", $.proxy(function (event) {
						if(!$(event.currentTarget).hasClass("jstree-loading")) {
							this.dehover_node(event.target);
						}
					}, this))
				.bind("reopen.jstree", $.proxy(function () {
						this.reselect();
					}, this))
				.bind("get_rollback.jstree", $.proxy(function () {
						this.dehover_node();
						this.save_selected();
					}, this))
				.bind("set_rollback.jstree", $.proxy(function () {
						this.reselect();
					}, this))
				.bind("close_node.jstree", $.proxy(function (event, data) {
						var s = this._get_settings().ui,
							obj = this._get_node(data.rslt.obj),
							clk = (obj && obj.length) ? obj.children("ul").find("a.jstree-clicked") : $(),
							_this = this;
						if(s.selected_parent_close === false || !clk.length) { return; }
						clk.each(function () {
							_this.deselect_node(this);
							if(s.selected_parent_close === "select_parent") { _this.select_node(obj); }
						});
					}, this))
				.bind("delete_node.jstree", $.proxy(function (event, data) {
						var s = this._get_settings().ui.select_prev_on_delete,
							obj = this._get_node(data.rslt.obj),
							clk = (obj && obj.length) ? obj.find("a.jstree-clicked") : [],
							_this = this;
						clk.each(function () { _this.deselect_node(this); });
						if(s && clk.length) {
							data.rslt.prev.each(function () {
								if(this.parentNode) { _this.select_node(this); return false; /* if return false is removed all prev nodes will be selected */}
							});
						}
					}, this))
				.bind("move_node.jstree", $.proxy(function (event, data) {
						if(data.rslt.cy) {
							data.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked");
						}
					}, this));
		},
		defaults : {
			select_limit : -1, // 0, 1, 2 ... or -1 for unlimited
			select_multiple_modifier : "ctrl", // on, or ctrl, shift, alt
			select_range_modifier : "shift",
			selected_parent_close : "select_parent", // false, "deselect", "select_parent"
			selected_parent_open : true,
			select_prev_on_delete : true,
			disable_selecting_children : false,
			initially_select : []
		},
		_fn : {
			_get_node : function (obj, allow_multiple) {
				if(typeof obj === "undefined" || obj === null) { return allow_multiple ? this.data.ui.selected : this.data.ui.last_selected; }
				var $obj = $(obj, this.get_container());
				if($obj.is(".jstree") || obj == -1) { return -1; }
				$obj = $obj.closest("li", this.get_container());
				return $obj.length ? $obj : false;
			},
			_ui_notify : function (n, data) {
				if(data.selected) {
					this.select_node(n, false);
				}
			},
			save_selected : function () {
				var _this = this;
				this.data.ui.to_select = [];
				this.data.ui.selected.each(function () { if(this.id) { _this.data.ui.to_select.push("#" + this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")); } });
				this.__callback(this.data.ui.to_select);
			},
			reselect : function () {
				var _this = this,
					s = this.data.ui.to_select;
				s = $.map($.makeArray(s), function (n) { return "#" + n.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"); });
				// this.deselect_all(); WHY deselect, breaks plugin state notifier?
				$.each(s, function (i, val) { if(val && val !== "#") { _this.select_node(val); } });
				this.data.ui.selected = this.data.ui.selected.filter(function () { return this.parentNode; });
				this.__callback();
			},
			refresh : function (obj) {
				this.save_selected();
				return this.__call_old();
			},
			hover_node : function (obj) {
				obj = this._get_node(obj);
				if(!obj.length) { return false; }
				//if(this.data.ui.hovered && obj.get(0) === this.data.ui.hovered.get(0)) { return; }
				if(!obj.hasClass("jstree-hovered")) { this.dehover_node(); }
				this.data.ui.hovered = obj.children("a").addClass("jstree-hovered").parent();
				this._fix_scroll(obj);
				this.__callback({ "obj" : obj });
			},
			dehover_node : function () {
				var obj = this.data.ui.hovered, p;
				if(!obj || !obj.length) { return false; }
				p = obj.children("a").removeClass("jstree-hovered").parent();
				if(this.data.ui.hovered[0] === p[0]) { this.data.ui.hovered = null; }
				this.__callback({ "obj" : obj });
			},
			focus_node : function (obj) {
				obj = this._get_node(obj);
				if(!obj.length) { return false; }
				//if(this.data.ui.hovered && obj.get(0) === this.data.ui.hovered.get(0)) { return; }
				if(!obj.hasClass("jstree-focus")) { this.defocus_node(); }
				this.data.ui.hovered = obj.children("a").addClass("jstree-focus").parent();
				this._fix_scroll(obj);
				this.__callback({ "obj" : obj });
			},
			defocus_node : function () {
				var obj = this.data.ui.hovered, p;
				if(!obj || !obj.length) { return false; }
				p = obj.children("a").removeClass("jstree-focus").parent();
				if(this.data.ui.hovered[0] === p[0]) { this.data.ui.hovered = null; }
				this.__callback({ "obj" : obj });
			},
			select_node : function (obj, check, e) {
				obj = this._get_node(obj);
				if(obj == -1 || !obj || !obj.length) { return false; }
				var s = this._get_settings().ui,
					is_multiple = (s.select_multiple_modifier == "on" || (s.select_multiple_modifier !== false && e && e[s.select_multiple_modifier + "Key"])),
					is_range = (s.select_range_modifier !== false && e && e[s.select_range_modifier + "Key"] && this.data.ui.last_selected && this.data.ui.last_selected[0] !== obj[0] && this.data.ui.last_selected.parent()[0] === obj.parent()[0]),
					is_selected = this.is_selected(obj),
					proceed = true,
					t = this;
				if(check) {
					if(s.disable_selecting_children && is_multiple &&
						(
							(obj.parentsUntil(".jstree","li").children("a.jstree-clicked").length) ||
							(obj.children("ul").find("a.jstree-clicked:eq(0)").length)
						)
					) {
						return false;
					}
					proceed = false;
					switch(!0) {
						case (is_range):
							this.data.ui.last_selected.addClass("jstree-last-selected");
							obj = obj[ obj.index() < this.data.ui.last_selected.index() ? "nextUntil" : "prevUntil" ](".jstree-last-selected").andSelf();
							if(s.select_limit == -1 || obj.length < s.select_limit) {
								this.data.ui.last_selected.removeClass("jstree-last-selected");
								this.data.ui.selected.each(function () {
									if(this !== t.data.ui.last_selected[0]) { t.deselect_node(this); }
								});
								is_selected = false;
								proceed = true;
							}
							else {
								proceed = false;
							}
							break;
						case (is_selected && !is_multiple):
							this.deselect_all();
							is_selected = false;
							proceed = true;
							break;
						case (!is_selected && !is_multiple):
							if(s.select_limit == -1 || s.select_limit > 0) {
								this.deselect_all();
								proceed = true;
							}
							break;
						case (is_selected && is_multiple):
							this.deselect_node(obj);
							break;
						case (!is_selected && is_multiple):
							if(s.select_limit == -1 || this.data.ui.selected.length + 1 <= s.select_limit) {
								proceed = true;
							}
							break;
					}
				}
				if(proceed && !is_selected) {
					if(!is_range) { this.data.ui.last_selected = obj; }
					obj.children("a").addClass("jstree-clicked");
					if(s.selected_parent_open) {
						obj.parents(".jstree-closed").each(function () { t.open_node(this, false, true); });
					}
					this.data.ui.selected = this.data.ui.selected.add(obj);
					this._fix_scroll(obj.eq(0));
					this.__callback({ "obj" : obj, "e" : e });
				}
			},
			_fix_scroll : function (obj) {
				var c = this.get_container()[0], t;
				if(c.scrollHeight > c.offsetHeight) {
					obj = this._get_node(obj);
					if(!obj || obj === -1 || !obj.length || !obj.is(":visible")) { return; }
					t = obj.offset().top - this.get_container().offset().top;
					if(t < 0) {
						c.scrollTop = c.scrollTop + t - 1;
					}
					if(t + this.data.core.li_height + (c.scrollWidth > c.offsetWidth ? scrollbar_width : 0) > c.offsetHeight) {
						c.scrollTop = c.scrollTop + (t - c.offsetHeight + this.data.core.li_height + 1 + (c.scrollWidth > c.offsetWidth ? scrollbar_width : 0));
					}
				}
			},
			deselect_node : function (obj) {
				obj = this._get_node(obj);
				if(!obj.length) { return false; }
				if(this.is_selected(obj)) {
					obj.children("a").removeClass("jstree-clicked");
					this.data.ui.selected = this.data.ui.selected.not(obj);
					if(this.data.ui.last_selected.get(0) === obj.get(0)) { this.data.ui.last_selected = this.data.ui.selected.eq(0); }
					this.__callback({ "obj" : obj });
				}
			},
			toggle_select : function (obj) {
				obj = this._get_node(obj);
				if(!obj.length) { return false; }
				if(this.is_selected(obj)) { this.deselect_node(obj); }
				else { this.select_node(obj); }
			},
			is_selected : function (obj) { return this.data.ui.selected.index(this._get_node(obj)) >= 0; },
			get_selected : function (context) {
				return context ? $(context).find("a.jstree-clicked").parent() : this.data.ui.selected;
			},
			deselect_all : function (context) {
				var ret = context ? $(context).find("a.jstree-clicked").parent() : this.get_container().find("a.jstree-clicked").parent();
				ret.children("a.jstree-clicked").removeClass("jstree-clicked");
				this.data.ui.selected = $([]);
				this.data.ui.last_selected = false;
				this.__callback({ "obj" : ret });
			}
		}
	});
	// include the selection plugin by default
	$.jstree.defaults.plugins.push("ui");
})(jQuery);

/*
* jsTree CRRM plugin
* Handles creating/renaming/removing/moving nodes by user interaction.
*/
(function ($) {
	$.jstree.plugin("crrm", {
		__init : function () {
			this.get_container()
				.bind("move_node.jstree", $.proxy(function (e, data) {
					if(this._get_settings().crrm.move.open_onmove) {
						var t = this;
						data.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function () {
							t.open_node(this, false, true);
						});
					}
				}, this));
		},
		defaults : {
			input_width_limit : 200,
			move : {
				always_copy			: false, // false, true or "multitree"
				open_onmove			: true,
				default_position	: "last",
				check_move			: function (m) { return true; }
			}
		},
		_fn : {
			_show_input : function (obj, callback) {
				obj = this._get_node(obj);
				var rtl = this._get_settings().core.rtl,
					w = this._get_settings().crrm.input_width_limit,
					w1 = obj.children("ins").width(),
					w2 = obj.find("> a:visible > ins").width() * obj.find("> a:visible > ins").length,
					t = this.get_text(obj),
					h1 = $("<div />", { css : { "position" : "absolute", "top" : "-200px", "left" : (rtl ? "0px" : "-1000px"), "visibility" : "hidden" } }).appendTo("body"),
					h2 = obj.css("position","relative").append(
					$("<input />", {
						"value" : t,
						"class" : "inforTextbox",
						"css" : {
							"position" : "absolute",
							"left"  : (rtl ? "auto" : (w1 + w2 + 4) + "px"),
							"right" : (rtl ? (w1 + w2 + 4) + "px" : "auto"),
							"top" : "0px",
							"width" : "150px" // will be set a bit further down
						},
						"blur" : $.proxy(function () {
							var i = obj.children(".inforTextbox"),
								v = i.val();

							if(v === "") { v = t; }
							h1.remove();
							i.remove(); // rollback purposes
							this.set_text(obj,t); // rollback purposes
							this.rename_node(obj, v);
							callback.call(this, obj, v, t);
							obj.css("position","");
						}, this),
						"keypress" : function(event) {
							var key = event.keyCode || event.which;
							if (key == 13) {
								$(this).trigger("blur");
								return false;
							}
						}
					})
				).children(".inforTextbox");
				this.set_text(obj, "");

				h2.val(t);
				h2.autoGrow({	//similute highlighted effect
					comfortZone: 20
				}).select();
			},
			rename : function (obj) {
				obj = this._get_node(obj);
				this.__rollback();
				var f = this.__callback;
				this._show_input(obj, function (obj, new_name, old_name) {
					f.call(this, { "obj" : obj, "new_name" : new_name, "old_name" : old_name });
				});
			},
			create : function (obj, position, js, callback, skip_rename) {
				var t, _this = this;
				obj = this._get_node(obj);
				if(!obj) { obj = -1; }
				this.__rollback();
				t = this.create_node(obj, position, js, function (t) {
					var p = this._get_parent(t),
						pos = $(t).index();
					if(callback) { callback.call(this, t); }
					if(p.length && p.hasClass("jstree-closed")) { this.open_node(p, false, true); }
					if(!skip_rename) {
						this._show_input(t, function (obj, new_name, old_name) {
							_this.__callback({ "obj" : obj, "name" : new_name, "parent" : p, "position" : pos });
						});
					}
					else { _this.__callback({ "obj" : t, "name" : this.get_text(t), "parent" : p, "position" : pos }); }
				});
				return t;
			},
			remove : function (obj) {
				obj = this._get_node(obj, true);
				var p = this._get_parent(obj), prev = this._get_prev(obj);
				this.__rollback();
				obj = this.delete_node(obj);
				if(obj !== false) { this.__callback({ "obj" : obj, "prev" : prev, "parent" : p }); }
			},
			check_move : function () {
				if(!this.__call_old()) { return false; }
				var s = this._get_settings().crrm.move;
				if(!s.check_move.call(this, this._get_move())) { return false; }
				return true;
			},
			move_node : function (obj, ref, position, is_copy, is_prepared, skip_check) {
				var s = this._get_settings().crrm.move;
				if(!is_prepared) {
					if(typeof position === "undefined") { position = s.default_position; }
					if(position === "inside" && !s.default_position.match(/^(before|after)$/)) { position = s.default_position; }
					return this.__call_old(true, obj, ref, position, is_copy, false, skip_check);
				}
				// if the move is already prepared
				if(s.always_copy === true || (s.always_copy === "multitree" && obj.rt.get_index() !== obj.ot.get_index() )) {
					is_copy = true;
				}
				this.__call_old(true, obj, ref, position, is_copy, true, skip_check);
			},

			cut : function (obj) {
				obj = this._get_node(obj, true);
				if(!obj || !obj.length) { return false; }
				this.data.crrm.cp_nodes = false;
				this.data.crrm.ct_nodes = obj;
				this.__callback({ "obj" : obj });
			},
			copy : function (obj) {
				obj = this._get_node(obj, true);
				if(!obj || !obj.length) { return false; }
				this.data.crrm.ct_nodes = false;
				this.data.crrm.cp_nodes = obj;
				this.__callback({ "obj" : obj });
			},
			paste : function (obj) {
				obj = this._get_node(obj);
				if(!obj || !obj.length) { return false; }
				var nodes = this.data.crrm.ct_nodes ? this.data.crrm.ct_nodes : this.data.crrm.cp_nodes;
				if(!this.data.crrm.ct_nodes && !this.data.crrm.cp_nodes) { return false; }
				if(this.data.crrm.ct_nodes) { this.move_node(this.data.crrm.ct_nodes, obj); this.data.crrm.ct_nodes = false; }
				if(this.data.crrm.cp_nodes) { this.move_node(this.data.crrm.cp_nodes, obj, false, true); }
				this.__callback({ "obj" : obj, "nodes" : nodes });
			}
		}
	});
	// include the crr plugin by default
	// $.jstree.defaults.plugins.push("crrm");
})(jQuery);

/*
* jsTree themes plugin
* Handles loading and setting themes, as well as detecting path to themes, etc.
*/
(function ($) {
	// this variable stores the path to the themes folder - if left as false - it will be autodetected
	$.jstree._themes = false;
	$.jstree.plugin("themes", {
		__init : function () {
			this.get_container()
				.bind("init.jstree", $.proxy(function () {
						var s = this._get_settings().themes;
						this.data.themes.dots = s.dots;
						this.data.themes.icons = s.icons;
						this.set_theme(s.theme, s.url);
					}, this))
				.bind("loaded.jstree", $.proxy(function () {
						// bound here too, as simple HTML tree's won't honor dots & icons otherwise
						if(!this.data.themes.dots) { this.hide_dots(); }
						else { this.show_dots(); }
						if(!this.data.themes.icons) { this.hide_icons(); }
						else { this.show_icons(); }
					}, this));
		},
		defaults : {
			theme : "default",
			url : false,
			dots : true,
			icons : true
		},
		_fn : {
			set_theme : function (theme_name, theme_url) {
				if(!theme_name) { return false; }
				if(!theme_url) { theme_url = $.jstree._themes + theme_name + '/style.css'; }
				if(this.data.themes.theme != theme_name) {
					this.get_container().removeClass('jstree-' + this.data.themes.theme);
					this.data.themes.theme = theme_name;
				}
				this.get_container().addClass('jstree-' + theme_name);
				if(!this.data.themes.dots) { this.hide_dots(); }
				else { this.show_dots(); }
				if(!this.data.themes.icons) { this.hide_icons(); }
				else { this.show_icons(); }
				this.__callback();
			},
			get_theme	: function () { return this.data.themes.theme; },

			show_dots	: function () { this.data.themes.dots = true; this.get_container().children("ul").removeClass("jstree-no-dots"); },
			hide_dots	: function () { this.data.themes.dots = false; this.get_container().children("ul").addClass("jstree-no-dots"); },
			toggle_dots	: function () { if(this.data.themes.dots) { this.hide_dots(); } else { this.show_dots(); } },

			show_icons	: function () { this.data.themes.icons = true; this.get_container().children("ul").removeClass("jstree-no-icons"); },
			hide_icons	: function () { this.data.themes.icons = false; this.get_container().children("ul").addClass("jstree-no-icons"); },
			toggle_icons: function () { if(this.data.themes.icons) { this.hide_icons(); } else { this.show_icons(); } }
		}
	});
	// autodetect themes path
	$(function () {
		if($.jstree._themes === false) {
			$("script").each(function () {
				if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/)) {
					$.jstree._themes = this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/, "") + 'themes/';
					return false;
				}
			});
		}
		if($.jstree._themes === false) { $.jstree._themes = "themes/"; }
	});
	// include the themes plugin by default
	$.jstree.defaults.plugins.push("themes");
})(jQuery);

/*
* jsTree hotkeys plugin
* Enables keyboard navigation for all tree instances
* Depends on the jstree ui & jquery hotkeys plugins
*/
(function ($) {
	var bound = [];
	function exec(i, event) {
		var f = $.jstree._focused(), tmp;
		if(f && f.data && f.data.hotkeys && f.data.hotkeys.enabled) {
			tmp = f._get_settings().hotkeys[i];
			if(tmp) { return tmp.call(f, event); }
		}
	}
	$.jstree.plugin("hotkeys", {
		__init : function () {
			if(typeof $.hotkeys === "undefined") { throw "jsTree hotkeys: jQuery hotkeys plugin not included."; }
			if(!this.data.ui) { throw "jsTree hotkeys: jsTree UI plugin not included."; }
			$.each(this._get_settings().hotkeys, function (i, v) {
				if(v !== false && $.inArray(i, bound) == -1) {
					$(document).bind("keydown", i, function (event) { return exec(i, event); });
					bound.push(i);
				}
			});
			this.get_container()
				.bind("lock.jstree", $.proxy(function () {
						if(this.data.hotkeys.enabled) { this.data.hotkeys.enabled = false; this.data.hotkeys.revert = true; }
					}, this))
				.bind("unlock.jstree", $.proxy(function () {
						if(this.data.hotkeys.revert) { this.data.hotkeys.enabled = true; }
					}, this));
			this.enable_hotkeys();
		},
		defaults : {
			"up" : function () {
				var o = this.data.ui.hovered || this.data.ui.last_selected || -1;
				this.focus_node(this._get_prev(o));
				return false;
			},
			"ctrl+up" : function () {
				var o = this.data.ui.hovered || this.data.ui.last_selected || -1;
				this.focus_node(this._get_prev(o));
				return false;
			},
			"shift+up" : function () {
				var o = this.data.ui.hovered || this.data.ui.last_selected || -1;
				this.focus_node(this._get_prev(o));
				return false;
			},
			"down" : function () {
				var o = this.data.ui.hovered || this.data.ui.last_selected || -1;
				this.focus_node(this._get_next(o));
				return false;
			},
			"ctrl+down" : function () {
				var o = this.data.ui.hovered || this.data.ui.last_selected || -1;
				this.focus_node(this._get_next(o));
				return false;
			},
			"shift+down" : function () {
				var o = this.data.ui.hovered || this.data.ui.last_selected || -1;
				this.focus_node(this._get_next(o));
				return false;
			},
			"left" : function () {
				var o = this.data.ui.hovered || this.data.ui.last_selected;
				if(o) {
					if(o.hasClass("jstree-open")) { this.close_node(o); }
					else { this.focus_node(this._get_prev(o)); }
				}
				return false;
			},
			"ctrl+left" : function () {
				var o = this.data.ui.hovered || this.data.ui.last_selected;
				if(o) {
					if(o.hasClass("jstree-open")) { this.close_node(o); }
					else { this.focus_node(this._get_prev(o)); }
				}
				return false;
			},
			"shift+left" : function () {
				var o = this.data.ui.hovered || this.data.ui.last_selected;
				if(o) {
					if(o.hasClass("jstree-open")) { this.close_node(o); }
					else { this.focus_node(this._get_prev(o)); }
				}
				return false;
			},
			"right" : function () {
				var o = this.data.ui.hovered || this.data.ui.last_selected;
				if(o && o.length) {
					if(o.hasClass("jstree-closed")) { this.open_node(o); }
					else { this.focus_node(this._get_next(o)); }
				}
				return false;
			},
			"ctrl+right" : function () {
				var o = this.data.ui.hovered || this.data.ui.last_selected;
				if(o && o.length) {
					if(o.hasClass("jstree-closed")) { this.open_node(o); }
					else { this.focus_node(this._get_next(o)); }
				}
				return false;
			},
			"shift+right" : function () {
				var o = this.data.ui.hovered || this.data.ui.last_selected;
				if(o && o.length) {
					if(o.hasClass("jstree-closed")) { this.open_node(o); }
					else { this.focus_node(this._get_next(o)); }
				}
				return false;
			},
			"space" : function () {
				if(this.data.ui.hovered) { this.data.ui.hovered.children("a:eq(0)").click(); }
				return false;
			},
			"ctrl+space" : function (event) {
				event.type = "click";
				if(this.data.ui.hovered) { this.data.ui.hovered.children("a:eq(0)").trigger(event); }
				return false;
			},
			"shift+space" : function (event) {
				event.type = "click";
				if(this.data.ui.hovered) { this.data.ui.hovered.children("a:eq(0)").trigger(event); }
				return false;
			},
			"f2" : function () { this.rename(this.data.ui.hovered || this.data.ui.last_selected); },
			"del" : function () { this.remove(this.data.ui.hovered || this._get_node(null)); }
		},
		_fn : {
			enable_hotkeys : function () {
				this.data.hotkeys.enabled = true;
			},
			disable_hotkeys : function () {
				this.data.hotkeys.enabled = false;
			}
		}
	});

	// include the hotkeys plugin by default
	$.jstree.defaults.plugins.push("hotkeys");
})(jQuery);

/*
* jsTree JSON plugin
* The JSON data store. Datastores are build by overriding the `load_node` and `_is_loaded` functions.
*/
(function ($) {
	$.jstree.plugin("json_data", {
		__init : function() {
			var s = this._get_settings().json_data;
			if(s.progressive_unload) {
				this.get_container().bind("after_close.jstree", function (e, data) {
					data.rslt.obj.children("ul").remove();
				});
			}
		},
		defaults : {
			// `data` can be a function:
			//  * accepts two arguments - node being loaded and a callback to pass the result to
			//  * will be executed in the current tree's scope & ajax won't be supported
			data : false,
			ajax : false,
			correct_state : true,
			progressive_render : false,
			progressive_unload : false
		},
		_fn : {
			load_node : function (obj, s_call, e_call) { var _this = this; this.load_node_json(obj, function () { _this.__callback({ "obj" : _this._get_node(obj) }); s_call.call(this); }, e_call); },
			_is_loaded : function (obj) {
				var s = this._get_settings().json_data;
				obj = this._get_node(obj);
				return obj == -1 || !obj || (!s.ajax && !s.progressive_render && !$.isFunction(s.data)) || obj.is(".jstree-open, .jstree-leaf") || obj.children("ul").children("li").length > 0;
			},
			refresh : function (obj) {
				obj = this._get_node(obj);
				var s = this._get_settings().json_data;
				if(obj && obj !== -1 && s.progressive_unload && ($.isFunction(s.data) || !!s.ajax)) {
					obj.removeData("jstree_children");
				}
				return this.__call_old();
			},
			load_node_json : function (obj, s_call, e_call) {
				var s = this.get_settings().json_data, d,
					error_func = function () {},
					success_func = function () {};
				obj = this._get_node(obj);

				if(obj && obj !== -1 && (s.progressive_render || s.progressive_unload) && !obj.is(".jstree-open, .jstree-leaf") && obj.children("ul").children("li").length === 0 && obj.data("jstree_children")) {
					d = this._parse_json(obj.data("jstree_children"), obj);
					if(d) {
						obj.append(d);
						if(!s.progressive_unload) { obj.removeData("jstree_children"); }
					}
					this.clean_node(obj);
					if(s_call) { s_call.call(this); }
					return;
				}

				if(obj && obj !== -1) {
					if(obj.data("jstree_is_loading")) { return; }
					else { obj.data("jstree_is_loading",true); }
				}
				switch(!0) {
					case (!s.data && !s.ajax): throw "Neither data nor ajax settings supplied.";
					// function option added here for easier model integration (also supporting async - see callback)
					case ($.isFunction(s.data)):
						s.data.call(this, obj, $.proxy(function (d) {
							d = this._parse_json(d, obj);
							if(!d) {
								if(obj === -1 || !obj) {
									if(s.correct_state) { this.get_container().children("ul").empty(); }
								}
								else {
									obj.children("a.jstree-loading").removeClass("jstree-loading");
									obj.removeData("jstree_is_loading");
									if(s.correct_state) { this.correct_state(obj); }
								}
								if(e_call) { e_call.call(this); }
							}
							else {
								if(obj === -1 || !obj) { this.get_container().children("ul").empty().append(d.children()); }
								else { obj.append(d).children("a.jstree-loading").removeClass("jstree-loading"); obj.removeData("jstree_is_loading"); }
								this.clean_node(obj);
								if(s_call) { s_call.call(this); }
							}
						}, this));
						break;
					case (!!s.data && !s.ajax) || (!!s.data && !!s.ajax && (!obj || obj === -1)):
						if(!obj || obj == -1) {
							d = this._parse_json(s.data, obj);
							if(d) {
								this.get_container().children("ul").empty().append(d.children());
								this.clean_node();
							}
							else {
								if(s.correct_state) { this.get_container().children("ul").empty(); }
							}
						}
						if(s_call) { s_call.call(this); }
						break;
					case (!s.data && !!s.ajax) || (!!s.data && !!s.ajax && obj && obj !== -1):
						error_func = function (x, t, e) {
							var ef = this.get_settings().json_data.ajax.error,
								errortext = "";

							if(ef) { errortext = ef.call(this, x, t, e); }
							if(obj != -1 && obj.length) {
								obj.children("a.jstree-loading").removeClass("jstree-loading");
								obj.removeData("jstree_is_loading");
								if(t === "success" && s.correct_state) { this.correct_state(obj); }
							}
							else {
								if(t === "success" && s.correct_state) { this.get_container().children("ul").empty(); }
							}
							if(obj == -1) {	//tree completely failed loading show a message
								this.get_container().find(".jstree-last .jstree-loading").removeClass("jstree-loading").html((errortext==undefined ? "" :errortext));	//.remove();
							}
							if(e_call) { e_call.call(this); }
						};
						success_func = function (d, t, x) {
							var sf = this.get_settings().json_data.ajax.success;
							if(sf) { d = sf.call(this,d,t,x) || d; }
							if(d === "" || (d && d.toString && d.toString().replace(/^[\s\n]+$/,"") === "") || (!$.isArray(d) && !$.isPlainObject(d))) {
								return error_func.call(this, x, t, "");
							}
							d = this._parse_json(d, obj);
							if(d) {
								if(obj === -1 || !obj) { this.get_container().children("ul").empty().append(d.children()); }
								else { obj.append(d).children("a.jstree-loading").removeClass("jstree-loading"); obj.removeData("jstree_is_loading"); }
								this.clean_node(obj);
								if(s_call) { s_call.call(this); }
							}
							else {
								if(obj === -1 || !obj) {
									if(s.correct_state) {
										this.get_container().children("ul").empty();
										if(s_call) { s_call.call(this); }
									}
								}
								else {
									obj.children("a.jstree-loading").removeClass("jstree-loading");
									obj.removeData("jstree_is_loading");
									if(s.correct_state) {
										this.correct_state(obj);
										if(s_call) { s_call.call(this); }
									}
								}
							}
						};
						s.ajax.context = this;
						s.ajax.error = error_func;
						s.ajax.success = success_func;
						if(!s.ajax.dataType) { s.ajax.dataType = "json"; }
						if($.isFunction(s.ajax.url)) { s.ajax.url = s.ajax.url.call(this, obj); }
						if($.isFunction(s.ajax.data)) { s.ajax.data = s.ajax.data.call(this, obj); }
						$.ajax(s.ajax);
						break;
				}
			},
			_parse_json : function (js, obj, is_callback) {
				var d = false,
					p = this._get_settings(),
					s = p.json_data,
					t = p.core.html_titles,
					tmp, i, j, ul1, ul2;

				if(!js) { return d; }
				if(s.progressive_unload && obj && obj !== -1) {
					obj.data("jstree_children", d);
				}
				if($.isArray(js)) {
					d = $('<ul>');
					if(!js.length) { return false; }
					for(i = 0, j = js.length; i < j; i++) {
						tmp = this._parse_json(js[i], obj, true);
						if(tmp.length) {
							d = d.append(tmp);
						}
					}
					d = d.children();
				}
				else {
					if(typeof js == "string") { js = { data : js }; }
					if(!js.data && js.data !== "") { return d; }
					d = $("<li />");
					if(js.attr) { d.attr(js.attr); }
					if(js.metadata) { d.data(js.metadata); }
					if(js.state) { d.addClass("jstree-" + js.state); }
					if(!$.isArray(js.data)) { tmp = js.data; js.data = []; js.data.push(tmp); }
					$.each(js.data, function (i, m) {
						tmp = $("<a />");
						if($.isFunction(m)) { m = m.call(this, js); }
						if(typeof m == "string") { tmp.attr('href','#')[ t ? "html" : "text" ](m); }
						else {
							if(!m.attr) { m.attr = {}; }
							if(!m.attr.href) { m.attr.href = '#'; }
							tmp.attr(m.attr)[ t ? "html" : "text" ](m.title);
							if(m.language) { tmp.addClass(m.language); }
						}
						tmp.prepend("<ins class='jstree-icon'><span>&#160;</span></ins>");
						if(!m.icon && js.icon) { m.icon = js.icon; }
						if(m.icon) {
							if(m.icon.indexOf("/") === -1) { tmp.children("ins").addClass(m.icon); }
							else { tmp.children("ins").css("background","url('" + m.icon + "') center center no-repeat"); }
						}
						d.append(tmp);
					});
					d.prepend("<ins class='jstree-icon'><span>&#160;</span></ins>");
					if(js.children) {
						if(s.progressive_render && js.state !== "open") {
							d.addClass("jstree-closed").data("jstree_children", js.children);
						}
						else {
							if(s.progressive_unload) { d.data("jstree_children", js.children); }
							if($.isArray(js.children) && js.children.length) {
								tmp = this._parse_json(js.children, obj, true);
								if(tmp.length) {
									ul2 = $("<ul />");
									ul2.append(tmp);
									d.append(ul2);
								}
							}
						}
					}
				}
				if(!is_callback) {
					ul1 = $("<ul />");
					ul1.append(d);
					d = ul1;
				}
				return d;
			},
			get_json : function (obj, li_attr, a_attr, is_callback) {
				var result = [],
					s = this._get_settings(),
					_this = this,
					tmp1, tmp2, li, a, t, lang;
				obj = this._get_node(obj);
				if(!obj || obj === -1) { obj = this.get_container().find("> ul > li"); }
				li_attr = $.isArray(li_attr) ? li_attr : [ "id", "class" ];
				if(!is_callback && this.data.types) { li_attr.push(s.types.type_attr); }
				a_attr = $.isArray(a_attr) ? a_attr : [ ];

				obj.each(function () {
					li = $(this);
					tmp1 = { data : [] };
					if(li_attr.length) { tmp1.attr = { }; }
					$.each(li_attr, function (i, v) {
						tmp2 = li.attr(v);
						if(tmp2 && tmp2.length && tmp2.replace(/jstree[^ ]*/ig,'').length) {
							tmp1.attr[v] = (" " + tmp2).replace(/ jstree[^ ]*/ig,'').replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"");
						}
					});
					if(li.hasClass("jstree-open")) { tmp1.state = "open"; }
					if(li.hasClass("jstree-closed")) { tmp1.state = "closed"; }
					if(li.data()) { tmp1.metadata = li.data(); }
					a = li.children("a");
					a.each(function () {
						t = $(this);
						if(
							a_attr.length ||
							$.inArray("languages", s.plugins) !== -1 ||
							t.children("ins").get(0).style.backgroundImage.length ||
							(t.children("ins").get(0).className && t.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,'').length)
						) {
							lang = false;
							if($.inArray("languages", s.plugins) !== -1 && $.isArray(s.languages) && s.languages.length) {
								$.each(s.languages, function (l, lv) {
									if(t.hasClass(lv)) {
										lang = lv;
										return false;
									}
								});
							}
							tmp2 = { attr : { }, title : _this.get_text(t, lang) };
							$.each(a_attr, function (k, z) {
								tmp2.attr[z] = (" " + (t.attr(z) || "")).replace(/ jstree[^ ]*/ig,'').replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"");
							});
							if($.inArray("languages", s.plugins) !== -1 && $.isArray(s.languages) && s.languages.length) {
								$.each(s.languages, function (k, z) {
									if(t.hasClass(z)) { tmp2.language = z; return true; }
								});
							}
							if(t.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,'').replace(/^\s+$/ig,"").length) {
								tmp2.icon = t.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,'').replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"");
							}
							if(t.children("ins").get(0).style.backgroundImage.length) {
								tmp2.icon = t.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","");
							}
						}
						else {
							tmp2 = _this.get_text(t);
						}
						if(a.length > 1) { tmp1.data.push(tmp2); }
						else { tmp1.data = tmp2; }
					});
					li = li.find("> ul > li");
					if(li.length) { tmp1.children = _this.get_json(li, li_attr, a_attr, true); }
					result.push(tmp1);
				});
				return result;
			}
		}
	});
})(jQuery);

/*
* jsTree cookies plugin
* Stores the currently opened/selected nodes in a cookie and then restores them
* Depends on the jquery.cookie plugin
*/
(function ($) {
	$.jstree.plugin("cookies", {
		__init : function () {
			if(typeof $.cookie === "undefined") { throw "jsTree cookie: jQuery cookie plugin not included."; }

			var s = this._get_settings().cookies,
				tmp;
			if(!!s.save_loaded) {
				tmp = $.cookie(s.save_loaded);
				if(tmp && tmp.length) { this.data.core.to_load = tmp.split(","); }
			}
			if(!!s.save_opened) {
				tmp = $.cookie(s.save_opened);
				if(tmp && tmp.length) { this.data.core.to_open = tmp.split(","); }
			}
			if(!!s.save_selected) {
				tmp = $.cookie(s.save_selected);
				if(tmp && tmp.length && this.data.ui) { this.data.ui.to_select = tmp.split(","); }
			}
			this.get_container()
				.one( ( this.data.ui ? "reselect" : "reopen" ) + ".jstree", $.proxy(function () {
					this.get_container()
						.bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree", $.proxy(function (e) {
								if(this._get_settings().cookies.auto_save) { this.save_cookie((e.handleObj.namespace + e.handleObj.type).replace("jstree","")); }
							}, this));
				}, this));
		},
		defaults : {
			save_loaded		: "jstree_load",
			save_opened		: "jstree_open",
			save_selected	: "jstree_select",
			auto_save		: true,
			cookie_options	: {}
		},
		_fn : {
			save_cookie : function (c) {
				if(this.data.core.refreshing) { return; }
				var s = this._get_settings().cookies;
				if(!c) { // if called manually and not by event
					if(s.save_loaded) {
						this.save_loaded();
						$.cookie(s.save_loaded, this.data.core.to_load.join(","), s.cookie_options);
					}
					if(s.save_opened) {
						this.save_opened();
						$.cookie(s.save_opened, this.data.core.to_open.join(","), s.cookie_options);
					}
					if(s.save_selected && this.data.ui) {
						this.save_selected();
						$.cookie(s.save_selected, this.data.ui.to_select.join(","), s.cookie_options);
					}
					return;
				}
				switch(c) {
					case "open_node":
					case "close_node":
						if(!!s.save_opened) {
							this.save_opened();
							$.cookie(s.save_opened, this.data.core.to_open.join(","), s.cookie_options);
						}
						if(!!s.save_loaded) {
							this.save_loaded();
							$.cookie(s.save_loaded, this.data.core.to_load.join(","), s.cookie_options);
						}
						break;
					case "select_node":
					case "deselect_node":
						if(!!s.save_selected && this.data.ui) {
							this.save_selected();
							$.cookie(s.save_selected, this.data.ui.to_select.join(","), s.cookie_options);
						}
						break;
				}
			}
		}
	});
	// include cookies by default
	$.jstree.defaults.plugins.push("cookies");
})(jQuery);

/*
* jsTree sort plugin
* Sorts items alphabetically (or using any other function)
*/
(function ($) {
	$.jstree.plugin("sort", {
		__init : function () {
			this.get_container()
				.bind("load_node.jstree", $.proxy(function (e, data) {
						var obj = this._get_node(data.rslt.obj);
						obj = obj === -1 ? this.get_container().children("ul") : obj.children("ul");
						this.sort(obj);
					}, this))
				.bind("rename_node.jstree create_node.jstree create.jstree", $.proxy(function (e, data) {
						this.sort(data.rslt.obj.parent());
					}, this))
				.bind("move_node.jstree", $.proxy(function (e, data) {
						var m = data.rslt.np == -1 ? this.get_container() : data.rslt.np;
						this.sort(m.children("ul"));
					}, this));
		},
		defaults : function (a, b) { return this.get_text(a) > this.get_text(b) ? 1 : -1; },
		_fn : {
			sort : function (obj) {
				var s = this._get_settings().sort,
					t = this;
				obj.append($.makeArray(obj.children("li")).sort($.proxy(s, t)));
				obj.find("> li > ul").each(function() { t.sort($(this)); });
				this.clean_node(obj);
			}
		}
	});
})(jQuery);

/*
* jsTree DND plugin
* Drag and drop plugin for moving/copying nodes
*/
(function ($) {
	var o = false,
		r = false,
		m = false,
		ml = false,
		sli = false,
		sti = false,
		dir1 = false,
		dir2 = false,
		last_pos = false;
	$.inforTree.dnd = {
		is_down : false,
		is_drag : false,
		helper : false,
		scroll_spd : 10,
		init_x : 0,
		init_y : 0,
		threshold : 5,
		helper_left : 5,
		helper_top : 10,
		user_data : {},

		drag_start : function (e, data, html) {
			if($.inforTree.dnd.is_drag) {
				//$.inforTree.drag_stop({});
				this.drag_stop({});
			}
			try {
				e.currentTarget.unselectable = "on";
				e.currentTarget.onselectstart = function() { return false; };
				if(e.currentTarget.style) { e.currentTarget.style.MozUserSelect = "none"; }
			} catch(err) { }
			$.inforTree.dnd.init_x = e.pageX;
			$.inforTree.dnd.init_y = e.pageY;
			$.inforTree.dnd.user_data = data;
			$.inforTree.dnd.is_down = true;
			$.inforTree.dnd.helper = $("<div id='vakata-dragged' />").html(html); //.fadeTo(10,0.25);
			$(document).bind("mousemove", $.inforTree.dnd.drag);
			$(document).bind("mouseup", $.inforTree.dnd.drag_stop);
			return false;
		},
		drag : function (e) {
			if(!$.inforTree.dnd.is_down) { return; }
			if(!$.inforTree.dnd.is_drag) {
				if(Math.abs(e.pageX - $.inforTree.dnd.init_x) > 5 || Math.abs(e.pageY - $.inforTree.dnd.init_y) > 5) {
					$.inforTree.dnd.helper.appendTo("body");
					$.inforTree.dnd.is_drag = true;
					$(document).triggerHandler("drag_start.inforTree", { "event" : e, "data" : $.inforTree.dnd.user_data });
				}
				else { return; }
			}

			// maybe use a scrolling parent element instead of document?
			if(e.type === "mousemove") { // thought of adding scroll in order to move the helper, but mouse poisition is n/a
				var d = $(document), t = d.scrollTop(), l = d.scrollLeft();
				if(e.pageY - t < 20) {
					if(sti && dir1 === "down") { clearInterval(sti); sti = false; }
					if(!sti) { dir1 = "up"; sti = setInterval(function () { $(document).scrollTop($(document).scrollTop() - $.inforTree.dnd.scroll_spd); }, 150); }
				}
				else {
					if(sti && dir1 === "up") { clearInterval(sti); sti = false; }
				}
				if($(window).height() - (e.pageY - t) < 20) {
					if(sti && dir1 === "up") { clearInterval(sti); sti = false; }
					if(!sti) { dir1 = "down"; sti = setInterval(function () { $(document).scrollTop($(document).scrollTop() + $.inforTree.dnd.scroll_spd); }, 150); }
				}
				else {
					if(sti && dir1 === "down") { clearInterval(sti); sti = false; }
				}

				if(e.pageX - l < 20) {
					if(sli && dir2 === "right") { clearInterval(sli); sli = false; }
					if(!sli) { dir2 = "left"; sli = setInterval(function () { $(document).scrollLeft($(document).scrollLeft() - $.inforTree.dnd.scroll_spd); }, 150); }
				}
				else {
					if(sli && dir2 === "left") { clearInterval(sli); sli = false; }
				}
				if($(window).width() - (e.pageX - l) < 20) {
					if(sli && dir2 === "left") { clearInterval(sli); sli = false; }
					if(!sli) { dir2 = "right"; sli = setInterval(function () { $(document).scrollLeft($(document).scrollLeft() + $.inforTree.dnd.scroll_spd); }, 150); }
				}
				else {
					if(sli && dir2 === "right") { clearInterval(sli); sli = false; }
				}
			}

			$.inforTree.dnd.helper.css({ left : (e.pageX + $.inforTree.dnd.helper_left) + "px", top : (e.pageY + $.inforTree.dnd.helper_top) + "px" });
			$(document).triggerHandler("drag.inforTree", { "event" : e, "data" : $.inforTree.dnd.user_data });
		},
		drag_stop : function (e) {
			if(sli) { clearInterval(sli); }
			if(sti) { clearInterval(sti); }
			$(document).unbind("mousemove", $.inforTree.dnd.drag);
			$(document).unbind("mouseup", $.inforTree.dnd.drag_stop);
			$(document).triggerHandler("drag_stop.inforTree", { "event" : e, "data" : $.inforTree.dnd.user_data });
			$.inforTree.dnd.helper.remove();
			$.inforTree.dnd.init_x = 0;
			$.inforTree.dnd.init_y = 0;
			$.inforTree.dnd.user_data = {};
			$.inforTree.dnd.is_down = false;
			$.inforTree.dnd.is_drag = false;
		}
	};
	$.jstree.plugin("dnd", {
		__init : function () {
			this.data.dnd = {
				active : false,
				after : false,
				inside : false,
				before : false,
				off : false,
				prepared : false,
				w : 0,
				to1 : false,
				to2 : false,
				cof : false,
				cw : false,
				ch : false,
				i1 : false,
				i2 : false,
				mto : false
			};
			this.addDragElements();
			//this.get_container().sortable({items: "li", forcePlaceHolder: true, axis: "y"});
			this.get_container()
				.bind("mouseenter.jstree", $.proxy(function (e) {
						if($.inforTree.dnd.is_drag && $.inforTree.dnd.user_data.jstree) {
							if(this.data.themes) {
								m.attr("class", "jstree-" + this.data.themes.theme);
								if(ml) { ml.attr("class", "jstree-" + this.data.themes.theme); }
								$.inforTree.dnd.helper.attr("class", "jstree-dnd-helper jstree-" + this.data.themes.theme);
							}
							if(e.currentTarget === e.target && $.inforTree.dnd.user_data.obj && $($.inforTree.dnd.user_data.obj).length && $($.inforTree.dnd.user_data.obj).parents(".jstree:eq(0)")[0] !== e.target) { // node should not be from the same tree
								var tr = $.jstree._reference(e.target), dc;
								if(tr.data.dnd.foreign) {
									dc = tr._get_settings().dnd.drag_check.call(this, { "o" : o, "r" : tr.get_container(), is_root : true });
									if(dc === true || dc.inside === true || dc.before === true || dc.after === true) {
										$.inforTree.dnd.helper.children("ins").attr("class","jstree-ok");
									}
								}
								else {
									tr.prepare_move(o, tr.get_container(), "last");
									if(tr.check_move()) {
										$.inforTree.dnd.helper.children("ins").attr("class","jstree-ok");
									}
								}
							}
						}
					}, this))
				.bind("mouseup.jstree", $.proxy(function (e) {
						//if($.inforTree.dnd.is_drag && $.inforTree.dnd.user_data.jstree && $(e.currentTarget).find("> ul > li").length === 0) {
						if($.inforTree.dnd.is_drag && $.inforTree.dnd.user_data.jstree && e.currentTarget === e.target && $.inforTree.dnd.user_data.obj && $($.inforTree.dnd.user_data.obj).length && $($.inforTree.dnd.user_data.obj).parents(".jstree:eq(0)")[0] !== e.target) { // node should not be from the same tree
							var tr = $.jstree._reference(e.currentTarget), dc;
							if(tr.data.dnd.foreign) {
								dc = tr._get_settings().dnd.drag_check.call(this, { "o" : o, "r" : tr.get_container(), is_root : true });
								if(dc === true || dc.inside === true || dc.before === true || dc.after === true) {
									tr._get_settings().dnd.drag_finish.call(this, { "o" : o, "r" : tr.get_container(), is_root : true });
								}
							}
							else {
								tr.move_node(o, tr.get_container(), "last", e[tr._get_settings().dnd.copy_modifier + "Key"]);
							}
						}
					}, this))
				.bind("mouseleave.jstree", $.proxy(function (e) {
						if(e.relatedTarget && e.relatedTarget.id && e.relatedTarget.id === "jstree-marker-line") {
							return false;
						}
						if($.inforTree.dnd.is_drag && $.inforTree.dnd.user_data.jstree) {
							if(this.data.dnd.i1) { clearInterval(this.data.dnd.i1); }
							if(this.data.dnd.i2) { clearInterval(this.data.dnd.i2); }
							if(this.data.dnd.to1) { clearTimeout(this.data.dnd.to1); }
							if(this.data.dnd.to2) { clearTimeout(this.data.dnd.to2); }
							if($.inforTree.dnd.helper.children("ins").hasClass("jstree-ok")) {
								$.inforTree.dnd.helper.children("ins").attr("class","jstree-invalid");
							}
						}
					}, this))
				.bind("mousemove.jstree", $.proxy(function (e) {
						if($.inforTree.dnd.is_drag && $.inforTree.dnd.user_data.jstree) {
							var cnt = this.get_container()[0];

							// Horizontal scroll
							if(e.pageX + 24 > this.data.dnd.cof.left + this.data.dnd.cw) {
								if(this.data.dnd.i1) { clearInterval(this.data.dnd.i1); }
								this.data.dnd.i1 = setInterval($.proxy(function () { this.scrollLeft += $.inforTree.dnd.scroll_spd; }, cnt), 100);
							}
							else if(e.pageX - 24 < this.data.dnd.cof.left) {
								if(this.data.dnd.i1) { clearInterval(this.data.dnd.i1); }
								this.data.dnd.i1 = setInterval($.proxy(function () { this.scrollLeft -= $.inforTree.dnd.scroll_spd; }, cnt), 100);
							}
							else {
								if(this.data.dnd.i1) { clearInterval(this.data.dnd.i1); }
							}

							// Vertical scroll
							if(e.pageY + 24 > this.data.dnd.cof.top + this.data.dnd.ch) {
								if(this.data.dnd.i2) { clearInterval(this.data.dnd.i2); }
								this.data.dnd.i2 = setInterval($.proxy(function () { this.scrollTop += $.inforTree.dnd.scroll_spd; }, cnt), 100);
							}
							else if(e.pageY - 24 < this.data.dnd.cof.top) {
								if(this.data.dnd.i2) { clearInterval(this.data.dnd.i2); }
								this.data.dnd.i2 = setInterval($.proxy(function () { this.scrollTop -= $.inforTree.dnd.scroll_spd; }, cnt), 100);
							}
							else {
								if(this.data.dnd.i2) { clearInterval(this.data.dnd.i2); }
							}

						}
					}, this))
				.bind("scroll.jstree", $.proxy(function (e) {
						if($.inforTree.dnd.is_drag && $.inforTree.dnd.user_data.jstree && m && ml) {
							m.hide();
							ml.hide();
						}
					}, this))
				.delegate("a", "mousedown.jstree", $.proxy(function (e) {
						if(e.which === 1) {
							this.start_drag(e.currentTarget, e);
							return false;
						}
					}, this))
				.delegate("a", "mouseenter.jstree", $.proxy(function (e) {
						if($.inforTree.dnd.is_drag && $.inforTree.dnd.user_data.jstree) {
							this.dnd_enter(e.currentTarget);
						}
					}, this))
				.delegate("a", "mousemove.jstree", $.proxy(function (e) {
						if($.inforTree.dnd.is_drag && $.inforTree.dnd.user_data.jstree) {
							if(!r || !r.length || r.children("a")[0] !== e.currentTarget) {
								this.dnd_enter(e.currentTarget);
							}
							if(typeof this.data.dnd.off.top === "undefined") { this.data.dnd.off = $(e.target).offset(); }
							this.data.dnd.w = (e.pageY - (this.data.dnd.off.top || 0)) % this.data.core.li_height;
							if(this.data.dnd.w < 0) { this.data.dnd.w += this.data.core.li_height; }
							this.dnd_show();
						}
					}, this))
				.delegate("a", "mouseleave.jstree", $.proxy(function (e) {
						if($.inforTree.dnd.is_drag && $.inforTree.dnd.user_data.jstree) {
							if(e.relatedTarget && e.relatedTarget.id && e.relatedTarget.id === "jstree-marker-line") {
								return false;
							}
								if(m) { m.hide(); }
								if(ml) { ml.hide(); }

							this.data.dnd.mto = setTimeout(
								(function (t) { return function () { t.dnd_leave(e); }; })(this),
							0);
						}
					}, this))
				.delegate("a", "mouseup.jstree", $.proxy(function (e) {
						if($.inforTree.dnd.is_drag && $.inforTree.dnd.user_data.jstree) {
							this.dnd_finish(e);
						}
					}, this));

			$(document)
				.bind("drag_stop.inforTree", $.proxy(function () {
						if(this.data.dnd.to1) { clearTimeout(this.data.dnd.to1); }
						if(this.data.dnd.to2) { clearTimeout(this.data.dnd.to2); }
						if(this.data.dnd.i1) { clearInterval(this.data.dnd.i1); }
						if(this.data.dnd.i2) { clearInterval(this.data.dnd.i2); }
						this.data.dnd.after		= false;
						this.data.dnd.before	= false;
						this.data.dnd.inside	= false;
						this.data.dnd.off		= false;
						this.data.dnd.prepared	= false;
						this.data.dnd.w			= false;
						this.data.dnd.to1		= false;
						this.data.dnd.to2		= false;
						this.data.dnd.i1		= false;
						this.data.dnd.i2		= false;
						this.data.dnd.active	= false;
						this.data.dnd.foreign	= false;
						if(m) { m.css({ "top" : "-2000px" }); }
						if(ml) { ml.css({ "top" : "-2000px" }); }
					}, this))
				.bind("drag_start.inforTree", $.proxy(function (e, data) {
						if(data.data.jstree) {
							var et = $(data.event.target);
							if(et.closest(".jstree").hasClass("jstree-" + this.get_index())) {
								this.dnd_enter(et);
							}
						}
					}, this));

			var s = this._get_settings().dnd;
			if(s.drag_target) {
				$(document)
					.delegate(s.drag_target, "mousedown.jstree-" + this.get_index(), $.proxy(function (e) {
						o = e.target;
						$.inforTree.dnd.drag_start(e, { jstree : true, obj : e.target }, "<ins class='jstree-icon'><span>&#160;</span></ins>" + $(e.target).text() );
						if(this.data.themes) {
							if(m) { m.attr("class", "jstree-" + this.data.themes.theme); }
							if(ml) { ml.attr("class", "jstree-" + this.data.themes.theme); }
							$.inforTree.dnd.helper.attr("class", "jstree-dnd-helper jstree-" + this.data.themes.theme);
						}
						$.inforTree.dnd.helper.children("ins").attr("class","jstree-invalid");
						var cnt = this.get_container();
						this.data.dnd.cof = cnt.offset();
						this.data.dnd.cw = parseInt(cnt.width(),10);
						this.data.dnd.ch = parseInt(cnt.height(),10);
						this.data.dnd.foreign = true;
					}, this));
			}
			if(s.drop_target) {
				$(document)
					.delegate(s.drop_target, "mouseenter.jstree-" + this.get_index(), $.proxy(function (e) {
							if(this.data.dnd.active && this._get_settings().dnd.drop_check.call(this, { "o" : o, "r" : $(e.target), "e" : e })) {
								$.inforTree.dnd.helper.children("ins").attr("class","jstree-ok");
							}
						}, this))
					.delegate(s.drop_target, "mousemove.jstree-" + this.get_index(), $.proxy(function (e) {
						if (this.data.dnd.active && this._get_settings().dnd.drop_check.call(this, { "o": o, "r": $(e.target), "e": e })) {
							if (!$.inforTree.dnd.helper.children("ins").hasClass("jstree-ok")) {
								$.inforTree.dnd.helper.children("ins").attr("class", "jstree-ok");
							}
						}
						}, this))
					.delegate(s.drop_target, "mouseleave.jstree-" + this.get_index(), $.proxy(function (e) {
							if(this.data.dnd.active) {
								$.inforTree.dnd.helper.children("ins").attr("class","jstree-invalid");
							}
						}, this))
					.delegate(s.drop_target, "mouseup.jstree-" + this.get_index(), $.proxy(function (e) {
							if(this.data.dnd.active && $.inforTree.dnd.helper.children("ins").hasClass("jstree-ok")) {
								this._get_settings().dnd.drop_finish.call(this, { "o" : o, "r" : $(e.target), "e" : e });
							}
						}, this));
			}
		},
		defaults : {
			copy_modifier	: "ctrl",
			check_timeout	: 100,
			open_timeout	: 500,
			drop_target		: ".jstree-drop",
			drop_check		: function (data) { return true; },
			drop_finish		: $.noop,
			drag_target		: ".jstree-draggable",
			drag_finish		: $.noop,
			drag_check		: function (data) { return { after : false, before : false, inside : true }; }
		},
		_fn : {
			dnd_prepare : function () {
				if(!r || !r.length) { return; }
				this.data.dnd.off = r.offset();
				if(this._get_settings().core.rtl) {
					this.data.dnd.off.right = this.data.dnd.off.left + r.width();
				}
				if(this.data.dnd.foreign) {
					var a = this._get_settings().dnd.drag_check.call(this, { "o" : o, "r" : r });
					this.data.dnd.after = a.after;
					this.data.dnd.before = a.before;
					this.data.dnd.inside = a.inside;
					this.data.dnd.prepared = true;
					return this.dnd_show();
				}
				this.prepare_move(o, r, "before");
				this.data.dnd.before = this.check_move();
				this.prepare_move(o, r, "after");
				this.data.dnd.after = this.check_move();
				if(this._is_loaded(r)) {
					this.prepare_move(o, r, "inside");
					this.data.dnd.inside = this.check_move();
				}
				else {
					this.data.dnd.inside = false;
				}
				this.data.dnd.prepared = true;
				return this.dnd_show();
			},
			dnd_show : function () {
				if(!this.data.dnd.prepared) { return; }
				var o = ["before","inside","after"],
					r = false,
					rtl = this._get_settings().core.rtl,
					pos;
				if(this.data.dnd.w < this.data.core.li_height/3) { o = ["before","inside","after"]; }
				else if(this.data.dnd.w <= this.data.core.li_height*2/3) {
					o = this.data.dnd.w < this.data.core.li_height/2 ? ["inside","before","after"] : ["inside","after","before"];
				}
				else { o = ["after","inside","before"]; }
				$.each(o, $.proxy(function (i, val) {
					if(this.data.dnd[val]) {
						$.inforTree.dnd.helper.children("ins").attr("class","jstree-ok");
						r = val;
						return false;
					}
				}, this));
				if(r === false) { $.inforTree.dnd.helper.children("ins").attr("class","jstree-invalid"); }

				pos = rtl ? (this.data.dnd.off.right - 18) : (this.data.dnd.off.left + 10);
				switch(r) {
					case "before":
						m.css({ "left" : pos + "px", "top" : (this.data.dnd.off.top - 6) + "px" }).show();
						if(ml) { ml.css({ "left" : (pos + 8) + "px", "top" : (this.data.dnd.off.top - 1) + "px" }).show(); }
						break;
					case "after":
						m.css({ "left" : pos + "px", "top" : (this.data.dnd.off.top + this.data.core.li_height - 6) + "px" }).show();
						if(ml) { ml.css({ "left" : (pos + 8) + "px", "top" : (this.data.dnd.off.top + this.data.core.li_height - 1) + "px" }).show(); }
						break;
					case "inside":
						m.css({ "left" : pos + ( rtl ? -4 : 4) + "px", "top" : (this.data.dnd.off.top + this.data.core.li_height/2 - 5) + "px" }).show();
						if(ml) { ml.hide(); }
						break;
					default:
						m.hide();
						if(ml) { ml.hide(); }
						break;
				}
				last_pos = r;
				return r;
			},
			dnd_open : function () {
				this.data.dnd.to2 = false;
				this.open_node(r, $.proxy(this.dnd_prepare,this), true);
			},
			dnd_finish : function (e) {
				if(this.data.dnd.foreign) {
					if(this.data.dnd.after || this.data.dnd.before || this.data.dnd.inside) {
						this._get_settings().dnd.drag_finish.call(this, { "o" : o, "r" : r, "p" : last_pos });
					}
				}
				else {
					this.dnd_prepare();
					this.move_node(o, r, last_pos, e[this._get_settings().dnd.copy_modifier + "Key"]);
				}
				o = false;
				r = false;
				m.hide();
				if(ml) { ml.hide(); }
			},
			dnd_enter : function (obj) {
				if(this.data.dnd.mto) {
					clearTimeout(this.data.dnd.mto);
					this.data.dnd.mto = false;
				}
				var s = this._get_settings().dnd;
				this.data.dnd.prepared = false;
				r = this._get_node(obj);
				if(s.check_timeout) {
					// do the calculations after a minimal timeout (users tend to drag quickly to the desired location)
					if(this.data.dnd.to1) { clearTimeout(this.data.dnd.to1); }
					this.data.dnd.to1 = setTimeout($.proxy(this.dnd_prepare, this), s.check_timeout);
				}
				else {
					this.dnd_prepare();
				}
				if(s.open_timeout) {
					if(this.data.dnd.to2) { clearTimeout(this.data.dnd.to2); }
					if(r && r.length && r.hasClass("jstree-closed")) {
						// if the node is closed - open it, then recalculate
						this.data.dnd.to2 = setTimeout($.proxy(this.dnd_open, this), s.open_timeout);
					}
				}
				else {
					if(r && r.length && r.hasClass("jstree-closed")) {
						this.dnd_open();
					}
				}
			},
			dnd_leave : function (e) {
				this.data.dnd.after		= false;
				this.data.dnd.before	= false;
				this.data.dnd.inside	= false;
				$.inforTree.dnd.helper.children("ins").attr("class","jstree-invalid");
				$.inforTree.dnd.helper.attr("draggable","true");
				$.inforTree.dnd.helper.css("draggable","true");
				document.body.style.cursor = "no-drop";

				m.hide();
				if(ml) { ml.hide(); }
				if(r && r[0] === e.target.parentNode) {
					if(this.data.dnd.to1) {
						clearTimeout(this.data.dnd.to1);
						this.data.dnd.to1 = false;
					}
					if(this.data.dnd.to2) {
						clearTimeout(this.data.dnd.to2);
						this.data.dnd.to2 = false;
					}
				}
			},
			start_drag : function (obj, e) {
				o = this._get_node(obj);
				if(this.data.ui && this.is_selected(o)) { o = this._get_node(null, true); }
				var dt = o.length > 1 ? this._get_string("multiple_selection") : o.html(),
					cnt = this.get_container();

				$.inforTree.dnd.drag_start(e, { jstree : true, obj : o }, "<ins class='jstree-icon'><span>&#160;</span></ins>" + "<span class='jsTree'>" + dt +"</span>" );
				if(this.data.themes) {
					if(m) { m.attr("class", "jstree-" + this.data.themes.theme); }
					if(ml) { ml.attr("class", "jstree-" + this.data.themes.theme); }
					$.inforTree.dnd.helper.attr("class", "jstree-dnd-helper jstree-" + this.data.themes.theme);
				}
				this.data.dnd.cof = cnt.offset();
				this.data.dnd.cw = parseInt(cnt.width(),10);
				this.data.dnd.ch = parseInt(cnt.height(),10);
				this.data.dnd.active = true;
			},
			addDragElements : function() {
				api = this;
				m = $("<div />").attr({ id : "jstree-marker" }).hide().html("&raquo;")
					.bind("mouseleave mouseenter", function (e) {
						m.hide();
						ml.hide();
						e.preventDefault();
						e.stopImmediatePropagation();
						return false;
					})
					.appendTo("body");
					ml = $("<div />").attr({ id : "jstree-marker-line" }).hide()
					.bind("mouseup", function (e) {
						if(r && r.length) {
							r.children("a").trigger(e);
							api.dnd_finish(e);

							e.preventDefault();
							e.stopImmediatePropagation();
							return false;
						}
					})
					.bind("mouseleave", function (e) {
						var rt = $(e.relatedTarget);
						if(rt.is(".jstree") || rt.closest(".jstree").length === 0) {
							if(r && r.length) {
								r.children("a").trigger(e);
								m.hide();
								ml.hide();
								e.preventDefault();
								e.stopImmediatePropagation();
								return false;
							}
						}
					})
					.appendTo("body");

				$(document).bind("drag_start.inforTree", function (e, data) {
					if(data.data.jstree) {
						m.show();
						if(ml)
							ml.show();
					}
				});
				$(document).bind("drag_stop.inforTree", function (e, data) {
					document.body.style.cursor = "";
					if(data.data.jstree) {
						m.hide();
						if(ml)
							ml.hide();
					}
				});
			}
		}
	});
})(jQuery);

/*
* jsTree checkbox plugin
* Inserts checkboxes in front of every node
* Depends on the ui plugin
*/
(function ($) {
	$.jstree.plugin("checkbox", {
		__init : function () {
			this.data.checkbox.noui = this._get_settings().checkbox.override_ui;
			if(this.data.ui && this.data.checkbox.noui) {
				this.select_node = this.deselect_node = this.deselect_all = $.noop;
				this.get_selected = this.get_checked;
			}

			this.get_container()
				.bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree", $.proxy(function (e, data) {
						this._prepare_checkboxes(data.rslt.obj);
					}, this))
				.bind("loaded.jstree", $.proxy(function (e) {
						this._prepare_checkboxes();
					}, this))
				.delegate( (this.data.ui && this.data.checkbox.noui ? "a" : "ins.jstree-checkbox") , "click.jstree", $.proxy(function (e) {
						e.preventDefault();
						if(this._get_node(e.target).hasClass("jstree-checked")) { this.uncheck_node(e.target); }
						else { this.check_node(e.target); }
						if(this.data.ui && this.data.checkbox.noui) {
							this.save_selected();
							if(this.data.cookies) { this.save_cookie("select_node"); }
						}
						else {
							e.stopImmediatePropagation();
							return false;
						}
					}, this));
		},
		defaults : {
			override_ui : false,
			two_state : false,
			real_checkboxes : false,
			checked_parent_open : true,
			real_checkboxes_names : function (n) { return [ ("check_" + (n[0].id || Math.ceil(Math.random() * 10000))) , 1]; }
		},
		__destroy : function () {
			this.get_container()
				.find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end()
				.find("ins.jstree-checkbox").remove();
		},
		_fn : {
			_checkbox_notify : function (n, data) {
				if(data.checked) {
					this.check_node(n, false);
				}
			},
			_prepare_checkboxes : function (obj) {
				obj = !obj || obj == -1 ? this.get_container().find("> ul > li") : this._get_node(obj);
				if(obj === false) { return; } // added for removing root nodes
				var c, _this = this, t, ts = this._get_settings().checkbox.two_state, rc = this._get_settings().checkbox.real_checkboxes, rcn = this._get_settings().checkbox.real_checkboxes_names;
				obj.each(function () {
					t = $(this);
					c = t.is("li") && (t.hasClass("jstree-checked") || (rc && t.children(":checked").length)) ? "jstree-checked" : "jstree-unchecked";
					t.find("li").andSelf().each(function () {
						var $t = $(this), nm;
						$t.children("a" + (_this.data.languages ? "" : ":eq(0)") ).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass( ts ? "jstree-unchecked" : c );
						if(rc) {
							if(!$t.children(":checkbox").length) {
								nm = rcn.call(_this, $t);
								$t.prepend("<input type='checkbox' class='jstree-real-checkbox' id='" + nm[0] + "' name='" + nm[0] + "' value='" + nm[1] + "' />");
							}
							else {
								$t.children(":checkbox").addClass("jstree-real-checkbox");
							}
						}
						if(!ts) {
							if(c === "jstree-checked" || $t.hasClass("jstree-checked") || $t.children(':checked').length) {
								$t.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked", true);
							}
						}
						else {
							if($t.hasClass("jstree-checked") || $t.children(':checked').length) {
								$t.addClass("jstree-checked").children(":checkbox").prop("checked", true);
							}
						}
					});
				});
				if(!ts) {
					obj.find(".jstree-checked").parent().parent().each(function () { _this._repair_state(this); });
				}
			},
			change_state : function (obj, state) {
				obj = this._get_node(obj);
				var coll = false, rc = this._get_settings().checkbox.real_checkboxes;
				if(!obj || obj === -1) { return false; }
				state = (state === false || state === true) ? state : obj.hasClass("jstree-checked");
				if(this._get_settings().checkbox.two_state) {
					if(state) {
						obj.removeClass("jstree-checked").addClass("jstree-unchecked");
						if(rc) { obj.children(":checkbox").prop("checked", false); }
					}
					else {
						obj.removeClass("jstree-unchecked").addClass("jstree-checked");
						if(rc) { obj.children(":checkbox").prop("checked", true); }
					}
				}
				else {
					if(state) {
						coll = obj.find("li").andSelf();
						if(!coll.filter(".jstree-checked, .jstree-undetermined").length) { return false; }
						coll.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");
						if(rc) { coll.children(":checkbox").prop("checked", false); }
					}
					else {
						coll = obj.find("li").andSelf();
						if(!coll.filter(".jstree-unchecked, .jstree-undetermined").length) { return false; }
						coll.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");
						if(rc) { coll.children(":checkbox").prop("checked", true); }
						if(this.data.ui) { this.data.ui.last_selected = obj; }
						this.data.checkbox.last_selected = obj;
					}
					obj.parentsUntil(".jstree", "li").each(function () {
						var $this = $(this);
						if(state) {
							if($this.children("ul").children("li.jstree-checked, li.jstree-undetermined").length) {
								$this.parentsUntil(".jstree", "li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");
								if(rc) { $this.parentsUntil(".jstree", "li").andSelf().children(":checkbox").prop("checked", false); }
								return false;
							}
							else {
								$this.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");
								if(rc) { $this.children(":checkbox").prop("checked", false); }
							}
						}
						else {
							if($this.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length) {
								$this.parentsUntil(".jstree", "li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");
								if(rc) { $this.parentsUntil(".jstree", "li").andSelf().children(":checkbox").prop("checked", false); }
								return false;
							}
							else {
								$this.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");
								if(rc) { $this.children(":checkbox").prop("checked", true); }
							}
						}
					});
				}
				if(this.data.ui && this.data.checkbox.noui) { this.data.ui.selected = this.get_checked(); }
				this.__callback(obj);
				return true;
			},
			check_node : function (obj) {
				if(this.change_state(obj, false)) {
					obj = this._get_node(obj);
					if(this._get_settings().checkbox.checked_parent_open) {
						var t = this;
						obj.parents(".jstree-closed").each(function () { t.open_node(this, false, true); });
					}
					this.__callback({ "obj" : obj });
				}
			},
			uncheck_node : function (obj) {
				if(this.change_state(obj, true)) { this.__callback({ "obj" : this._get_node(obj) }); }
			},
			check_all : function () {
				var _this = this,
					coll = this._get_settings().checkbox.two_state ? this.get_container_ul().find("li") : this.get_container_ul().children("li");
				coll.each(function () {
					_this.change_state(this, false);
				});
				this.__callback();
			},
			uncheck_all : function () {
				var _this = this,
					coll = this._get_settings().checkbox.two_state ? this.get_container_ul().find("li") : this.get_container_ul().children("li");
				coll.each(function () {
					_this.change_state(this, true);
				});
				this.__callback();
			},

			is_checked : function(obj) {
				obj = this._get_node(obj);
				return obj.length ? obj.is(".jstree-checked") : false;
			},
			get_checked : function (obj, get_all) {
				obj = !obj || obj === -1 ? this.get_container() : this._get_node(obj);
				return get_all || this._get_settings().checkbox.two_state ? obj.find(".jstree-checked") : obj.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked");
			},
			get_unchecked : function (obj, get_all) {
				obj = !obj || obj === -1 ? this.get_container() : this._get_node(obj);
				return get_all || this._get_settings().checkbox.two_state ? obj.find(".jstree-unchecked") : obj.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked");
			},

			show_checkboxes : function () { this.get_container().children("ul").removeClass("jstree-no-checkboxes"); },
			hide_checkboxes : function () { this.get_container().children("ul").addClass("jstree-no-checkboxes"); },

			_repair_state : function (obj) {
				obj = this._get_node(obj);
				if(!obj.length) { return; }
				if(this._get_settings().checkbox.two_state) {
					obj.find('li').andSelf().not('.jstree-checked').removeClass('jstree-undetermined').addClass('jstree-unchecked').children(':checkbox').prop('checked', true);
					return;
				}
				var rc = this._get_settings().checkbox.real_checkboxes,
					a = obj.find("> ul > .jstree-checked").length,
					b = obj.find("> ul > .jstree-undetermined").length,
					c = obj.find("> ul > li").length;
				if(c === 0) { if(obj.hasClass("jstree-undetermined")) { this.change_state(obj, false); } }
				else if(a === 0 && b === 0) { this.change_state(obj, true); }
				else if(a === c) { this.change_state(obj, false); }
				else {
					obj.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined");
					if(rc) { obj.parentsUntil(".jstree", "li").andSelf().children(":checkbox").prop("checked", false); }
				}
			},
			reselect : function () {
				if(this.data.ui && this.data.checkbox.noui) {
					var _this = this,
						s = this.data.ui.to_select;
					s = $.map($.makeArray(s), function (n) { return "#" + n.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"); });
					this.deselect_all();
					$.each(s, function (i, val) { _this.check_node(val); });
					this.__callback();
				}
				else {
					this.__call_old();
				}
			},
			save_loaded : function () {
				var _this = this;
				this.data.core.to_load = [];
				this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function () {
					if(this.id) { _this.data.core.to_load.push("#" + this.id); }
				});
			}
		}
	});
})(jQuery);

/*
* jsTree search plugin
* Enables both sync and async search on the tree
* DOES NOT WORK WITH JSON PROGRESSIVE RENDER
*/
(function ($) {
	$.expr[':'].jstree_contains = function(a,i,m){
		return (a.textContent || a.innerText || "").toLowerCase().indexOf(m[3].toLowerCase())>=0;
	};
	$.expr[':'].jstree_title_contains = function(a,i,m) {
		return (a.getAttribute("title") || "").toLowerCase().indexOf(m[3].toLowerCase())>=0;
	};
	$.jstree.plugin("search", {
		__init : function () {

			this.data.search.str = "";
			this.data.search.result = $();
			if(this._get_settings().search.show_only_matches) {
				this.get_container()
					.bind("search.jstree", function (e, data) {
						$(this).children("ul").find("li").hide().removeClass("jstree-last");
						data.rslt.nodes.parentsUntil(".jstree").andSelf().show()
							.filter("ul").each(function () { $(this).children("li:visible").eq(-1).addClass("jstree-last"); });
					})
					.bind("clear_search.jstree", function () {
						$(this).children("ul").find("li").css("display","").end().end().inforTree("clean_node", -1);
					});
			}
			this._setupSearchField();
		},
		__destroy : function () {
			var self = this,
				container = self.get_container();

			if (container.parent().is(".inforScrollableArea")) {
				container.parent().parent().find(".inforTreeSearch").remove();
			} else {
				container.parent().find(".inforTreeSearch").remove();
			}
		},
		defaults : {
			ajax : false,
			search_method : "jstree_contains", // for case insensitive - jstree_contains
			show_only_matches : true,
			case_insensitive: true
		},
		_fn : {
			_setupSearchField : function() {
				var self = this,
					container = self.get_container(),
					searchField = container.children(".inforTriggerField");

				if (searchField.length==0) {
					searchField = $('<input class="inforSearchField" type="text">');
					container.before(searchField);
					container.before('<br>');
				}
				self._handleSizeChange();

				$("#leftPane").resize(function() {
					self._handleSizeChange();
				});

				searchField
					.attr("placeholder",Globalize.localize("SearchTree"))
					.addClass("noTrackDirty")
					.inforSearchField({click:function(event){
						var term = searchField.val();
						self.search(term);
					},cancel:function(event){
						self.search("");
					}});

				searchField.closest(".inforTriggerField").find(".inforTriggerButton")
					.attr("title",Globalize.localize("Search"));

				searchField.closest(".inforTriggerField").addClass("inforTreeSearch");
			},
			_handleSizeChange : function() {
				var tree = this.get_container(),
					totalHeight = tree.offset().top+tree.height(),
					width;

				//tree.height($(window).height() - tree.offset().top);

				width = $("#leftPane").width()-55;
				if (width > 50)
					tree.parent().find(".inforSearchField").width(width);
			},
			search : function (str, skip_async) {
				if($.trim(str) === "") { this.clear_search(); return; }
				var s = this.get_settings().search,
					t = this,
					error_func = function () { },
					success_func = function () { };
				this.data.search.str = str;

				if(!skip_async && s.ajax !== false && this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length > 0) {
					this.search.supress_callback = true;
					error_func = function () { };
					success_func = function (d, t, x) {
						var sf = this.get_settings().search.ajax.success;
						if(sf) { d = sf.call(this,d,t,x) || d; }
						this.data.search.to_open = d;
						this._search_open();
					};
					s.ajax.context = this;
					s.ajax.error = error_func;
					s.ajax.success = success_func;
					if($.isFunction(s.ajax.url)) { s.ajax.url = s.ajax.url.call(this, str); }
					if($.isFunction(s.ajax.data)) { s.ajax.data = s.ajax.data.call(this, str); }
					if(!s.ajax.data) { s.ajax.data = { "search_string" : str }; }
					if(!s.ajax.dataType || /^json/.exec(s.ajax.dataType)) { s.ajax.dataType = "json"; }
					$.ajax(s.ajax);
					return;
				}
				if(this.data.search.result.length) { this.clear_search(); }
				this.data.search.result = this.get_container().find("a" + (this.data.languages ? "." + this.get_lang() : "" ) + ":" + (s.search_method) + "(" + this.data.search.str + ")");
				this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function () {
					t.open_node(this, false, true);
				});
				this.__callback({ nodes : this.data.search.result, str : str });

				this._handleSizeChange();
			},
			clear_search : function (str) {
				this.data.search.result.removeClass("jstree-search");
				this.__callback(this.data.search.result);
				this.data.search.result = $();
			},
			_search_open : function (is_callback) {
				var _this = this,
					done = true,
					current = [],
					remaining = [];
				if(this.data.search.to_open.length) {
					$.each(this.data.search.to_open, function (i, val) {
						if(val == "#") { return true; }
						if(_this._get_node(val)) { current.push(val); }
							else { remaining.push(val); }
					});
					if(current.length) {
						this.data.search.to_open = remaining;
						$.each(current, function (i, val) {
							_this.open_node(val, function () { _this._search_open(true); });
						});
						done = false;
					}
				}
				if(done) { this.search(this.data.search.str, true); }
			}
		}
	});

	// include the search plugin by default
	//.$.jstree.defaults.plugins.push("search");
})(jQuery);

/*
* jsTree HTML plugin
* The HTML data store. Datastores are build by replacing the `load_node` and `_is_loaded` functions.
*/
(function ($) {
	$.jstree.plugin("html_data", {
		__init : function () {
			// this used to use html() and clean the whitespace, but this way any attached data was lost
			this.data.html_data.original_container_html = this.get_container().find(" > ul > li").clone(true);
			// remove white space from LI node - otherwise nodes appear a bit to the right
			this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function() { return this.nodeType == 3; }).remove();
		},
		defaults : {
			data : false,
			ajax : false,
			correct_state : true
		},
		_fn : {
			load_node : function (obj, s_call, e_call) { var _this = this; this.load_node_html(obj, function () { _this.__callback({ "obj" : _this._get_node(obj) }); s_call.call(this); }, e_call); },
			_is_loaded : function (obj) {
				obj = this._get_node(obj);
				return obj == -1 || !obj || (!this._get_settings().html_data.ajax && !$.isFunction(this._get_settings().html_data.data)) || obj.is(".jstree-open, .jstree-leaf") || obj.children("ul").children("li").size() > 0;
			},
			load_node_html : function (obj, s_call, e_call) {
				var d,
					s = this.get_settings().html_data,
					error_func = function () {},
					success_func = function () {};
				obj = this._get_node(obj);
				if(obj && obj !== -1) {
					if(obj.data("jstree_is_loading")) { return; }
					else { obj.data("jstree_is_loading",true); }
				}
				switch(!0) {
					case ($.isFunction(s.data)):
						s.data.call(this, obj, $.proxy(function (d) {
							if(d && d !== "" && d.toString && d.toString().replace(/^[\s\n]+$/,"") !== "") {
								d = $(d);
								if(!d.is("ul")) { d = $("<ul />").append(d); }
								if(obj == -1 || !obj) { this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function () { return !this.firstChild || !this.firstChild.tagName || this.firstChild.tagName !== "INS"; }).prepend("<ins class='jstree-icon'><span>&#160;</span></ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"); }
								else { obj.children("a.jstree-loading").removeClass("jstree-loading"); obj.append(d).children("ul").find("li, a").filter(function () { return !this.firstChild || !this.firstChild.tagName || this.firstChild.tagName !== "INS"; }).prepend("<ins class='jstree-icon'><span>&#160;</span></ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"); obj.removeData("jstree_is_loading"); }
								this.clean_node(obj);
								if(s_call) { s_call.call(this); }
							}
							else {
								if(obj && obj !== -1) {
									obj.children("a.jstree-loading").removeClass("jstree-loading");
									obj.removeData("jstree_is_loading");
									if(s.correct_state) {
										this.correct_state(obj);
										if(s_call) { s_call.call(this); }
									}
								}
								else {
									if(s.correct_state) {
										this.get_container().children("ul").empty();
										if(s_call) { s_call.call(this); }
									}
								}
							}
						}, this));
						break;
					case (!s.data && !s.ajax):
						if(!obj || obj == -1) {
							this.get_container()
								.children("ul").empty()
								.append(this.data.html_data.original_container_html)
								.find("li, a").filter(function () { return !this.firstChild || !this.firstChild.tagName || this.firstChild.tagName !== "INS"; }).prepend("<ins class='jstree-icon'><span>&#160;</span></ins>").end()
								.filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");
							this.clean_node();
						}
						if(s_call) { s_call.call(this); }
						break;
					case (!!s.data && !s.ajax) || (!!s.data && !!s.ajax && (!obj || obj === -1)):
						if(!obj || obj == -1) {
							d = $(s.data);
							if(!d.is("ul")) { d = $("<ul />").append(d); }
							this.get_container()
								.children("ul").empty().append(d.children())
								.find("li, a").filter(function () { return !this.firstChild || !this.firstChild.tagName || this.firstChild.tagName !== "INS"; }).prepend("<ins class='jstree-icon'><span>&#160;</span></ins>").end()
								.filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon");
							this.clean_node();
						}
						if(s_call) { s_call.call(this); }
						break;
					case (!s.data && !!s.ajax) || (!!s.data && !!s.ajax && obj && obj !== -1):
						obj = this._get_node(obj);
						error_func = function (x, t, e) {
							var ef = this.get_settings().html_data.ajax.error;
							if(ef) { ef.call(this, x, t, e); }
							if(obj != -1 && obj.length) {
								obj.children("a.jstree-loading").removeClass("jstree-loading");
								obj.removeData("jstree_is_loading");
								if(t === "success" && s.correct_state) { this.correct_state(obj); }
							}
							else {
								if(t === "success" && s.correct_state) { this.get_container().children("ul").empty(); }
							}
							if(e_call) { e_call.call(this); }
						};
						success_func = function (d, t, x) {
							var sf = this.get_settings().html_data.ajax.success;
							if(sf) { d = sf.call(this,d,t,x) || d; }
							if(d === "" || (d && d.toString && d.toString().replace(/^[\s\n]+$/,"") === "")) {
								return error_func.call(this, x, t, "");
							}
							if(d) {
								d = $(d);
								if(!d.is("ul")) { d = $("<ul />").append(d); }
								if(obj == -1 || !obj) { this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function () { return !this.firstChild || !this.firstChild.tagName || this.firstChild.tagName !== "INS"; }).prepend("<ins class='jstree-icon'><span>&#160;</span></ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"); }
								else { obj.children("a.jstree-loading").removeClass("jstree-loading"); obj.append(d).children("ul").find("li, a").filter(function () { return !this.firstChild || !this.firstChild.tagName || this.firstChild.tagName !== "INS"; }).prepend("<ins class='jstree-icon'><span>&#160;</span></ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"); obj.removeData("jstree_is_loading"); }
								this.clean_node(obj);
								if(s_call) { s_call.call(this); }
							}
							else {
								if(obj && obj !== -1) {
									obj.children("a.jstree-loading").removeClass("jstree-loading");
									obj.removeData("jstree_is_loading");
									if(s.correct_state) {
										this.correct_state(obj);
										if(s_call) { s_call.call(this); }
									}
								}
								else {
									if(s.correct_state) {
										this.get_container().children("ul").empty();
										if(s_call) { s_call.call(this); }
									}
								}
							}
						};
						s.ajax.context = this;
						s.ajax.error = error_func;
						s.ajax.success = success_func;
						if(!s.ajax.dataType) { s.ajax.dataType = "html"; }
						if($.isFunction(s.ajax.url)) { s.ajax.url = s.ajax.url.call(this, obj); }
						if($.isFunction(s.ajax.data)) { s.ajax.data = s.ajax.data.call(this, obj); }
						$.ajax(s.ajax);
						break;
				}
			}
		}
	});
	// include the json_data data plugin by default
	$.jstree.defaults.plugins.push("json_data");
})(jQuery);

/*
* jsTree types plugin
* Adds support types of nodes
* You can set an attribute on each li node, that represents its type.
* According to the type setting the node may get custom icon/validation rules
*/
(function ($) {
	$.jstree.plugin("types", {
		__init : function () {
			var s = this._get_settings().types;
			this.data.types.attach_to = [];
			this.get_container()
				.bind("init.jstree", $.proxy(function () {
						var types = s.types,
							attr  = s.type_attr,
							icons_css = "",
							_this = this;

						$.each(types, function (i, tp) {
							$.each(tp, function (k, v) {
								if(!/^(max_depth|max_children|icon|valid_children)$/.test(k)) { _this.data.types.attach_to.push(k); }
							});
							if(!tp.icon) { return true; }
							if( tp.icon.image || tp.icon.position) {
								if(i == "default")	{ icons_css += '.jstree-' + _this.get_index() + ' a > .jstree-icon { '; }
								else				{ icons_css += '.jstree-' + _this.get_index() + ' li[' + attr + '="' + i + '"] > a > .jstree-icon { '; }
								if(tp.icon.image)	{ icons_css += ' background-image:url(' + tp.icon.image + '); '; }
								if(tp.icon.position){ icons_css += ' background-position:' + tp.icon.position + '; '; }
								else				{ icons_css += ' background-position:0 0; '; }
								icons_css += '} ';
							}
						});

					}, this))
				.bind("before.jstree", $.proxy(function (e, data) {
						var s, t,
							o = this._get_settings().types.use_data ? this._get_node(data.args[0]) : false,
							d = o && o !== -1 && o.length ? o.data("jstree") : false;
						if(d && d.types && d.types[data.func] === false) { e.stopImmediatePropagation(); return false; }
						if($.inArray(data.func, this.data.types.attach_to) !== -1) {
							if(!data.args[0] || (!data.args[0].tagName && !data.args[0].jquery)) { return; }
							s = this._get_settings().types.types;
							t = this._get_type(data.args[0]);
							if(
								(
									(s[t] && typeof s[t][data.func] !== "undefined") ||
									(s["default"] && typeof s["default"][data.func] !== "undefined")
								) && this._check(data.func, data.args[0]) === false
							) {
								e.stopImmediatePropagation();
								return false;
							}
						}
					}, this));
		},
		defaults : {
			// defines maximum number of root nodes (-1 means unlimited, -2 means disable max_children checking)
			max_children		: -1,
			// defines the maximum depth of the tree (-1 means unlimited, -2 means disable max_depth checking)
			max_depth			: -1,
			// defines valid node types for the root nodes
			valid_children		: "all",

			// whether to use $.data
			use_data : false,
			// where is the type stores (the rel attribute of the LI element)
			type_attr : "rel",
			// a list of types
			types : {
				// the default type
				"default" : {
					"max_children"	: -1,
					"max_depth"		: -1,
					"valid_children": "all"

					// Bound functions - you can bind any other function here (using boolean or function)
					//"select_node"	: true
				}
			}
		},
		_fn : {
			_types_notify : function (n, data) {
				if(data.type && this._get_settings().types.use_data) {
					this.set_type(data.type, n);
				}
			},
			_get_type : function (obj) {
				obj = this._get_node(obj);
				return (!obj || !obj.length) ? false : obj.attr(this._get_settings().types.type_attr) || "default";
			},
			set_type : function (str, obj) {
				obj = this._get_node(obj);
				var ret = (!obj.length || !str) ? false : obj.attr(this._get_settings().types.type_attr, str);
				if(ret) { this.__callback({ obj : obj, type : str}); }
				return ret;
			},
			_check : function (rule, obj, opts) {
				obj = this._get_node(obj);
				var v = false, t = this._get_type(obj), d = 0, _this = this, s = this._get_settings().types, data = false;
				if(obj === -1) {
					if(!!s[rule]) { v = s[rule]; }
					else { return; }
				}
				else {
					if(t === false) { return; }
					data = s.use_data ? obj.data("jstree") : false;
					if(data && data.types && typeof data.types[rule] !== "undefined") { v = data.types[rule]; }
					else if(!!s.types[t] && typeof s.types[t][rule] !== "undefined") { v = s.types[t][rule]; }
					else if(!!s.types["default"] && typeof s.types["default"][rule] !== "undefined") { v = s.types["default"][rule]; }
				}
				if($.isFunction(v)) { v = v.call(this, obj); }
				if(rule === "max_depth" && obj !== -1 && opts !== false && s.max_depth !== -2 && v !== 0) {
					// also include the node itself - otherwise if root node it is not checked
					obj.children("a:eq(0)").parentsUntil(".jstree","li").each(function (i) {
						// check if current depth already exceeds global tree depth
						if(s.max_depth !== -1 && s.max_depth - (i + 1) <= 0) { v = 0; return false; }
						d = (i === 0) ? v : _this._check(rule, this, false);
						// check if current node max depth is already matched or exceeded
						if(d !== -1 && d - (i + 1) <= 0) { v = 0; return false; }
						// otherwise - set the max depth to the current value minus current depth
						if(d >= 0 && (d - (i + 1) < v || v < 0) ) { v = d - (i + 1); }
						// if the global tree depth exists and it minus the nodes calculated so far is less than `v` or `v` is unlimited
						if(s.max_depth >= 0 && (s.max_depth - (i + 1) < v || v < 0) ) { v = s.max_depth - (i + 1); }
					});
				}
				return v;
			},
			check_move : function () {
				if(!this.__call_old()) { return false; }
				var m  = this._get_move(),
					s  = m.rt._get_settings().types,
					mc = m.rt._check("max_children", m.cr),
					md = m.rt._check("max_depth", m.cr),
					vc = m.rt._check("valid_children", m.cr),
					ch = 0, d = 1, t;

				if(vc === "none") { return false; }
				if($.isArray(vc) && m.ot && m.ot._get_type) {
					m.o.each(function () {
						if($.inArray(m.ot._get_type(this), vc) === -1) { d = false; return false; }
					});
					if(d === false) { return false; }
				}
				if(s.max_children !== -2 && mc !== -1) {
					ch = m.cr === -1 ? this.get_container().find("> ul > li").not(m.o).length : m.cr.find("> ul > li").not(m.o).length;
					if(ch + m.o.length > mc) { return false; }
				}
				if(s.max_depth !== -2 && md !== -1) {
					d = 0;
					if(md === 0) { return false; }
					if(typeof m.o.d === "undefined") {
						// TODO: deal with progressive rendering and async when checking max_depth (how to know the depth of the moved node)
						t = m.o;
						while(t.length > 0) {
							t = t.find("> ul > li");
							d ++;
						}
						m.o.d = d;
					}
					if(md - m.o.d < 0) { return false; }
				}
				return true;
			},
			create_node : function (obj, position, js, callback, is_loaded, skip_check) {
				if(!skip_check && (is_loaded || this._is_loaded(obj))) {
					var p  = (typeof position == "string" && position.match(/^before|after$/i) && obj !== -1) ? this._get_parent(obj) : this._get_node(obj),
						s  = this._get_settings().types,
						mc = this._check("max_children", p),
						md = this._check("max_depth", p),
						vc = this._check("valid_children", p),
						ch;
					if(typeof js === "string") { js = { data : js }; }
					if(!js) { js = {}; }
					if(vc === "none") { return false; }
					if($.isArray(vc)) {
						if(!js.attr || !js.attr[s.type_attr]) {
							if(!js.attr) { js.attr = {}; }
							js.attr[s.type_attr] = vc[0];
						}
						else {
							if($.inArray(js.attr[s.type_attr], vc) === -1) { return false; }
						}
					}
					if(s.max_children !== -2 && mc !== -1) {
						ch = p === -1 ? this.get_container().find("> ul > li").length : p.find("> ul > li").length;
						if(ch + 1 > mc) { return false; }
					}
					if(s.max_depth !== -2 && md !== -1 && (md - 1) < 0) { return false; }
				}
				return this.__call_old(true, obj, position, js, callback, is_loaded, skip_check);
			}
		}
	});
})(jQuery);

/*
* jsTree contextmenu plugin
*/
(function ($) {
	$.jstree.plugin("contextmenu", {
		__init : function () {
			var self = this;
			this.get_container()
				.delegate("a", "mousedown.jstree", function (e) {
					if( e.button != 2 ) {
						return;
					}

					e.preventDefault();

					if(!$(e.currentTarget).hasClass("jstree-loading")) {
						self.show_contextmenu(e);
					}
				})
				.delegate("a", "click.jstree", function (e) {
						if(self.data.contextmenu)
							$("#inforTreeContextMenuContainer").remove();
						})
				.bind("destroy.jstree", function (e) {
					if(self.data.contextmenu)
						$("#inforTreeContextMenuContainer").remove();
				});
		},
		defaults : {
			select_node : true, // requires UI plugin
			items : { // Could be a function that should return an object like this one
				"create" : {
					"label"				: "Create",
					"action"			: function (tree) { tree.create(obj); }
				},
				"rename" : {
					"label"				: "Rename",
					"action"			: function (tree) { tree.rename(obj); }
				},
				"remove" : {
					"label"				: "Delete",
					"action"			: function (tree) { if(tree.is_selected(obj)) { tree.remove(); } else { tree.remove(obj); } }
				},
				"ccp" : {
					"label"				: "Edit",
					"action"			: false,
					"submenu" : {
						"cut" : {
							"label"				: "Cut",
							"action"			: function (tree) { tree.cut(obj); }
						},
						"copy" : {
							"icon"				: false,
							"label"				: "Copy",
							"action"			: function (tree) { tree.copy(obj); }
						},
						"paste" : {
							"icon"				: false,
							"label"				: "Paste",
							"action"			: function (tree) { tree.paste(obj); }
						}
					}
				}
			}
		},
		_fn : {
			show_contextmenu : function (e) {
				obj = this._get_node(e.currentTarget);
				s = this.get_settings().contextmenu,
				menuItems = s.items;

				if (typeof menuItems == "function") {
					menuItems = menuItems(obj);
				}

				var	self = this;

				if(s.select_node && this.data.ui && !this.is_selected(obj)) {
					this.deselect_all();
					this.select_node(obj, true);
				}

				this.data.contextmenu = true;

				$("#inforTreeContextMenu").remove();
				var menuHtml = $('<ul id="inforTreeContextMenu" class="inforContextMenu"></ul>');
				for (var key in menuItems) {
					if (menuItems[key]==false || menuItems[key].label==undefined)
						continue;

					var a = $('<a href="#'+key+'">'+menuItems[key].label+'</a>');
					menuHtml.append($('<li></li>').append(a));

					//Add Submenu
					if (menuItems[key].submenu) {
						var ul = $('<ul class="inforContextMenu"></ul>');
						a.after(ul);
						for (var sub in menuItems[key].submenu) {
							var aa = $('<a></a>').text(menuItems[key].submenu[sub].label)
												.attr("href","#"+key+"_"+sub);
							ul.append($('<li></li>').append(aa));
						}
					}
				}

				$('body').append(menuHtml);

				obj.inforContextMenu({
					menu: 'inforTreeContextMenu',
					invokeMethod: 'immediate',
					event: e,
					onClose: function(){
						$("#inforTreeContextMenuContainer").remove();
					}
				},function(id,b,c,item){
					if (id.indexOf("_")>-1)
						func = menuItems[id.substr(0,id.indexOf("_"))].submenu[id.substr(id.indexOf("_")+1)].action;
					else
						func = menuItems[id].action;

					if (func)
						func(self, menuItems[id]);
				});
			}
		}
	});
})(jQuery);/*
* Infor Trigger Field - Handles the base functionality of DropDown/DatePicker and Other Trigger Fields.
*/
(function ($) {
	$.fn.inforTriggerField = function (options) {
		var settings = {
			click: null,
			editable: true	//makes a click only trigger field.
		};
		settings = $.extend(settings, options || {});

		return this.each(function () {
			var $input = $(this);
			if ($input.data("initialized") != undefined)	//is wrapped
				return;

			$input.data("initialized", true);

			//Add the correct classes for this type of button.
			var lookupClass = "";
			if ($input.hasClass("inforLookupField"))
			lookupClass = "inforLookupButton";
			if ($input.hasClass("inforDropDownList"))
				lookupClass = "inforDropDownListButton";
			if ($input.hasClass("inforDateField"))
			lookupClass = "inforDatePickerButton";
			if ($input.hasClass("inforUrlField"))
				lookupClass = "inforUrlButton";
			if ($input.hasClass("inforEmailField"))
				lookupClass = "inforEmailButton";
			if ($input.hasClass("inforSearchField"))
				lookupClass = "inforSearchButton";
			if ($input.hasClass("inforFileField"))
				lookupClass = "inforFileButton";
			if ($input.hasClass("inforCalculatorField"))
				lookupClass = "inforCalculatorButton";
			if ($input.hasClass("inforSpinner"))
				lookupClass = "inforSpinnerButtonUp";
			if ($input.hasClass("inforTimeField"))
				lookupClass = "inforTimeButton";
			if ($input.hasClass("inforColorPicker"))
				lookupClass = "inforColorButton";

			//wrap it in the correct html using a div and a table.
			$input.wrap('<div class="inforTriggerField"></div>');
			var $triggerButton = $('<button class="inforTriggerButton ' + lookupClass + '" type="button" ><span>' + Globalize.localize("Open") + '</span></button>').attr("tabIndex","-1");
			$input.parent().append($triggerButton);

			//attach click event
			if (settings.click != undefined) {
				if (!$input.hasClass("fileInputField")) {	//bound inside the file field control.
					$input.on("keypress.triggerfield",function(event) {
						if (event.keyCode==13) {
							$triggerButton.trigger("click");
							event.stopPropagation();
							event.preventDefault();
							return false;
						}
					});
				}
				$triggerButton.on("touchstart click", function (e) {
					e.inputId = $input.attr("id");
					e.input = $input;
					settings.click(e);
					$("#inforTooltip").hide();
				});
			}

			//setup focus functionality...Need to also change state of the button.
			$input
				.addClass("inforTextbox")
				.focusin(function (e) {
					var $this = $(this);
					$this.parent().find(".inforTriggerButton").addClass("focus");
					$this.closest(".inforTriggerField").addClass("focus");
				}).focusout(function (e) {
					var $this = $(this);
					$this.parent().find(".inforTriggerButton").removeClass("focus");
					$this.closest(".inforTriggerField").removeClass("focus");
				});

			var root = $input.closest(".inforTriggerField");

			//setup disabled and readonly functionality
			var isEnabled = true;

			if ($input.attr("readonly") == "readonly") {
				root.addClass("readonly");
				isEnabled = false;
			}

			if ($input.is(":disabled")) {
				root.addClass("disabled");
				isEnabled = false;
			}

			if ($input.hasClass("backgroundColor")) {
				$input.closest('.inforTriggerField').addClass("backgroundColor");
				$input.data("backgroundColor", true);
			}

			//add tooltip
			var tooltip=$input.attr("title");
			if (tooltip!=undefined) {
				$triggerButton.attr("title",tooltip);
				$input.attr("title","");
			}

			//handle absolute positioning.
			if ($input.css("position") == "absolute" && !Globalize.culture().isRTL) {
				root.css({ position: "absolute", left: $input.css("left"), top: $input.css("top"), bottom: $input.css("bottom") });
				$input.css({ position: "", left: "", top: "", bottom: "" });
			}
			else if ($input.css("position") == "absolute") {
				root.css({ position: "absolute", right: $input.css("right"), top: $input.css("top"), bottom: $input.css("bottom") });
				$input.css({ position: "", left: "", top: "", bottom: "" });
			}

			//create a root id off this id to use style sheet css.
			if ($input.attr("id"))
				$input.parent().attr("id", $input.attr("id")+"Container");

			if (!settings.editable) {
				$input.attr("readonly","").addClass("selectOnly");
			}

			//look for inline width and subtract 7 for the padding on the right
			if ($input.attr("style")) {
				$input.width(parseInt($input.width(), 10));
			}
			//see if disabled and hide the parent..
			if ($input.css("display") === "none") {
				$input.css("display","").hide();
			}
		});
	};

	$.fn.inforSearchField = function (options) {
		var settings = {
			click: null,
			cancel: null	//fires when cancel is clicked.
		};
		settings = $.extend(settings, options || {});

		return this.each(function () {
			var $input = $(this);

			//make sure its not initialized twice.
			if ($input.data("isInitialized"))
				return;

			//add trigger button styling
			$input.data("isInitialized",true)
					.addClass("noTrackDirty")
					.inforTriggerField({click: settings.click})
					.keyup(function(event){
						var term = $(this).val();
						_displayCancelButton($(this),"Cancel");

						if (term === "")
							_displayCancelButton($(this),"Search");
					})
					.blur(function(event){
						if ($(this).val() === "")
							_displayCancelButton($(this),"Search");
					});

			$input.closest("div").addClass("inforSearchFieldContainer");

			if ($input.attr("placeholder")=="Search") {
				$input.attr("placeholder", Globalize.localize("Search"));
			}
			
			_displayCancelButton($(this), "Search");
			
		});

		function _displayCancelButton(field, icon){
			if (field.attr("readonly"))
				return;

			var triggerButton = field.closest(".inforTriggerField").find(".inforTriggerButton").not(".inforCancelButton"),
				cancelButton = triggerButton.prev();

			if (!cancelButton.hasClass("inforCancelButton")) {
				cancelButton = $("<button type='button' class='inforCancelButton inforTriggerButton'><span></span></button>");
				triggerButton.before(cancelButton);

				cancelButton.attr("title",Globalize.localize("Cancel"));
				cancelButton.click(function(event) {
					$(this).hide().closest(".inforTriggerField").find("input").val("");
					$("#inforTooltip").hide();
					if (settings.cancel)
						settings.cancel(event);
				});
			}

			if (icon=="Search") {
				cancelButton.hide();
				if (field.val() !== "") {
					cancelButton.show();	
				}
			} else {
				cancelButton.show();	
			}
		}
	};

	$.fn.inforFileField = function (options) {
		var settings = {
			editable: false
		};

		settings = $.extend(settings, options || {});

		return this.each(function () {
			var $input = $(this);

			//make sure its not initialized twice.
			if ($input.data("isInitialized"))
				return;

			//add trigger button styling
			$input.data("isInitialized",true).inforTriggerField();

			//add another visable and styled textbox
			var $fileInput = $("<input type='text' class='inforTextbox fileInputField'/></input>");
			$input.after($fileInput);

			//position the file input underneath the button and opace.
			$input.attr("tabindex","-1").css({"position":"absolute"});
			
			$fileInput.blur(function() {
				$(this).parent().removeClass("focus");
			}).focus(function() {
				$(this).parent().addClass("focus");
			});
			
			var $button = $input.parent().find(".inforTriggerButton");

			//attach visual events.
			if (!settings.editable) {
				$input.mousedown(function() {
					$button.addClass("active");
				}).mouseup(function() {
					$button.removeClass("active");
				})
				.mouseenter(function () {
					$button.addClass("hover");
				})
				.mouseleave(function () {
					$button.removeClass("hover");
				});
			}
			
			$input.change(function (event) {
				$fileInput.val($(this).val());
			});

			//handle readonly and disabled styling.
			if ($input.is(":disabled")) {
				$fileInput.addClass("disabled");
				$fileInput.attr("disabled","");
			}

			if (!$input.isReadOnly()) {
				$fileInput.attr("readonly","").addClass("selectOnly");
			}

			if (settings.editable) {
				$fileInput.attr("id",$input.attr("id"))
					.attr("name",$input.attr("name"))
					.removeAttr("readonly")
					.removeClass("selectOnly");

				var css = $input.attr("style");
				$input.removeAttr("id").removeAttr("name").attr("style",css+";cursor: default;width: 10px !important");
				$input.css("left" , "").prependTo($button.parent());
			}
			
			//look for inline width and subtract 7 for the padding on the right
			if ($input.attr("style")) {
				$input.parent().width(parseInt($input.width(), 10) + 24);
				$input.parent().find("input").width(parseInt($input.parent().width(), 10) - 24);
				$input.parent().find("button").css("float", "right");
			}
	
			$input.css("width", "25px");
			$input.insertAfter($input.parent().find("button"));//.css("margin-left", $fileInput.width());
			
			//see if disabled and hide the parent..
			if ($input.css("display") === "none") {
				$input.parent().css("display","").hide();
			}
			
			//make more compliant
			$fileInput.uniqueId();
			var id = $input.attr("id"),
				label = $('label[for="' + id + '"]').text();
			
			$fileInput.before("<label class='inforScreenReaderText' for='" + $fileInput.attr("id") + "'>" + label + "</label>")
						.attr("aria-labelledby", $fileInput.attr("id"));
		});
	};
} (jQuery));
/*
* Infor Validation Plugin.
* A smaller and more focused to infor standards version of jquery.validation.
* For an explanation of the starts of this code see: http://bit.ly/d1YLBM
*/
(function ($) {
	/* Validation Singleton
		TODO: Add some of the rules from: http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js
	*/
	var Validation = function () {
		var rules = {
			email: {
				check: function (value) {
					this.msg = Globalize.localize("EmailValidation");

					if (value) {
						return testPattern(value, "[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])"); //ignore jslint
					} else {
						return true;
					}
				},
				msg: Globalize.localize("EmailValidation")
			},
			url: {
				check: function (value) {
					this.msg = Globalize.localize("UrlValidation");

					if (value) {
						return testPattern(value, "^https?://(.+\.)+.{2,4}(/.*)?$"); //ignore jslint
					} else {
						return true;
					}

				},
				msg: Globalize.localize("UrlValidation")
			},
			required: {
				check: function (value) {
					this.msg = Globalize.localize("Required");

					if (typeof value == "string" && $.trim(value).length === 0) {
						return false;
					}

					if (value) {
						return true;
					} else {
						return false;
					}

				},
				msg: Globalize.localize("Required")
			}
		};

		return {
			addRule: function (name, rule, async) {
				rules[name] = rule;

				if (async) {
					rules[name].async = true;
				}

			},
			getRule: function (name) {
				return rules[name];
			},
			removeMessage: function (selector) {
				selector.each(function () {
					var $field = $(this),
						$selected, $checkbox, $next, tabPanel, tabid, anchor, fieldset, label;

					$field.removeClass("error");
					$("#inforTooltip").hide();

					if ($field.hasClass("inforCheckbox")) {
						$checkbox = $field.closest("div.inforCheckbox");
						$checkbox.removeClass("error").next(".inforErrorIcon").remove();
						$checkbox.prev(".inforErrorIcon").remove();
					}

					if ($field.hasClass("inforRadioButton")) {
						var name = $field.attr("name"),
							last = $('input[name="' + name + '"]:last');

						last.parent().next(".inforErrorIcon").remove();
					}

					if ($field.hasClass("inforListBox")) {
						$field.next(".inforListBox").removeClass("error").next(".inforErrorIcon").remove();
					}

					if ($field.hasClass("inforFieldSet")) {
						$field.find(".inforErrorIcon").remove();
					}

					if ($field.hasClass("inforDropDownList")) {
						$next = $field.next();
						$next.removeClass("error");
						$next.find('.inforErrorIcon').remove();
						$field = $next.find('input');
						$field.removeClass("error");
					}

					if ($field.hasClasses(['inforLookupField', 'inforDateField', 'inforTimeField', 'inforUrlField', 'inforSpinner', 'inforSearchField', 'inforEmailField', 'inforCalculatorField'])) {
						$field.closest(".inforTriggerField").removeClass("error").find('.inforErrorIcon').remove();
					}

					//textbox and textarea fall through
					if (Globalize.culture().isRTL && $field.next().hasClass("inforDirtyIndicator")) {
						$field.next().next(".inforErrorIcon").remove();
					} else {
						$field.next(".inforErrorIcon").remove();
					}

					//if we are in a field set remove error indicator as long as there are no more errors.
					fieldset = $field.closest(".inforFieldSet");
					if (fieldset.length > 0) {
						label = fieldset.find('.inforFieldSetLabel:first');
						if (fieldset.find(".content:first").find(".inforErrorIcon").length === 0) {
							label.find(".inforErrorIcon").remove();
						}
					}

					//if we are on a tab remove it as long as there are no more errors.
					tabPanel = $field.closest(".ui-tabs-panel");
					if (tabPanel.length > 0) {
						tabid = tabPanel.attr("id");
						anchor = $('a[href="#' + tabid + '"]');

						if (anchor.next().hasClass("inforErrorIcon") && tabPanel.find(".inforErrorIcon").length === 0) {
							anchor.next().remove();
						}
					}
				});
			},
			showMessage: function (selector, messages, showTooltip) {
				selector.each(function () {
					var $field = $(this),
					icon = $("<div class='inforErrorIcon'></div>"),   //add the div to the page.
					maxW, maxAttr, $selected, $checkbox, tabid, fieldset, label;

					icon.attr("title", messages).css("display", "inline-block");

					//attach the tooltip and positioning - make sure the width is not too much bigger than the field. It will wrap.
					maxW = $field.width() + 20;

					if ($field.hasClass("inforCheckbox")) {
						maxW = $field.closest("div").next().width() + 20; //use the label width as the control width
						if (maxW < 200) {
							maxW = 200;
						}
					}

					if ($field.hasClass("inforRadioButton")) {
						maxW = 200;
					}

					maxAttr = $field.attr("data-tooltip-maxwidth");
					if (maxAttr) {
						maxW = maxAttr;
					}

					icon.data("field", ($field.hasClass("inforDropDownList") ? $field.next().find("input") : $field));
					icon.inforToolTip({ maxWidth: maxW });

					//remove the previous error if any...
					$field.validationMessage('remove');

					if ($field.hasClass("inforRadioButton")) {
						var name = $field.attr("name"),
							last = $('input[name="' + name + '"]:last');

						last.parent().after(icon.css({"left" : "0px" , "top" : "0px"}));
					} else if ($field.hasClass("inforCheckbox")) {
						$checkbox = $field.closest("div.inforCheckbox");
						if ($checkbox.next().is(".inforCheckboxLabel")) {
							$checkbox.addClass("error").before(icon.css({
								"margin-right": "-12px",
								"position": "relative",
								"left": "-11px",
								"top" : "2px"
							})); //label is on the left
						} else {
							$checkbox.addClass("error").after(icon.css("margin-top", "-2px"));
						}
					} else if ($field.hasClass("inforListBox")) {
						$field.next(".inforListBox").addClass("error").after(icon);
						icon.css({
							"position": "relative",
							"left": (!Globalize.culture().isRTL ? "-16px" : "32px"),
							"top": "-" + ($field.height() - 6) + "px"
						});
					} else if ($field.hasClass("inforFieldSet")) {
						var fs = $field.find(".inforFieldSetLabel:first");
						fs.prepend(icon);
						icon.css({
							"position": "relative",
							"left": "-2px",
							"top": "-1px"
						});
					} else if ($field.hasClass("inforDropDownList")) {
						icon.css({
							"left": (!Globalize.culture().isRTL ? "-22px" : "33px"),
							"top": "2px",
							"margin-left": "-12px",
							"margin-bottom": (!Globalize.culture().isRTL ? "-3px" : "-2px"),
							"position": "relative"
						});
						$field.next().closest(".inforTriggerField").addClass("error").find(".inforTriggerButton").before(icon);
					} else if ($field.hasClass("inforFileField")) {
						icon.css({
							"left": (!Globalize.culture().isRTL ? "18px" : "33px"),
							"top": "3px",
							"margin-left": "-12px"
						});
						$field.addClass("error");
						$field.closest(".inforTriggerField").addClass("error").append(icon);
					} else if ($field.hasClass("inforSpinner")) {
						icon.css({
							"left": (!Globalize.culture().isRTL ? "-17px" : "33px"),
							"top": "2px",
							"margin-left": "-12px",
							"margin-bottom": (!Globalize.culture().isRTL ? "-3px" : "-2px"),
							"position": "relative"
						});
						$field.closest(".inforTriggerField").addClass("error").find(".inforTriggerButton:first").before(icon);
					} else if ($field.hasClasses(['inforLookupField', 'inforDateField', 'inforTimeField', 'inforUrlField', 'inforSearchField', 'inforEmailField', 'inforFileField', 'inforCalculatorField'])) {
						icon.css({
							"left":(!Globalize.culture().isRTL ? "-22px" : "33px"),
							"top": "2px",
							"margin-left": "-12px",
							"margin-bottom": (!Globalize.culture().isRTL ? "-3px" : "-2px"),
							"position": "relative"
						});
						$field.closest(".inforTriggerField").addClass("error").find(".inforTriggerButton").before(icon);
					} else {
						$field.after(icon);
						$field.addClass("error");
					}

					//make sure the width is no bigger than the field.
					if ($field.hasClass("inforTextArea")) {
						icon.css({
							"position": "relative",
							"top": "-" + ($field.height() - 10) + "px"
						});
					}

					//if we are on a tab add it
					var tabPanel = $field.closest(".ui-tabs-panel");
					if (tabPanel.length > 0) {
						tabid = tabPanel.attr("id");
						var anchor = $('a[href="#' + tabid + '"]');
						if (!anchor.next().hasClass("inforErrorIcon")) {
							anchor.after('<div class="inforErrorIcon" style="display: inline-block; float: ' + (Globalize.culture().isRTL ? 'right' : 'left') + '; margin: ' + (Globalize.culture().isRTL ? '0px 2px 0px -5px' : '0px 3px 0 0px') + ';' + (Globalize.culture().isRTL ? 'left: -1px;' : 'left: -4px') +'"></div>');
						}
					}

					//if on a field set add it.
					fieldset = $field.closest(".inforFieldSet");
					if (fieldset.length > 0) {
						label = fieldset.find('.inforFieldSetLabel:first');
						if (label.find(".inforErrorIcon").length === 0) {
							label.append('<div class="inforErrorIcon" style="display: inline-block; float: none; left: 0; margin: 0 6px"></div>');
						}
					}

					//hide on focus if too small
					$field.off("focus.error").on("focus.error", function () {
						icon.fadeOut();//css("opacity", 0);
						if (showTooltip) {
							$("#inforTooltip").fadeOut();
						}
						$field.validationMessage('remove');
					});

					//Immediately show the tooltip.
					if (showTooltip) {
						//do this on a timeout so the last click doesnt catch and close it immediately.
						var bindClick = function () {
							$(document).unbind("click.tooltip");
							$(document).bind("click.tooltip", function () {
								$("#inforTooltip").hide();
								$(document).unbind("click.tooltip");
							});
						};

						setTimeout(bindClick, 200);
						if (icon.is(":visible")) {
							icon.inforToolTip("open");
						}
					}
				});
			}
		};
	};

	/* Form factory  */
	var Form = function (form) {
		var fields = [];
		form.find("[data-validation]").each(function () {
			var field = $(this);
			if (field.attr('data-validation') !== undefined) {
				fields.push(new Field(field));
			}
		});
		this.fields = fields;
	};

	Form.prototype = {
		validate: function () {
			for (var field = 0; field < this.fields.length; field = field + 1) {
				this.fields[field].validate();
			}
		},
		/*
			Every method we call and are pushing on to deferreds returns in either synchronous
			or async fashion.  If it's synchronous, it acts like a normal sync call would, resolving or rejecting
			the jQuery deferred object before its promise is even returned.  If it's async, the method
			exits and leaves us with a promise, jQuery waits until it is resolved or
			rejected, which we handle based on the state of the validation.
		*/
		validateAsync: function (callback) {
			var deferreds = [];
			for (var field = 0; field < this.fields.length; field++) {
				var dfds = this.fields[field].validate();
				for (var i = 0; i < dfds.length; i++) {
					deferreds.push(dfds[i]);
				}
			}

			$.when.apply($, deferreds).then(function () {
				callback(true);
			}, function () {
				callback(false);
			});
		},
		isValid: function () {
			for (var field = 0; field < this.fields.length; field++) {
				if (!this.fields[field].valid) {
					//this.fields[field].field.focus();
					return false;
				}
			}
			return true;
		}
	};

	/* Field factory */
	var Field = function (field) {
		this.field = field;
		this.valid = false;

		var validationEvents = this.field.attr("data-validation-events");
		if (!validationEvents) {
			validationEvents = "change blur"; //could do keyup
		}

		if (validationEvents == "none") {
			return;
		}

		var events = validationEvents.split(" ");

		for (var i = 0; i < events.length; i++) {
			this.attach(events[i]);
		}
	};

	Field.prototype = {
		attach: function (event) {
			var obj = this,
				fireOnReadonly = obj.field.attr("data-validation-onreadonly");

			if (event == "change") {
				obj.field.unbind("change.validation");
				obj.field.bind("change.validation", function (event) {
					if ($(this).attr("readonly") && fireOnReadonly != "true") {
						return;
					}
					return obj.validate(event);
				});
			}
			if (event == "keyup") {
				obj.field.unbind("keyup.validation");
				obj.field.bind("keyup.validation", function () {
					if ($(this).attr("readonly") && fireOnReadonly != "true") {
						return;
					}

					return obj.validate(event);
				});
			}
			if (event == "blur") {
				var inputElem = obj.field;
				if (obj.field.hasClass("inforDropDownList")) {
					inputElem = obj.field.next().find("input");
				}

				inputElem.unbind("blur.validation");
				inputElem.bind("blur.validation", function () {
					var $this = $(this);

					setTimeout(function () {
						var ac = $this.data("autocomplete"),
							dp = $this.data("datepicker");
						
						if ($("#lookupGridDivId").is(":visible")) {
							return;
						}
						
						if ($("#inforTempInput").is(":visible")) {
							return;
						}
						
						if (ac && ac.menu && ac.menu.element.is(":visible")) {
							return;
						}

						if (dp && $("#inforDatePicker-div").is(":visible")) {
							return;
						}

						if (!ac && $this.attr("readonly") && !$this.hasClass("selectOnly") && fireOnReadonly != "true") {
							return;
						}
						obj.validate(event);
					}, 100);
				});
			}
		},
		/* Test the Field and Add the validation Messages */
		addError: function (obj, errors, errorlist, event) {
			if (errors.length) {
				//Add the error message
				for (var error = 0; error < errors.length; error++) {
					errorlist = errorlist + "<li>" + errors[error] + "</li>";
				}

				var hasErrorBeenShown = obj.field.data("hasErrorBeenShown");
				var showTip = false;
				if (!hasErrorBeenShown && event == "blur") {
					showTip = true;
				}

				obj.field.validationMessage("show", errorlist, showTip);
				obj.field.data("errorlist", errorlist);
				obj.field.data("hasErrorBeenShown", true);
				obj.valid = false;

			} else {
				obj.field.validationMessage("remove");
				obj.valid = true;
			}
		},
		validate: function () {
			var obj = this,
				field = obj.field,
				errorlist = "",
				types = field.attr("data-validation").split(" "),
				container = field.parent(),
				errors = [],
				dfds = [],
				manageResult = function (result) {
					if (!result) {
						container.addClass("error");
						errors.push(rule.msg);
						obj.addError(obj, errors, errorlist);
						dfd.reject();
					} else {
						obj.addError(obj, errors, errorlist);
						dfd.resolve();
					}
				};

			field.next(".errorlist").remove();

			for (var i = 0; i < types.length; i = i + 1) {
				var rule = $.Validation.getRule(types[i]),
					value = field.val(),
					dfd = $.Deferred();

				if (field.attr('placeholder') == value) {
					value = ""; //value showing placeholder in IE.
				}

				if (field.hasClass("inforDropDownList")) {
					value = field.next().find("input").val();
				}

				if (!rule) {
					continue;
				}

				if (rule.async) {
					rule.check(value, manageResult, field);
				} else {
					manageResult(rule.check(value, field));
				}
				dfds.push(dfd);
			}

			obj.addError(obj, errors, errorlist);
			return dfds;
		}
	};

	$.extend($.fn, {    // Validation extends jQuery prototype
		setupValidation: function (callback) {  //set up async type validation using deferred.
			var validator = new Form($(this));
			$.data($(this)[0], 'validator', validator);

			$(this).unbind("submit.validation");
			$(this).bind("submit.validation", function (e) {
				e.preventDefault();
				validator.validateAsync(function (valid) {
					if (!valid) {

						/*TODO: Could show a page level message or add Slide in Panel Here
						$('body').inforPageLevelMessage({
							messageType: 'Alert',
							messageTitle: 'Save failed',
							errorMessage: 'Fix the errors in this page and try again.',
							showClose: true,
							autoDismiss: true
						});*/

						//show the first invalid tooltip
						var firstField = null;
						for (var i = 0; i < validator.fields.length; i++) {
							var fObj = validator.fields[i];
							if (!fObj.valid) {
								firstField = fObj.field;
								break;
							}
						}

						if (firstField) {
							firstField.validationMessage("show", firstField.data("errorlist"), true);
						}
					}

					callback(valid);
				});
			});

			return validator;
		},
		isValid: function () {
			if ($(this).is("form")) {
				var validator = $.data($(this)[0], 'validator');
				return validator.isValid();
			} else {
				//allow this on fields?
				return false;
			}
		},
		validate: function () {
			var validator = $.data($(this)[0], 'validator');
			validator.validate();
			return validator.isValid();
		},
		resetForm: function () {
			var formFields = $(this).find('input, select, textarea'),
				validator;

			//clear errors.
			formFields.validationMessage("remove");

			//clear dirty flag.
			$(this).find(".inforDirty").removeClass("inforDirty");
			formFields.data("isDirty", false).removeClass("inforDirty");

			//clear valid flags
			validator = $.data($(this)[0], 'validator');
			if (validator) {
				for (var field = 0; field < validator.fields; field++) {
					validator.fields[field].valid = true;
				}
			}
			//reset form data
			if ($(this).is("form")) {
				$(this)[0].reset();
			}
		},
		validationMessage: function (hideOrShow, messages, showTooltip) {
			if (hideOrShow == "show") {
				$.Validation.showMessage(this, messages, showTooltip);
			}
			if (hideOrShow == "remove") {
				$.Validation.removeMessage(this, messages, showTooltip);
			}
		}
	});
	$.Validation = new Validation();
})(jQuery);/*
* Infor Wizard Control
*/
(function ($) {
	$.widget("ui.inforWizard", {
		options: {
			startPage: 0, //Page to start on
			sequential: false, //should the tabs be disabled and disclosed while progressing
			showTitleBar: true, //should we show the title bar?
			onPageLoad: null, //fires each time a page load is complete
			animate: true,	//animate page transitions
			onShowPage: null, //call back which you can cancel
			buttons: [{
				text: Globalize.localize("Finish"),
				click: function () {
					var finish = $(this).data("uiInforWizard").options.onFinish;
					if (finish) {
						finish();
					}
				},
				isDefault: true,
				isFinish: true
			}, {
				text: Globalize.localize("Next"),
				click: function (e) {
					var wiz = $(this),
						current = wiz.inforWizard().data("uiInforWizard").currentPage;

					wiz.inforWizard("showPage", current + 1, e);
				},
				isDefault: true,
				isNext: true
			}, {
				text: Globalize.localize("Previous"),
				click: function (e) {
					var wiz = $(this),
						current = wiz.inforWizard().data("uiInforWizard").currentPage;

					wiz.inforWizard("showPage", current - 1, e);
				},
				isPrevious: true
			}], //the array of buttons similar to inforMessageDialog
			onFinish: null //Function that fires when the finish button is pressed.
		},
		attrFn: {
			val: true,
			css: true,
			html: true,
			text: true,
			data: true,
			width: true,
			height: true,
			offset: true,
			click: true
		},
		_create: function () {
			var self = this,
				elem = $(this.element),
				otherButtons = null,
				container = $("<div class=\"inforWizardContainer\">");
			
			elem.wrap(container);
			container = elem.parent();
			if (this.options.showTitleBar) {
				container.prepend("<div class=\"inforWizardTitleBar\"><span class=\"inforWizardTitle\">" + elem.attr("data-title") + "</span></div>");
			}
			self.refresh();
			
			if (self.options.startPage != 0) {
			
				buttons = elem.prev().find(".inforWizardButton").eq(self.options.startPage-1);
				buttons.addClass("beforeActive");
				self.currentPage = self.options.startPage;
				self.showPage(self.options.startPage);
			}
		},
		currentPage: 0,
		showPage: function (page, event) {
			var elem = $(this.element),
				self = this,
				okToShow = true,
				activeLi = elem.find("li.inforWizardPage").eq(this.currentPage),
				nextLi = elem.find("li.inforWizardPage").eq(page),
				otherButtons;
			
			if (self.options.onShowPage) {
				okToShow = self.options.onShowPage(event, activeLi, nextLi);
				if (okToShow === false) {
					return;
				}
			}
			
			$("#inforTooltip").hide();
			
			if (page === this.currentPage) {
				return;
			}

			if (self.options.animate) {

				activeLi.hide("slide", {
					direction: (page > this.currentPage ? 'left' : 'right'),
					easing: 'easeOutQuad',
					duration: 400,
					queue: false
				});

				nextLi.hide().css("opacity", 1).show("slide", {
					direction: (page > this.currentPage ? 'right' : 'left'),
					easing: 'easeOutQuad',
					duration: 400,
					queue: false
				});

			} else {
				activeLi.hide();
				nextLi.show();
			}

			if (self.options.onPageLoad) {
				self.options.onPageLoad(page, nextLi);
			}

			this.currentPage = parseInt(page, 10);
			this._showButtons(nextLi);

			otherButtons = elem.prev().find(".inforWizardButton");
			otherButtons.removeClass("active beforeActive");
			otherButtons.each(function () {
				var button = $(this);
				if (button.attr("data-list-element") === self.currentPage.toString()) {
					button.addClass("active exposed");
					button.prev().addClass("beforeActive");
				}
			});

			self._refreshButtons();
		},
		_showButtons: function (panel) {
			var parent = panel.closest(".inforWizard"),
				self = this,
				buttons = this.options.buttons,
				uiButtonBar = parent.find(".inforWizardBottomButtonBar");

			if (uiButtonBar.length === 0) {
				uiButtonBar = $("<div class=\"inforWizardBottomButtonBar\"></div").appendTo(parent);
			}

			uiButtonBar.empty();

			$.each(buttons, function (name, props) {
				props = $.isFunction(props) ? {
					click: props,
					text: name
				} : props;
				var button = $('<button type="button" class="inforFormButton"></button>')
					.click(function () {
						props.click.apply(self.element[0], arguments);
					})
					.appendTo(uiButtonBar);
				$.each(props, function (key, value) {
					if (key === "click") {
						return;
					}
					if (key === "text") {
						button.html(value);
						return;
					}
					if (key === "isDefault" && value === true) {
						button.addClass("default");
					}
					if (key === "isNext" && value === true) {
						button.addClass("next").html("<div class=\"arrowRight\">" + button.html() + "</div>");
						return;
					}
					if (key === "isPrevious" && value === true) {
						button.addClass("previous").html("<div class=\"arrowLeft\">" + button.html() + "</div>");
						return;
					}
					if (key === "isFinish" && value === true) {
						button.addClass("finish");
						return;
					}
					if (key in self.attrFn) {
						button[key](value);
					} else {
						button.attr(key, value);
					}
				});
				if ($.fn.button) {
					button.button();
				}
			});
		},
		refresh: function () {
			//scan the ul and hide all but the current page
			var self = this,
				elem = $(this.element),
				listElem = null,
				buttonBar = $("<div class=\"inforWizardButtonBar\"></div>"),
				isActive = false;

			if (elem.prev().is(".inforWizardButtonBar")) {
				elem.prev().remove();
			}

			elem.before(buttonBar);

			elem.find(".inforWizardPage").each(function (index) {
				isActive = (index === self.options.startPage);
				listElem = $(this);

				if (isActive) {
					listElem.addClass("active");
					self._showButtons(listElem);
					if (self.options.onPageLoad) {
						self.options.onPageLoad(index, listElem);
					}
				} else {
					listElem.hide();
				}

				var button = $("<button type=\"button\" class=\"inforWizardButton\"></button>")
					.click(function (e) {
						var button = $(this);
						if (button.hasClass("disabled")) {
							return;
						}
						self.showPage(button.attr("data-list-element"), e);
					})
					.html("<span>" + listElem.attr("data-title") + "</span>")
					.attr("data-list-element", index)
					.addClass(isActive ? "active" : "");

				buttonBar.append(button);
			});
			self._refreshButtons();
			
			$(window).on("throttledresize.inforWizard", function () {
				self._refreshButtons();
			});
		},
		_refreshButtons: function () {
			var self = this,
				elem = $(this.element),
				buttons = $(this.element).prev().find(".inforWizardButton"),
				perc = (100/buttons.length),
				activeIndex = buttons.filter(".active").index();

			if (!self.options.sequential) {
				return;
			}
			buttons.each(function (index) {
				var btn = $(this);
				if (index <= activeIndex + 1) {
					btn.removeClass("disabled");
				} else {
					btn.addClass("disabled");
				}
				btn.css("width", perc + "%");
			});

			buttons.filter(".exposed").add(buttons.filter(".exposed").last().next()).removeClass("disabled");
			buttons.filter(".beforeDisabled").removeClass("beforeDisabled");
			buttons.filter(".disabled:first").prev().addClass("beforeDisabled");

			//refresh the prev/next/finish
			if (activeIndex === 0) {
				elem.find(".inforWizardBottomButtonBar .previous").hide();
			}

			if (buttons.length - 1 === activeIndex) {
				elem.find(".inforWizardBottomButtonBar .next").hide();
				elem.find(".inforWizardBottomButtonBar .finish").show();
			} else {
				elem.find(".inforWizardBottomButtonBar .next").show();
				elem.find(".inforWizardBottomButtonBar .finish").hide();
			}
		}
	});
})(jQuery);/*
* Globalize Culture ar-EG
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "ar-EG", "default", {
	name: "ar-EG",
	englishName: "Arabic (Egypt)",
	nativeName: " ()",
	language: "ar",
	isRTL: true,
	numberFormat: {
		pattern: ["n-"],
		decimals: 3,
		NaN: " ",
		negativeInfinity: "- ",
		positiveInfinity: "+ ",
		percent: {
			decimals: 3
		},
		currency: {
			pattern: ["$n-","$ n"],
			symbol: "..?"
		}
	},
	calendars: {
		standard: {
			name: "Gregorian_USEnglish",
			firstDay: 6,
			"/": "/",
			days: {
				names: ["","","","","","",""],
				namesAbbr: ["","","","","","",""],
				namesShort: ["","","","","","",""]
			},
			months: {
				names: ["","?","","","","","","","","","?","",""],
				namesAbbr: ["","?","","","","","","","","","?","",""]
			},
			AM: ["","",""],
			PM: ["","",""],
			patterns: {
				d: "dd/MM/yyyy",
				D: "dd MMMM, yyyy",
				t: "hh:mm tt",
				T: "hh:mm:ss tt",
				f: "dd MMMM, yyyy hh:mm tt",
				F: "dd MMMM, yyyy hh:mm:ss tt",
				M: "dd MMMM"
			}
		},
		UmAlQura: {
			name: "UmAlQura",
			firstDay: 6,
			"/": "/",
			days: {
				names: ["","","","","","",""],
				namesAbbr: ["","","","","","",""],
				namesShort: ["","","","","","",""]
			},
			months: {
				names: ["","?","","","","","","","","","","",""],
				namesAbbr: ["","?","","","","","","","","","","",""]
			},
			AM: ["","",""],
			PM: ["","",""],
			eras: [{"name":" ","start":null,"offset":0}],
			twoDigitYearMax: 1451,
			patterns: {
				d: "dd/MM/yyyy",
				D: "dd/MMMM/yyyy",
				t: "hh:mm tt",
				T: "hh:mm:ss tt",
				f: "dd/MMMM/yyyy hh:mm tt",
				F: "dd/MMMM/yyyy hh:mm:ss tt",
				M: "dd MMMM"
			},
			convert: {
					_yearInfo: [
						// MonthLengthFlags, Gregorian Date
						[746, -2198707200000],
						[1769, -2168121600000],
						[3794, -2137449600000],
						[3748, -2106777600000],
						[3402, -2076192000000],
						[2710, -2045606400000],
						[1334, -2015020800000],
						[2741, -1984435200000],
						[3498, -1953763200000],
						[2980, -1923091200000],
						[2889, -1892505600000],
						[2707, -1861920000000],
						[1323, -1831334400000],
						[2647, -1800748800000],
						[1206, -1770076800000],
						[2741, -1739491200000],
						[1450, -1708819200000],
						[3413, -1678233600000],
						[3370, -1647561600000],
						[2646, -1616976000000],
						[1198, -1586390400000],
						[2397, -1555804800000],
						[748, -1525132800000],
						[1749, -1494547200000],
						[1706, -1463875200000],
						[1365, -1433289600000],
						[1195, -1402704000000],
						[2395, -1372118400000],
						[698, -1341446400000],
						[1397, -1310860800000],
						[2994, -1280188800000],
						[1892, -1249516800000],
						[1865, -1218931200000],
						[1621, -1188345600000],
						[683, -1157760000000],
						[1371, -1127174400000],
						[2778, -1096502400000],
						[1748, -1065830400000],
						[3785, -1035244800000],
						[3474, -1004572800000],
						[3365, -973987200000],
						[2637, -943401600000],
						[685, -912816000000],
						[1389, -882230400000],
						[2922, -851558400000],
						[2898, -820886400000],
						[2725, -790300800000],
						[2635, -759715200000],
						[1175, -729129600000],
						[2359, -698544000000],
						[694, -667872000000],
						[1397, -637286400000],
						[3434, -606614400000],
						[3410, -575942400000],
						[2710, -545356800000],
						[2349, -514771200000],
						[605, -484185600000],
						[1245, -453600000000],
						[2778, -422928000000],
						[1492, -392256000000],
						[3497, -361670400000],
						[3410, -330998400000],
						[2730, -300412800000],
						[1238, -269827200000],
						[2486, -239241600000],
						[884, -208569600000],
						[1897, -177984000000],
						[1874, -147312000000],
						[1701, -116726400000],
						[1355, -86140800000],
						[2731, -55555200000],
						[1370, -24883200000],
						[2773, 5702400000],
						[3538, 36374400000],
						[3492, 67046400000],
						[3401, 97632000000],
						[2709, 128217600000],
						[1325, 158803200000],
						[2653, 189388800000],
						[1370, 220060800000],
						[2773, 250646400000],
						[1706, 281318400000],
						[1685, 311904000000],
						[1323, 342489600000],
						[2647, 373075200000],
						[1198, 403747200000],
						[2422, 434332800000],
						[1388, 465004800000],
						[2901, 495590400000],
						[2730, 526262400000],
						[2645, 556848000000],
						[1197, 587433600000],
						[2397, 618019200000],
						[730, 648691200000],
						[1497, 679276800000],
						[3506, 709948800000],
						[2980, 740620800000],
						[2890, 771206400000],
						[2645, 801792000000],
						[693, 832377600000],
						[1397, 862963200000],
						[2922, 893635200000],
						[3026, 924307200000],
						[3012, 954979200000],
						[2953, 985564800000],
						[2709, 1016150400000],
						[1325, 1046736000000],
						[1453, 1077321600000],
						[2922, 1107993600000],
						[1748, 1138665600000],
						[3529, 1169251200000],
						[3474, 1199923200000],
						[2726, 1230508800000],
						[2390, 1261094400000],
						[686, 1291680000000],
						[1389, 1322265600000],
						[874, 1352937600000],
						[2901, 1383523200000],
						[2730, 1414195200000],
						[2381, 1444780800000],
						[1181, 1475366400000],
						[2397, 1505952000000],
						[698, 1536624000000],
						[1461, 1567209600000],
						[1450, 1597881600000],
						[3413, 1628467200000],
						[2714, 1659139200000],
						[2350, 1689724800000],
						[622, 1720310400000],
						[1373, 1750896000000],
						[2778, 1781568000000],
						[1748, 1812240000000],
						[1701, 1842825600000],
						[0, 1873411200000]
					],
					minDate: -2198707200000,
					maxDate: 1873411199999,
					toGregorian: function(hyear, hmonth, hday) {
						var days = hday - 1,
							gyear = hyear - 1318;
						if (gyear < 0 || gyear >= this._yearInfo.length) return null;
						var info = this._yearInfo[gyear],
							gdate = new Date(info[1]),
							monthLength = info[0];
						// Date's ticks in javascript are always from the GMT time,
						// but we are interested in the gregorian date in the same timezone,
						// not what the gregorian date was at GMT time, so we adjust for the offset.
						gdate.setMinutes(gdate.getMinutes() + gdate.getTimezoneOffset());
						for (var i = 0; i < hmonth; i++) {
							days += 29 + (monthLength & 1);
							monthLength = monthLength >> 1;
						}
						gdate.setDate(gdate.getDate() + days);
						return gdate;
					},
					fromGregorian: function(gdate) {
						// Date's ticks in javascript are always from the GMT time,
						// but we are interested in the hijri date in the same timezone,
						// not what the hijri date was at GMT time, so we adjust for the offset.
						var ticks = gdate - gdate.getTimezoneOffset() * 60000;
						if (ticks < this.minDate || ticks > this.maxDate) return null;
						var hyear = 0,
							hmonth = 1;
						// find the earliest gregorian date in the array that is greater than or equal to the given date
						while (ticks > this._yearInfo[++hyear][1]) { }
						if (ticks !== this._yearInfo[hyear][1]) {
							hyear--;
						}
						var info = this._yearInfo[hyear],
							// how many days has it been since the date we found in the array?
							// 86400000 = ticks per day
							days = Math.floor((ticks - info[1]) / 86400000),
							monthLength = info[0];
						hyear += 1318; // the Nth array entry corresponds to hijri year 1318+N
						// now increment day/month based on the total days, considering
						// how many days are in each month. We cannot run past the year
						// mark since we would have found a different array entry in that case.
						var daysInMonth = 29 + (monthLength & 1);
						while (days >= daysInMonth) {
							days -= daysInMonth;
							monthLength = monthLength >> 1;
							daysInMonth = 29 + (monthLength & 1);
							hmonth++;
						}
						// remaining days is less than is in one month, thus is the day of the month we landed on
						// hmonth-1 because in javascript months are zero based, stay consistent with that.
						return [hyear, hmonth - 1, days + 1];
					}
			}
		},
		Gregorian_TransliteratedEnglish: {
			name: "Gregorian_TransliteratedEnglish",
			firstDay: 6,
			"/": "/",
			days: {
				names: ["","","","","","",""],
				namesAbbr: ["","","","","","",""],
				namesShort: ["","","","","","",""]
			},
			months: {
				names: ["","?","","","","","","","","","?","",""],
				namesAbbr: ["","?","","","","","","","","","?","",""]
			},
			AM: ["","",""],
			PM: ["","",""],
			eras: [{"name":"","start":null,"offset":0}],
			patterns: {
				d: "MM/dd/yyyy",
				t: "hh:mm tt",
				T: "hh:mm:ss tt",
				f: "dddd, MMMM dd, yyyy hh:mm tt",
				F: "dddd, MMMM dd, yyyy hh:mm:ss tt"
			}
		},
		Hijri: {
			name: "Hijri",
			firstDay: 6,
			"/": "/",
			days: {
				names: ["","","","","","",""],
				namesAbbr: ["","","","","","",""],
				namesShort: ["","","","","","",""]
			},
			months: {
				names: ["","?","","","","","","","","","","",""],
				namesAbbr: ["","?","","","","","","","","","","",""]
			},
			AM: ["","",""],
			PM: ["","",""],
			eras: [{"name":" ","start":null,"offset":0}],
			twoDigitYearMax: 1451,
			patterns: {
				d: "dd/MM/yyyy",
				D: "dd/MM/yyyy",
				t: "hh:mm tt",
				T: "hh:mm:ss tt",
				f: "dd/MM/yyyy hh:mm tt",
				F: "dd/MM/yyyy hh:mm:ss tt",
				M: "dd MMMM"
			},
			convert: {
					// Adapted to Script from System.Globalization.HijriCalendar
					ticks1970: 62135596800000,
					// number of days leading up to each month
					monthDays: [0, 30, 59, 89, 118, 148, 177, 207, 236, 266, 295, 325, 355],
					minDate: -42521673600000,
					maxDate: 253402300799999,
					// The number of days to add or subtract from the calendar to accommodate the variances
					// in the start and the end of Ramadan and to accommodate the date difference between
					// countries/regions. May be dynamically adjusted based on user preference, but should
					// remain in the range of -2 to 2, inclusive.
					hijriAdjustment: 0,
					toGregorian: function(hyear, hmonth, hday) {
						var daysSinceJan0101 = this.daysToYear(hyear) + this.monthDays[hmonth] + hday - 1 - this.hijriAdjustment;
						// 86400000 = ticks per day
						var gdate = new Date(daysSinceJan0101 * 86400000 - this.ticks1970);
						// adjust for timezone, because we are interested in the gregorian date for the same timezone
						// but ticks in javascript is always from GMT, unlike the server were ticks counts from the base
						// date in the current timezone.
						gdate.setMinutes(gdate.getMinutes() + gdate.getTimezoneOffset());
						return gdate;
					},
					fromGregorian: function(gdate) {
						if ((gdate < this.minDate) || (gdate > this.maxDate)) return null;
						var ticks = this.ticks1970 + (gdate-0) - gdate.getTimezoneOffset() * 60000,
							daysSinceJan0101 = Math.floor(ticks / 86400000) + 1 + this.hijriAdjustment;
						// very particular formula determined by someone smart, adapted from the server-side implementation.
						// it approximates the hijri year.
						var hday, hmonth, hyear = Math.floor(((daysSinceJan0101 - 227013) * 30) / 10631) + 1,
							absDays = this.daysToYear(hyear),
							daysInYear = this.isLeapYear(hyear) ? 355 : 354;
						// hyear is just approximate, it may need adjustment up or down by 1.
						if (daysSinceJan0101 < absDays) {
							hyear--;
							absDays -= daysInYear;
						}
						else if (daysSinceJan0101 === absDays) {
							hyear--;
							absDays = this.daysToYear(hyear);
						}
						else {
							if (daysSinceJan0101 > (absDays + daysInYear)) {
								absDays += daysInYear;
								hyear++;
							}
						}
						// determine month by looking at how many days into the hyear we are
						// monthDays contains the number of days up to each month.
						hmonth = 0;
						var daysIntoYear = daysSinceJan0101 - absDays;
						while (hmonth <= 11 && daysIntoYear > this.monthDays[hmonth]) {
							hmonth++;
						}
						hmonth--;
						hday = daysIntoYear - this.monthDays[hmonth];
						return [hyear, hmonth, hday];
					},
					daysToYear: function(year) {
						// calculates how many days since Jan 1, 0001
						var yearsToYear30 = Math.floor((year - 1) / 30) * 30,
							yearsInto30 = year - yearsToYear30 - 1,
							days = Math.floor((yearsToYear30 * 10631) / 30) + 227013;
						while (yearsInto30 > 0) {
							days += (this.isLeapYear(yearsInto30) ? 355 : 354);
							yearsInto30--;
						}
						return days;
					},
					isLeapYear: function(year) {
						return ((((year * 11) + 14) % 30) < 11);
					}
			}
		},
		Gregorian_MiddleEastFrench: {
			name: "Gregorian_MiddleEastFrench",
			firstDay: 6,
			"/": "/",
			days: {
				names: ["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],
				namesAbbr: ["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],
				namesShort: ["di","lu","ma","me","je","ve","sa"]
			},
			months: {
				names: ["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre",""],
				namesAbbr: ["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc.",""]
			},
			AM: ["","",""],
			PM: ["","",""],
			eras: [{"name":"ap. J.-C.","start":null,"offset":0}],
			patterns: {
				d: "MM/dd/yyyy",
				t: "hh:mm tt",
				T: "hh:mm:ss tt",
				f: "dddd, MMMM dd, yyyy hh:mm tt",
				F: "dddd, MMMM dd, yyyy hh:mm:ss tt",
				M: "dd MMMM"
			}
		},
		Gregorian_Arabic: {
			name: "Gregorian_Arabic",
			firstDay: 6,
			"/": "/",
			days: {
				names: ["","","","","","",""],
				namesAbbr: ["","","","","","",""],
				namesShort: ["","","","","","",""]
			},
			months: {
				names: ["","","","","","","","","","","","",""],
				namesAbbr: ["","","","","","","","","","","","",""]
			},
			AM: ["","",""],
			PM: ["","",""],
			eras: [{"name":"","start":null,"offset":0}],
			patterns: {
				d: "MM/dd/yyyy",
				t: "hh:mm tt",
				T: "hh:mm:ss tt",
				f: "dddd, MMMM dd, yyyy hh:mm tt",
				F: "dddd, MMMM dd, yyyy hh:mm:ss tt"
			}
		},
		Gregorian_TransliteratedFrench: {
			name: "Gregorian_TransliteratedFrench",
			firstDay: 6,
			"/": "/",
			days: {
				names: ["","","","","","",""],
				namesAbbr: ["","","","","","",""],
				namesShort: ["","","","","","",""]
			},
			months: {
				names: ["?","??","","?","","","","","","","?","",""],
				namesAbbr: ["?","??","","?","","","","","","","?","",""]
			},
			AM: ["","",""],
			PM: ["","",""],
			eras: [{"name":"","start":null,"offset":0}],
			patterns: {
				d: "MM/dd/yyyy",
				t: "hh:mm tt",
				T: "hh:mm:ss tt",
				f: "dddd, MMMM dd, yyyy hh:mm tt",
				F: "dddd, MMMM dd, yyyy hh:mm:ss tt"
			}
		}
	},
	messages : {"AdditionalHelp":" ?","AddNewTab":"?   ","Alerts":"","ApplyFilter":" ?","Approve":"?","Attachments":"?","Back":"","Basic":"","Between":"","Book":"","Cancel":"","Checked":" ?","ClearFilter":" ?","Close":"","CloseCancelChanges":"  ","CloseSaveChanges":"  ?","CloseTab":"  ","ColumnPersonalization":" ","Comments":"","Confirmation":"","Contains":" ","CreateTab":"   ","Cut":"","Delete":"?","DiscardUndo":"/","DisplayDropDownList":"  ","Displaying":": ","DocWord":"","DoesNotContain":"  ","DoesNotEndWith":"  ","DoesNotEqual":" ","DoesNotStartWith":"  ","Download":"","Duplicate":"","Edit":"","EitherSelectedorNotSelected":"    ","Email":" ","EndsWith":" ","EqualsStr":"","ExpandCollapse":"/","ExportFailed":"? ","ExportToExcel":"  Excel","FileInUse":"  ? ","FileInUseDetail":"  ? ?       ? ?.","Filter":"?","FilterMenu":" ?","FilterOptions":" ?","FilterWithinResults":"?  ","First":"","FirstView":" ","Folder":"","ForgotPassword":"   ","Forward":"","GetMoreRows":"    ??","GreaterThan":" ","GreaterThanOrEquals":"   ","GridSettings":"  ","GroupSelection":" ","Help":"","HideColumn":"? ","IsEmpty":"?","IsNotEmpty":" ?","Last":"","LastView":" ","LaunchActivate":"/","LessThan":" ","LessThanOrEquals":"   ","Links":"","ListTabs":"   ","LoadingItem":"   ","Maintenance":"","Menu":"","New":"","Next":"","NextView":" ","No":"","NotChecked":"  ?","Notes":"","NotSelected":" ","Of":"  ","Ok":"?","Open":"?","Password":" ","Paste":"","Phone":"?","PleaseWait":" ","Previous":"","PreviousView":" ","Print":"","Queries":"","Redo":"","Refresh":"","Reject":"?","RememberMe":"      ","Reports":"","Reset":" ","Review":"","RunFilter":" ?","RunJob":" ","Save":"?","SaveBeforeClosing":"?  ","SavedFilters":" ? ?","SaveSubmit":"?/","ScreenDesign":" ","Search":"","SelectContents":" ","SelectDate":" ","SelectDeselect":"/  ","Selected":": ","ServerName":" ","Settings":"","ShowFilterRow":" ? ?","SignIn":" ","SortAscending":"? ","SortDescending":"? ","Spreadsheet":" ","StartsWith":" ","StatusIndicator":" ","Tasks":"","Today":"","Translate":"","UserID":"? ","Utilities":" ","Yes":"","Page":"?","Rows":"??","ShowingAll":" ","SessionNavigation":"  ","ListAllMenuItems":"   ","NoRecordsFound":"    ","SearchTree":" ","Clear":"","DrillDown":" ?","Required":"  ","Available":"?:","Add":"?","MoveDown":"  ?","MoveUp":"  ","Remove":"","LastYear":" ","NextMonth":" ","NextWeek":" ","NextYear":" ","OneMonthAgo":"  ","OneWeekAgo":"  ","SixMonthsAgo":"  ","Time":"","CannotBeSelected":"   ?.","ResetToDefault":"    ?","CloseOtherTabs":"   ","String2":"  ","Maximize":"   ","Minimize":"?"}
});

}( this ));
/*
* Globalize Culture ar-SA
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize,
	conversions;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

conversions = { _yearInfo: [
						// MonthLengthFlags, Gregorian Date
						[746, -2198707200000],
						[1769, -2168121600000],
						[3794, -2137449600000],
						[3748, -2106777600000],
						[3402, -2076192000000],
						[2710, -2045606400000],
						[1334, -2015020800000],
						[2741, -1984435200000],
						[3498, -1953763200000],
						[2980, -1923091200000],
						[2889, -1892505600000],
						[2707, -1861920000000],
						[1323, -1831334400000],
						[2647, -1800748800000],
						[1206, -1770076800000],
						[2741, -1739491200000],
						[1450, -1708819200000],
						[3413, -1678233600000],
						[3370, -1647561600000],
						[2646, -1616976000000],
						[1198, -1586390400000],
						[2397, -1555804800000],
						[748, -1525132800000],
						[1749, -1494547200000],
						[1706, -1463875200000],
						[1365, -1433289600000],
						[1195, -1402704000000],
						[2395, -1372118400000],
						[698, -1341446400000],
						[1397, -1310860800000],
						[2994, -1280188800000],
						[1892, -1249516800000],
						[1865, -1218931200000],
						[1621, -1188345600000],
						[683, -1157760000000],
						[1371, -1127174400000],
						[2778, -1096502400000],
						[1748, -1065830400000],
						[3785, -1035244800000],
						[3474, -1004572800000],
						[3365, -973987200000],
						[2637, -943401600000],
						[685, -912816000000],
						[1389, -882230400000],
						[2922, -851558400000],
						[2898, -820886400000],
						[2725, -790300800000],
						[2635, -759715200000],
						[1175, -729129600000],
						[2359, -698544000000],
						[694, -667872000000],
						[1397, -637286400000],
						[3434, -606614400000],
						[3410, -575942400000],
						[2710, -545356800000],
						[2349, -514771200000],
						[605, -484185600000],
						[1245, -453600000000],
						[2778, -422928000000],
						[1492, -392256000000],
						[3497, -361670400000],
						[3410, -330998400000],
						[2730, -300412800000],
						[1238, -269827200000],
						[2486, -239241600000],
						[884, -208569600000],
						[1897, -177984000000],
						[1874, -147312000000],
						[1701, -116726400000],
						[1355, -86140800000],
						[2731, -55555200000],
						[1370, -24883200000],
						[2773, 5702400000],
						[3538, 36374400000],
						[3492, 67046400000],
						[3401, 97632000000],
						[2709, 128217600000],
						[1325, 158803200000],
						[2653, 189388800000],
						[1370, 220060800000],
						[2773, 250646400000],
						[1706, 281318400000],
						[1685, 311904000000],
						[1323, 342489600000],
						[2647, 373075200000],
						[1198, 403747200000],
						[2422, 434332800000],
						[1388, 465004800000],
						[2901, 495590400000],
						[2730, 526262400000],
						[2645, 556848000000],
						[1197, 587433600000],
						[2397, 618019200000],
						[730, 648691200000],
						[1497, 679276800000],
						[3506, 709948800000],
						[2980, 740620800000],
						[2890, 771206400000],
						[2645, 801792000000],
						[693, 832377600000],
						[1397, 862963200000],
						[2922, 893635200000],
						[3026, 924307200000],
						[3012, 954979200000],
						[2953, 985564800000],
						[2709, 1016150400000],
						[1325, 1046736000000],
						[1453, 1077321600000],
						[2922, 1107993600000],
						[1748, 1138665600000],
						[3529, 1169251200000],
						[3474, 1199923200000],
						[2726, 1230508800000],
						[2390, 1261094400000],
						[686, 1291680000000],
						[1389, 1322265600000],
						[874, 1352937600000],
						[2901, 1383523200000],
						[2730, 1414195200000],
						[2381, 1444780800000],
						[1181, 1475366400000],
						[2397, 1505952000000],
						[698, 1536624000000],
						[1461, 1567209600000],
						[1450, 1597881600000],
						[3413, 1628467200000],
						[2714, 1659139200000],
						[2350, 1689724800000],
						[622, 1720310400000],
						[1373, 1750896000000],
						[2778, 1781568000000],
						[1748, 1812240000000],
						[1701, 1842825600000],
						[0, 1873411200000]
					],
					minDate: -2198707200000,
					maxDate: 1873411199999,
					toGregorian: function(hyear, hmonth, hday) {
						var days = hday - 1,
							gyear = hyear - 1318;
						if (gyear < 0 || gyear >= this._yearInfo.length) return null;
						var info = this._yearInfo[gyear],
							gdate = new Date(info[1]),
							monthLength = info[0];
						// Date's ticks in javascript are always from the GMT time,
						// but we are interested in the gregorian date in the same timezone,
						// not what the gregorian date was at GMT time, so we adjust for the offset.
						gdate.setMinutes(gdate.getMinutes() + gdate.getTimezoneOffset());
						for (var i = 0; i < hmonth; i++) {
							days += 29 + (monthLength & 1);
							monthLength = monthLength >> 1;
						}
						gdate.setDate(gdate.getDate() + days);
						return gdate;
					},
					fromGregorian: function(gdate) {
						// Date's ticks in javascript are always from the GMT time,
						// but we are interested in the hijri date in the same timezone,
						// not what the hijri date was at GMT time, so we adjust for the offset.
						var ticks = gdate - gdate.getTimezoneOffset() * 60000;
						if (ticks < this.minDate || ticks > this.maxDate) return null;
						var hyear = 0,
							hmonth = 1;
						// find the earliest gregorian date in the array that is greater than or equal to the given date
						while (ticks > this._yearInfo[++hyear][1]) { }
						if (ticks !== this._yearInfo[hyear][1]) {
							hyear--;
						}
						var info = this._yearInfo[hyear],
							// how many days has it been since the date we found in the array?
							// 86400000 = ticks per day
							days = Math.floor((ticks - info[1]) / 86400000),
							monthLength = info[0];
						hyear += 1318; // the Nth array entry corresponds to hijri year 1318+N
						// now increment day/month based on the total days, considering
						// how many days are in each month. We cannot run past the year
						// mark since we would have found a different array entry in that case.
						var daysInMonth = 29 + (monthLength & 1);
						while (days >= daysInMonth) {
							days -= daysInMonth;
							monthLength = monthLength >> 1;
							daysInMonth = 29 + (monthLength & 1);
							hmonth++;
						}
						// remaining days is less than is in one month, thus is the day of the month we landed on
						// hmonth-1 because in javascript months are zero based, stay consistent with that.
						return [hyear, hmonth - 1, days + 1];
					}
			};


Globalize.addCultureInfo( "ar-SA", "default", {
	name: "ar-SA",
	englishName: "Arabic (Saudi Arabia)",
	nativeName: " (  )",
	language: "ar",
	isRTL: true,
	numberFormat: {
		pattern: ["n-"],
		NaN: " ",
		negativeInfinity: "- ",
		positiveInfinity: "+ ",
		currency: {
			pattern: ["$n-","$ n"],
			symbol: "..?"
		}
	},
	calendars: {
		standard: {
			name: "UmAlQura",
			firstDay: 6,
			"/": "/",
			days: {
				names: ["","","","","","",""],
				namesAbbr: ["","","","","","",""],
				namesShort: ["","","","","","",""]
			},
			months: {
				names: ["","?","","","","","","","","","","",""],
				namesAbbr: ["","?","","","","","","","","","","",""]
			},
			AM: ["","",""],
			PM: ["","",""],
			eras: [{"name":" ","start":null,"offset":0}],
			twoDigitYearMax: 1451,
			patterns: {
				d: "dd/MM/yyyy",
				D: "dd/MMMM/yyyy",
				t: "hh:mm tt",
				T: "hh:mm:ss tt",
				f: "dd/MMMM/yyyy hh:mm tt",
				F: "dd/MMMM/yyyy hh:mm:ss tt",
				M: "dd MMMM"
			},
			convert: conversions
		},
		UmAlQura_TransliteratedEnglish: {
			name: "UmAlQura_TransliteratedEnglish",
			firstDay: 6,
			"/": "/",
			days: {
				names: ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],
				namesAbbr: ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],
				namesShort: ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]
			},
			months: {
				names: ["Muharram","Safar","Rabi Al-Awwal","Rabi Al-Akhar","Jumada Al-Awwal","Jumada Al-Akhirah","Rajab","Shaban","Ramadan","Shawwal","Dhul-Qadah","Dhul-Hijjah",""],
				namesAbbr: ["Muharram","Safar","Rabi Al-Awwal","Rabi Al-Akhar","Jumada Al-Awwal","Jumada Al-Akhirah","Rajab","Shaban","Ramadan","Shawwal","Dhul-Qadah","Dhul-Hijjah",""]
			},
			AM: ["","",""],
			PM: ["","",""],
			eras: [{"name":" ","start":null,"offset":0}],
			twoDigitYearMax: 1451,
			patterns: {
				d: "dd/MM/yyyy",
				D: "dd/MMMM/yyyy",
				t: "hh:mm tt",
				T: "hh:mm:ss tt",
				f: "dd/MMMM/yyyy hh:mm tt",
				F: "dd/MMMM/yyyy hh:mm:ss tt",
				M: "dd MMMM"
			},
			convert : conversions
		},
		Hijri: {
			name: "Hijri",
			firstDay: 6,
			"/": "/",
			days: {
				names: ["","","","","","",""],
				namesAbbr: ["","","","","","",""],
				namesShort: ["","","","","","",""]
			},
			months: {
				names: ["","?","","","","","","","","","","",""],
				namesAbbr: ["","?","","","","","","","","","","",""]
			},
			AM: ["","",""],
			PM: ["","",""],
			eras: [{"name":" ","start":null,"offset":0}],
			twoDigitYearMax: 1451,
			patterns: {
				d: "dd/MM/yyyy",
				D: "dd/MM/yyyy",
				t: "hh:mm tt",
				T: "hh:mm:ss tt",
				f: "dd/MM/yyyy hh:mm tt",
				F: "dd/MM/yyyy hh:mm:ss tt",
				M: "dd MMMM"
			},
			convert: conversions
		},
		Gregorian_MiddleEastFrench: {
			name: "Gregorian_MiddleEastFrench",
			firstDay: 6,
			"/": "/",
			days: {
				names: ["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],
				namesAbbr: ["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],
				namesShort: ["di","lu","ma","me","je","ve","sa"]
			},
			months: {
				names: ["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre",""],
				namesAbbr: ["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc.",""]
			},
			AM: ["","",""],
			PM: ["","",""],
			eras: [{"name":"ap. J.-C.","start":null,"offset":0}],
			patterns: {
				d: "MM/dd/yyyy",
				t: "hh:mm tt",
				T: "hh:mm:ss tt",
				f: "dddd, MMMM dd, yyyy hh:mm tt",
				F: "dddd, MMMM dd, yyyy hh:mm:ss tt",
				M: "dd MMMM"
			}
		},
		Gregorian_Arabic: {
			name: "Gregorian_Arabic",
			firstDay: 6,
			"/": "/",
			days: {
				names: ["","","","","","",""],
				namesAbbr: ["","","","","","",""],
				namesShort: ["","","","","","",""]
			},
			months: {
				names: ["","","","","","","","","","","","",""],
				namesAbbr: ["","","","","","","","","","","","",""]
			},
			AM: ["","",""],
			PM: ["","",""],
			eras: [{"name":"","start":null,"offset":0}],
			patterns: {
				d: "MM/dd/yyyy",
				t: "hh:mm tt",
				T: "hh:mm:ss tt",
				f: "dddd, MMMM dd, yyyy hh:mm tt",
				F: "dddd, MMMM dd, yyyy hh:mm:ss tt"
			}
		},
		Gregorian_Localized: {
			firstDay: 6,
			"/": "/",
			days: {
				names: ["","","","","","",""],
				namesAbbr: ["","","","","","",""],
				namesShort: ["","","","","","",""]
			},
			months: {
				names: ["","?","","","","","","","","","?","",""],
				namesAbbr: ["","?","","","","","","","","","?","",""]
			},
			AM: ["","",""],
			PM: ["","",""],
			patterns: {
				d: "dd/MM/yyyy",
				D: "dd MMMM, yyyy",
				t: "hh:mm tt",
				T: "hh:mm:ss tt",
				f: "dd MMMM, yyyy hh:mm tt",
				F: "dd MMMM, yyyy hh:mm:ss tt",
				M: "dd MMMM"
			}
		},
		Gregorian_TransliteratedFrench: {
			name: "Gregorian_TransliteratedFrench",
			firstDay: 6,
			"/": "/",
			days: {
				names: ["","","","","","",""],
				namesAbbr: ["","","","","","",""],
				namesShort: ["","","","","","",""]
			},
			months: {
				names: ["?","??","","?","","","","","","","?","",""],
				namesAbbr: ["?","??","","?","","","","","","","?","",""]
			},
			AM: ["","",""],
			PM: ["","",""],
			eras: [{"name":"","start":null,"offset":0}],
			patterns: {
				d: "MM/dd/yyyy",
				t: "hh:mm tt",
				T: "hh:mm:ss tt",
				f: "dddd, MMMM dd, yyyy hh:mm tt",
				F: "dddd, MMMM dd, yyyy hh:mm:ss tt"
			}
		}
	},
		messages :{"AdditionalHelp":" ?","AddNewTab":"?   ","Alerts":"","ApplyFilter":" ?","Approve":"?","Attachments":"?","Back":"","Basic":"","Between":"","Book":"","Cancel":"","Checked":" ?","ClearFilter":" ?","Close":"","CloseCancelChanges":"  ","CloseSaveChanges":"  ?","CloseTab":"  ","ColumnPersonalization":" ","Comments":"","Confirmation":"","Contains":" ","CreateTab":"   ","Cut":"","Delete":"?","DiscardUndo":"/","DisplayDropDownList":"  ","Displaying":": ","DocWord":"","DoesNotContain":"  ","DoesNotEndWith":"  ","DoesNotEqual":" ","DoesNotStartWith":"  ","Download":"","Duplicate":"","Edit":"","EitherSelectedorNotSelected":"    ","Email":" ","EndsWith":" ","EqualsStr":"","ExpandCollapse":"/","ExportFailed":"? ","ExportToExcel":"  Excel","FileInUse":"?   ","FileInUseDetail":"  ? ?       ? ?.","Filter":"?","FilterMenu":" ?","FilterOptions":" ?","FilterWithinResults":"?  ","First":"","FirstView":" ","Folder":"","ForgotPassword":"   ","Forward":"","GetMoreRows":"    ??","GreaterThan":" ","GreaterThanOrEquals":"   ","GridSettings":"  ","GroupSelection":" ","Help":"","HideColumn":"? ","IsEmpty":"?","IsNotEmpty":" ?","Last":"","LastView":" ","LaunchActivate":"/","LessThan":" ","LessThanOrEquals":"   ","Links":"","ListTabs":"   ","LoadingItem":"   ","Maintenance":"","Menu":"","New":"","Next":"","NextView":" ","No":"","NotChecked":"  ?","Notes":"","NotSelected":" ","Of":"  ","Ok":"?","Open":"?","Password":" ","Paste":"","Phone":"?","PleaseWait":" ","Previous":"","PreviousView":" ","Print":"","Queries":"","Redo":"","Refresh":"","Reject":"?","RememberMe":"      ","Reports":"","Reset":" ","Review":"","RunFilter":" ?","RunJob":" ","Save":"?","SaveBeforeClosing":"?  ","SavedFilters":" ? ?","SaveSubmit":"?/","ScreenDesign":" ","Search":"","SelectContents":" ","SelectDate":" ","SelectDeselect":"/  ","Selected":": ","ServerName":" ","Settings":"","ShowFilterRow":" ? ?","SignIn":" ","SortAscending":"? ","SortDescending":"? ","Spreadsheet":" ","StartsWith":" ","StatusIndicator":" ","Tasks":"","Today":"","Translate":"","UserID":"? ","Utilities":" ","Yes":"","Page":"?","Rows":"??","ShowingAll":" ","SessionNavigation":"  ","ListAllMenuItems":"   ","NoRecordsFound":"    ","SearchTree":" ","Clear":"","DrillDown":" ?","Required":"  ","Available":"?:","Add":"?","MoveDown":" ?","MoveUp":" ","Remove":"","LastYear":" ","NextMonth":" ","NextWeek":" ","NextYear":" ","OneMonthAgo":"  ","OneWeekAgo":"  ","SixMonthsAgo":"  ","Time":"","CannotBeSelected":"    ?.","ResetToDefault":"    ?","CloseOtherTabs":"   ","EmailValidation":"    ","UrlValidation":" URL ","EndofResults":" ","More":"...","RecordsPerPage":"  ?  ?","Maximize":"   ","Minimize":"?"}
	});


}( this ));
/*
* Globalize Culture bg-BG
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "bg-BG", "default", {
	name: "bg-BG",
	englishName: "Bulgarian (Bulgaria)",
	nativeName: "? (?)",
	language: "bg",
	numberFormat: {
		",": "",
		".": ",",
		negativeInfinity: "- ?",
		positiveInfinity: "+ ?",
		percent: {
			",": "",
			".": ","
		},
		currency: {
			pattern: ["-n $","n $"],
			",": "",
			".": ",",
			symbol: "."
		}
	},
	calendars: {
		standard: {
			"/": ".",
			firstDay: 1,
			days: {
				names: ["?","","","??","","","?"],
				namesAbbr: ["","","","?","","","?"],
				namesShort: ["","","","?","","","?"]
			},
			months: {
				names: ["?","","","","","","","?","?","","","",""],
				namesAbbr: ["?","","","","","","","","?","","","",""]
			},
			AM: null,
			PM: null,
			eras: [{"name":"?  ","start":null,"offset":0}],
			patterns: {
				d: "d.M.yyyy '.'",
				D: "dd MMMM yyyy '.'",
				t: "HH:mm '.'",
				T: "HH:mm:ss '.'",
				f: "dd MMMM yyyy '.' HH:mm '.'",
				F: "dd MMMM yyyy '.' HH:mm:ss '.'",
				M: "dd MMMM",
				Y: "MMMM yyyy '.'"
			}
		}
	},
	messages: {"AdditionalHelp":" ","AddNewTab":"  ","Alerts":"???","ApplyFilter":" ","Approve":"","Attachments":" ","Back":"?","Basic":"?","Between":"","Book":"","Cancel":"","Checked":"","ClearFilter":"? ","Close":"","CloseCancelChanges":"   ","CloseSaveChanges":"   ","CloseTab":" ","ColumnPersonalization":"?  ","Comments":"","Confirmation":"","Contains":"","CreateTab":"  ","Cut":"","Delete":"","DiscardUndo":"?/","DisplayDropDownList":"  ??","Displaying":"?: ","DocWord":"","DoesNotContain":"? ?","DoesNotEndWith":"?  ?","DoesNotEqual":"? ? ? ","DoesNotStartWith":"?  ?","Download":"","Duplicate":"","Edit":"","EitherSelectedorNotSelected":"  ,   ? ","Email":"","EndsWith":" ?","EqualsStr":"? ? ","ExpandCollapse":"/?","ExportFailed":"?? ?","ExportToExcel":"?  Excel","FileInUse":"?  ? ","FileInUseDetail":"   ,   ?       .","Filter":"","FilterMenu":"  ","FilterOptions":"  ","FilterWithinResults":"  ","First":"","FirstView":" ","Folder":"","ForgotPassword":"  ??","Forward":"?","GetMoreRows":"  ","GreaterThan":"-? ","GreaterThanOrEquals":"-?    ","GridSettings":"??  ","GroupSelection":" ","Help":"","HideColumn":" ","IsEmpty":" ","IsNotEmpty":"?  ","Last":"?","LastView":"? ","LaunchActivate":"/","LessThan":"- ","LessThanOrEquals":"-?    ","Links":"","ListTabs":"  ?? ? ","LoadingItem":"   ","Maintenance":"","Menu":"","New":"?","Next":"","NextView":" ","No":"?","NotChecked":"?  ","Notes":"","NotSelected":"?  ","Of":"  ","Ok":".","Open":"","Password":"","Paste":"?","Phone":"","PleaseWait":"?, ","Previous":"","PreviousView":" ","Print":"","Queries":"?","Redo":"","Refresh":"?","Reject":"","RememberMe":"    ","Reports":"","Reset":"?","Review":"","RunFilter":" ","RunJob":" ","Save":"?","SaveBeforeClosing":"   ","SavedFilters":"? ","SaveSubmit":"/","ScreenDesign":"?  ","Search":"?","SelectContents":" ?","SelectDate":" ","SelectDeselect":"/  ","Selected":": ","ServerName":"  ?","Settings":"??","ShowFilterRow":"   ","SignIn":"?","SortAscending":" ?","SortDescending":" ?","Spreadsheet":"","StartsWith":" ?","StatusIndicator":"  ???","Tasks":"","Today":"?","Translate":"","UserID":"  ","Utilities":" ","Yes":"","Page":"","Rows":"","ShowingAll":"  ?","SessionNavigation":"??  ???","ListAllMenuItems":"  ?? ?   ","NoRecordsFound":"??  ?","SearchTree":" ?  ?","Clear":"?","DrillDown":" ","Required":"   ","Available":"?:","Add":":","MoveDown":"? ","MoveUp":"? ","Remove":"","LastYear":" ","NextMonth":"? ?","NextWeek":" ?","NextYear":" ","OneMonthAgo":"  ?","OneWeekAgo":"  ?","SixMonthsAgo":" ? ?","Time":"?","CannotBeSelected":"      .","ResetToDefault":"?   ","CloseOtherTabs":" ? ","EmailValidation":"   ?","UrlValidation":"  URL ?","EndofResults":"? ","More":"...","RecordsPerPage":"?  ?","Maximize":"","Minimize":""}
});

}( this ));
/*
* Globalize Culture cs-CZ
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "cs-CZ", "default", {
	name: "cs-CZ",
	englishName: "Czech (Czech Republic)",
	nativeName: "?etina (eskrepublika)",
	language: "cs",
	numberFormat: {
		",": "",
		".": ",",
		NaN: "Nen ?slo",
		negativeInfinity: "-nekone?no",
		positiveInfinity: "+nekone?no",
		percent: {
			pattern: ["-n%","n%"],
			",": "",
			".": ","
		},
		currency: {
			pattern: ["-n $","n $"],
			",": "",
			".": ",",
			symbol: "K?"
		}
	},
	calendars: {
		standard: {
			"/": ".",
			firstDay: 1,
			days: {
				names: ["nedle","pondl","ter","steda","?tvrtek","ptek","sobota"],
				namesAbbr: ["ne","po","t","st","?t","p","so"],
				namesShort: ["ne","po","t","st","?t","p","so"]
			},
			months: {
				names: ["leden","nor","bezen","duben","kvten","?erven","?ervenec","srpen","z","jen","listopad","prosinec",""],
				namesAbbr: ["1","2","3","4","5","6","7","8","9","10","11","12",""]
			},
			monthsGenitive: {
				names: ["ledna","nora","bezna","dubna","kvtna","?ervna","?ervence","srpna","z","jna","listopadu","prosince",""],
				namesAbbr: ["1","2","3","4","5","6","7","8","9","10","11","12",""]
			},
			AM: ["dop.","dop.","DOP."],
			PM: ["odp.","odp.","ODP."],
			eras: [{"name":"n. l.","start":null,"offset":0}],
			patterns: {
				d: "d.M.yyyy",
				D: "d. MMMM yyyy",
				t: "H:mm",
				T: "H:mm:ss",
				f: "d. MMMM yyyy H:mm",
				F: "d. MMMM yyyy H:mm:ss",
				M: "dd MMMM",
				Y: "MMMM yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":"Dal npovda","AddNewTab":"Pidat novou kartu","Alerts":"Upozornn","ApplyFilter":"Pout filtr","Approve":"Schvlit","Attachments":"Plohy","Back":"Zpt","Basic":"Zkladn","Between":"Mezi","Book":"Kniha","Cancel":"Storno","Checked":"Zakrtnuto","ClearFilter":"Vymazat filtr","Close":"Zavt","CloseCancelChanges":"Zavt a zruit zmny","CloseSaveChanges":"Zavt a uloit zmny","CloseTab":"Zavt kartu","ColumnPersonalization":"Pizpsoben sloupce","Comments":"Komente","Confirmation":"Potvrzen","Contains":"Obsahuje","CreateTab":"Vytvoit novou kartu","Cut":"Vyjmout","Delete":"Odstranit","DiscardUndo":"Zruit/Vrtit zpt","DisplayDropDownList":"Zobrazit rozbalovac seznam","Displaying":"Zobrazeno: ","DocWord":"Dokument","DoesNotContain":"Neobsahuje","DoesNotEndWith":"Nekon? na","DoesNotEqual":"Nerovn se","DoesNotStartWith":"Neza?n na","Download":"Sthnout","Duplicate":"Duplikovat","Edit":"Upravit","EitherSelectedorNotSelected":"Bu?to vybrno nebo nevybrno","Email":"E-mail","EndsWith":"Kon? na","EqualsStr":"Rovn se","ExpandCollapse":"Rozbalit/Sbalit","ExportFailed":"Export se nezdail","ExportToExcel":"Export do Excelu","FileInUse":"Ur?en soubor se pouv","FileInUseDetail":"Zavete soubor v aplikaci, kter jej pouv, nebo zadejte jin nzev souboru.","Filter":"Filtr","FilterMenu":"Filtrovat nabdku","FilterOptions":"Filtrovat monosti","FilterWithinResults":"Filtrovat vsledky","First":"Prvn","FirstView":"Prvn zobrazen","Folder":"Sloka","ForgotPassword":"Zapomnli jste heslo?","Forward":"Vped","GetMoreRows":"Zskat dal dky","GreaterThan":"Vt ne","GreaterThanOrEquals":"Vt ne nebo rovno","GridSettings":"Nastaven mky","GroupSelection":"Skupinov vbr","Help":"Npovda","HideColumn":"Skrt sloupec","IsEmpty":"Je przdn","IsNotEmpty":"Nen przdn","Last":"Posledn","LastView":"Posledn zobrazen","LaunchActivate":"Spustit/Aktivovat","LessThan":"Men ne","LessThanOrEquals":"Men ne nebo rovno","Links":"Odkazy","ListTabs":"Vypsat vechny karty","LoadingItem":"Na?tn poloky ","Maintenance":"drba","Menu":"Nabdka","New":"Nov","Next":"Nsledujc","NextView":"Nsledujc zobrazen","No":"Ne","NotChecked":"Nezakrtnuto","Notes":"Poznmky","NotSelected":"Nevybrno","Of":" z ","Ok":"OK","Open":"Otevt","Password":"Heslo","Paste":"Vloit","Phone":"Telefon","PleaseWait":"Prosm ?ekejte","Previous":"Pedchoz","PreviousView":"Pedchoz zobrazen","Print":"Tisk","Queries":"Dotazy","Redo":"Opakovat","Refresh":"Aktualizovat","Reject":"Odmtnout","RememberMe":"Zapamatovat si m na tomto po?ta?i","Reports":"Sestavy","Reset":"Reset","Review":"Revidovat","RunFilter":"Spustit filtr","RunJob":"Spustit lohu","Save":"Uloit","SaveBeforeClosing":"Uloit ped zavenm","SavedFilters":"Uloen filtry","SaveSubmit":"Uloit/Odeslat","ScreenDesign":"Uspodn obrazovky","Search":"Vyhledat","SelectContents":"Vybrat obsah","SelectDate":"Vybrat datum","SelectDeselect":"Vybrat ve / Zruit vbr veho","Selected":"Vybrno: ","ServerName":"Nzev serveru","Settings":"Nastaven","ShowFilterRow":"Zobrazit dek filtru","SignIn":"Pihlsit se","SortAscending":"adit vzestupn","SortDescending":"adit sestupn","Spreadsheet":"Tabulka","StartsWith":"Za?n na","StatusIndicator":"Indiktor stavu","Tasks":"lohy","Today":"Dnes","Translate":"Peloit","UserID":"ID uivatele","Utilities":"Nstroje","Yes":"Ano","Page":"Strnka","Rows":"dky","ShowingAll":"Zobrazeno ve","SessionNavigation":"Navigace relac","ListAllMenuItems":"Vypsat vechny poloky nabdky","NoRecordsFound":"Nebyly nalezeny dn zznamy","SearchTree":"Prohledat strom","Clear":"Vymazat","DrillDown":"Prochzet hierarchii","Required":"Toto pole je vyadovno","Available":"K dispozici:","Add":"Pidat","MoveDown":"Pesunout dol","MoveUp":"Pesunout nahoru","Remove":"Odebrat","LastYear":"Minul rok","NextMonth":"Pt msc","NextWeek":"Pt tden","NextYear":"Pt rok","OneMonthAgo":"Ped mscem","OneWeekAgo":"Ped tdnem","SixMonthsAgo":"Ped pl rokem","Time":"as","CannotBeSelected":"Tento dek nelze vybrat.","ResetToDefault":"Obnovit vchoz uspodn","CloseOtherTabs":"Zavt ostatn karty","EmailValidation":"Zadejte platnou e-mailovou adresu","UrlValidation":"Zadejte platn URL","EndofResults":"Konec vsledk","More":"Dal...","RecordsPerPage":"Zznam na strnku","Maximize":"maximalizovat","Minimize":"minimalizovat"}
});

}( this ));
/*
* Globalize Culture da-DK
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined" &&
	typeof exports !== "undefined" &&
	typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "da-DK", "default", {
	name: "da-DK",
	englishName: "Danish (Denmark)",
	nativeName: "dansk (Danmark)",
	language: "da",
	numberFormat: {
		",": ".",
		".": ",",
		negativeInfinity: "-INF",
		positiveInfinity: "INF",
		percent: {
			",": ".",
			".": ","
		},
		currency: {
			pattern: ["$ -n","$ n"],
			",": ".",
			".": ",",
			symbol: "kr."
		}
	},
	calendars: {
		standard: {
			"/": "-",
			firstDay: 1,
			days: {
				names: ["sndag","mandag","tirsdag","onsdag","torsdag","fredag","lrdag"],
				namesAbbr: ["s","ma","ti","on","to","fr","l"],
				namesShort: ["s","ma","ti","on","to","fr","l"]
			},
			months: {
				names: ["januar","februar","marts","april","maj","juni","juli","august","september","oktober","november","december",""],
				namesAbbr: ["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec",""]
			},
			AM: null,
			PM: null,
			patterns: {
				d: "dd-MM-yyyy",
				D: "d. MMMM yyyy",
				t: "HH:mm",
				T: "HH:mm:ss",
				f: "d. MMMM yyyy HH:mm",
				F: "d. MMMM yyyy HH:mm:ss",
				M: "d. MMMM",
				Y: "MMMM yyyy"
			}
		}
	},
	// For localized strings
	messages: {"AdditionalHelp":"Yderligere hjlp","AddNewTab":"Tilfj ny fane","Alerts":"Advarsler","ApplyFilter":"Anvend filter","Approve":"Godkend","Attachments":"Vedhftede filer","Back":"Tilbage","Basic":"Grundlggende","Between":"Mellem","Book":"Bog","Cancel":"Annuller","Checked":"Kontrolleret","ClearFilter":"Ryd filter","Close":"Luk","CloseCancelChanges":"Luk og annuller ndringer","CloseSaveChanges":"Luk og gem ndringer","CloseTab":"Luk fanen","ColumnPersonalization":"Brugertilpasning af kolonne","Comments":"Kommentarer","Confirmation":"Bekrftelse","Contains":"Indeholder","CreateTab":"Opret en ny fane","Cut":"Klip","Delete":"Slet","DiscardUndo":"Kassr/Fortryd","DisplayDropDownList":"Vis rulleliste","Displaying":"Viser: ","DocWord":"Dokument","DoesNotContain":"Indeholder ikke","DoesNotEndWith":"Slutter ikke med","DoesNotEqual":"Ikke lig med","DoesNotStartWith":"Starter ikke med","Download":"Hent","Duplicate":"Dupliker","Edit":"Rediger","EitherSelectedorNotSelected":"Enten valgt eller ikke valgt","Email":"E-mail","EndsWith":"Slutter med","EqualsStr":"Lig med","ExpandCollapse":"Udvid/Skjul","ExportFailed":"Eksporten mislykkedes","ExportToExcel":"Eksporter til Excel","FileInUse":"Den angivne fil anvendes i jeblikket","FileInUseDetail":"Luk filen i det program, hvor den anvendes, eller angiv et andet filnavn.","Filter":"Filter","FilterMenu":"Menuen Filter","FilterOptions":"Filterindstillinger","FilterWithinResults":"Filtrer resultaterne","First":"Frste","FirstView":"Frste visning","Folder":"Mappe","ForgotPassword":"Har du glemt din adgangskode?","Forward":"Frem","GetMoreRows":"Hent flere rkker","GreaterThan":"Strre end","GreaterThanOrEquals":"Strre end eller lig med","GridSettings":"Gitterindstillinger","GroupSelection":"Valg af gruppe","Help":"Hjlp","HideColumn":"Skjul kolonne","IsEmpty":"Er tom","IsNotEmpty":"Er ikke tom","Last":"Sidste","LastView":"Sidste visning","LaunchActivate":"Start/Aktiver","LessThan":"Mindre end","LessThanOrEquals":"Mindre end eller lig med","Links":"Links","ListTabs":"Vis alle faner","LoadingItem":"Indlser element ","Maintenance":"Vedligeholdelse","Menu":"Menu","New":"Ny","Next":"Nste","NextView":"Nste visning","No":"Nej","NotChecked":"Ikke kontrolleret","Notes":"Noter","NotSelected":"Ikke valgt","Of":" af ","Ok":"OK","Open":"bn","Password":"Adgangskode","Paste":"St ind","Phone":"Telefon","PleaseWait":"Vent","Previous":"Forrige","PreviousView":"Forrige visning","Print":"Udskriv","Queries":"Foresprgsler","Redo":"Annuller fortryd","Refresh":"Opdater","Reject":"Afvis","RememberMe":"Husk mig p denne computer","Reports":"Rapporter","Reset":"Nulstil","Review":"Gennemg","RunFilter":"Kr filter","RunJob":"Kr job","Save":"Gem","SaveBeforeClosing":"Gem fr lukning","SavedFilters":"Gemte filtre","SaveSubmit":"Gem/Send","ScreenDesign":"Skrmdesign","Search":"Sg","SelectContents":"Vlg indhold","SelectDate":"Vlg en dato","SelectDeselect":"Vlg/Fravlg alt","Selected":"Valgt: ","ServerName":"Servernavn","Settings":"Indstillinger","ShowFilterRow":"Vis filterrkke","SignIn":"Log p","SortAscending":"Sorter stigende","SortDescending":"Sorter faldende","Spreadsheet":"Regneark","StartsWith":"Starter med","StatusIndicator":"Statusindikator","Tasks":"Opgaver","Today":"I dag","Translate":"Overst","UserID":"Bruger-id","Utilities":"Hjlpeprogrammer","Yes":"Ja","Page":"Side","Rows":"Rkker","ShowingAll":"Viser alt","SessionNavigation":"Sessionsnavigation","ListAllMenuItems":"Vis alle menupunkter","NoRecordsFound":"Der blev ikke fundet nogen poster","SearchTree":"Sg i tr","Clear":"Ryd","DrillDown":"Analyser ned","Required":"Dette felt er obligatorisk","Available":"Tilgngelig:","Add":"Tilfj","MoveDown":"Flyt ned","MoveUp":"Flyt op","Remove":"Fjern","LastYear":"Sidste r","NextMonth":"Nste mned","NextWeek":"Nste uge","NextYear":"Nste r","OneMonthAgo":"En mned siden","OneWeekAgo":"En uge siden","SixMonthsAgo":"Seks mneder siden","Time":"Tid","CannotBeSelected":"Denne rkke kan ikke vlges.","ResetToDefault":"Gendan standardlayout","CloseOtherTabs":"Luk andre faner","EmailValidation":"Indtast en gyldig e-mailadresse","UrlValidation":"Indtast en gyldig webadresse","EndofResults":"Slut p resultater","More":"Mere...","RecordsPerPage":"Poster pr. side","Maximize":"Maksimer","Minimize":"Minimer"}
});

}( this ));
/*
* Globalize Culture de-DE
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "de-DE", "default", {
	name: "de-DE",
	englishName: "German (Germany)",
	nativeName: "Deutsch (Deutschland)",
	language: "de",
	numberFormat: {
		",": ".",
		".": ",",
		NaN: "n. def.",
		negativeInfinity: "-unendlich",
		positiveInfinity: "+unendlich",
		percent: {
			pattern: ["-n%","n%"],
			",": ".",
			".": ","
		},
		currency: {
			pattern: ["-n $","n $"],
			",": ".",
			".": ",",
			symbol: ""
		}
	},
	calendars: {
		standard: {
			"/": ".",
			firstDay: 1,
			days: {
				names: ["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],
				namesAbbr: ["So","Mo","Di","Mi","Do","Fr","Sa"],
				namesShort: ["So","Mo","Di","Mi","Do","Fr","Sa"]
			},
			months: {
				names: ["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember",""],
				namesAbbr: ["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez",""]
			},
			AM: null,
			PM: null,
			eras: [{"name":"n. Chr.","start":null,"offset":0}],
			patterns: {
				d: "dd.MM.yyyy",
				D: "dddd, d. MMMM yyyy",
				t: "HH:mm",
				T: "HH:mm:ss",
				f: "dddd, d. MMMM yyyy HH:mm",
				F: "dddd, d. MMMM yyyy HH:mm:ss",
				M: "dd MMMM",
				Y: "MMMM yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":"Zustzliche Hilfe","AddNewTab":"Neues Register hinzufgen","Alerts":"Alarmmeldungen","ApplyFilter":"Filter anwenden","Approve":"Genehmigen","Attachments":"Anhnge","Back":"Zurck","Basic":"Einfach","Between":"Zwischen","Book":"Buch","Cancel":"Abbrechen","Checked":"Markiert","ClearFilter":"Filter lschen","Close":"Schlieen","CloseCancelChanges":"Schlieen und nderungen verwerfen","CloseSaveChanges":"Schlieen und nderungen speichern","CloseTab":"Register schlieen","ColumnPersonalization":"Spaltenpersonalisierung","Comments":"Anmerkungen","Confirmation":"Besttigung","Contains":"Enthlt","CreateTab":"Neues Register erstellen","Cut":"Ausschneiden","Delete":"Lschen","DiscardUndo":"Verwerfen/Rckgngig machen","DisplayDropDownList":"Dropdownliste anzeigen","Displaying":"Anzeige: ","DocWord":"Dokument","DoesNotContain":"Enthlt nicht","DoesNotEndWith":"Endet nicht mit","DoesNotEqual":"Ungleich","DoesNotStartWith":"Beginnt nicht mit","Download":"Herunterladen","Duplicate":"Kopieren","Edit":"Bearbeiten","EitherSelectedorNotSelected":"Ausgewhlt/Nicht ausgewhlt","Email":"E-Mail","EndsWith":"Endet mit","EqualsStr":"Gleich","ExpandCollapse":"Einblenden/Ausblenden","ExportFailed":"Fehler bei Export","ExportToExcel":"Export nach Excel","FileInUse":"Angegebene Datei wird verwendet","FileInUseDetail":"Schlieen Sie die Datei in der Anwendung, in der sie verwendet wird, oder geben Sie einen anderen Dateinamen ein.","Filter":"Filter","FilterMenu":"Filtermen","FilterOptions":"Filteroptionen","FilterWithinResults":"Ergebnisse filtern","First":"Erster Wert","FirstView":"Erste Ansicht","Folder":"Ordner","ForgotPassword":"Kennwort vergessen?","Forward":"Vorwrts","GetMoreRows":"Weitere Zeilen anzeigen","GreaterThan":"Grer als","GreaterThanOrEquals":"Grer als oder gleich","GridSettings":"Rastereinstellungen","GroupSelection":"Gruppenauswahl","Help":"Hilfe","HideColumn":"Spalte ausblenden","IsEmpty":"Ist leer","IsNotEmpty":"Ist nicht leer","Last":"Letzter Wert","LastView":"Letzte Ansicht","LaunchActivate":"Starten/Aktivieren","LessThan":"Kleiner als","LessThanOrEquals":"Kleiner als oder gleich","Links":"Verknpfungen","ListTabs":"Alle Register auflisten","LoadingItem":"Lade Objekt  ","Maintenance":"Verwaltung","Menu":"Men","New":"Neu","Next":"Weiter","NextView":"Nchste Ansicht","No":"Nein","NotChecked":"Nicht markiert","Notes":"Kommentare","NotSelected":"Nicht ausgewhlt","Of":" von ","Ok":"OK","Open":"ffnen","Password":"Kennwort","Paste":"Einfgen","Phone":"Telefon","PleaseWait":"Bitte warten","Previous":"Zurck","PreviousView":"Vorherige Ansicht","Print":"Drucken","Queries":"Abfragen","Redo":"Wiederherstellen","Refresh":"Aktualisieren","Reject":"Ablehnen","RememberMe":"Login auf diesem Computer speichern","Reports":"Berichte","Reset":"Zurcksetzen","Review":"berprfen","RunFilter":"Filter ausfhren","RunJob":"Job ausfhren","Save":"Speichern","SaveBeforeClosing":"Vor dem Schlieen speichern","SavedFilters":"Gespeicherte Filter","SaveSubmit":"Speichern/bermitteln","ScreenDesign":"Bildschirmgestaltung","Search":"Suchen","SelectContents":"Inhalt auswhlen","SelectDate":"Datum auswhlen","SelectDeselect":"Alle auswhlen/Auswahl fr alle aufheben","Selected":"Ausgewhlt: ","ServerName":"Server-Name","Settings":"Einstellungen","ShowFilterRow":"Filterzeile anzeigen","SignIn":"Anmelden","SortAscending":"Aufsteigend sortieren","SortDescending":"Absteigend sortieren","Spreadsheet":"Tabelle","StartsWith":"Beginnt mit","StatusIndicator":"Statusanzeige","Tasks":"Aufgaben","Today":"Heute","Translate":"bersetzen","UserID":"Benutzer-ID","Utilities":"Dienstprogramme","Yes":"Ja","Page":"Seite","Rows":"Zeilen","ShowingAll":"Alle anzeigen","SessionNavigation":"Sitzungsnavigation","ListAllMenuItems":"Alle Menoptionen auflisten","NoRecordsFound":"Keine Datenstze gefunden","SearchTree":"Hierarchie durchsuchen","Clear":"Lschen","DrillDown":"Drill-Down","Required":"Dieses Feld ist obligatorisch.","Available":"Verfgbar:","Add":"Hinzufgen","MoveDown":"Nach unten","MoveUp":"Nach oben","Remove":"Entfernen","LastYear":"Letztes Jahr","NextMonth":"Nchster Monat","NextWeek":"Nchste Woche","NextYear":"Nchstes Jahr","OneMonthAgo":"Vor einem Monat","OneWeekAgo":"Vor einer Woche","SixMonthsAgo":"Vor sechs Monaten","Time":"Zeit","CannotBeSelected":"Diese Zeile kann nicht ausgewhlt werden.","ResetToDefault":"Auf Standardlayout zurcksetzen","CloseOtherTabs":"Andere Registerkarten schlieen","EmailValidation":"Gltige E-Mail-Adresse eingeben","UrlValidation":"Gltige URL eingeben","EndofResults":"Ende der Ergebnisse","More":"Mehr...","RecordsPerPage":"Datenstze pro Seite","Maximize":"Maximieren","Minimize":"Minimieren","CloseAllTabs":"Alle Registerkarten schlieen","QuickDates":"Datumsoptionen","Finish":"Fertig stellen","SetTextColor":"Farbe fr Text festlegen","AttachmentRules":"Regeln fr Anhnge","AutoRefresh":"Automatisch aktualisieren","BarChart":"Balkendiagramm","CopyMail":"Kopieren und per E-Mail senden","CopyUrl":"URL kopieren","DistributeHorizontally":"Horizontal verteilen","ExpandAll":"Alle erweitern","Generate":"Generieren","GenerateScript":"Skript generieren","NoAttachments":"Keine Anhnge","PieChart":"Kreisdiagramm","QuickAccess":"Schnellzugriff","RestoreUser":"Benutzerdaten wiederherstellen","SaveConsolidate":"Mit lokaler Konsolidierung speichern","Screen Design":"Bildschirmgestaltung","SelectAll":"Alle auswhlen","SpellCheck":"Rechtschreibprfung","SubmitForApproval":"Zur Genehmigung absenden","TopDownSpread":"Top Down Spread","Timezone":"Zeitzone","Loading":"Laden...","NewNode":"Neuer Knoten"}
});

}( this ));
/*
* Globalize Culture en-AU
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "en-AU", "default", {
	name: "en-AU",
	englishName: "English (Australia)",
	nativeName: "English (Australia)",
	numberFormat: {
		currency: {
			pattern: ["-$n","$n"]
		}
	},
	calendars: {
		standard: {
			firstDay: 1,
			patterns: {
				d: "d/MM/yyyy",
				D: "dddd, d MMMM yyyy",
				f: "dddd, d MMMM yyyy h:mm tt",
				F: "dddd, d MMMM yyyy h:mm:ss tt",
				M: "dd MMMM",
				Y: "MMMM yyyy"
			}
		}
	}
});

}( this ));
/*
* Globalize Culture en-GB
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "en-GB", "default", {
	name: "en-GB",
	englishName: "English (United Kingdom)",
	nativeName: "English (United Kingdom)",
	numberFormat: {
		currency: {
			pattern: ["-$n","$n"],
			symbol: ""
		}
	},
	calendars: {
		standard: {
			firstDay: 1,
			patterns: {
				d: "dd/MM/yyyy",
				D: "dd MMMM yyyy",
				t: "HH:mm",
				T: "HH:mm:ss",
				f: "dd MMMM yyyy HH:mm",
				F: "dd MMMM yyyy HH:mm:ss",
				M: "dd MMMM",
				Y: "MMMM yyyy"
			}
		}
	}
});

}( this ));
/*
* Globalize Culture en-NZ
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "en-NZ", "default", {
	name: "en-NZ",
	englishName: "English (New Zealand)",
	nativeName: "English (New Zealand)",
	numberFormat: {
		currency: {
			pattern: ["-$n","$n"]
		}
	},
	calendars: {
		standard: {
			firstDay: 1,
			AM: ["a.m.","a.m.","A.M."],
			PM: ["p.m.","p.m.","P.M."],
			patterns: {
				d: "d/MM/yyyy",
				D: "dddd, d MMMM yyyy",
				f: "dddd, d MMMM yyyy h:mm tt",
				F: "dddd, d MMMM yyyy h:mm:ss tt",
				M: "dd MMMM",
				Y: "MMMM yyyy"
			}
		}
	}
});

}( this ));
/*
* Globalize Culture en-ZA
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "en-ZA", "default", {
	name: "en-ZA",
	englishName: "English (South Africa)",
	nativeName: "English (South Africa)",
	numberFormat: {
		",": "",
		percent: {
			pattern: ["-n%","n%"],
			",": ""
		},
		currency: {
			pattern: ["$-n","$ n"],
			",": "",
			".": ",",
			symbol: "R"
		}
	},
	calendars: {
		standard: {
			patterns: {
				d: "yyyy/MM/dd",
				D: "dd MMMM yyyy",
				t: "hh:mm tt",
				T: "hh:mm:ss tt",
				f: "dd MMMM yyyy hh:mm tt",
				F: "dd MMMM yyyy hh:mm:ss tt",
				M: "dd MMMM",
				Y: "MMMM yyyy"
			}
		}
	}
});

}( this ));
/*
* Globalize Culture es-ES
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "es-ES", "default", {
	name: "es-ES",
	englishName: "Spanish (Spain, International Sort)",
	nativeName: "Espaol (Espaa, alfabetizacin internacional)",
	language: "es",
	numberFormat: {
		",": ".",
		".": ",",
		NaN: "NeuN",
		negativeInfinity: "-Infinito",
		positiveInfinity: "Infinito",
		percent: {
			",": ".",
			".": ","
		},
		currency: {
			pattern: ["-n $","n $"],
			",": ".",
			".": ",",
			symbol: ""
		}
	},
	calendars: {
		standard: {
			firstDay: 1,
			days: {
				names: ["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],
				namesAbbr: ["dom","lun","mar","mi","jue","vie","sb"],
				namesShort: ["do","lu","ma","mi","ju","vi","s"]
			},
			months: {
				names: ["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],
				namesAbbr: ["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]
			},
			AM: null,
			PM: null,
			eras: [{"name":"d.C.","start":null,"offset":0}],
			patterns: {
				d: "dd/MM/yyyy",
				D: "dddd, dd' de 'MMMM' de 'yyyy",
				t: "H:mm",
				T: "H:mm:ss",
				f: "dddd, dd' de 'MMMM' de 'yyyy H:mm",
				F: "dddd, dd' de 'MMMM' de 'yyyy H:mm:ss",
				M: "dd MMMM",
				Y: "MMMM' de 'yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":"Ayuda adicional","AddNewTab":"Aadir nueva ficha","Alerts":"Alertas","ApplyFilter":"Aplicar filtro","Approve":"Aprobar","Attachments":"Datos adjuntos","Back":"Atrs","Basic":"Bsico","Between":"Entre","Book":"Libro","Cancel":"Cancelar","Checked":"Activado","ClearFilter":"Borrar filtro","Close":"Cerrar","CloseCancelChanges":"Cerrar y cancelar cambios","CloseSaveChanges":"Cerrar y guardar cambios","CloseTab":"Cerrar ficha","ColumnPersonalization":"Personalizacin de columnas","Comments":"Comentarios","Confirmation":"Confirmacin","Contains":"Contiene","CreateTab":"Crear nueva ficha","Cut":"Cortar","Delete":"Eliminar","DiscardUndo":"Descartar/Deshacer","DisplayDropDownList":"Mostrar lista desplegable","Displaying":"Mostrado: ","DocWord":"Documento","DoesNotContain":"No contiene","DoesNotEndWith":"No acaba en","DoesNotEqual":"No es igual a","DoesNotStartWith":"No empieza por","Download":"Descargar","Duplicate":"Duplicar","Edit":"Editar","EitherSelectedorNotSelected":"Tanto seleccionado como no seleccionado","Email":"Correo electrnico","EndsWith":"Acaba en","EqualsStr":"Es igual a","ExpandCollapse":"Expandir/Contraer","ExportFailed":"No se pudo exportar","ExportToExcel":"Exportar a Excel","FileInUse":"El archivo especificado est en uso","FileInUseDetail":"Cierre el archivo en la aplicacin donde est en uso o especifique un nombre de archivo diferente.","Filter":"Filtro","FilterMenu":"Men de filtro","FilterOptions":"Opciones de filtro","FilterWithinResults":"Filtrar en resultados","First":"Primero","FirstView":"Primera vista","Folder":"Carpeta","ForgotPassword":"Olvid la contrasea?","Forward":"Adelante","GetMoreRows":"Obtener ms filas","GreaterThan":"Mayor que","GreaterThanOrEquals":"Mayor que o igual","GridSettings":"Configuracin de cuadrcula","GroupSelection":"Seleccin de grupo","Help":"Ayuda","HideColumn":"Ocultar columna","IsEmpty":"Esta vaco","IsNotEmpty":"No est vaco","Last":"ltimo","LastView":"ltima vista","LaunchActivate":"Iniciar/Activar","LessThan":"Menos que","LessThanOrEquals":"Menos que o igual","Links":"Vnculos","ListTabs":"Listar todas las fichas","LoadingItem":"Cargando elemento ","Maintenance":"Mantenimiento","Menu":"Men","New":"Nuevo","Next":"Siguiente","NextView":"Siguiente vista","No":"No","NotChecked":"No activado","Notes":"Notas","NotSelected":"Sin seleccionar","Of":" de ","Ok":"Aceptar","Open":"Abrir","Password":"Contrasea","Paste":"Pegar","Phone":"Telfono","PleaseWait":"Espere","Previous":"Anterior","PreviousView":"Vista anterior","Print":"Imprimir","Queries":"Consultas","Redo":"Rehacer","Refresh":"Actualizar","Reject":"Rechazar","RememberMe":"Recordar mis datos en este equipo","Reports":"Informes","Reset":"Restablecer","Review":"Revisar","RunFilter":"Ejecutar filtro","RunJob":"Ejecutar trabajo","Save":"Guardar","SaveBeforeClosing":"Guardar antes de cerrar","SavedFilters":"Filtros guardados","SaveSubmit":"Guardar/Enviar","ScreenDesign":"Diseo de pantalla","Search":"Buscar","SelectContents":"Seleccionar contenidos","SelectDate":"Seleccionar una fecha","SelectDeselect":"Seleccionar todo/Anular seleccin","Selected":"Seleccionado: ","ServerName":"Nombre de servidor","Settings":"Configuracin","ShowFilterRow":"Mostrar fila de filtro","SignIn":"Iniciar sesin","SortAscending":"Orden ascendente","SortDescending":"Orden descendente","Spreadsheet":"Hoja de clculo","StartsWith":"Empieza por","StatusIndicator":"Indicador de estado","Tasks":"Tareas","Today":"Hoy","Translate":"Traducir","UserID":"Id. de usuario","Utilities":"Utilidades","Yes":"S","Page":"Pgina","Rows":"Filas","ShowingAll":"Mostrando todo","SessionNavigation":"Navegacin de sesin","ListAllMenuItems":"Listar todos los elementos de men","NoRecordsFound":"No se encontraron registros","SearchTree":"Buscar en rbol","Clear":"Borrar","DrillDown":"Aumentar detalles","Required":"Este campo es obligatorio","Available":"Disponible:","Add":"Aadir","MoveDown":"Bajar","MoveUp":"Subir","Remove":"Quitar","LastYear":"ltimo ao","NextMonth":"Siguiente mes","NextWeek":"Siguiente semana","NextYear":"Siguiente ao","OneMonthAgo":"Hace un mes","OneWeekAgo":"Hace una semana","SixMonthsAgo":"Hace seis meses","Time":"Hora","CannotBeSelected":"Esta fila no se puede seleccionar.","ResetToDefault":"Restablecer diseo predeterminado","CloseOtherTabs":"Cerrar otras fichas","EmailValidation":"Introduzca una direccin de correo electrnico vlida","UrlValidation":"Introduzca una direccin URL vlida","EndofResults":"Fin de resultados","More":"Ms...","RecordsPerPage":"Registros por pgina","Maximize":"Maximizar","Minimize":"Minimizar","CloseAllTabs":"Cerrar todas las fichas","QuickDates":"Fechas rpidas","Finish":"Finalizar","SetTextColor":"Establecer color de texto","AttachmentRules":"Reglas de adjuntos","AutoRefresh":"Actualizacin automtica","BarChart":"Grfico de barras","CopyMail":"Copiar y enviar por correo","CopyUrl":"Copiar URL","DistributeHorizontally":"Distribuir horizontalmente","ExpandAll":"Expandir todo","Generate":"Generar","GenerateScript":"Generar sec. comandos","NoAttachments":"Sin adjuntos","PieChart":"Grfico circular","QuickAccess":"Acceso rpido","RestoreUser":"Restaurar usuario","SaveConsolidate":"Guardar con consolidacin local","Screen Design":"Diseo de pantalla","SelectAll":"Seleccionar todo","SpellCheck":"Corregir ortografa","SubmitForApproval":"Enviar para aprobacin","TopDownSpread":"Top Down Spread","Timezone":"Zona horaria","Loading":"Cargando...","NewNode":"Nuevo nodo"}
});

}( this ));
/*
 * Globalize Culture es-US
 *
 * http://github.com/jquery/globalize
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * This file was generated by the Globalize Culture Generator
 * Translation: bugs found in this file need to be fixed in the generator
 */

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "es-US", "default", {
	name: "es-US",
	englishName: "Spanish (United States)",
	nativeName: "Espaol (Estados Unidos)",
	language: "es",
	numberFormat: {
		groupSizes: [3,0],
		NaN: "NeuN",
		negativeInfinity: "-Infinito",
		positiveInfinity: "Infinito",
		percent: {
			groupSizes: [3,0]
		}
	},
	calendars: {
		standard: {
			days: {
				names: ["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],
				namesAbbr: ["dom","lun","mar","mi","jue","vie","sb"],
				namesShort: ["do","lu","ma","mi","ju","vi","sa"]
			},
			months: {
				names: ["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre",""],
				namesAbbr: ["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic",""]
			},
			eras: [{"name":"d.C.","start":null,"offset":0}],
			patterns: {
				M: "dd' de 'MMMM",
				Y: "MMMM' de 'yyyy"
			}
		}
	}
});

}( this ));
/*
* Globalize Culture fi-FI
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "fi-FI", "default", {
	name: "fi-FI",
	englishName: "Finnish (Finland)",
	nativeName: "suomi (Suomi)",
	language: "fi",
	numberFormat: {
		",": "",
		".": ",",
		negativeInfinity: "-INF",
		positiveInfinity: "INF",
		percent: {
			",": "",
			".": ","
		},
		currency: {
			pattern: ["-n $","n $"],
			",": "",
			".": ",",
			symbol: ""
		}
	},
	calendars: {
		standard: {
			"/": ".",
			firstDay: 1,
			days: {
				names: ["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],
				namesAbbr: ["su","ma","ti","ke","to","pe","la"],
				namesShort: ["su","ma","ti","ke","to","pe","la"]
			},
			months: {
				names: ["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","keskuu","heinkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu",""],
				namesAbbr: ["tammi","helmi","maalis","huhti","touko","kes","hein","elo","syys","loka","marras","joulu",""]
			},
			AM: null,
			PM: null,
			patterns: {
				d: "d.M.yyyy",
				D: "d. MMMM'ta 'yyyy",
				t: "H:mm",
				T: "H:mm:ss",
				f: "d. MMMM'ta 'yyyy H:mm",
				F: "d. MMMM'ta 'yyyy H:mm:ss",
				M: "d. MMMM'ta'",
				Y: "MMMM yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":"Lisohjeita","AddNewTab":"Lis uusi vlilehti","Alerts":"Hlytykset","ApplyFilter":"Kyt suodatinta","Approve":"Hyvksy","Attachments":"Liitteet","Back":"Takaisin","Basic":"Perus","Between":"Vlill","Book":"Kirja","Cancel":"Peruuta","Checked":"Valittu","ClearFilter":"Tyhjenn suodatin","Close":"Sulje","CloseCancelChanges":"Sulje ja peruuta muutokset","CloseSaveChanges":"Sulje ja tallenna muutokset","CloseTab":"Sulje vlilehti","ColumnPersonalization":"Sarakkeen mukautus","Comments":"Kommentit","Confirmation":"Vahvistus","Contains":"Sislt","CreateTab":"Luo uusi vlilehti","Cut":"Leikkaa","Delete":"Poista","DiscardUndo":"Hylk/kumoa","DisplayDropDownList":"Nyt avattava luettelo","Displaying":"Nytetn: ","DocWord":"Asiakirja","DoesNotContain":"Ei sisll","DoesNotEndWith":"Ei pty merkkijonoon","DoesNotEqual":"Ei ole yht suuri kuin","DoesNotStartWith":"Ei ala merkkijonolla","Download":"Lataa","Duplicate":"Kaksoiskappale","Edit":"Muokkaa","EitherSelectedorNotSelected":"Joko valittu tai ei valittu","Email":"Shkposti","EndsWith":"Pttyy merkkijonoon","EqualsStr":"Yht suuri kuin","ExpandCollapse":"Laajenna/pienenn","ExportFailed":"Vienti eponnistui","ExportToExcel":"Vie Exceliin","FileInUse":"Mritetty tiedosto on kytss","FileInUseDetail":"Sulje tiedosto sovelluksesta, jossa se on kytss, tai mrit eri tiedostonimi.","Filter":"Suodata","FilterMenu":"Suodata-valikko","FilterOptions":"Suodatusasetukset","FilterWithinResults":"Suodata tuloksista","First":"Ensimminen","FirstView":"Ensimminen nkym","Folder":"Kansio","ForgotPassword":"Unohditko salasanasi?","Forward":"Eteenpin","GetMoreRows":"Hae lis rivej","GreaterThan":"Suurempi kuin","GreaterThanOrEquals":"Suurempi tai yht suuri kuin","GridSettings":"Ruudukon asetukset","GroupSelection":"Ryhmn valinta","Help":"Ohje","HideColumn":"Piilota sarake","IsEmpty":"On tyhj","IsNotEmpty":"Ei ole tyhj","Last":"Viimeinen","LastView":"Viimeinen nkym","LaunchActivate":"Kynnist/aktivoi","LessThan":"Pienempi kuin","LessThanOrEquals":"Pienempi tai yht suuri kuin","Links":"Linkit","ListTabs":"Luettele kaikki vlilehdet","LoadingItem":"Ladataan kohdetta ","Maintenance":"Yllpito","Menu":"Valikko","New":"Uusi","Next":"Seuraava","NextView":"Seuraava nkym","No":"Ei","NotChecked":"Ei tarkistettu","Notes":"Huomautukset","NotSelected":"Ei valittu","Of":" / ","Ok":"OK","Open":"Avaa","Password":"Salasana","Paste":"Liit","Phone":"Puhelin","PleaseWait":"Odota","Previous":"Edellinen","PreviousView":"Edellinen nkym","Print":"Tulosta","Queries":"Kyselyt","Redo":"Toista","Refresh":"Pivit","Reject":"Hylk","RememberMe":"Muista minut tll tietokoneella","Reports":"Raportit","Reset":"Nollaa","Review":"Tarkista","RunFilter":"Suorita suodatin","RunJob":"Suorita ty","Save":"Tallenna","SaveBeforeClosing":"Tallenna ennen sulkemista","SavedFilters":"Tallennetut suodattimet","SaveSubmit":"Tallenna/lhet","ScreenDesign":"Nytn rakenne","Search":"Haku","SelectContents":"Valitse sislt","SelectDate":"Valitse pivmr","SelectDeselect":"Valitse / poista kaikkien valinta","Selected":"Valittu: ","ServerName":"Palvelimen nimi","Settings":"Asetukset","ShowFilterRow":"Nyt suodatinrivi","SignIn":"Kirjaudu sisn","SortAscending":"Lajittele nousevassa jrjestyksess","SortDescending":"Lajittele laskevassa jrjestyksess","Spreadsheet":"Laskentataulukko","StartsWith":"Alkaa merkkijonolla","StatusIndicator":"Tilan ilmaisin","Tasks":"Tehtvt","Today":"Tnn","Translate":"Knn","UserID":"Kyttjtunnus","Utilities":"Apuohjelmat","Yes":"Kyll","Page":"Sivu","Rows":"Rivit","ShowingAll":"Nytetn kaikki","SessionNavigation":"Istunnon navigointi","ListAllMenuItems":"Luettelo kaikki valikkokohteet","NoRecordsFound":"Tietueita ei lytynyt","SearchTree":"Hae puusta","Clear":"Tyhjenn","DrillDown":"Poraudu","Required":"Tm kentt on pakollinen","Available":"Kytettviss:","Add":"Lis","MoveDown":"Siirry alaspin","MoveUp":"Siirry ylspin","Remove":"Poista","LastYear":"Viime vuosi","NextMonth":"Seuraava kuukausi","NextWeek":"Seuraava viikko","NextYear":"Seuraava vuosi","OneMonthAgo":"Kuukausi sitten","OneWeekAgo":"Viikko sitten","SixMonthsAgo":"Kuusi kuukautta sitten","Time":"Aika","CannotBeSelected":"Tt rivi ei voi valita.","ResetToDefault":"Palauta oletusasettelu","CloseOtherTabs":"Sulje muut vlilehdet","EmailValidation":"Anna kelvollinen shkpostiosoite","UrlValidation":"Anna kelvollinen URL-osoite","EndofResults":"Tulosten loppu","More":"Lis...","RecordsPerPage":"Tietueita sivulla","Maximize":"Maksimoida","Minimize":"Minimoida"}
});

}( this ));
/*
* Globalize Culture fr-FR
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "fr-FR", "default", {
	name: "fr-FR",
	englishName: "French (France)",
	nativeName: "franais (France)",
	language: "fr",
	numberFormat: {
		",": "",
		".": ",",
		NaN: "Non Numrique",
		negativeInfinity: "-Infini",
		positiveInfinity: "+Infini",
		percent: {
			",": "",
			".": ","
		},
		currency: {
			pattern: ["-n $","n $"],
			",": "",
			".": ",",
			symbol: ""
		}
	},
	calendars: {
		standard: {
			firstDay: 1,
			days: {
				names: ["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],
				namesAbbr: ["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],
				namesShort: ["di","lu","ma","me","je","ve","sa"]
			},
			months: {
				names: ["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre",""],
				namesAbbr: ["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc.",""]
			},
			AM: null,
			PM: null,
			eras: [{"name":"ap. J.-C.","start":null,"offset":0}],
			patterns: {
				d: "dd/MM/yyyy",
				D: "dddd d MMMM yyyy",
				t: "HH:mm",
				T: "HH:mm:ss",
				f: "dddd d MMMM yyyy HH:mm",
				F: "dddd d MMMM yyyy HH:mm:ss",
				M: "d MMMM",
				Y: "MMMM yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":"Aide supplmentaire","AddNewTab":"Ajouter un onglet","Alerts":"Alertes","ApplyFilter":"Appliquer filtre","Approve":"Approuver","Attachments":"Pices jointes","Back":"Prcdent","Basic":"De base","Between":"Entre","Book":"Livre","Cancel":"Annuler","Checked":"Coch(e)","ClearFilter":"Effacer filtre","Close":"Fermer","CloseCancelChanges":"Fermer et annuler les modifications","CloseSaveChanges":"Fermer et enregistrer les modifications","CloseTab":"Fermer l\u0027onglet","ColumnPersonalization":"Personnalisation de colonne","Comments":"Commentaires","Confirmation":"Confirmation","Contains":"Contient","CreateTab":"Crer un nouvel onglet","Cut":"Couper","Delete":"Supprimer","DiscardUndo":"Supprimer/annuler","DisplayDropDownList":"Afficher la liste droulante","Displaying":"Affichage : ","DocWord":"Document","DoesNotContain":"Ne contient pas","DoesNotEndWith":"Ne finit pas par","DoesNotEqual":"N\u0027est pas gal(e)","DoesNotStartWith":"Ne commence pas par","Download":"Dcharger","Duplicate":"Copier","Edit":"Modifier","EitherSelectedorNotSelected":"Slectionn ou Non slectionn","Email":"E-mail","EndsWith":"Finit par","EqualsStr":"Est gal(e)","ExpandCollapse":"Dvelopper/rduire","ExportFailed":"Echec de l\u0027exportation","ExportToExcel":"Exporter vers Excel","FileInUse":"Fichier spcifi est en cours d\u0027utilisation","FileInUseDetail":"Fermez le fichier dans l\u0027application qui l\u0027utilise ou spcifiez un nom de fichier diffrent.","Filter":"Filtrer","FilterMenu":"Menu Filtre","FilterOptions":"Options filtre","FilterWithinResults":"Filtrer les rsultats","First":"Premier","FirstView":"Premire vue","Folder":"Dossier","ForgotPassword":"Mot de passe oubli ?","Forward":"Faire suivre","GetMoreRows":"Lignes supplmentaires","GreaterThan":"Suprieur ","GreaterThanOrEquals":"Suprieur ou gal ","GridSettings":"Paramtres de grille","GroupSelection":"Slection de groupe","Help":"Aide","HideColumn":"Masquer la colonne","IsEmpty":"Est vide","IsNotEmpty":"N\u0027est pas vide","Last":"Dernier","LastView":"Dernire vue","LaunchActivate":"Lancer/activer","LessThan":"Infrieur ","LessThanOrEquals":"Infrieur ou gal ","Links":"Liens","ListTabs":"Lister tous les onglets","LoadingItem":"Chargement d\u0027article ","Maintenance":"Maintenance","Menu":"Menu","New":"Nouveau","Next":"Suivant","NextView":"Vue suivante","No":"Non","NotChecked":"Pas coch(e)","Notes":"Remarques","NotSelected":"Pas slectionn(e)","Of":" sur ","Ok":"OK","Open":"Ouvrir","Password":"Mot de passe","Paste":"Coller","Phone":"Tlphone","PleaseWait":"Patientez","Previous":"Prcdent","PreviousView":"Vue prcdente","Print":"Imprimer","Queries":"Demandes","Redo":"Rtablir","Refresh":"Actualiser","Reject":"Rejeter","RememberMe":"Se souvenir de moi  cet ordinateur","Reports":"Etats","Reset":"Rinitialiser","Review":"Rviser","RunFilter":"Excuter le filtre","RunJob":"Excuter la tche","Save":"Enregistrer","SaveBeforeClosing":"Enregistrer avant de fermer","SavedFilters":"Filtres enregistrs","SaveSubmit":"Enregistrer/soumettre","ScreenDesign":"Conception d\u0027cran","Search":"Rechercher","SelectContents":"Slectionner les contenus","SelectDate":"Slectionner une date","SelectDeselect":"Slectionner / dslectionner tout","Selected":"Slectionn(e) : ","ServerName":"Nom du serveur","Settings":"Paramtres","ShowFilterRow":"Afficher la ligne de filtre","SignIn":"Connexion","SortAscending":"Tri ascendant","SortDescending":"Tri descendant","Spreadsheet":"Tableur","StartsWith":"Commence par","StatusIndicator":"Indicateur d\u0027tat","Tasks":"Tches","Today":"Aujourd\u0027hui","Translate":"Traduire","UserID":"ID utilisateur","Utilities":"Outils","Yes":"Oui","Page":"Page","Rows":"Lignes","ShowingAll":"Afficher tout","SessionNavigation":"Navigation de session","ListAllMenuItems":"Lister tous les lments de menu","NoRecordsFound":"Enregistrements introuvables","SearchTree":"Rechercher arborescence","Clear":"Effacer","DrillDown":"Zoom avant","Required":"Champ requis","Available":"Disponible :","Add":"Ajouter","MoveDown":"Dplacer vers le bas","MoveUp":"Dplacer vers le haut","Remove":"Supprimer","LastYear":"Anne prcdente","NextMonth":"Mois suivant","NextWeek":"Semaine suivante","NextYear":"Anne suivante","OneMonthAgo":"Il y a 1 mois","OneWeekAgo":"Il y a une semaine","SixMonthsAgo":"Il y a 6 mois","Time":"Heure","CannotBeSelected":"Impossible de slectionner cette ligne.","ResetToDefault":"Rtablir  disposition par dfaut","CloseOtherTabs":"Fermer les autres onglets","EmailValidation":"Saisissez une adresse e-mail valide","UrlValidation":"Saisissez une URL valide","EndofResults":"Fin des rsultats","More":"Plus...","RecordsPerPage":"Enregistrements par page","Maximize":"Agrandir","Minimize":"Rduire","CloseAllTabs":"Fermer tous les onglets","QuickDates":"Dates rapides","Finish":"Terminer","SetTextColor":"Dfinir la couleur du texte","AttachmentRules":"Rgles de pices jointes","AutoRefresh":"Actualiser automatiquement","BarChart":"Graphique  barres","CopyMail":"Copier et envoyer","CopyUrl":"Copier Url","DistributeHorizontally":"Rpartir horizontalement","ExpandAll":"Dvelopper tout","Generate":"Gnrer","GenerateScript":"Gnrer un script","NoAttachments":"Aucune pice jointe","PieChart":"Graphique en secteurs","QuickAccess":"Accs rapide","RestoreUser":"Restaurer l\u0027utilisateur","SaveConsolidate":"Enregistrer avec consolidation locale","Screen Design":"Conception d\u0027cran","SelectAll":"Slectionner tout","SpellCheck":"Vrifier l\u0027orthographe","SubmitForApproval":"Soumettre pour approbation","TopDownSpread":"Diffuser de haut en bas","Timezone":"Fuseau horaire","Loading":"Chargement...","NewNode":"Nouveau noeud"}
});

}( this ));
/*
* Globalize Culture he-IL
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "he-IL", "default", {
	name: "he-IL",
	englishName: "Hebrew (Israel)",
	nativeName: " (?)",
	language: "he",
	isRTL: true,
	numberFormat: {
		NaN: "? ",
		negativeInfinity: "?",
		positiveInfinity: "?",
		percent: {
			pattern: ["-n%","n%"]
		},
		currency: {
			pattern: ["$-n","$ n"],
			symbol: ""
		}
	},
	calendars: {
		standard: {
			days: {
				names: ["??","?","?","?","?","?",""],
				namesAbbr: ["??","?","?","?","?","?",""],
				namesShort: ["?","","","","","",""]
			},
			months: {
				names: ["?","?","","?","?","","","?","","?","","",""],
				namesAbbr: ["","","","?","?","","","?","","?","","",""]
			},
			eras: [{"name":"","start":null,"offset":0}],
			patterns: {
				d: "dd/MM/yyyy",
				D: "dddd dd MMMM yyyy",
				t: "HH:mm",
				T: "HH:mm:ss",
				f: "dddd dd MMMM yyyy HH:mm",
				F: "dddd dd MMMM yyyy HH:mm:ss",
				M: "dd MMMM",
				Y: "MMMM yyyy"
			}
		},
		Hebrew: {
			name: "Hebrew",
			"/": " ",
			days: {
				names: ["??","?","?","?","?","?",""],
				namesAbbr: ["?","","","","","",""],
				namesShort: ["?","","","","","",""]
			},
			months: {
				names: ["","","","","","?","? ","","?","","","?","?"],
				namesAbbr: ["","","","","","?","? ","","?","","","?","?"]
			},
			eras: [{"name":"C.E.","start":null,"offset":0}],
			twoDigitYearMax: 5790,
			patterns: {
				d: "dd MMMM yyyy",
				D: "dddd dd MMMM yyyy",
				t: "HH:mm",
				T: "HH:mm:ss",
				f: "dddd dd MMMM yyyy HH:mm",
				F: "dddd dd MMMM yyyy HH:mm:ss",
				M: "dd MMMM",
				Y: "MMMM yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":" ","AddNewTab":"  ","Alerts":"?","ApplyFilter":" ","Approve":"?","Attachments":"? ?","Back":"?","Basic":"","Between":"","Book":"","Cancel":"","Checked":"","ClearFilter":" ","Close":"","CloseCancelChanges":"  ?","CloseSaveChanges":"  ?","CloseTab":" ","ColumnPersonalization":"? ?  ","Comments":"","Confirmation":"?","Contains":"","CreateTab":"  ","Cut":"","Delete":"","DiscardUndo":"","DisplayDropDownList":"  ","Displaying":": ","DocWord":"","DoesNotContain":"? ","DoesNotEndWith":"? ? -","DoesNotEqual":"?  -","DoesNotStartWith":"?  -","Download":"","Duplicate":"","Edit":"","EitherSelectedorNotSelected":" ? ? ","Email":"? ?","EndsWith":"? -","EqualsStr":" -","ExpandCollapse":"/","ExportFailed":"? ","ExportToExcel":"? -Excel","FileInUse":"  ? ","FileInUseDetail":" ?  ?  ? ?  ?  ?  ?.","Filter":"","FilterMenu":" ","FilterOptions":"? ","FilterWithinResults":"  ?","First":"?","FirstView":" ?","Folder":"","ForgotPassword":" ? ?","Forward":"","GetMoreRows":"  ","GreaterThan":" -","GreaterThanOrEquals":" ?  -","GridSettings":" ","GroupSelection":" ","Help":"","HideColumn":" ","IsEmpty":"","IsNotEmpty":"? ","Last":"?","LastView":" ?","LaunchActivate":"","LessThan":" -","LessThanOrEquals":" ?  -","Links":"?","ListTabs":" ?  ","LoadingItem":"  ","Maintenance":"","Menu":"","New":"","Next":"?","NextView":" ? ?","No":"?","NotChecked":"? ","Notes":"","NotSelected":"? ","Of":"  ","Ok":"?","Open":"","Password":"","Paste":"","Phone":"","PleaseWait":"?? ","Previous":"?","PreviousView":" ? ?","Print":"","Queries":"?","Redo":" ","Refresh":"","Reject":"","RememberMe":" ?  ","Reports":"","Reset":"?","Review":"","RunFilter":" ","RunJob":" ","Save":"","SaveBeforeClosing":"  ","SavedFilters":"? ","SaveSubmit":"/","ScreenDesign":" ","Search":"","SelectContents":" ","SelectDate":" ?","SelectDeselect":"  /   ","Selected":": ","ServerName":"? ","Settings":"","ShowFilterRow":"  ","SignIn":"","SortAscending":"  ","SortDescending":"  ","Spreadsheet":" ?","StartsWith":" -","StatusIndicator":" ","Tasks":"","Today":"?","Translate":"?","UserID":" ","Utilities":" ","Yes":"","Page":"","Rows":"","ShowingAll":" ? ","SessionNavigation":" ","ListAllMenuItems":" ?   ","NoRecordsFound":"? ? ","SearchTree":" ","Clear":"","DrillDown":"","Required":"  ","Available":":","Add":"","MoveDown":" ","MoveUp":" ","Remove":"","LastYear":" ","NextMonth":" ?","NextWeek":" ?","NextYear":" ?","OneMonthAgo":" ","OneWeekAgo":" ","SixMonthsAgo":"  ?","Time":"","CannotBeSelected":"?    .","ResetToDefault":"?   ","CloseOtherTabs":"  ?","EmailValidation":"  ? ? ","UrlValidation":"  URL ","EndofResults":" ?","More":"...","RecordsPerPage":" ","Maximize":"","Minimize":"?"}
});

}( this ));
/*
 * Globalize Culture hi-IN
 *
 * http://github.com/jquery/globalize
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * This file was generated by the Globalize Culture Generator
 * Translation: bugs found in this file need to be fixed in the generator
 */

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "hi-IN", "default", {
	name: "hi-IN",
	englishName: "Hindi (India)",
	nativeName: " ()",
	language: "hi",
	numberFormat: {
		groupSizes: [3,2],
		percent: {
			groupSizes: [3,2]
		},
		currency: {
			pattern: ["$ -n","$ n"],
			groupSizes: [3,2],
			symbol: "?"
		}
	},
	calendars: {
		standard: {
			"/": "-",
			firstDay: 1,
			days: {
				names: ["","","","?","??","??",""],
				namesAbbr: [".",".",".","?.","??.","??.","."],
				namesShort: ["","","","","","",""]
			},
			months: {
				names: ["","","?","?","","","?","?","?","?","?","?",""],
				namesAbbr: ["","","?","?","","","?","?","?","?","?","?",""]
			},
			AM: ["??","??","??"],
			PM: ["?","?","?"],
			patterns: {
				d: "dd-MM-yyyy",
				D: "dd MMMM yyyy",
				t: "HH:mm",
				T: "HH:mm:ss",
				f: "dd MMMM yyyy HH:mm",
				F: "dd MMMM yyyy HH:mm:ss",
				M: "dd MMMM"
			}
		}
	},
	messages: {"Add":"","AdditionalHelp":"? ","AddNewTab":"?  ","Alerts":"?","ApplyFilter":"?  ","Approve":"? ","AttachmentRules":"?? ","Attachments":"?","AutoRefresh":" ","Available":"? :","Back":"","BarChart":"? ?","Basic":"?","Between":" ","Book":"","Cancel":"? ","CannotBeSelected":" ?      .","Checked":"? ","Clear":"","ClearFilter":"? ","Close":" ","CloseAllTabs":"  ","CloseCancelChanges":"   ?  ? ","CloseOtherTabs":"?   ","CloseSaveChanges":"   ? ","CloseTab":"  ","ColumnPersonalization":"? ","Comments":"?","Company":"","Confirmation":"??","Contains":" ","CopyMail":"  ","CopyUrl":" ?","CreateTab":"?   ??","Cut":"","Delete":"","DiscardUndo":"","DisplayDropDownList":"?  ??","Displaying":"??   :","DistributeHorizontally":"?    ","DocWord":"?","DoesNotContain":"  ","DoesNotEndWith":"   ","DoesNotEqual":" ","DoesNotStartWith":"  ?   ","DontHaveAccount":"?   ?","Download":"","DrillDown":" ?","Duplicate":"?","Edit":" ","EitherSelectedorNotSelected":"     ","Email":"","EmailValidation":"? ?   ? ","EndofResults":"  ","EndsWith":"  ?  ","Environment":"","EqualsStr":"","ExpandAll":"  ? ","ExpandCollapse":"? / ?","ExportFailed":"?  ","ExportToExcel":"??  ? ","FileInUse":"??    ","FileInUseDetail":" ?          ?    ?? .","Filter":"?","FilterMenu":"? ","FilterOptions":"? ?","FilterWithinResults":"   ?","Finish":"","First":"","FirstView":"  ","Folder":"?","ForgotPassword":" ?  ??","Forward":"","Generate":"??","GenerateScript":"??? ??","GetMoreRows":" ?? ","GreaterThan":" ","GreaterThanOrEquals":"   ","GridSettings":"? ?","GroupSelection":" ","Help":"","HideColumn":"  ??","IsEmpty":" ","IsNotEmpty":"  ","Last":"","LastView":" ?","LastYear":" ?","LaunchActivate":"?","LessThan":" ","LessThanOrEquals":"   ","Links":"","ListAllMenuItems":"     ?","ListTabs":" ?   ?","Loading":"    ...","LoadingItem":"    ","Maintenance":"","Maximize":" ","Menu":"","Minimize":" ","More":" ...","MoveDown":"  ??","MoveUp":"  ??","New":"","NewNode":" ","Next":"","NextMonth":" ","NextView":" ?","NextWeek":" ?","NextYear":" ","No":"","NoAttachments":" ??","NoRecordsFound":" ?  ","NotChecked":"? ","Notes":"?","NotSelected":" ","Of":"","Ok":"?","OneMonthAgo":"?  ","OneWeekAgo":"? ? ","Open":"?","Page":"","Password":"?","Paste":"?","Phone":"","PieChart":" ?","PleaseWait":" ?? ","Previous":"","PreviousView":" ","Print":"?","Queries":"??","QuickAccess":"? ??","QuickDates":"? ","RecordsPerPage":"?  ","Redo":"  ","Refresh":" ","Reject":"?","RememberMe":"??  ??   ","RememberSettings":" ?   ","Remove":"","Reports":"?","Required":" ?  ? ","Reset":" ","ResetPassword":" ? ","ResetToDefault":"   ","RestoreUser":"?? ???","Review":"? ","Rows":"??","RunFilter":"? ","RunJob":" ","Save":"","SaveBeforeClosing":"   ","SaveConsolidate":"?    ","SavedFilters":" ? ?","SaveSubmit":" / ","Screen Design":"?? ","ScreenDesign":"?? ","Search":"","SearchTree":" ?","SelectAll":"   ","SelectContents":"?   ","SelectDate":"?    ","SelectDeselect":"    / ","Selected":":","SelectMonthYear":"  ?  ","ServerName":"? ","SessionNavigation":"? ","SetTextColor":"  ","Settings":"?","ShowFilterRow":"? ? ??","ShowingAll":"   ","SignIn":"  ","SignUpNow":"   ","SixMonthsAgo":"  ","SortAscending":" ?","SortDescending":" ","SpellCheck":"? ?","Spreadsheet":"??","StartsWith":"  ?  ","StatusIndicator":"? ","SubmitForApproval":"?  ?  ","Tasks":"?","Time":"","Timezone":" ??","Today":"","Translate":"? ","UrlValidation":"","UserID":" ","Utilities":"","Yes":""}
});

}( this ));
/*
* Globalize Culture hr-HR
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "hr-HR", "default", {
	name: "hr-HR",
	englishName: "Croatian (Croatia)",
	nativeName: "hrvatski (Hrvatska)",
	language: "hr",
	numberFormat: {
		pattern: ["- n"],
		",": ".",
		".": ",",
		percent: {
			pattern: ["-n%","n%"],
			",": ".",
			".": ","
		},
		currency: {
			pattern: ["-n $","n $"],
			",": ".",
			".": ",",
			symbol: "kn"
		}
	},
	calendars: {
		standard: {
			"/": ".",
			firstDay: 1,
			days: {
				names: ["nedjelja","ponedjeljak","utorak","srijeda","?etvrtak","petak","subota"],
				namesAbbr: ["ned","pon","uto","sri","?et","pet","sub"],
				namesShort: ["ne","po","ut","sr","?e","pe","su"]
			},
			months: {
				names: ["sije?anj","velja?a","oujak","travanj","svibanj","lipanj","srpanj","kolovoz","rujan","listopad","studeni","prosinac",""],
				namesAbbr: ["sij","vlj","ou","tra","svi","lip","srp","kol","ruj","lis","stu","pro",""]
			},
			monthsGenitive: {
				names: ["sije?nja","velja?e","oujka","travnja","svibnja","lipnja","srpnja","kolovoza","rujna","listopada","studenog","prosinca",""],
				namesAbbr: ["sij","vlj","ou","tra","svi","lip","srp","kol","ruj","lis","stu","pro",""]
			},
			AM: null,
			PM: null,
			patterns: {
				d: "d.M.yyyy.",
				D: "d. MMMM yyyy.",
				t: "H:mm",
				T: "H:mm:ss",
				f: "d. MMMM yyyy. H:mm",
				F: "d. MMMM yyyy. H:mm:ss",
				M: "d. MMMM"
			}
		}
	},
	messages: {"AdditionalHelp":"Dodatna pomo","AddNewTab":"Dodaj novu karticu","Alerts":"Upozorenja","ApplyFilter":"Primijeni filtar","Approve":"Odobri","Attachments":"Privici","Back":"Natrag","Basic":"Osnovno","Between":"Izmeu","Book":"Knjiga","Cancel":"Odustani","Checked":"Provjereno","ClearFilter":"O?isti filtar","Close":"Zatvori","CloseCancelChanges":"Zatvori i poniti promjene","CloseSaveChanges":"Zatvori i spremi promjene","CloseTab":"Zatvori karticu","ColumnPersonalization":"Personalizacija stupca","Comments":"Komentari","Confirmation":"Potvrda","Contains":"Sadri","CreateTab":"Stvori novu karticu","Cut":"Izrei","Delete":"Izbrii","DiscardUndo":"Odbaci/poniti","DisplayDropDownList":"Prikai padajui popis","Displaying":"Prikazivanje: ","DocWord":"Dokument","DoesNotContain":"Ne sadri","DoesNotEndWith":"Ne zavrava sa","DoesNotEqual":"Nije jednako","DoesNotStartWith":"Ne zapo?inje sa","Download":"Preuzmi","Duplicate":"Dupliciraj","Edit":"Uredi","EitherSelectedorNotSelected":"Odabrano ili nije odabrano","Email":"E-pota","EndsWith":"Zavrava sa","EqualsStr":"Jednako je","ExpandCollapse":"Proiri/sami","ExportFailed":"Izvoz nije uspio","ExportToExcel":"Izvezi u Excel","FileInUse":"Navedena je datoteka u upotrebi","FileInUseDetail":"Zatvorite datoteku u aplikaciji u kojoj se upotrebljava ili odredite drugi naziv datoteke.","Filter":"Filtar","FilterMenu":"Izbornik filtra","FilterOptions":"Mogunosti filtra","FilterWithinResults":"Filtriraj unutar rezultata","First":"Prvo","FirstView":"Prvi prikaz","Folder":"Mapa","ForgotPassword":"Zaboravili ste lozinku?","Forward":"Proslijedi","GetMoreRows":"Stvori vie redova","GreaterThan":"Vee od","GreaterThanOrEquals":"Vee od ili jednako","GridSettings":"Postavke reetke","GroupSelection":"Odabir grupe","Help":"Pomo","HideColumn":"Sakrij stupac","IsEmpty":"Je prazno","IsNotEmpty":"Nije prazno","Last":"Posljednje","LastView":"Posljednji prikaz","LaunchActivate":"Pokreni/aktiviraj","LessThan":"Manje od","LessThanOrEquals":"Manje od ili jednako","Links":"Veze","ListTabs":"Popis svih kartica","LoadingItem":"U?itavanje stavke ","Maintenance":"Odravanje","Menu":"Izbornik","New":"Novo","Next":"Sljedee","NextView":"Sljedei prikaz","No":"Ne","NotChecked":"Nije provjereno","Notes":"Biljeke","NotSelected":"Nije odabrano","Of":" od ","Ok":"U redu","Open":"Otvori","Password":"Lozinka","Paste":"Zalijepi","Phone":"Telefon","PleaseWait":"Pri?ekajte","Previous":"Prethodno","PreviousView":"Prethodni prikaz","Print":"Ispii","Queries":"Upiti","Redo":"Ponovi","Refresh":"Osvjei","Reject":"Odbij","RememberMe":"Zapamti me na ovom ra?unalu","Reports":"Izvjea","Reset":"Vrati izvorno","Review":"Za pregled","RunFilter":"Izvedi filtar","RunJob":"Izvedi zadatak","Save":"Spremi","SaveBeforeClosing":"Spremi prije zatvaranja","SavedFilters":"Spremljeni filtri","SaveSubmit":"Spremi/poalji","ScreenDesign":"Izgled zaslona","Search":"Trai","SelectContents":"Odaberi sadraj","SelectDate":"Odaberi datum","SelectDeselect":"Odaberi sve/poniti odabir svega","Selected":"Odabrano: ","ServerName":"Naziv posluitelja","Settings":"Postavke","ShowFilterRow":"Prikai redak filtra","SignIn":"Prijavi se","SortAscending":"Sortiraj uzlazno","SortDescending":"Sortiraj silazno","Spreadsheet":"Prora?unska tablica","StartsWith":"Zapo?inje sa","StatusIndicator":"Pokazatelj statusa","Tasks":"Zadaci","Today":"Danas","Translate":"Prevedi","UserID":"Korisni?ki ID","Utilities":"Usluni programi","Yes":"Da","Page":"Stranica","Rows":"Redovi","ShowingAll":"Prikai sve","SessionNavigation":"Navigacija sesije","ListAllMenuItems":"Popis svih stavki izbornika","NoRecordsFound":"Nisu pronaeni zapisi","SearchTree":"Stablo pretraivanja","Clear":"O?isti","DrillDown":"Pretrai kroz razine nanie","Required":"Ovo je polje obavezno","Available":"Dostupno:","Add":"Dodaj","MoveDown":"Premjesti dolje","MoveUp":"Premjesti gore","Remove":"Ukloni","LastYear":"Prole godine","NextMonth":"Sljedei mjesec","NextWeek":"Sljedei tjedan","NextYear":"Sljedee godine","OneMonthAgo":"Prije mjesec dana","OneWeekAgo":"Prije tjedan dana","SixMonthsAgo":"Prije est mjeseci","Time":"Vrijeme","CannotBeSelected":"Ovaj red nije mogue odabrati.","ResetToDefault":"Vrati na zadani izgled","CloseOtherTabs":"Zatvori ostale kartice","EmailValidation":"Unesite valjanu adresu e-pote","UrlValidation":"Unesite valjani URL","EndofResults":"Kraj rezultata","More":"Vie...","RecordsPerPage":"Zapisi po stranici","Maximize":"Poveali","Minimize":"Umanjiti"}
});

}( this ));
/*
* Globalize Culture hu-HU
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "hu-HU", "default", {
	name: "hu-HU",
	englishName: "Hungarian (Hungary)",
	nativeName: "magyar (Magyarorszg)",
	language: "hu",
	numberFormat: {
		",": "",
		".": ",",
		NaN: "nem szm",
		negativeInfinity: "negatv vgtelen",
		positiveInfinity: "vgtelen",
		percent: {
			",": "",
			".": ","
		},
		currency: {
			pattern: ["-n $","n $"],
			",": "",
			".": ",",
			symbol: "Ft"
		}
	},
	calendars: {
		standard: {
			"/": ".",
			firstDay: 1,
			days: {
				names: ["vasrnap","htf","kedd","szerda","cstrtk","pntek","szombat"],
				namesAbbr: ["V","H","K","Sze","Cs","P","Szo"],
				namesShort: ["V","H","K","Sze","Cs","P","Szo"]
			},
			months: {
				names: ["janur","februr","mrcius","prilis","mjus","jnius","jlius","augusztus","szeptember","oktber","november","december",""],
				namesAbbr: ["jan.","febr.","mrc.","pr.","mj.","jn.","jl.","aug.","szept.","okt.","nov.","dec.",""]
			},
			AM: ["de.","de.","DE."],
			PM: ["du.","du.","DU."],
			eras: [{"name":"i.sz.","start":null,"offset":0}],
			patterns: {
				d: "yyyy.MM.dd.",
				D: "yyyy. MMMM d.",
				t: "H:mm",
				T: "H:mm:ss",
				f: "yyyy. MMMM d. H:mm",
				F: "yyyy. MMMM d. H:mm:ss",
				M: "MMMM d.",
				Y: "yyyy. MMMM"
			}
		}
	},
	messages: {"AdditionalHelp":"Tovbbi sg","AddNewTab":"j fl felvtele","Alerts":"Figyelmeztetsek","ApplyFilter":"Szr alkalmazsa","Approve":"Jvhagys","Attachments":"Csatolmnyok","Back":"Vissza","Basic":"Alapvet","Between":"Kztt","Book":"Knyv","Cancel":"Mgsem","Checked":"Bejellve","ClearFilter":"Szr trlse","Close":"Bezrs","CloseCancelChanges":"Bezrs s mdostsok elvetse","CloseSaveChanges":"Bezrs s mdostsok mentse","CloseTab":"Fl bezrsa","ColumnPersonalization":"Oszlop testreszabsa","Comments":"Megjegyzsek","Confirmation":"Megersts","Contains":"Tartalmazza","CreateTab":"j fl ltrehozsa","Cut":"Kivgs","Delete":"Trls","DiscardUndo":"Elvets/Visszavons","DisplayDropDownList":"Legrdl lista megjelentse","Displaying":"Megjelentve: ","DocWord":"Dokumentum","DoesNotContain":"Nem tartalmazza","DoesNotEndWith":"Nem vge","DoesNotEqual":"Nem egyenl","DoesNotStartWith":"Nem kezdete","Download":"Letlts","Duplicate":"Dupliktum","Edit":"Szerkeszts","EitherSelectedorNotSelected":"Kivlasztott vagy nem kivlasztott","Email":"E-mail","EndsWith":"Vge","EqualsStr":"Egyenl","ExpandCollapse":"Kibonts/sszecsuks","ExportFailed":"Exportls sikertelen","ExportToExcel":"Exportls Excelbe","FileInUse":"A megadott fjl hasznlatban van","FileInUseDetail":"Zrja be az alkalmazst, amely hasznlja, vagy adjon meg msik fjlnevet.","Filter":"Szr","FilterMenu":"Szr men","FilterOptions":"Szr belltsok","FilterWithinResults":"Tallatok szrse","First":"Els","FirstView":"Els nzet","Folder":"Mappa","ForgotPassword":"Elfelejtette a jelszavt?","Forward":"Tovbbts","GetMoreRows":"Tovbbi sorok behvsa","GreaterThan":"Nagyobb, mint","GreaterThanOrEquals":"Nagyobb, vagy egyenl","GridSettings":"Rcsbelltsok","GroupSelection":"Csoport kivlasztsa","Help":"Sg","HideColumn":"Oszlop elrejtse","IsEmpty":"res","IsNotEmpty":"Nem res","Last":"Utols","LastView":"Utols nzet","LaunchActivate":"Elindts/Aktivls","LessThan":"Kisebb, mint","LessThanOrEquals":"Kisebb, vagy egyenl","Links":"Hivatkozsok","ListTabs":"Minden fl listzsa","LoadingItem":"Elem betltse ","Maintenance":"Karbantarts","Menu":"Men","New":"j","Next":"Kvetkez","NextView":"Kvetkez nzet","No":"Nem","NotChecked":"Nincs bejellve","Notes":"Jegyzetek","NotSelected":"Nem kivlasztott","Of":" / ","Ok":"OK","Open":"Megnyits","Password":"Jelsz","Paste":"Beszrs","Phone":"Telefon","PleaseWait":"Krjk, vrjon.","Previous":"Elz","PreviousView":"Elz nzet","Print":"Nyomtats","Queries":"Lekrdezsek","Redo":"Mgis","Refresh":"Frissts","Reject":"Elutasts","RememberMe":"Emlkezzen rm ezen a szmtgpen","Reports":"Jelentsek","Reset":"Visszallts","Review":"?ttekints","RunFilter":"Szr futtatsa","RunJob":"Feladat futtatsa","Save":"Ments","SaveBeforeClosing":"Ments s bezrs","SavedFilters":"Mentett szrk","SaveSubmit":"Ments/Beads Ments/Elklds","ScreenDesign":"Kpernyterv","Search":"Keress","SelectContents":"Tartalom kivlasztsa","SelectDate":"Dtum kivlasztsa","SelectDeselect":"Mindet kivlasztja / Minden kivlaszts megszntetse","Selected":"Kivlasztva: ","ServerName":"Kiszolgl neve","Settings":"Belltsok","ShowFilterRow":"Szrsor mutatsa","SignIn":"Bejelentkezs","SortAscending":"Rendezs nvekv sorrendben","SortDescending":"Rendezs cskken sorrendben","Spreadsheet":"Tblzatkezel","StartsWith":"Kezdete","StatusIndicator":"?llapotjelz","Tasks":"Feladatok","Today":"Ma","Translate":"Fordts","UserID":"Felhasznli azonost","Utilities":"Segdprogramok","Yes":"Igen","Page":"Oldal","Rows":"Sorok","ShowingAll":"Mindet mutatja","SessionNavigation":"Munkamenet navigci","ListAllMenuItems":"Minden menelem listzsa","NoRecordsFound":"Nem tallhat rekord","SearchTree":"Fa keresse","Clear":"Trls","DrillDown":"Lefrs","Required":"Ez egy ktelez mez","Available":"Elrhet:","Add":"Hozzads","MoveDown":"Mozgats lefel","MoveUp":"Mozgats felfel","Remove":"Eltvolts","LastYear":"Elmlt v","NextMonth":"Kvetkez hnap","NextWeek":"Kvetkez ht","NextYear":"Kvetkez v","OneMonthAgo":"Egy hnappal ezeltt","OneWeekAgo":"Egy httel ezeltt","SixMonthsAgo":"Hat hnappal ezeltt","Time":"Id","CannotBeSelected":"Ezt a sort nem lehet kivlasztani.","ResetToDefault":"Visszallts alaprtelmezett elrendezsre","CloseOtherTabs":"Tbbi fl bezrsa","EmailValidation":"Adjon meg rvnyes e-mail cmet","UrlValidation":"Adjon meg rvnyes URL-t","EndofResults":"Eredmnyek vge","More":"Tovbb...","RecordsPerPage":"Rekord oldalanknt","Maximize":"Maximalizlja","Minimize":"Kisebb"}
});

}( this ));
/*
* Globalize Culture id-ID
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "id-ID", "default", {
	name: "id-ID",
	englishName: "Indonesian (Indonesia)",
	nativeName: "Bahasa Indonesia (Indonesia)",
	language: "id",
	numberFormat: {
		",": ".",
		".": ",",
		percent: {
			",": ".",
			".": ","
		},
		currency: {
			decimals: 0,
			",": ".",
			".": ",",
			symbol: "Rp"
		}
	},
	calendars: {
		standard: {
			firstDay: 1,
			days: {
				names: ["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],
				namesAbbr: ["Minggu","Sen","Sel","Rabu","Kamis","Jumat","Sabtu"],
				namesShort: ["M","S","S","R","K","J","S"]
			},
			months: {
				names: ["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","Nopember","Desember",""],
				namesAbbr: ["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agust","Sep","Okt","Nop","Des",""]
			},
			AM: null,
			PM: null,
			patterns: {
				d: "dd/MM/yyyy",
				D: "dd MMMM yyyy",
				t: "H:mm",
				T: "H:mm:ss",
				f: "dd MMMM yyyy H:mm",
				F: "dd MMMM yyyy H:mm:ss",
				M: "dd MMMM",
				Y: "MMMM yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":"Bantuan Tambahan","AddNewTab":"Tambahkan Tab Baru","Alerts":"Peringatan","ApplyFilter":"Terapkan Filter","Approve":"Setuju","Attachments":"Lampiran","Back":"Kembali","Basic":"Dasar","Between":"Antara","Book":"Buku","Cancel":"Batalkan","Checked":"Diperiksa","ClearFilter":"Bersihkan Filter","Close":"Tutup","CloseCancelChanges":"Tutup dan Batalkan Perubahan","CloseSaveChanges":"Tutup dan Simpan Perubahan","CloseTab":"Tutup Tab","ColumnPersonalization":"Personalisasi Kolom","Comments":"Komentar","Confirmation":"Konfirmasi","Contains":"Berisi","CreateTab":"Buat Tab baru","Cut":"Potong","Delete":"Hapus","DiscardUndo":"Batalkan/Kembalikan","DisplayDropDownList":"Tampilkan daftar Dropdown","Displaying":"Sedang menampilkan: ","DocWord":"Dokumen","DoesNotContain":"Tidak Berisi","DoesNotEndWith":"Tidak Berakhir Dengan","DoesNotEqual":"Tidak Sama Dengan","DoesNotStartWith":"Tidak Mulai Dengan","Download":"Unduh","Duplicate":"Duplikat","Edit":"Edit","EitherSelectedorNotSelected":"Salah Satu Dipilih atau Tidak Dipilih","Email":"Email","EndsWith":"Berakhir Dengan","EqualsStr":"Sama dengan","ExpandCollapse":"Luaskan/Ciutkan","ExportFailed":"Ekspor Gagal","ExportToExcel":"Ekspor ke Excel","FileInUse":"File yang diminta sedang Digunakan","FileInUseDetail":"Tutup file pada aplikasi yang menggunakan file tersebut atau tentukan nama file yang berbeda.","Filter":"Filter","FilterMenu":"Menu Filter","FilterOptions":"Opsi Filter","FilterWithinResults":"Filter Pada Hasil","First":"Pertama","FirstView":"Tampilan Pertama","Folder":"Folder","ForgotPassword":"Lupa Kata Sandi?","Forward":"Teruskan","GetMoreRows":"Dapatkan Baris Lagi","GreaterThan":"Lebih Besar Dari","GreaterThanOrEquals":"Lebih Besar Dari atau Sama Dengan","GridSettings":"Pengaturan Grid","GroupSelection":"Pemilihan Grup","Help":"Bantuan","HideColumn":"Sembunyikan Kolom","IsEmpty":"Kosong","IsNotEmpty":"Tidak Kosong","Last":"Terakhir","LastView":"Tampilan Terakhir","LaunchActivate":"Luncurkan/Aktifkan","LessThan":"Kurang Dari","LessThanOrEquals":"Kurang Dari atau Sama Dengan","Links":"Tautan","ListTabs":"Daftar semua Tab","LoadingItem":"Memuat item ","Maintenance":"Pemeliharaan","Menu":"Menu","New":"Baru","Next":"Berikutnya","NextView":"Tampilan Selanjutnya","No":"Tidak","NotChecked":"Tidak Diperiksa","Notes":"Catatan","NotSelected":"Tidak Dipilih","Of":" dari ","Ok":"OKE","Open":"Buka","Password":"Kata Sandi","Paste":"Tempel","Phone":"Telepon","PleaseWait":"Mohon Tunggu","Previous":"Sebelumnya","PreviousView":"Tampilan Sebelumnya","Print":"Cetak","Queries":"Kueri","Redo":"Lakukan lagi","Refresh":"Segarkan","Reject":"Tolak","RememberMe":"Ingat saya pada komputer ini","Reports":"Laporan","Reset":"Reset","Review":"Kaji Ulang","RunFilter":"Jalankan Filter","RunJob":"Jalankan Pekerjaan","Save":"Simpan","SaveBeforeClosing":"Simpan Sebelum Menutup","SavedFilters":"Filter Tersimpan","SaveSubmit":"Simpan/Serahkan","ScreenDesign":"Desain Layar","Search":"Cari","SelectContents":"Pilih Konten","SelectDate":"Pilih Tanggal","SelectDeselect":"Pilih / Batal Pilih Semua","Selected":"Dipilih: ","ServerName":"Nama Server","Settings":"Pengaturan","ShowFilterRow":"Tampilkan Baris Filter","SignIn":"Masuk","SortAscending":"Sortir Naik","SortDescending":"Sortir Turun","Spreadsheet":"Lembar matriks","StartsWith":"Mulai Dengan","StatusIndicator":"Indikator Status","Tasks":"Tugas","Today":"Hari Ini","Translate":"Terjemahkan","UserID":"ID Pengguna","Utilities":"Utilitas","Yes":"Ya","Page":"Halaman","Rows":"Baris","ShowingAll":"Menampilkan Semua","SessionNavigation":"Navigasi Sesi","ListAllMenuItems":"Daftar Semua Item Menu","NoRecordsFound":"Rekaman Tidak Ditemukan","SearchTree":"Pohon Pencarian","Clear":"Bersihkan","DrillDown":"Drill Turun","Required":"Bidang ini harus diisi","Available":"Tersedia:","Add":"Tambahkan","MoveDown":"Geser ke Bawah","MoveUp":"Geser ke Atas","Remove":"Buang","LastYear":"Tahun Lalu","NextMonth":"Bulan Depan","NextWeek":"Minggu Depan","NextYear":"Tahun Depan","OneMonthAgo":"Satu Bulan Lalu","OneWeekAgo":"Satu Minggu Lalu","SixMonthsAgo":"Enam Bulan Lalu","Time":"Waktu","CannotBeSelected":"Baris ini tidak dapat dipilih.","ResetToDefault":"Reset ke Tata Letak Awal","CloseOtherTabs":"Tutup Tab Lain","EmailValidation":"Masukkan alamat email yang valid","UrlValidation":"Masukkan URL yang valid","EndofResults":"Akhir Hasil","More":"Lebih banyak lagi...","RecordsPerPage":"Rekaman Per Halaman","Maximize":"Maksimalkan","Minimize":"Memperkecil"}
});

}( this ));
/*
* Globalize Culture it-IT
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "it-IT", "default", {
	name: "it-IT",
	englishName: "Italian (Italy)",
	nativeName: "italiano (Italia)",
	language: "it",
	numberFormat: {
		",": ".",
		".": ",",
		NaN: "Non un numero reale",
		negativeInfinity: "-Infinito",
		positiveInfinity: "+Infinito",
		percent: {
			pattern: ["-n%","n%"],
			",": ".",
			".": ","
		},
		currency: {
			pattern: ["-$ n","$ n"],
			",": ".",
			".": ",",
			symbol: ""
		}
	},
	calendars: {
		standard: {
			firstDay: 1,
			days: {
				names: ["domenica","luned","marted","mercoled","gioved","venerd","sabato"],
				namesAbbr: ["dom","lun","mar","mer","gio","ven","sab"],
				namesShort: ["do","lu","ma","me","gi","ve","sa"]
			},
			months: {
				names: ["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre",""],
				namesAbbr: ["gen","feb","mar","apr","mag","giu","lug","ago","set","ott","nov","dic",""]
			},
			AM: null,
			PM: null,
			eras: [{"name":"d.C.","start":null,"offset":0}],
			patterns: {
				d: "dd/MM/yyyy",
				D: "dddd d MMMM yyyy",
				t: "HH:mm",
				T: "HH:mm:ss",
				f: "dddd d MMMM yyyy HH:mm",
				F: "dddd d MMMM yyyy HH:mm:ss",
				M: "dd MMMM",
				Y: "MMMM yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":"Informazioni aggiuntive","AddNewTab":"Aggiungi nuova scheda","Alerts":"Avvisi","ApplyFilter":"Applica filtro","Approve":"Approva","Attachments":"Allegati","Back":"Indietro","Basic":"Di base","Between":"Compreso tra","Book":"Libro","Cancel":"Annulla","Checked":"Selezionato","ClearFilter":"Annulla filtro","Close":"Chiudi","CloseCancelChanges":"Chiudi e annulla modifiche","CloseSaveChanges":"Chiudi e salva modifiche","CloseTab":"Chiudi scheda","ColumnPersonalization":"Personalizzazione colonne","Comments":"Commenti","Confirmation":"Conferma","Contains":"Contiene","CreateTab":"Crea nuova scheda","Cut":"Taglia","Delete":"Elimina","DiscardUndo":"Ignora/Annulla","DisplayDropDownList":"Visualizza elenco a discesa","Displaying":"Visualizzazione corrente: ","DocWord":"Documento","DoesNotContain":"Non contiene","DoesNotEndWith":"Non finisce con","DoesNotEqual":"Diverso da","DoesNotStartWith":"Non inizia con","Download":"Scarica","Duplicate":"Duplica","Edit":"Modifica","EitherSelectedorNotSelected":"Selezionati o non selezionati","Email":"E-mail","EndsWith":"Finisce con","EqualsStr":"Uguale a","ExpandCollapse":"Espandi/Comprimi","ExportFailed":"Esportazione non riuscita","ExportToExcel":"Esporta in Excel","FileInUse":"Il file specificato  in uso","FileInUseDetail":"Chiudere il file nell\u0027applicazione in cui  in uso oppure specificare un altro nome file.","Filter":"Filtro","FilterMenu":"Menu filtro","FilterOptions":"Opzioni filtro","FilterWithinResults":"Filtra nei risultati","First":"Primo","FirstView":"Prima vista","Folder":"Cartella","ForgotPassword":"Password dimenticata?","Forward":"Avanti","GetMoreRows":"Ottieni altre righe","GreaterThan":"Maggiore di","GreaterThanOrEquals":"Maggiore o uguale a","GridSettings":"Impostazioni griglia","GroupSelection":"Selezione gruppo","Help":"Guida","HideColumn":"Nascondi colonna","IsEmpty":" vuoto","IsNotEmpty":"Non  vuoto","Last":"Ultimo","LastView":"Ultima vista","LaunchActivate":"Avvia/Attiva","LessThan":"Minore di","LessThanOrEquals":"Minore o uguale a","Links":"Collegamenti","ListTabs":"Elenca tutte le schede","LoadingItem":"Caricamento elemento in corso ","Maintenance":"Gestione","Menu":"Menu","New":"Nuovo","Next":"Successivo","NextView":"Vista successiva","No":"No","NotChecked":"Non selezionato","Notes":"Note","NotSelected":"Non selezionati","Of":" di ","Ok":"OK","Open":"Apri","Password":"Password","Paste":"Incolla","Phone":"Telefono","PleaseWait":"Attendere","Previous":"Precedente","PreviousView":"Vista precedente","Print":"Stampa","Queries":"Query","Redo":"Ripeti","Refresh":"Aggiorna","Reject":"Rifiuta","RememberMe":"Memorizza nel computer in uso","Reports":"Report","Reset":"Reimposta","Review":"Rivedi","RunFilter":"Esegui filtro","RunJob":"Esegui processo","Save":"Salva","SaveBeforeClosing":"Salva prima di chiudere","SavedFilters":"Filtri salvati","SaveSubmit":"Salva/Inoltra","ScreenDesign":"Design schermo","Search":"Ricerca","SelectContents":"Seleziona contenuto","SelectDate":"Seleziona data","SelectDeselect":"Seleziona/Deseleziona tutto","Selected":"Selezione corrente: ","ServerName":"Nome server","Settings":"Impostazioni","ShowFilterRow":"Mostra riga filtro","SignIn":"Accesso","SortAscending":"Ordinamento crescente","SortDescending":"Ordinamento decrescente","Spreadsheet":"Foglio di lavoro","StartsWith":"Inizia con","StatusIndicator":"Indicatore di stato","Tasks":"Attivit","Today":"Oggi","Translate":"Traduci","UserID":"ID utente","Utilities":"Utilit","Yes":"S","Page":"Pagina","Rows":"Righe","ShowingAll":"Visualizzazione completa","SessionNavigation":"Esplorazione della sessione","ListAllMenuItems":"Elenca tutte le voci di menu","NoRecordsFound":"Nessun record individuato","SearchTree":"Struttura di ricerca","Clear":"Cancella","DrillDown":"Visualizza dettagli","Required":"Questo campo  obbligatorio","Available":"Disponibile:","Add":"Aggiungi","MoveDown":"Sposta gi","MoveUp":"Sposta su","Remove":"Rimuovi","LastYear":"Ultimo anno","NextMonth":"Mese successivo","NextWeek":"Settimana successiva","NextYear":"Esercizio successivo","OneMonthAgo":"Un mese fa","OneWeekAgo":"Una settimana fa","SixMonthsAgo":"Sei mesi fa","Time":"Ora","CannotBeSelected":"Impossibile selezionare questa riga.","ResetToDefault":"Ripristina layout predefinito","CloseOtherTabs":"Chiudi le altre schede","EmailValidation":"Immettere un indirizzo e-mail valido","UrlValidation":"Immettere un URL valido","EndofResults":"Fine dei risultati","More":"Altro...","RecordsPerPage":"Record per pagina","Maximize":"Ingrandisci","Minimize":"Riduci a icona","CloseAllTabs":"Chiudi tutte le schede","QuickDates":"Selezione rapida data","Finish":"Fine","SetTextColor":"Imposta colore testo","AttachmentRules":"Regole allegati","AutoRefresh":"Aggiornamento automatico","BarChart":"Grafico a barre","CopyMail":"Copia e invia e-mail","CopyUrl":"Copia URL","DistributeHorizontally":"Distribuisci orizzontalmente","ExpandAll":"Espandi tutto","Generate":"Genera","GenerateScript":"Genera script","NoAttachments":"Nessun allegato","PieChart":"Grafico a torta","QuickAccess":"Accesso rapido","RestoreUser":"Ripristina utente","SaveConsolidate":"Salva con consolidamento locale","Screen Design":"Struttura schermata","SelectAll":"Seleziona tutto","SpellCheck":"Controllo ortografico","SubmitForApproval":"Invia per approvazione","TopDownSpread":"Top Down Spread","Timezone":"Fuso orario","Loading":"Caricamento in corso...","NewNode":"Nuovo nodo"}
});

}( this ));
/*
* Globalize Culture ja-JP
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "ja-JP", "default", {
	name: "ja-JP",
	englishName: "Japanese (Japan)",
	nativeName: " ()",
	language: "ja",
	numberFormat: {
		NaN: "NaN (?)",
		negativeInfinity: "-",
		positiveInfinity: "+",
		percent: {
			pattern: ["-n%","n%"]
		},
		currency: {
			pattern: ["-$n","$n"],
			decimals: 0,
			symbol: ""
		}
	},
	calendars: {
		standard: {
			days: {
				names: ["","","?","","","",""],
				namesAbbr: ["","","?","","","",""],
				namesShort: ["","","?","","","",""]
			},
			months: {
				names: ["1","2","3","4","5","6","7","8","9","10","11","12",""],
				namesAbbr: ["1","2","3","4","5","6","7","8","9","10","11","12",""]
			},
			AM: ["??","??","??"],
			PM: ["?","?","?"],
			eras: [{"name":"","start":null,"offset":0}],
			patterns: {
				d: "yyyy/MM/dd",
				D: "yyyy''M''d''",
				t: "H:mm",
				T: "H:mm:ss",
				f: "yyyy''M''d'' H:mm",
				F: "yyyy''M''d'' H:mm:ss",
				M: "M''d''",
				Y: "yyyy''M''"
			}
		},
		Japanese: {
			name: "Japanese",
			days: {
				names: ["","","?","","","",""],
				namesAbbr: ["","","?","","","",""],
				namesShort: ["","","?","","","",""]
			},
			months: {
				names: ["1","2","3","4","5","6","7","8","9","10","11","12",""],
				namesAbbr: ["1","2","3","4","5","6","7","8","9","10","11","12",""]
			},
			AM: ["??","??","??"],
			PM: ["?","?","?"],
			eras: [{"name":"?","start":null,"offset":1867},{"name":"","start":-1812153600000,"offset":1911},{"name":"","start":-1357603200000,"offset":1925},{"name":"","start":60022080000,"offset":1988}],
			twoDigitYearMax: 99,
			patterns: {
				d: "gg y/M/d",
				D: "gg y''M''d''",
				t: "H:mm",
				T: "H:mm:ss",
				f: "gg y''M''d'' H:mm",
				F: "gg y''M''d'' H:mm:ss",
				M: "M''d''",
				Y: "gg y''M''"
			}
		}
	},
	messages : {"AdditionalHelp":"?","AddNewTab":"??","Alerts":"","ApplyFilter":"??","Approve":"?","Attachments":"","Back":"","Basic":"","Between":"??","Book":"","Cancel":"","Checked":"?","ClearFilter":"?","Close":"?","CloseCancelChanges":"??","CloseSaveChanges":"???","CloseTab":"?","ColumnPersonalization":"?","Comments":"","Confirmation":"?","Contains":"?","CreateTab":"???","Cut":"?","Delete":"","DiscardUndo":"/??","DisplayDropDownList":"","Displaying":": ","DocWord":"","DoesNotContain":"?????","DoesNotEndWith":"?????","DoesNotEqual":"???????","DoesNotStartWith":"?????","Download":"","Duplicate":"","Edit":"","EitherSelectedorNotSelected":"???","Email":"?","EndsWith":"??","EqualsStr":"??","ExpandCollapse":"/???","ExportFailed":"?????????","ExportToExcel":"Excel ??","FileInUse":"????????","FileInUseDetail":"??????????????","Filter":"","FilterMenu":"","FilterOptions":"","FilterWithinResults":"??","First":"?","FirstView":"??","Folder":"","ForgotPassword":"??","Forward":"","GetMoreRows":"??","GreaterThan":"????","GreaterThanOrEquals":"???","GridSettings":"?","GroupSelection":"??","Help":"","HideColumn":"?","IsEmpty":"","IsNotEmpty":"????","Last":"","LastView":"?","LaunchActivate":"/","LessThan":"???","LessThanOrEquals":"????","Links":"","ListTabs":"?????","LoadingItem":"?????? ","Maintenance":"?","Menu":"","New":"??","Next":"?","NextView":"?","No":"???","NotChecked":"?","Notes":"","NotSelected":"?","Of":" / ","Ok":"OK","Open":"","Password":"","Paste":"?","Phone":"","PleaseWait":"???????...","Previous":"??","PreviousView":"??","Print":"?","Queries":"","Redo":"?","Refresh":"","Reject":"?","RememberMe":"?????","Reports":"?","Reset":"","Review":"","RunFilter":"?","RunJob":"?","Save":"?","SaveBeforeClosing":"????","SavedFilters":"???","SaveSubmit":"?/?","ScreenDesign":"?","Search":"","SelectContents":"??","SelectDate":"?","SelectDeselect":"????/?","Selected":"?: ","ServerName":"???","Settings":"","ShowFilterRow":"?","SignIn":"","SortAscending":"???","SortDescending":"????","Spreadsheet":"","StartsWith":"?","StatusIndicator":"?","Tasks":"","Today":"","Translate":"","UserID":" ID","Utilities":"","Yes":"??","Page":"","Rows":"","ShowingAll":"???","SessionNavigation":"","ListAllMenuItems":"?","NoRecordsFound":"????","SearchTree":"","Clear":"","DrillDown":"","Required":"?????","Available":"?:","Add":"","MoveDown":"?","MoveUp":"?","Remove":"","LastYear":"?","NextMonth":"","NextWeek":"?","NextYear":"?","OneMonthAgo":"1 ?","OneWeekAgo":"1 ?","SixMonthsAgo":"6 ??","Time":"","CannotBeSelected":"?????????","ResetToDefault":"???","CloseOtherTabs":"??","EmailValidation":"?????????","UrlValidation":"? URL ???????","EndofResults":"???","More":"???...","RecordsPerPage":"1 ?","Maximize":"?????","Minimize":"????"}
});

}( this ));
/*
* Globalize Culture nb-NO
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "nb-NO", "default", {
	name: "nb-NO",
	englishName: "Norwegian, Bokml (Norway)",
	nativeName: "norsk, bokml (Norge)",
	language: "nb",
	numberFormat: {
		",": "",
		".": ",",
		negativeInfinity: "-INF",
		positiveInfinity: "INF",
		percent: {
			",": "",
			".": ","
		},
		currency: {
			pattern: ["$ -n","$ n"],
			",": "",
			".": ",",
			symbol: "kr"
		}
	},
	calendars: {
		standard: {
			"/": ".",
			firstDay: 1,
			days: {
				names: ["sndag","mandag","tirsdag","onsdag","torsdag","fredag","lrdag"],
				namesAbbr: ["s","ma","ti","on","to","fr","l"],
				namesShort: ["s","ma","ti","on","to","fr","l"]
			},
			months: {
				names: ["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember",""],
				namesAbbr: ["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des",""]
			},
			AM: null,
			PM: null,
			patterns: {
				d: "dd.MM.yyyy",
				D: "d. MMMM yyyy",
				t: "HH:mm",
				T: "HH:mm:ss",
				f: "d. MMMM yyyy HH:mm",
				F: "d. MMMM yyyy HH:mm:ss",
				M: "d. MMMM",
				Y: "MMMM yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":"Ekstra hjelp","AddNewTab":"Legg til ny kategori","Alerts":"Varsler","ApplyFilter":"Bruk filter","Approve":"Godkjenn","Attachments":"Vedlegg","Back":"Tilbake","Basic":"Basis","Between":"Mellom","Book":"Bok","Cancel":"Avbryt","Checked":"Kontrollert","ClearFilter":"Fjern filter","Close":"Lukk","CloseCancelChanges":"Lukk og avbryt endringer","CloseSaveChanges":"Lukk og lagre endringer","CloseTab":"Lukk kategori","ColumnPersonalization":"Egendefinering av kolonne","Comments":"Kommentarer","Confirmation":"Bekreftelse","Contains":"Inneholder","CreateTab":"Opprett en ny kategori","Cut":"Klipp ut","Delete":"Slett","DiscardUndo":"Forkast/angre","DisplayDropDownList":"Vis nedtrekksliste","Displaying":"Viser: ","DocWord":"Dokument","DoesNotContain":"Inneholder ikke","DoesNotEndWith":"Slutter ikke med","DoesNotEqual":"Er ikke lik","DoesNotStartWith":"Starter ikke med","Download":"Last ned","Duplicate":"Dupliser","Edit":"Rediger","EitherSelectedorNotSelected":"Rediger valgte eller ikke valgte","Email":"E-post","EndsWith":"Slutter med","EqualsStr":"Er lik","ExpandCollapse":"Utvid/skjul","ExportFailed":"Eksport mislyktes","ExportToExcel":"Eksporter til Excel","FileInUse":"Spesifisert fil er i bruk","FileInUseDetail":"Lukk filen i programmet det er i bruk eller angi et annet filnavn.","Filter":"Filter","FilterMenu":"Filtermeny","FilterOptions":"Filteralternativer","FilterWithinResults":"Filtrer i resultater","First":"Frst","FirstView":"Vis frst","Folder":"Mappe","ForgotPassword":"Glemt passord?","Forward":"Videresend","GetMoreRows":"F flere rader","GreaterThan":"Mer enn","GreaterThanOrEquals":"Mer enn eller lik","GridSettings":"Rutenettinnstillinger","GroupSelection":"Gruppevalg","Help":"Hjelp","HideColumn":"Skjul kolonne","IsEmpty":"Er tom","IsNotEmpty":"Er ikke tom","Last":"Siste","LastView":"Siste visning","LaunchActivate":"pne/aktiver","LessThan":"Mindre enn","LessThanOrEquals":"Mindre enn eller lik","Links":"Koblinger","ListTabs":"List opp alle kategorier","LoadingItem":"Laster opp element ","Maintenance":"Vedlikehold","Menu":"Meny","New":"Ny","Next":"Neste","NextView":"Neste visning","No":"Nei","NotChecked":"Ikke kontrollert","Notes":"Merknader","NotSelected":"Ikke valgt","Of":" av ","Ok":"OK","Open":"pne","Password":"Passord","Paste":"Lim inn","Phone":"Telefon","PleaseWait":"Vennligst vent","Previous":"Forrige","PreviousView":"Forrige visning","Print":"Skriv ut","Queries":"Foresprsler","Redo":"Gjr om","Refresh":"Oppdater","Reject":"Avvis","RememberMe":"Husk meg p denne datamaskinen","Reports":"Rapporter","Reset":"Tilbakestill","Review":"Se gjennom","RunFilter":"Kjr filter","RunJob":"Kjr jobb","Save":"Lagre","SaveBeforeClosing":"Lagre og lukk","SavedFilters":"Lagrede filtre","SaveSubmit":"Lagre/send","ScreenDesign":"Skjermdesign","Search":"Sk","SelectContents":"Velg innhold","SelectDate":"Velg en dato","SelectDeselect":"Velg/fjern merking av alle","Selected":"Valgt: ","ServerName":"Servernavn","Settings":"Innstillinger","ShowFilterRow":"Vis filterrad","SignIn":"Logge p","SortAscending":"Sorter stigende","SortDescending":"Sorter synkende","Spreadsheet":"Regneark","StartsWith":"Starter med","StatusIndicator":"Statusindikator","Tasks":"Oppgaver","Today":"I dag","Translate":"Oversett","UserID":"Bruker-ID","Utilities":"Verkty","Yes":"Ja","Page":"Side","Rows":"Rader","ShowingAll":"Viser alle","SessionNavigation":"Navigere i kt","ListAllMenuItems":"List opp alle menyelementer","NoRecordsFound":"Ingen poster funnet","SearchTree":"Sk tre","Clear":"Fjern","DrillDown":"Drille ned","Required":"Dette feltet er obligatorisk","Available":"Tilgjengelig:","Add":"Legg til","MoveDown":"Flytt ned","MoveUp":"Flytt opp","Remove":"Fjern","LastYear":"I fjor","NextMonth":"Neste mned","NextWeek":"Neste uke","NextYear":"Neste r","OneMonthAgo":"n mned siden","OneWeekAgo":"n uke siden","SixMonthsAgo":"Seks mneder siden","Time":"Tid","CannotBeSelected":"Denne raden kan ikke slettes.","ResetToDefault":"Tilbakestill til standardoppsett","CloseOtherTabs":"Lukk andre kategorier","EmailValidation":"Skriv inn en gyldig e-postadresse","UrlValidation":"Skriv inn en gyldig URL","EndofResults":"Slutten av resultatene","More":"Mer...","RecordsPerPage":"Oppfringer per side","Maximize":"Maksimer","Minimize":"Minimer"}
});

}( this ));
/*
* Globalize Culture nl-NL
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "nl-NL", "default", {
	name: "nl-NL",
	englishName: "Dutch (Netherlands)",
	nativeName: "Nederlands (Nederland)",
	language: "nl",
	numberFormat: {
		",": ".",
		".": ",",
		percent: {
			",": ".",
			".": ","
		},
		currency: {
			pattern: ["$ -n","$ n"],
			",": ".",
			".": ",",
			symbol: ""
		}
	},
	calendars: {
		standard: {
			"/": "-",
			firstDay: 1,
			days: {
				names: ["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],
				namesAbbr: ["zo","ma","di","wo","do","vr","za"],
				namesShort: ["zo","ma","di","wo","do","vr","za"]
			},
			months: {
				names: ["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december",""],
				namesAbbr: ["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec",""]
			},
			AM: null,
			PM: null,
			patterns: {
				d: "d-M-yyyy",
				D: "dddd d MMMM yyyy",
				t: "H:mm",
				T: "H:mm:ss",
				f: "dddd d MMMM yyyy H:mm",
				F: "dddd d MMMM yyyy H:mm:ss",
				M: "dd MMMM",
				Y: "MMMM yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":"Extra help","AddNewTab":"Nieuw tabblad toevoegen","Alerts":"Alarmeringen","ApplyFilter":"Filter toepassen","Approve":"Goedkeuren","Attachments":"Bijlagen","Back":"Terug","Basic":"Basis","Between":"Tussen","Book":"Boeken","Cancel":"Annuleren","Checked":"Ingeschakeld","ClearFilter":"Filter wissen","Close":"Sluiten","CloseCancelChanges":"Afsluiten en wijzigingen annuleren","CloseSaveChanges":"Afsluiten en wijzigingen opslaan","CloseTab":"Tabblad sluiten","ColumnPersonalization":"Personalisatie kolommen","Comments":"Opmerkingen","Confirmation":"Bevestiging","Contains":"Bevat","CreateTab":"Een  nieuw tabblad aanmaken","Cut":"Knippen","Delete":"Verwijderen","DiscardUndo":"Ongedaan maken","DisplayDropDownList":"Keuzelijst weergeven","Displaying":"Weergave: ","DocWord":"Document","DoesNotContain":"Bevat niet","DoesNotEndWith":"Eindigt niet op","DoesNotEqual":"Is niet gelijk aan","DoesNotStartWith":"Begint niet met","Download":"Downloaden","Duplicate":"Kopiren","Edit":"Bewerken","EitherSelectedorNotSelected":"Ingeschakeld of Uitgeschakeld","Email":"E-mail","EndsWith":"Eindigt op","EqualsStr":"Is gelijk aan","ExpandCollapse":"Uit-/invouwen","ExportFailed":"Exporteren is niet gelukt","ExportToExcel":"Naar Excel exporteren","FileInUse":"Opgegeven bestand is in gebruik","FileInUseDetail":"Sluit het bestand in de applicatie waar het in gebruik is of geef een andere bestandsnaam op.","Filter":"Filter","FilterMenu":"Filtermenu","FilterOptions":"Filteropties","FilterWithinResults":"Binnen resultaten filteren","First":"Eerste","FirstView":"Eerste weergave","Folder":"Map","ForgotPassword":"Bent u uw wachtwoord vergeten?","Forward":"Vooruit","GetMoreRows":"Meer rijen ophalen","GreaterThan":"Groter dan","GreaterThanOrEquals":"Groter dan of gelijk aan","GridSettings":"Rasterinstellingen","GroupSelection":"Groepsselectie","Help":"Help","HideColumn":"Kolom verbergen","IsEmpty":"Is leeg","IsNotEmpty":"Is niet leeg","Last":"Laatste","LastView":"Laatste weergave","LaunchActivate":"Starten/activeren","LessThan":"Kleiner dan","LessThanOrEquals":"Kleiner dan of gelijk aan","Links":"Koppelingen","ListTabs":"Alle tabbladen weergeven","LoadingItem":"Artikel laden ","Maintenance":"Onderhoud","Menu":"Menu","New":"Nieuw","Next":"Volgende","NextView":"Volgende weergave","No":"Nee","NotChecked":"Niet ingeschakeld","Notes":"Notities","NotSelected":"Niet geselecteerd","Of":" van ","Ok":"OK","Open":"Open","Password":"Wachtwoord","Paste":"Plakken","Phone":"Telefoon","PleaseWait":"Ogenblik svp","Previous":"Vorige","PreviousView":"Vorige weergave","Print":"Afdrukken","Queries":"Query\u0027s","Redo":"Opnieuw uitvoeren","Refresh":"Vernieuwen","Reject":"Afkeuren","RememberMe":"Herinner mij op deze computer","Reports":"Rapporten","Reset":"Herstellen","Review":"Bekijken","RunFilter":"Filter uitvoeren","RunJob":"Job uitvoeren","Save":"Opslaan","SaveBeforeClosing":"Opslaan vr afsluiten","SavedFilters":"Opgeslagen filters","SaveSubmit":"Opslaan","ScreenDesign":"Schermontwerp","Search":"Zoeken","SelectContents":"Inhoud selecteren","SelectDate":"Een datum selecteren","SelectDeselect":"Alles selecteren /deselecteren","Selected":"Geselecteerd: ","ServerName":"Servernaam","Settings":"Instellingen","ShowFilterRow":"Filterrij tonen","SignIn":"Aanmelden","SortAscending":"Oplopend sorteren","SortDescending":"Aflopend sorteren","Spreadsheet":"Rekenblad","StartsWith":"Begint met","StatusIndicator":"Statusindicator","Tasks":"Taken","Today":"Vandaag","Translate":"Vertalen","UserID":"Gebruiker-ID","Utilities":"Hulpprogramma\u0027s","Yes":"Ja","Page":"Pagina","Rows":"Rijen","ShowingAll":"Alles weergeven","SessionNavigation":"Navigeren in sessie","ListAllMenuItems":"Alle menuopdrachten weergeven","NoRecordsFound":"Geen records aanwezig","SearchTree":"In structuur zoeken","Clear":"Wissen","DrillDown":"Drill-down","Required":"Dit veld is verplicht","Available":"Beschikbaar:","Add":"Toevoegen","MoveDown":"Omlaag","MoveUp":"Omhoog","Remove":"Verwijderen","LastYear":"Vorig jaar","NextMonth":"Volgende maand","NextWeek":"Volgende week","NextYear":"Volgend jaar","OneMonthAgo":"En maand geleden","OneWeekAgo":"En week geleden","SixMonthsAgo":"Half jaar geleden","Time":"Tijd","CannotBeSelected":"Deze rij kan niet worden geselecteerd.","ResetToDefault":"Naar standaardinstelling terugzetten","CloseOtherTabs":"Overige tabbladen sluliten","EmailValidation":"Voer een geldig e-mailadres in","UrlValidation":"Voer een geldige URL in","EndofResults":"Einde resultaten","More":"Meer...","RecordsPerPage":"Records per pagina","Maximize":"Maximaliseren","Minimize":"Minimaliseren","CloseAllTabs":"Alle tabbladen sluiten","QuickDates":"Snelle datums","Finish":"Beindigen","SetTextColor":"Tekstkleur instellen","AttachmentRules":"Regels bijlagen","AutoRefresh":"Automatisch vernieuwen","BarChart":"staafdiagram","CopyMail":"Kopiren en per e-mail verzenden","CopyUrl":"URL kopiren","DistributeHorizontally":"Horizontaal verdelen","ExpandAll":"Alles uitvouwen","Generate":"Genereren","GenerateScript":"Script genereren","NoAttachments":"Geen bijlagen","PieChart":"Cirkeldiagram","QuickAccess":"Snelle toegang","RestoreUser":"Gebruiker terugzetten","SaveConsolidate":"Met lokale consolidatie opslaan","Screen Design":"Schermontwerp","SelectAll":"Alles selecteren","SpellCheck":"Spellingscontrole","SubmitForApproval":"Ter goedkeuring voorleggen","TopDownSpread":"Top-down spreiding","Timezone":"Tijdzone","Loading":"Laden...","NewNode":"Nieuw knooppunt"}
});

}( this ));
/*
* Globalize Culture pl-PL
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "pl-PL", "default", {
	name: "pl-PL",
	englishName: "Polish (Poland)",
	nativeName: "polski (Polska)",
	language: "pl",
	numberFormat: {
		",": "",
		".": ",",
		NaN: "nie jest liczb",
		negativeInfinity: "-nieskoczono",
		positiveInfinity: "+nieskoczono",
		percent: {
			pattern: ["-n%","n%"],
			",": "",
			".": ","
		},
		currency: {
			pattern: ["-n $","n $"],
			",": "",
			".": ",",
			symbol: "z"
		}
	},
	calendars: {
		standard: {
			"/": "-",
			firstDay: 1,
			days: {
				names: ["niedziela","poniedziaek","wtorek","roda","czwartek","pitek","sobota"],
				namesAbbr: ["N","Pn","Wt","r","Cz","Pt","So"],
				namesShort: ["N","Pn","Wt","r","Cz","Pt","So"]
			},
			months: {
				names: ["stycze","luty","marzec","kwiecie","maj","czerwiec","lipiec","sierpie","wrzesie","padziernik","listopad","grudzie",""],
				namesAbbr: ["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa","lis","gru",""]
			},
			monthsGenitive: {
				names: ["stycznia","lutego","marca","kwietnia","maja","czerwca","lipca","sierpnia","wrzenia","padziernika","listopada","grudnia",""],
				namesAbbr: ["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","pa","lis","gru",""]
			},
			AM: null,
			PM: null,
			patterns: {
				d: "yyyy-MM-dd",
				D: "d MMMM yyyy",
				t: "HH:mm",
				T: "HH:mm:ss",
				f: "d MMMM yyyy HH:mm",
				F: "d MMMM yyyy HH:mm:ss",
				M: "d MMMM",
				Y: "MMMM yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":"Dodatkowa pomoc","AddNewTab":"Dodaj now kart","Alerts":"Alerty","ApplyFilter":"Zastosuj filtr","Approve":"Zatwierd","Attachments":"Zaczniki","Back":"Wstecz","Basic":"Podstawowe","Between":"Pomidzy","Book":"Ksika","Cancel":"Anuluj","Checked":"Zaznaczony","ClearFilter":"Wyczy filtr","Close":"Zamknij","CloseCancelChanges":"Zamknij i anuluj zmiany","CloseSaveChanges":"Zamknij i zapisz zmiany","CloseTab":"Zamknij kart","ColumnPersonalization":"Personalizacja kolumny","Comments":"Komentarze","Confirmation":"Potwierdzenie","Contains":"Zawiera","CreateTab":"Utwrz now kart","Cut":"Wytnij","Delete":"Usu","DiscardUndo":"Odrzu/cofnij","DisplayDropDownList":"Wywietl list rozwijan","Displaying":"Wywietlanie: ","DocWord":"Dokument","DoesNotContain":"Nie zawiera","DoesNotEndWith":"Nie koczy si na","DoesNotEqual":"Nie rwna si","DoesNotStartWith":"Nie rozpoczyna si od","Download":"Pobierz","Duplicate":"Duplikuj","Edit":"Edytuj","EitherSelectedorNotSelected":"Wybrany albo niewybrany","Email":"Adres e-mail","EndsWith":"Koczy si na","EqualsStr":"Rwna si","ExpandCollapse":"Rozwi/zwi","ExportFailed":"Eksport nie powid si","ExportToExcel":"Eksportuj do programu Excel","FileInUse":"Okrelony plik jest uywany","FileInUseDetail":"Zamknij plik w aplikacji, w ktrej jest on uywany, lub okrel inn nazw pliku.","Filter":"Filtr","FilterMenu":"Menu filtru","FilterOptions":"Opcje filtru","FilterWithinResults":"Filtruj wyniki","First":"Pierwszy","FirstView":"Pierwszy widok","Folder":"Folder","ForgotPassword":"Nie pamitasz hasa?","Forward":"Przelij dalej","GetMoreRows":"Pobierz wicej wierszy","GreaterThan":"Wikszy ni","GreaterThanOrEquals":"Wikszy lub rwny","GridSettings":"Ustawienia siatki","GroupSelection":"Wybr grupy","Help":"Pomoc","HideColumn":"Ukryj kolumn","IsEmpty":"Jest pusty","IsNotEmpty":"Nie jest pusty","Last":"Ostatni","LastView":"Ostatni widok","LaunchActivate":"Uruchom/aktywuj","LessThan":"Mniejszy ni","LessThanOrEquals":"Mniejszy lub rwny","Links":"?cza","ListTabs":"Wywietl list wszystkich kart","LoadingItem":"?adowanie elementu ","Maintenance":"Konserwacja","Menu":"Menu","New":"Nowy","Next":"Nastpny","NextView":"Nastpny widok","No":"Nie","NotChecked":"Niezaznaczony","Notes":"Uwagi","NotSelected":"Niewybrany","Of":" z ","Ok":"OK","Open":"Otwrz","Password":"Haso","Paste":"Wklej","Phone":"Telefon","PleaseWait":"Czekaj","Previous":"Poprzedni","PreviousView":"Poprzedni widok","Print":"Drukuj","Queries":"Zapytania","Redo":"Wykonaj ponownie","Refresh":"Odwie","Reject":"Odrzu","RememberMe":"Zapamitaj mnie na tym komputerze","Reports":"Raporty","Reset":"Resetuj","Review":"Przegld","RunFilter":"Uruchom filtr","RunJob":"Uruchom zadanie","Save":"Zapisz","SaveBeforeClosing":"Zapisz przed zamkniciem","SavedFilters":"Zapisane filtry","SaveSubmit":"Zapisz/przelij","ScreenDesign":"Projekt ekranu","Search":"Szukaj","SelectContents":"Wybierz zawarto","SelectDate":"Wybierz dat","SelectDeselect":"Zaznacz wszystko/anuluj zaznaczenie","Selected":"Wybrany: ","ServerName":"Nazwa serwera","Settings":"Ustawienia","ShowFilterRow":"Poka wiersz filtru","SignIn":"Zaloguj si","SortAscending":"Sortuj rosnco","SortDescending":"Sortuj malejco","Spreadsheet":"Arkusz kalkulacyjny","StartsWith":"Rozpoczyna si od","StatusIndicator":"Wskanik statusu","Tasks":"Zadania","Today":"Dzisiaj","Translate":"Przetumacz","UserID":"Identyfikator uytkownika","Utilities":"Narzdzia","Yes":"Tak","Page":"Strona","Rows":"Wiersze","ShowingAll":"Pokazywanie wszystkich","SessionNavigation":"Nawigacja w obrbie sesji","ListAllMenuItems":"Wywietl list wszystkich elementw menu","NoRecordsFound":"Nie znaleziono rekordw","SearchTree":"Przeszukaj drzewo","Clear":"Wyczy","DrillDown":"Poziom szczegw","Required":"To pole jest wymagane","Available":"Dostpny:","Add":"Dodaj","MoveDown":"Przenie w d","MoveUp":"Przenie w gr","Remove":"Usu","LastYear":"W ubiegym roku","NextMonth":"W przyszym miesicu","NextWeek":"W przyszym tygodniu","NextYear":"W przyszym roku","OneMonthAgo":"Miesic temu","OneWeekAgo":"Tydzie temu","SixMonthsAgo":"Sze miesicy temu","Time":"Czas","CannotBeSelected":"Nie mona wybra tego wiersza.","ResetToDefault":"Resetuj do ukadu domylnego","CloseOtherTabs":"Zamknij inne karty","EmailValidation":"Wprowad prawidowy adres e-mail","UrlValidation":"Wprowad prawidowy adres URL","EndofResults":"Koniec wynikw","More":"Wicej...","RecordsPerPage":"Liczba rekordw na stronie","Maximize":"Maksymalizuj","Minimize":"Zminimalizowa"}
});

}( this ));
/*
* Globalize Culture pt-BR
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "pt-BR", "default", {
	name: "pt-BR",
	englishName: "Portuguese (Brazil)",
	nativeName: "Portugus (Brasil)",
	language: "pt",
	numberFormat: {
		",": ".",
		".": ",",
		NaN: "NaN (No  um nmero)",
		negativeInfinity: "-Infinito",
		positiveInfinity: "+Infinito",
		percent: {
			pattern: ["-n%","n%"],
			",": ".",
			".": ","
		},
		currency: {
			pattern: ["-$ n","$ n"],
			",": ".",
			".": ",",
			symbol: "R$"
		}
	},
	calendars: {
		standard: {
			days: {
				names: ["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"],
				namesAbbr: ["dom","seg","ter","qua","qui","sex","sb"],
				namesShort: ["D","S","T","Q","Q","S","S"]
			},
			months: {
				names: ["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro",""],
				namesAbbr: ["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez",""]
			},
			AM: null,
			PM: null,
			eras: [{"name":"d.C.","start":null,"offset":0}],
			patterns: {
				d: "dd/MM/yyyy",
				D: "dddd, d' de 'MMMM' de 'yyyy",
				t: "HH:mm",
				T: "HH:mm:ss",
				f: "dddd, d' de 'MMMM' de 'yyyy HH:mm",
				F: "dddd, d' de 'MMMM' de 'yyyy HH:mm:ss",
				M: "dd' de 'MMMM",
				Y: "MMMM' de 'yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":"Ajuda adicional","AddNewTab":"Adicionar nova guia","Alerts":"Alertas","ApplyFilter":"Aplicar filtro","Approve":"Aprovar","Attachments":"Anexos","Back":"Voltar","Basic":"Bsico","Between":"Entre","Book":"Livro","Cancel":"Cancelar","Checked":"Verificado","ClearFilter":"Limpar filtro","Close":"Fechar","CloseCancelChanges":"Fechar e cancelar alteraes","CloseSaveChanges":"Fechar e salvar alteraes","CloseTab":"Fechar guia","ColumnPersonalization":"Personalizao de coluna","Comments":"Comentrios","Confirmation":"Confirmao","Contains":"Contm","CreateTab":"Criar uma nova guia","Cut":"Cortar","Delete":"Excluir","DiscardUndo":"Descartar/Desfazer","DisplayDropDownList":"Exibir lista suspensa","Displaying":"Exibindo: ","DocWord":"Documento","DoesNotContain":"No contm","DoesNotEndWith":"No termina com","DoesNotEqual":"No  igual ","DoesNotStartWith":"No comea com","Download":"Fazer download","Duplicate":"Duplicar","Edit":"Editar","EitherSelectedorNotSelected":"Selecionado ou no selecionado","Email":"Email","EndsWith":"Termina com","EqualsStr":" igual a","ExpandCollapse":"Expandir/Recolher","ExportFailed":"Falha na Exportao","ExportToExcel":"Exportar para Excel","FileInUse":"O arquivo especificado est em uso","FileInUseDetail":"Feche o arquivo no aplicativo onde est sendo usado ou especifique um outro nome de arquivo.","Filter":"Filtro","FilterMenu":"Menu Filtro","FilterOptions":"Opes de filtro","FilterWithinResults":"Filtro nos resultados","First":"Primeiro","FirstView":"Primeira visualizao","Folder":"Pasta","ForgotPassword":"Esqueceu a senha?","Forward":"Encaminhar","GetMoreRows":"Obter mais linhas","GreaterThan":" maior que","GreaterThanOrEquals":" maior que ou igual ","GridSettings":"Configuraes de grade","GroupSelection":"Seleo de grupo","Help":"Ajuda","HideColumn":"Ocultar coluna","IsEmpty":"Est vazio","IsNotEmpty":"No est vazio","Last":"ltimo","LastView":"ltima visualizao","LaunchActivate":"Iniciar/Ativar","LessThan":" menor que","LessThanOrEquals":" menor que ou igual ","Links":"Links","ListTabs":"Listar todas as guias","LoadingItem":"Carregando item ","Maintenance":"Manuteno","Menu":"Menu","New":"Novo","Next":"Prximo","NextView":"Prxima visualizao","No":"No","NotChecked":"No verificado","Notes":"Notas","NotSelected":"No selecionado","Of":" de ","Ok":"OK","Open":"Abrir","Password":"Senha","Paste":"Colar","Phone":"Telefone","PleaseWait":"Aguarde","Previous":"Anterior","PreviousView":"Visualizao anterior","Print":"Imprimir","Queries":"Consultas","Redo":"Refazer","Refresh":"Atualizar","Reject":"Rejeitar","RememberMe":"Lembrar de mim neste computador","Reports":"Relatrios","Reset":"Redefinir","Review":"Revisar","RunFilter":"Executar filtro","RunJob":"Executar trabalho","Save":"Salvar","SaveBeforeClosing":"Salvar antes de fechar","SavedFilters":"Filtros salvos","SaveSubmit":"Salvar/Enviar","ScreenDesign":"Design de tela","Search":"Buscar","SelectContents":"Selecionar contedo","SelectDate":"Selecionar uma data","SelectDeselect":"Selecionar/Deselecionar todos","Selected":"Selecionado: ","ServerName":"Nome do servidor","Settings":"Configuraes","ShowFilterRow":"Mostrar linha de filtro","SignIn":"Conectar","SortAscending":"Classificao ascendente","SortDescending":"Classificao descendente","Spreadsheet":"Planilha","StartsWith":"Comea com","StatusIndicator":"Indicador de status","Tasks":"Tarefas","Today":"Hoje","Translate":"Traduzir","UserID":"ID de usurio","Utilities":"Utilitrios","Yes":"Sim","Page":"Pgina","Rows":"Linhas","ShowingAll":"Mostrando tudo","SessionNavigation":"Navegao de sesso","ListAllMenuItems":"Listar todos os itens de menu","NoRecordsFound":"Nenhum registro encontrado","SearchTree":"?rvore de pesquisa","Clear":"Limpar","DrillDown":"Busca detalhada","Required":"Este  um campo obrigatrio","Available":"Disponvel:","Add":"Adicionar","MoveDown":"Mover para baixo","MoveUp":"Mover para cima","Remove":"Remover","LastYear":"ltimo ano","NextMonth":"Prximo ms","NextWeek":"Prxima semana","NextYear":"Prximo ano","OneMonthAgo":"Um ms atrs","OneWeekAgo":"Uma semana atrs","SixMonthsAgo":"Seis meses atrs","Time":"Hora","CannotBeSelected":"Esta linha no pode ser selecionada.","ResetToDefault":"Redefinir para layout padro.","CloseOtherTabs":"Fechar outras guias","EmailValidation":"Insira um endereo de e-mail vlido","UrlValidation":"Insira uma URL vlida","EndofResults":"Fim de resultados","More":"Mais...","RecordsPerPage":"Registros por pgina","Maximize":"Maximizar","Minimize":"Minimizar","CloseAllTabs":"Fechar todas as guias","QuickDates":"Quick Dates","Finish":"Concluir","SetTextColor":"Definir cor do texto","AttachmentRules":"Regras de anexo","AutoRefresh":"Atualizao automtica","BarChart":"Grfico de barras","CopyMail":"Copiar e enviar por e-mail","CopyUrl":"Copira Url","DistributeHorizontally":"Distribuir horizontalmente","ExpandAll":"Expandir tudo","Generate":"Gerar","GenerateScript":"Gerar script","NoAttachments":"Sem anexos","PieChart":"Grfico de pizza","QuickAccess":"Acesso rpido","RestoreUser":"Restaurar usurio","SaveConsolidate":"Salvar com consolidao local","Screen Design":"Design da tela","SelectAll":"Selecionar tudo","SpellCheck":"Corretor ortogrfico","SubmitForApproval":"Enviar para aprovao","TopDownSpread":"Top Down Spread","Timezone":"Fuso horrio","Loading":"Carregando...","NewNode":"Novo n"}
});

}( this ));
/*
* Globalize Culture ro-RO
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "ro-RO", "default", {
	name: "ro-RO",
	englishName: "Romanian (Romania)",
	nativeName: "romn (Romnia)",
	language: "ro",
	numberFormat: {
		",": ".",
		".": ",",
		percent: {
			pattern: ["-n%","n%"],
			",": ".",
			".": ","
		},
		currency: {
			pattern: ["-n $","n $"],
			",": ".",
			".": ",",
			symbol: "lei"
		}
	},
	calendars: {
		standard: {
			"/": ".",
			firstDay: 1,
			days: {
				names: ["duminic","luni","mari","miercuri","joi","vineri","smbt"],
				namesAbbr: ["D","L","Ma","Mi","J","V","S"],
				namesShort: ["D","L","Ma","Mi","J","V","S"]
			},
			months: {
				names: ["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie",""],
				namesAbbr: ["ian.","feb.","mar.","apr.","mai.","iun.","iul.","aug.","sep.","oct.","nov.","dec.",""]
			},
			AM: null,
			PM: null,
			patterns: {
				d: "dd.MM.yyyy",
				D: "d MMMM yyyy",
				t: "HH:mm",
				T: "HH:mm:ss",
				f: "d MMMM yyyy HH:mm",
				F: "d MMMM yyyy HH:mm:ss",
				M: "d MMMM",
				Y: "MMMM yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":"Ajutor suplimentar","AddNewTab":"Adugare fil nou","Alerts":"Alerte","ApplyFilter":"Aplicare filtru","Approve":"Aprobare","Attachments":"Ataamente","Back":"napoi","Basic":"De baz","Between":"ntre","Book":"Rezervare","Cancel":"Revocare","Checked":"Bifat","ClearFilter":"Golire filtru","Close":"nchidere","CloseCancelChanges":"nchidere i revocare modificri","CloseSaveChanges":"nchidere i salvare modificri","CloseTab":"nchidere fil","ColumnPersonalization":"Personalizare coloan","Comments":"Comentarii","Confirmation":"Confirmare","Contains":"Conine","CreateTab":"Creare fil nou","Cut":"Decupare","Delete":"tergere","DiscardUndo":"Renunare/Anulare","DisplayDropDownList":"Afiare list vertical","Displaying":"Se afieaz: ","DocWord":"Document","DoesNotContain":"Nu conine","DoesNotEndWith":"Nu se termin cu","DoesNotEqual":"Nu este egal cu","DoesNotStartWith":"Nu ncepe cu","Download":"Descrcare","Duplicate":"Dublare","Edit":"Editare","EitherSelectedorNotSelected":"Selectat sau neselectat","Email":"E-mail","EndsWith":"Se termin cu","EqualsStr":"Este egal cu","ExpandCollapse":"Extindere/Restrngere","ExportFailed":"Export euat","ExportToExcel":"Export n Excel","FileInUse":"Fiierul specificat este utilizat","FileInUseDetail":"nchidei fiierul din aplicaia n care este utilizat sau specificai un nume de fiier diferit.","Filter":"Filtru","FilterMenu":"Meniu filtru","FilterOptions":"Opiuni filtru","FilterWithinResults":"Filtru n rezultate","First":"Primul","FirstView":"Prima vizualizare","Folder":"Folder","ForgotPassword":"Ai uitat parola?","Forward":"nainte","GetMoreRows":"Obinere mai multe rnduri","GreaterThan":"Mai mare ca","GreaterThanOrEquals":"Mai mare sau egal cu","GridSettings":"Setri gril","GroupSelection":"Selecie grup","Help":"Ajutor","HideColumn":"Ascundere coloan","IsEmpty":"Este gol","IsNotEmpty":"Nu este gol","Last":"Ultimul","LastView":"Ultima vizualizare","LaunchActivate":"Lansare/Activare","LessThan":"Mai mic dect","LessThanOrEquals":"Mai mic sau egal cu","Links":"Legturi","ListTabs":"Listare toate filele","LoadingItem":"ncrcare element ","Maintenance":"ntreinere","Menu":"Meniu","New":"Nou","Next":"Urmtor","NextView":"Urmtoarea vizualizare","No":"Nu","NotChecked":"Nebifat","Notes":"Note","NotSelected":"Neselectat","Of":" din ","Ok":"OK","Open":"Deschidere","Password":"Parol","Paste":"Lipire","Phone":"Telefon","PleaseWait":"Ateptai","Previous":"Anterior","PreviousView":"Vizualizarea anterioar","Print":"Imprimare","Queries":"Interogri","Redo":"Refacere","Refresh":"Remprosptare","Reject":"Respingere","RememberMe":"Memorare utilizator pe acest computer","Reports":"Rapoarte","Reset":"Resetare","Review":"Revizuire","RunFilter":"Executare filtru","RunJob":"Executare lucrare","Save":"Salvare","SaveBeforeClosing":"Salvare nainte de nchidere","SavedFilters":"Salvare filtre","SaveSubmit":"Salvare/Trimitere","ScreenDesign":"Design ecran","Search":"Cutare","SelectContents":"Selectare coninut","SelectDate":"Selectare dat","SelectDeselect":"Selectare/Deselectare toate","Selected":"Selectat: ","ServerName":"Nume server","Settings":"Setri","ShowFilterRow":"Afiare rnd filtru","SignIn":"Conectare","SortAscending":"Sortare ascendent","SortDescending":"Sortare descendent","Spreadsheet":"Foaie de calcul","StartsWith":"ncepe cu","StatusIndicator":"Indicator stare","Tasks":"Sarcini","Today":"Astzi","Translate":"Traducere","UserID":"ID utilizator","Utilities":"Utilitare","Yes":"Da","Page":"Pagina","Rows":"Rnduri","ShowingAll":"Afiare toate","SessionNavigation":"Navigare sesisune","ListAllMenuItems":"Listare toate elementele de meniu","NoRecordsFound":"Nicio nregistrare gsit","SearchTree":"Arbore de cutare","Clear":"Golire","DrillDown":"Detaliere","Required":"Acest cmp este necesar","Available":"Disponibil:","Add":"Adugare","MoveDown":"Mutare n jos","MoveUp":"Mutare n sus","Remove":"Eliminare","LastYear":"Anul trecut","NextMonth":"Luna urmtoare","NextWeek":"Sptmna urmtoare","NextYear":"Anul urmtor","OneMonthAgo":"Acum o lun","OneWeekAgo":"Acum o sptmn","SixMonthsAgo":"Acum ase luni","Time":"Or","CannotBeSelected":"Acest rnd nu poate fi selectat.","ResetToDefault":"Resetare aspect implicit","CloseOtherTabs":"nchidere alte file","EmailValidation":"Introducei o adres de e-mail valid","UrlValidation":"Introducei URL valid","EndofResults":"Sfrit rezultate","More":"Mai multe...","RecordsPerPage":"nregistrri pe pagin","Maximize":"Maximaliza","Minimize":"Minimaliza"}
});

}( this ));
/*
* Globalize Culture ru-RU
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "ru-RU", "default", {
	name: "ru-RU",
	englishName: "Russian (Russia)",
	nativeName: "?? (???)",
	language: "ru",
	numberFormat: {
		",": "",
		".": ",",
		negativeInfinity: "-??",
		positiveInfinity: "??",
		percent: {
			pattern: ["-n%","n%"],
			",": "",
			".": ","
		},
		currency: {
			pattern: ["-n$","n$"],
			",": "",
			".": ",",
			symbol: "."
		}
	},
	calendars: {
		standard: {
			"/": ".",
			firstDay: 1,
			days: {
				names: ["??","","","?","","?","?"],
				namesAbbr: ["?","","","","","",""],
				namesShort: ["?","","","","","",""]
			},
			months: {
				names: ["","","","?","","","","??","?","?","??","",""],
				namesAbbr: ["?","","","","","","","","?","","?","",""]
			},
			monthsGenitive: {
				names: ["??","?","","?","?","?","?","?","???","??","??","?",""],
				namesAbbr: ["?","","","","","","","","?","","?","",""]
			},
			AM: null,
			PM: null,
			patterns: {
				d: "dd.MM.yyyy",
				D: "d MMMM yyyy '.'",
				t: "H:mm",
				T: "H:mm:ss",
				f: "d MMMM yyyy '.' H:mm",
				F: "d MMMM yyyy '.' H:mm:ss",
				Y: "MMMM yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":"? ?","AddNewTab":"  ","Alerts":"?","ApplyFilter":" ","Approve":"","Attachments":"?","Back":"?","Basic":"","Between":"","Book":"","Cancel":"","Checked":"","ClearFilter":"? ","Close":"","CloseCancelChanges":"   ?","CloseSaveChanges":"  ? ?","CloseTab":" ","ColumnPersonalization":"?? ?","Comments":"","Confirmation":"","Contains":"","CreateTab":"  ","Cut":"","Delete":"","DiscardUndo":"/","DisplayDropDownList":" ??? ??","Displaying":": ","DocWord":"","DoesNotContain":"? ?","DoesNotEndWith":"? ?? ","DoesNotEqual":"? ???","DoesNotStartWith":"? ?? ?","Download":"","Duplicate":"","Edit":"","EitherSelectedorNotSelected":"   ","Email":"? ","EndsWith":"?? ","EqualsStr":"???","ExpandCollapse":"/?","ExportFailed":" ??","ExportToExcel":"?  Excel","FileInUse":"  ???","FileInUseDetail":"   ,   ???    ? .","Filter":"","FilterMenu":" ","FilterOptions":" ","FilterWithinResults":" ","First":"","FirstView":" ?","Folder":"","ForgotPassword":" ?","Forward":"?","GetMoreRows":" ?","GreaterThan":" ","GreaterThanOrEquals":"   ???","GridSettings":" ?","GroupSelection":" ","Help":"","HideColumn":" ?","IsEmpty":"?","IsNotEmpty":"? ?","Last":"?","LastView":"? ?","LaunchActivate":"?/","LessThan":" ","LessThanOrEquals":"   ???","Links":"?","ListTabs":"? ? ","LoadingItem":" ? ","Maintenance":"?","Menu":"","New":"?","Next":"","NextView":" ?","No":"?","NotChecked":"?","Notes":"?","NotSelected":"? ","Of":"  ","Ok":"OK","Open":"","Password":"","Paste":"?","Phone":"","PleaseWait":"","Previous":"","PreviousView":" ?","Print":"","Queries":"?","Redo":"","Refresh":"","Reject":"","RememberMe":" ?  ? ","Reports":"","Reset":"?","Review":"?","RunFilter":"? ","RunJob":" ","Save":"","SaveBeforeClosing":"  ","SavedFilters":" ","SaveSubmit":"/","ScreenDesign":" ?","Search":"?","SelectContents":" ?","SelectDate":" ","SelectDeselect":"/? ?","Selected":": ","ServerName":"? ?","Settings":"??","ShowFilterRow":"  ?","SignIn":"","SortAscending":"  ?","SortDescending":"  ","Spreadsheet":"? ","StartsWith":"??? ?","StatusIndicator":" ??","Tasks":"","Today":"?","Translate":"?","UserID":" ?","Utilities":" ","Yes":"","Page":"","Rows":"","ShowingAll":" ?","SessionNavigation":"?? ??","ListAllMenuItems":"? ? ? ","NoRecordsFound":"?  ","SearchTree":"? ","Clear":"?","DrillDown":"?","Required":"  ???? ?","Available":"?:","Add":"","MoveDown":"? ","MoveUp":"? ","Remove":"","LastYear":"  ","NextMonth":" ? ??","NextWeek":"? ? ","NextYear":" ? ","OneMonthAgo":" ?? ","OneWeekAgo":"  ","SixMonthsAgo":" ","Time":"?","CannotBeSelected":"?  ? ?.","ResetToDefault":"?? ?   ","CloseOtherTabs":"  ","EmailValidation":" ? ? ? ","UrlValidation":" ? URL-?","EndofResults":" ","More":"...","RecordsPerPage":"? ?  ?","Maximize":"","Minimize":"","CloseAllTabs":" ? ","QuickDates":"? ","Finish":"","SetTextColor":"  ?","AttachmentRules":" ? ","AutoRefresh":"?? ","BarChart":"? ","CopyMail":"  ","CopyUrl":" URL-?","DistributeHorizontally":"?  ","ExpandAll":" ?","Generate":"","GenerateScript":" ?","NoAttachments":"? ","PieChart":"? ","QuickAccess":"? ?","RestoreUser":"?? ?","SaveConsolidate":" ?  ?","Screen Design":" ?","SelectAll":" ?","SpellCheck":" ","SubmitForApproval":"  ","TopDownSpread":"Top Down Spread","Timezone":"? ??","Loading":"...","NewNode":"? "}
});

}( this ));
/*
* Globalize Culture sl-SI
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "sl-SI", "default", {
	name: "sl-SI",
	englishName: "Slovenian (Slovenia)",
	nativeName: "slovenski (Slovenija)",
	language: "sl",
	numberFormat: {
		",": ".",
		".": ",",
		negativeInfinity: "-neskon?nost",
		positiveInfinity: "neskon?nost",
		percent: {
			pattern: ["-n%","n%"],
			",": ".",
			".": ","
		},
		currency: {
			pattern: ["-n $","n $"],
			",": ".",
			".": ",",
			symbol: ""
		}
	},
	calendars: {
		standard: {
			"/": ".",
			firstDay: 1,
			days: {
				names: ["nedelja","ponedeljek","torek","sreda","?etrtek","petek","sobota"],
				namesAbbr: ["ned","pon","tor","sre","?et","pet","sob"],
				namesShort: ["ne","po","to","sr","?e","pe","so"]
			},
			months: {
				names: ["januar","februar","marec","april","maj","junij","julij","avgust","september","oktober","november","december",""],
				namesAbbr: ["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec",""]
			},
			AM: null,
			PM: null,
			patterns: {
				d: "d.M.yyyy",
				D: "d. MMMM yyyy",
				t: "H:mm",
				T: "H:mm:ss",
				f: "d. MMMM yyyy H:mm",
				F: "d. MMMM yyyy H:mm:ss",
				M: "d. MMMM",
				Y: "MMMM yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":"Dodatna pomo?","AddNewTab":"Dodaj nov zavihek","Alerts":"Opozorila","ApplyFilter":"Uporabi filter","Approve":"Odobri","Attachments":"Priloge","Back":"Nazaj","Basic":"Osnovno","Between":"Med","Book":"Knjiga","Cancel":"Prekli?i","Checked":"Potrjeno","ClearFilter":"Po?isti filter","Close":"Zapri","CloseCancelChanges":"Zapri in prekli?i spremembe","CloseSaveChanges":"Zapri in shrani spremembe","CloseTab":"Zapri zavihek","ColumnPersonalization":"Prilagajanje stolpca","Comments":"Komentarji","Confirmation":"Potrditev","Contains":"Vsebuje","CreateTab":"Ustvari nov zavihek","Cut":"Izrei","Delete":"Izbrii","DiscardUndo":"Zavrzi/razveljavi","DisplayDropDownList":"Prikai spustni seznam","Displaying":"Prikazovanje: ","DocWord":"Dokument","DoesNotContain":"Ne vsebuje","DoesNotEndWith":"Se ne kon?a z","DoesNotEqual":"Ni enako","DoesNotStartWith":"Se ne za?ne z","Download":"Prenesi","Duplicate":"Podvoji","Edit":"Uredi","EitherSelectedorNotSelected":"Izbrano ali ni izbrano","Email":"E-pota","EndsWith":"Se kon?a z","EqualsStr":"Je enako","ExpandCollapse":"Raziri/strni","ExportFailed":"Izvoz ni uspel","ExportToExcel":"Izvozi v Excel","FileInUse":"Navedena datoteka je v uporabi","FileInUseDetail":"Zaprite datoteko v aplikaciji, v kateri se uporablja, ali navedite drugo ime datoteke.","Filter":"Filter","FilterMenu":"Meni filtra","FilterOptions":"Monosti filtra","FilterWithinResults":"Filter v rezultatih","First":"Prvi","FirstView":"Prvi pogled","Folder":"Mapa","ForgotPassword":"Ste pozabili svoje geslo?","Forward":"Posreduj","GetMoreRows":"Pridobi ve? vrstic","GreaterThan":"Ve?ji od","GreaterThanOrEquals":"Ve?ji od ali enak","GridSettings":"Nastavitve mree","GroupSelection":"Izbira skupine","Help":"Pomo?","HideColumn":"Skrij stolpec","IsEmpty":"Je prazen","IsNotEmpty":"Ni prazen","Last":"Zadnji","LastView":"Zadnji pogled","LaunchActivate":"Zaeni/aktiviraj","LessThan":"Manji od","LessThanOrEquals":"Manji od ali enak","Links":"Povezave","ListTabs":"Navedi vse zavihke","LoadingItem":"Nalaganje elementa ","Maintenance":"Vzdrevanje","Menu":"Meni","New":"Novo","Next":"Naprej","NextView":"Naslednji pogled","No":"Ne","NotChecked":"Ni potrjeno","Notes":"Opombe","NotSelected":"Ni izbrano","Of":" od ","Ok":"V redu","Open":"Odpri","Password":"Geslo","Paste":"Prilepi","Phone":"Telefon","PleaseWait":"Prosimo, po?akajte","Previous":"Prejnji","PreviousView":"Prejnji pogled","Print":"Natisni","Queries":"Poizvedbe","Redo":"Uveljavi","Refresh":"Osvei","Reject":"Zavrni","RememberMe":"Zapomni si me v tem ra?unalniku","Reports":"Poro?ila","Reset":"Ponastavi","Review":"Preglej","RunFilter":"Zaeni filter","RunJob":"Zaeni posel","Save":"Shrani","SaveBeforeClosing":"Shrani pred zapiranjem","SavedFilters":"Shranjeni filtri","SaveSubmit":"Shrani/predloi","ScreenDesign":"Na?rt zaslona","Search":"I?i","SelectContents":"Izberi vsebine","SelectDate":"Izberi datum","SelectDeselect":"Izberi vse/po?isti vse","Selected":"Izbrano: ","ServerName":"Ime strenika","Settings":"Nastavitve","ShowFilterRow":"Prikai vrstico filtra","SignIn":"Vpis","SortAscending":"Razvrsti nara?ajo?e","SortDescending":"Razvrsti padajo?e","Spreadsheet":"Preglednica","StartsWith":"Za?ne se z","StatusIndicator":"Indikator stanja","Tasks":"Opravila","Today":"Danes","Translate":"Prevedi","UserID":"ID uporabnika","Utilities":"Pripomo?ki","Yes":"Da","Page":"Stran","Rows":"Vrstice","ShowingAll":"Prikazuje vse","SessionNavigation":"Krmarjenje po seji","ListAllMenuItems":"Navedi vse menijske elemente","NoRecordsFound":"Noben zapis ni bil najden","SearchTree":"Iskalno drevo","Clear":"Po?isti","DrillDown":"Prikai na ravni z ve? podrobnostmi","Required":"To polje je zahtevano","Available":"Na voljo:","Add":"Dodaj","MoveDown":"Premakni navzdol","MoveUp":"Premakni navzgor","Remove":"Odstrani","LastYear":"Prejnje leto","NextMonth":"Naslednji mesec","NextWeek":"Naslednji teden","NextYear":"Naslednje leto","OneMonthAgo":"Pred enim mesecem","OneWeekAgo":"Pred enim tednom","SixMonthsAgo":"Pred estimi meseci","Time":"as","CannotBeSelected":"Te vrstice ni mogo?e izbrati.","ResetToDefault":"Ponastavi na privzeto postavitev","CloseOtherTabs":"Zapri druge zavihke","EmailValidation":"Vnesi veljaven e-potni naslov","UrlValidation":"Vnesi veljaven URL","EndofResults":"Konec rezultatov","More":"Ve? ...","RecordsPerPage":"Zapisov na stran","Maximize":"Pove?ajte","Minimize":"Minimiranje"}
});

}( this ));
/*
* Globalize Culture sr-Latn
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "sr-Latn", "default", {
	name: "sr-Latn",
	englishName: "Serbian (Latin)",
	nativeName: "srpski",
	language: "sr-Latn",
	numberFormat: {
		",": ".",
		".": ",",
		negativeInfinity: "-beskona?nost",
		positiveInfinity: "+beskona?nost",
		percent: {
			pattern: ["-n%","n%"],
			",": ".",
			".": ","
		},
		currency: {
			pattern: ["-n $","n $"],
			",": ".",
			".": ",",
			symbol: "Din."
		}
	},
	calendars: {
		standard: {
			"/": ".",
			firstDay: 1,
			days: {
				names: ["nedelja","ponedeljak","utorak","sreda","?etvrtak","petak","subota"],
				namesAbbr: ["ned","pon","uto","sre","?et","pet","sub"],
				namesShort: ["ne","po","ut","sr","?e","pe","su"]
			},
			months: {
				names: ["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar",""],
				namesAbbr: ["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec",""]
			},
			AM: null,
			PM: null,
			eras: [{"name":"n.e.","start":null,"offset":0}],
			patterns: {
				d: "d.M.yyyy",
				D: "d. MMMM yyyy",
				t: "H:mm",
				T: "H:mm:ss",
				f: "d. MMMM yyyy H:mm",
				F: "d. MMMM yyyy H:mm:ss",
				M: "d. MMMM",
				Y: "MMMM yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":"Dodatna pomo","AddNewTab":"Dodaj novu karticu","Alerts":"Obavetenja","ApplyFilter":"Primeni filter","Approve":"Odobri","Attachments":"Prilozi","Back":"Nazad","Basic":"Osnovni","Between":"Izmeu","Book":"Knjiga","Cancel":"Otkai","Checked":"Potvreno","ClearFilter":"Obrii filter","Close":"Zatvori","CloseCancelChanges":"Zatvori i otkai promene","CloseSaveChanges":"Zatvori i sa?uvaj promene","CloseTab":"Zatvori karticu","ColumnPersonalization":"Personalizacija kolone","Comments":"Komentari","Confirmation":"Potvrda","Contains":"Sadri","CreateTab":"Kreiraj novu karticu","Cut":"Iseci","Delete":"Izbrii","DiscardUndo":"Odbaci/opozovi","DisplayDropDownList":"Prikaz padajue liste","Displaying":"Prikaz: ","DocWord":"Dokument","DoesNotContain":"Ne sadri","DoesNotEndWith":"Ne zavrava se sa","DoesNotEqual":"Nije jednako","DoesNotStartWith":"Ne po?inje sa","Download":"Preuzmi","Duplicate":"Duplikat","Edit":"Uredi","EitherSelectedorNotSelected":"Izabrano ili Nije izabrano","Email":"E-pota","EndsWith":"Zavrava se sa","EqualsStr":"Jednako","ExpandCollapse":"Razvij/skupi","ExportFailed":"Izvoz nije izvren","ExportToExcel":"Izvoz u Excel","FileInUse":"Navedena datoteka je u upotrebi","FileInUseDetail":"Zatvorite datoteku u aplikaciji u kojoj se koristi ili navedite drugo ime datoteke.","Filter":"Filter","FilterMenu":"Meni filtera","FilterOptions":"Opcije filtera","FilterWithinResults":"Filtriranje rezultata","First":"Prvo","FirstView":"Prvi prikaz","Folder":"Fascikla","ForgotPassword":"Zaboravili ste lozinku?","Forward":"Napred","GetMoreRows":"Preuzmi dodatne redove","GreaterThan":"Vee od","GreaterThanOrEquals":"Vee od ili jednako","GridSettings":"Postavke mree","GroupSelection":"Izbor grupe","Help":"Pomo","HideColumn":"Sakrij kolonu","IsEmpty":"Je prazno","IsNotEmpty":"Nije prazno","Last":"Poslednje","LastView":"Poslednji prikaz","LaunchActivate":"Pokreni/aktiviraj","LessThan":"Manje od","LessThanOrEquals":"Manje od ili jednako","Links":"Veze","ListTabs":"Lista svih kartica","LoadingItem":"U?itavanje stavke ","Maintenance":"Odravanje","Menu":"Meni","New":"Novo","Next":"Sledee","NextView":"Sledei prikaz","No":"Ne","NotChecked":"Nije potvreno","Notes":"Beleke","NotSelected":"Nije izabrano","Of":" od ","Ok":"U redu","Open":"Otvori","Password":"Lozinka","Paste":"Nalepi","Phone":"Telefon","PleaseWait":"Sa?ekajte","Previous":"Prethodno","PreviousView":"Prethodni prikaz","Print":"Odtampaj","Queries":"Upiti","Redo":"Ponovi radnju","Refresh":"Osvei","Reject":"Odbaci","RememberMe":"Zapamti me na ovom ra?unaru","Reports":"Izvetaji","Reset":"Poniti","Review":"Pregled","RunFilter":"Pokreni filter","RunJob":"Pokreni posao","Save":"Sa?uvaj","SaveBeforeClosing":"Sa?uvaj pre zatvaranja","SavedFilters":"Sa?uvani filteri","SaveSubmit":"Sa?uvaj/prosledi","ScreenDesign":"Dizajn ekrana","Search":"Pretraga","SelectContents":"Izbor sadraja","SelectDate":"Izbor datuma","SelectDeselect":"Izbor svega/Opoziv izbora","Selected":"Izabrano: ","ServerName":"Ime servera","Settings":"Postavke","ShowFilterRow":"Prikai red sa filterima","SignIn":"Prijavljivanje","SortAscending":"Sortiraj po rastuem redosledu","SortDescending":"Sortiraj po opadajuem redosledu","Spreadsheet":"Unakrsna tabela","StartsWith":"Po?inje sa","StatusIndicator":"Indikator statusa","Tasks":"Zadaci","Today":"Danas","Translate":"Prevedi","UserID":"ID korisnika","Utilities":"Usluni programi","Yes":"Da","Page":"Stranica","Rows":"Redovi","ShowingAll":"Prikaz svih stavki","SessionNavigation":"Navigacija sesije","ListAllMenuItems":"Lista svih stavki menija","NoRecordsFound":"Nije pronaen nijedan zapis","SearchTree":"Pretraga stabla","Clear":"Obrii","DrillDown":"Dubinska analiza","Required":"Ovo polje je obavezno","Available":"Raspoloivo:","Add":"Dodaj","MoveDown":"Premesti nadole","MoveUp":"Premesti nagore","Remove":"Ukloni","LastYear":"Prola godina","NextMonth":"Sledei mesec","NextWeek":"Sledea nedelja","NextYear":"Sledea godina","OneMonthAgo":"Pre mesec dana","OneWeekAgo":"Pre nedelju dana","SixMonthsAgo":"Pre est meseci","Time":"Vreme","CannotBeSelected":"Nije mogue izabrati ovaj red.","ResetToDefault":"Poniti na podrazumevani raspored","CloseOtherTabs":"Zatvori ostale kartice","EmailValidation":"Unesite vaeu e-adresu","UrlValidation":"Unesite vaeu URL adresu","EndofResults":"Kraj rezultata","More":"Jo...","RecordsPerPage":"Zapisa po stranici","Maximize":"","Minimize":""}
});

}( this ));
/*
* Globalize Culture sv-SE
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "sv-SE", "default", {
	name: "sv-SE",
	englishName: "Swedish (Sweden)",
	nativeName: "svenska (Sverige)",
	language: "sv",
	numberFormat: {
		",": "",
		".": ",",
		negativeInfinity: "-INF",
		positiveInfinity: "INF",
		percent: {
			",": "",
			".": ","
		},
		currency: {
			pattern: ["-n $","n $"],
			",": ".",
			".": ",",
			symbol: "kr"
		}
	},
	calendars: {
		standard: {
			"/": "-",
			firstDay: 1,
			days: {
				names: ["sndag","mndag","tisdag","onsdag","torsdag","fredag","lrdag"],
				namesAbbr: ["s","m","ti","on","to","fr","l"],
				namesShort: ["s","m","ti","on","to","fr","l"]
			},
			months: {
				names: ["januari","februari","mars","april","maj","juni","juli","augusti","september","oktober","november","december",""],
				namesAbbr: ["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec",""]
			},
			AM: null,
			PM: null,
			patterns: {
				d: "yyyy-MM-dd",
				D: "'den 'd MMMM yyyy",
				t: "HH:mm",
				T: "HH:mm:ss",
				f: "'den 'd MMMM yyyy HH:mm",
				F: "'den 'd MMMM yyyy HH:mm:ss",
				M: "'den 'd MMMM",
				Y: "MMMM yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":"Ytterligare hjlp","AddNewTab":"Lgg till ny flik","Alerts":"Aviseringar","ApplyFilter":"Anvnd filter","Approve":"Godknn","Attachments":"Bilagor","Back":"Tillbaka","Basic":"Grundlggande","Between":"Mellan","Book":"Bok","Cancel":"Avbryt","Checked":"Kontrollerade","ClearFilter":"Rensa filter","Close":"Stng","CloseCancelChanges":"Stng och avbryt ndringar","CloseSaveChanges":"Stng och spara ndringar","CloseTab":"Stng flik","ColumnPersonalization":"Kolumnanpassning","Comments":"Kommentarer","Confirmation":"Bekrftelse","Contains":"Innehller","CreateTab":"Skapa en ny flik","Cut":"Klipp ut","Delete":"Radera","DiscardUndo":"Kasta/ngra","DisplayDropDownList":"Visa listruta","Displaying":"Visar: ","DocWord":"Dokument","DoesNotContain":"Innehller inte","DoesNotEndWith":"Slutar inte med","DoesNotEqual":"r inte lika med","DoesNotStartWith":"Brjar inte med","Download":"Hmta","Duplicate":"Duplicera","Edit":"Redigera","EitherSelectedorNotSelected":"Antingen markerad eller inte","Email":"E-post","EndsWith":"Slutar med","EqualsStr":"Lika med","ExpandCollapse":"Visa/dlj","ExportFailed":"Exporten misslyckades","ExportToExcel":"Exportera till Excel","FileInUse":"Angiven fil anvnds","FileInUseDetail":"Stng filen i programmet dr den anvnds eller byt namn p den.","Filter":"Filter","FilterMenu":"Filtermeny","FilterOptions":"Filteralternativ","FilterWithinResults":"Filtrera resultatet","First":"Frsta","FirstView":"Frsta vyn","Folder":"Mapp","ForgotPassword":"Glmt lsenordet?","Forward":"Framt","GetMoreRows":"Visa fler rader","GreaterThan":"Strre n","GreaterThanOrEquals":"Strre n eller lika med","GridSettings":"Rutntsinstllningar","GroupSelection":"Gruppval","Help":"Hjlp","HideColumn":"Dlj kolumn","IsEmpty":"r tom","IsNotEmpty":"r inte tom","Last":"Sista","LastView":"Sista vyn","LaunchActivate":"Starta/aktivera","LessThan":"Mindre n","LessThanOrEquals":"Mindre n eller lika med","Links":"Lnkar","ListTabs":"Visa alla flikar","LoadingItem":"Lser in artikel ","Maintenance":"Underhll","Menu":"Meny","New":"Nytt","Next":"Nsta","NextView":"Nsta vy","No":"Nej","NotChecked":"Inte kontrollerade","Notes":"Anteckningar","NotSelected":"Ej vald","Of":" av ","Ok":"OK","Open":"ppna","Password":"Lsenord","Paste":"Klistra in","Phone":"Telefon","PleaseWait":"Vnta","Previous":"Fregende","PreviousView":"Fregende vy","Print":"Skriv ut","Queries":"Frgor","Redo":"Gr om","Refresh":"Uppdatera","Reject":"Avvisa","RememberMe":"Kom ihg mig p den hr datorn","Reports":"Rapporter","Reset":"terstll","Review":"Granska","RunFilter":"Kr filter","RunJob":"Kr jobb","Save":"Spara","SaveBeforeClosing":"Spara innan stngning","SavedFilters":"Sparade filter","SaveSubmit":"Spara/skicka","ScreenDesign":"Skrmbildsdesign","Search":"Sk","SelectContents":"Vlj innehll","SelectDate":"Vlj ett datum","SelectDeselect":"Markera/avmarkera allt","Selected":"Markerade: ","ServerName":"Servernamn","Settings":"Instllningar","ShowFilterRow":"Visa filterrad","SignIn":"Logga in","SortAscending":"Sortera stigande","SortDescending":"Sortera fallande","Spreadsheet":"Kalkylblad","StartsWith":"Brjar med","StatusIndicator":"Statusindikator","Tasks":"Uppgifter","Today":"Idag","Translate":"verstt","UserID":"Anvndar-ID","Utilities":"Verktyg","Yes":"Ja","Page":"Sida","Rows":"Rader","ShowingAll":"Visa alla","SessionNavigation":"Sessionsnavigering","ListAllMenuItems":"Visa alla menyposter","NoRecordsFound":"Inga poster hittades","SearchTree":"Sk i trd","Clear":"Rensa","DrillDown":"Bryt ned","Required":"Fltet r obligatoriskt","Available":"Tillgngligt:","Add":"Lgg till","MoveDown":"Flytta ned","MoveUp":"Flytta upp","Remove":"Ta bort","LastYear":"Senaste ret","NextMonth":"Nsta mnad","NextWeek":"Nsta vecka","NextYear":"Nsta r","OneMonthAgo":"En mnad sedan","OneWeekAgo":"En vecka sedan","SixMonthsAgo":"Sex mnader sedan","Time":"Klockslag","CannotBeSelected":"Den hr raden kan inte vljas.","ResetToDefault":"terstll till standardlayouten","CloseOtherTabs":"Stng andra flikar","EmailValidation":"Ange en giltig e-postadress","UrlValidation":"Ange en giltig URL","EndofResults":"Slut p resultaten","More":"Fler ...","RecordsPerPage":"Poster per sida","Maximize":"Maximera","Minimize":"Minimera","CloseAllTabs":"Stng alla flikar","QuickDates":"Snabbdatum","Finish":"Slutfr","SetTextColor":"Vlj textfrg","AttachmentRules":"Kriterier fr bilaga","AutoRefresh":"Automatisk uppdatering","BarChart":"Stapeldiagram","CopyMail":"Kopiera och skicka e-post","CopyUrl":"Kopiera URL","DistributeHorizontally":"Frdela horisontellt","ExpandAll":"Expandera alla","Generate":"Generera","GenerateScript":"Generera skript","NoAttachments":"Inga bilagor","PieChart":"Cirkeldiagram","QuickAccess":"Snabb tkomst","RestoreUser":"terstll anvndare","SaveConsolidate":"Spara med lokal konsolidering","Screen Design":"Skrmdesign","SelectAll":"Markera alla","SpellCheck":"Stavningskontroll","SubmitForApproval":"Skicka fr godknnande","TopDownSpread":"Top Down Spread","Timezone":"Tidszon","Loading":"Lser in ...","NewNode":"Ny nod"}
});

}( this ));
/*
* Globalize Culture th-TH
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "th-TH", "default", {
	name: "th-TH",
	englishName: "Thai (Thailand)",
	nativeName: " ()",
	language: "th",
	numberFormat: {
		currency: {
			pattern: ["-$n","$n"],
			symbol: ""
		}
	},
	calendars: {
		standard: {
			name: "ThaiBuddhist",
			firstDay: 1,
			days: {
				names: ["","","","","","?",""],
				namesAbbr: [".",".",".",".",".",".","."],
				namesShort: ["","","","","","",""]
			},
			months: {
				names: ["?","?","","","","","??","","?","","?","",""],
				namesAbbr: ["..","?..","..","..","..","..","?..","..","?..","..","..","..",""]
			},
			eras: [{"name":"..","start":null,"offset":-543}],
			twoDigitYearMax: 2572,
			patterns: {
				d: "d/M/yyyy",
				D: "d MMMM yyyy",
				t: "H:mm",
				T: "H:mm:ss",
				f: "d MMMM yyyy H:mm",
				F: "d MMMM yyyy H:mm:ss",
				M: "dd MMMM",
				Y: "MMMM yyyy"
			}
		},
		Gregorian_Localized: {
			firstDay: 1,
			days: {
				names: ["","","","","","?",""],
				namesAbbr: [".",".",".",".",".",".","."],
				namesShort: ["","","","","","",""]
			},
			months: {
				names: ["?","?","","","","","??","","?","","?","",""],
				namesAbbr: ["..","?..","..","..","..","..","?..","..","?..","..","..","..",""]
			},
			patterns: {
				d: "d/M/yyyy",
				D: "''dddd'' d MMMM yyyy",
				t: "H:mm",
				T: "H:mm:ss",
				f: "''dddd'' d MMMM yyyy H:mm",
				F: "''dddd'' d MMMM yyyy H:mm:ss",
				M: "dd MMMM",
				Y: "MMMM yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":"","AddNewTab":"?","Alerts":"?","ApplyFilter":"?","Approve":"","Attachments":"??","Back":"?","Basic":"?","Between":"","Book":"","Cancel":"??","Checked":"?","ClearFilter":"???","Close":"?","CloseCancelChanges":"??????","CloseSaveChanges":"?????","CloseTab":"??","ColumnPersonalization":"??","Comments":"?","Confirmation":"?","Contains":"","CreateTab":"?","Cut":"?","Delete":"","DiscardUndo":"??/?","DisplayDropDownList":"?????","Displaying":"???: ","DocWord":"?","DoesNotContain":"","DoesNotEndWith":"?","DoesNotEqual":"?","DoesNotStartWith":"?","Download":"??","Duplicate":"","Edit":"??","EitherSelectedorNotSelected":"??","Email":"","EndsWith":"?","EqualsStr":"?","ExpandCollapse":"/?","ExportFailed":"?","ExportToExcel":"? Excel","FileInUse":"?","FileInUseDetail":"??? ???","Filter":"?","FilterMenu":"?","FilterOptions":"??","FilterWithinResults":"?","First":"??","FirstView":"??","Folder":"?","ForgotPassword":"","Forward":"","GetMoreRows":"??","GreaterThan":"??","GreaterThanOrEquals":"???","GridSettings":"???","GroupSelection":"???","Help":"","HideColumn":"","IsEmpty":"","IsNotEmpty":"","Last":"?","LastView":"?","LaunchActivate":"/?","LessThan":"?","LessThanOrEquals":"??","Links":"","ListTabs":"??","LoadingItem":"?? ","Maintenance":"","Menu":"","New":"","Next":"","NextView":"","No":"","NotChecked":"?","Notes":"","NotSelected":"??","Of":"  ","Ok":"","Open":"?","Password":"","Paste":"","Phone":"","PleaseWait":"?","Previous":"?","PreviousView":"?","Print":"","Queries":"","Redo":"","Refresh":"","Reject":"?","RememberMe":"","Reports":"","Reset":"","Review":"","RunFilter":"?","RunJob":"","Save":"?","SaveBeforeClosing":"???","SavedFilters":"???","SaveSubmit":"?/","ScreenDesign":"?","Search":"","SelectContents":"?","SelectDate":"?","SelectDeselect":"?/? ?","Selected":"??: ","ServerName":"","Settings":"?","ShowFilterRow":"????","SignIn":"","SortAscending":"???","SortDescending":"???","Spreadsheet":"?","StartsWith":"?","StatusIndicator":"?","Tasks":"","Today":"","Translate":"?","UserID":"User ID","Utilities":"?","Yes":"","Page":"","Rows":"?","ShowingAll":"???","SessionNavigation":"?","ListAllMenuItems":"? ?","NoRecordsFound":"?","SearchTree":"??","Clear":"","DrillDown":"","Required":"??","Available":":","Add":"","MoveDown":"","MoveUp":"","Remove":"?","LastYear":"?","NextMonth":"?","NextWeek":"?","NextYear":"","OneMonthAgo":"?","OneWeekAgo":"?","SixMonthsAgo":"??","Time":"","CannotBeSelected":"???","ResetToDefault":"","CloseOtherTabs":"??","EmailValidation":"?","UrlValidation":" URL ?","EndofResults":"?","More":"...","RecordsPerPage":"?","Maximize":"","Minimize":"?"}
});

}( this ));
/*
* Globalize Culture tr-TR
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "tr-TR", "default", {
	name: "tr-TR",
	englishName: "Turkish (Turkey)",
	nativeName: "Trke (Trkiye)",
	language: "tr",
	numberFormat: {
		",": ".",
		".": ",",
		percent: {
			pattern: ["-%n","%n"],
			",": ".",
			".": ","
		},
		currency: {
			pattern: ["-n $","n $"],
			",": ".",
			".": ",",
			symbol: "TL"
		}
	},
	calendars: {
		standard: {
			"/": ".",
			firstDay: 1,
			days: {
				names: ["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],
				namesAbbr: ["Paz","Pzt","Sal","ar","Per","Cum","Cmt"],
				namesShort: ["Pz","Pt","Sa","a","Pe","Cu","Ct"]
			},
			months: {
				names: ["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk",""],
				namesAbbr: ["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara",""]
			},
			AM: null,
			PM: null,
			patterns: {
				d: "dd.MM.yyyy",
				D: "dd MMMM yyyy dddd",
				t: "HH:mm",
				T: "HH:mm:ss",
				f: "dd MMMM yyyy dddd HH:mm",
				F: "dd MMMM yyyy dddd HH:mm:ss",
				M: "dd MMMM",
				Y: "MMMM yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":"Ek Yardm","AddNewTab":"Yeni Sekme Ekle","Alerts":"Uyarlar","ApplyFilter":"Filtre Uygula","Approve":"Onayla","Attachments":"Eklentiler","Back":"Geri","Basic":"Temel","Between":"Arasnda","Book":"Kitap","Cancel":"ptal","Checked":"Kontrol Edildi","ClearFilter":"Filtreyi Temizle","Close":"Kapat","CloseCancelChanges":"Kapat ve Deiiklikleri ptal Et","CloseSaveChanges":"Kapat ve Deiiklikleri Kaydet","CloseTab":"Sekmeyi Kapat","ColumnPersonalization":"Stun Kiiselletirme","Comments":"Yorumlar","Confirmation":"Onay","Contains":"unu erir","CreateTab":"Yeni bir Sekme Olutur","Cut":"Kes","Delete":"Sil","DiscardUndo":"Vazge/Geri Al","DisplayDropDownList":"Alr listeyi gster","Displaying":"Gsterilen: ","DocWord":"Belge","DoesNotContain":"unu ermez","DoesNotEndWith":"ununla Bitmez","DoesNotEqual":"una Eit Deil","DoesNotStartWith":"ununla balamaz","Download":"ndir","Duplicate":"Yinelenen","Edit":"Dzenle","EitherSelectedorNotSelected":"Seili veya Seili Deil","Email":"E-posta","EndsWith":"ununla Biter","EqualsStr":"una Eit","ExpandCollapse":"Genilet/Daralt","ExportFailed":"Dar Aktarma Baarsz","ExportToExcel":"Excel\u0027e Aktar","FileInUse":"Belirtilen Dosya Kullanmda","FileInUseDetail":"Dosyann kullanmda olduu uygulamay kapatn veya farkl bir dosya ad belirtin.","Filter":"Filtrele","FilterMenu":"Filtreleme Mens","FilterOptions":"Filtreleme Seenekleri","FilterWithinResults":"Sonularda Filtrele","First":"Birinci","FirstView":"Birinci Grnm","Folder":"Klasr","ForgotPassword":"Parolanz m Unuttunuz?","Forward":"leri","GetMoreRows":"Daha Fazla Satr Al","GreaterThan":"undan Daha Fazla","GreaterThanOrEquals":"undan Daha Fazla veya Eit","GridSettings":"Klavuz Ayarlar","GroupSelection":"Grup Seimi","Help":"Yardm","HideColumn":"Stunu Gizle","IsEmpty":"Bo","IsNotEmpty":"Bo Deil","Last":"Son","LastView":"Son Grnm","LaunchActivate":"Balat/Etkinletir","LessThan":"undan Daha Az","LessThanOrEquals":"undan Daha Az veya Eit","Links":"Balantlar","ListTabs":"Tm Sekmeleri Listele","LoadingItem":"e ykleniyor ","Maintenance":"Bakm","Menu":"Men","New":"Yeni ","Next":"Sonraki","NextView":"Sonraki Grnm","No":"Hayr","NotChecked":"Kontrol Edilmedi","Notes":"Notlar","NotSelected":"Seilmedi","Of":" / ","Ok":"Tamam","Open":"A","Password":"Parola","Paste":"Yaptr","Phone":"Telefon","PleaseWait":"Ltfen Bekleyin","Previous":"nceki","PreviousView":"nceki Grnm","Print":"Yazdr ","Queries":"Sorgular","Redo":"Yinele","Refresh":"Yenile","Reject":"Reddet","RememberMe":"Bu bilgisayarda beni hatrla","Reports":"Raporlar","Reset":"Sfrla","Review":"Gzden Geir","RunFilter":"Filtreyi altr","RunJob":"i altr","Save":"Kaydet","SaveBeforeClosing":"Kapatmadan nce Kaydet","SavedFilters":"Kaydedilen Filtreler","SaveSubmit":"Kaydet/Gnder","ScreenDesign":"Ekran Tasarm","Search":"Ara","SelectContents":"erii Se","SelectDate":"Bir Tarih Se","SelectDeselect":"Hepsini Se / Seimini Kaldr","Selected":"Seilenler: ","ServerName":"Sunucu Ad","Settings":"Ayarlar","ShowFilterRow":"Filtre Satrn Gster","SignIn":"Oturum A","SortAscending":"Artan ekilde Srala","SortDescending":"Azalan ekilde Srala","Spreadsheet":"Elektronik tablo","StartsWith":"ununla biter","StatusIndicator":"Durum Gstergesi","Tasks":"Grevler","Today":"Bugn","Translate":"evir","UserID":"Kullanc kimlii","Utilities":"Yardmc uygulamalar","Yes":"Evet","Page":"Sayfa","Rows":"Satrlar","ShowingAll":"Hepsi Gsteriliyor","SessionNavigation":"Oturum Gezintisi","ListAllMenuItems":"Tm Men eleri Gsteriliyor","NoRecordsFound":"Kayt Bulunmad","SearchTree":"Arama Aac","Clear":"Temizle","DrillDown":"Detaya Git","Required":"Bu alan gerekli","Available":"Kullanlabilir:","Add":"Ekle","MoveDown":"Aa Ta","MoveUp":"Yukar Ta","Remove":"Kaldr","LastYear":"Geen Yl","NextMonth":"Sonraki Ay","NextWeek":"Sonraki Hafta","NextYear":"Sonraki Yl","OneMonthAgo":"Bir Ay nce","OneWeekAgo":"Bir Hafta nce","SixMonthsAgo":"Alt Ay nce","Time":"Saat","CannotBeSelected":"Bu satr seilemez.","ResetToDefault":"Varsaylan dzene sfrla","CloseOtherTabs":"Dier Sekmeleri Kapat","EmailValidation":"Geerli bir e-posta adresi girin.","UrlValidation":"Geerli bir URL girin","EndofResults":"Arama Sonular Sonu","More":"Daha Fazla...","RecordsPerPage":"Sayfa Bana Kayt","Maximize":"maksimuma karmak","Minimize":"azaltmak"}
});

}( this ));
/*
* Globalize Culture vi-VN
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "vi-VN", "default", {
	name: "vi-VN",
	englishName: "Vietnamese (Vietnam)",
	nativeName: "Ti?ng Vit (Vit Nam)",
	language: "vi",
	numberFormat: {
		",": ".",
		".": ",",
		percent: {
			",": ".",
			".": ","
		},
		currency: {
			pattern: ["-n $","n $"],
			",": ".",
			".": ",",
			symbol: ""
		}
	},
	calendars: {
		standard: {
			firstDay: 1,
			days: {
				names: ["Chu Nht","Th? Hai","Th? Ba","Th? T","Th? Nm","Th? Sa?u","Th? Bay"],
				namesAbbr: ["CN","Hai","Ba","T","Nm","Sa?u","Bay"],
				namesShort: ["C","H","B","T","N","S","B"]
			},
			months: {
				names: ["Tha?ng Ging","Tha?ng Hai","Tha?ng Ba","Tha?ng T","Tha?ng Nm","Tha?ng Sa?u","Tha?ng Bay","Tha?ng Ta?m","Tha?ng Chi?n","Tha?ng Mi","Tha?ng Mi Mt","Tha?ng Mi Hai",""],
				namesAbbr: ["Thg1","Thg2","Thg3","Thg4","Thg5","Thg6","Thg7","Thg8","Thg9","Thg10","Thg11","Thg12",""]
			},
			AM: ["SA","sa","SA"],
			PM: ["CH","ch","CH"],
			patterns: {
				d: "dd/MM/yyyy",
				D: "dd MMMM yyyy",
				f: "dd MMMM yyyy h:mm tt",
				F: "dd MMMM yyyy h:mm:ss tt",
				M: "dd MMMM",
				Y: "MMMM yyyy"
			}
		}
	},
	messages: {"AdditionalHelp":"Tr gip b sung","AddNewTab":"Thm tab mi","Alerts":"Cnh bo","ApplyFilter":"?p dng b l?c","Approve":"Chp thun","Attachments":"Tp nh km","Back":"Li","Basic":"C bn","Between":"Gia","Book":"Sch","Cancel":"Hy b?","Checked":"? nh du","ClearFilter":"Xa b l?c","Close":"?ng","CloseCancelChanges":"?ng v hy b? cc thay i","CloseSaveChanges":"?ng v lu cc thay i","CloseTab":"?ng tab","ColumnPersonalization":"C nhn ha ct","Comments":"Ch thch","Confirmation":"Xc nhn","Contains":"C cha","CreateTab":"To tab mi","Cut":"Ct","Delete":"Xa","DiscardUndo":"B?/Hon tc","DisplayDropDownList":"Hin th danh sch th xung","Displaying":"?ang hin th: ","DocWord":"Ti liu","DoesNotContain":"Khng cha","DoesNotEndWith":"Khng kt thc bng","DoesNotEqual":"Khng bng","DoesNotStartWith":"Khng bt u vi","Download":"Ti xung","Duplicate":"Trng lp","Edit":"Sa","EitherSelectedorNotSelected":"Hoc c ch?n hoc khng c ch?n","Email":"Email","EndsWith":"Kt thc bng","EqualsStr":"Bng","ExpandCollapse":"M rng/Thu g?n","ExportFailed":"Xut khng thnh cng","ExportToExcel":"Xut sang Excel","FileInUse":"Tp xc nh ang c s dng","FileInUseDetail":"?ng tp trong ng dng ni n ang c s dng hoc xc nh mt tn tp khc.","Filter":"L?c","FilterMenu":"Menu b l?c","FilterOptions":"Ty ch?n b l?c","FilterWithinResults":"L?c trong cc kt qu","First":"?u tin","FirstView":"Dng xem u tin","Folder":"Th mc","ForgotPassword":"Bn qun mt khu?","Forward":"Chuyn tip","GetMoreRows":"Ly thm hng","GreaterThan":"Ln hn","GreaterThanOrEquals":"Ln hn hoc bng","GridSettings":"Thit t li","GroupSelection":"La ch?n nhm","Help":"Tr gip","HideColumn":"Ct n","IsEmpty":"?ang trng","IsNotEmpty":"Khng trng","Last":"Cui cng","LastView":"Dng xem cui cng","LaunchActivate":"Khi chy/Kch hot","LessThan":"?t hn","LessThanOrEquals":"?t hn hoc bng","Links":"Lin kt","ListTabs":"Lit k tt c cc tab","LoadingItem":"?ang ti mc ","Maintenance":"Bo tr","Menu":"Menu","New":"Mi","Next":"Tip theo","NextView":"Dng xem tip theo","No":"Khng","NotChecked":"Khng c nh du","Notes":"Ghi ch","NotSelected":"Khng c ch?n","Of":" ca ","Ok":"OK","Open":"M","Password":"Mt khu","Paste":"Dn","Phone":"?in thoi","PleaseWait":"Vui lng ch?","Previous":"Trc","PreviousView":"Dng xem trc","Print":"In","Queries":"Truy vn","Redo":"Lm li","Refresh":"Lm mi","Reject":"T chi","RememberMe":"Ghi nh ti trn my tnh ny","Reports":"Bo co","Reset":"?t li","Review":"Xem li","RunFilter":"Chy b l?c","RunJob":"Chy tc v","Save":"Lu","SaveBeforeClosing":"Lu trc khi ng","SavedFilters":"B l?c  lu","SaveSubmit":"Lu/Gi","ScreenDesign":"Thit k mn hnh","Search":"Tm kim","SelectContents":"Ch?n ni dung","SelectDate":"Ch?n mt ngy","SelectDeselect":"Ch?n / B? ch?n tt c","Selected":"?c ch?n: ","ServerName":"Tn my ch","Settings":"Thit t","ShowFilterRow":"Hin th dng b l?c","SignIn":"?ng nhp","SortAscending":"Sp xp tng dn","SortDescending":"Sp xp gim dn","Spreadsheet":"Bng tnh","StartsWith":"Bt u vi","StatusIndicator":"Ch bo trng thi","Tasks":"Nhim v","Today":"Hm nay","Translate":"Dch","UserID":"ID ng?i dng","Utilities":"Tin ch","Yes":"C","Page":"Trang","Rows":"Hng","ShowingAll":"Hin tt c","SessionNavigation":"Dn hng theo phin lm vic","ListAllMenuItems":"Lit k tt c mc menu","NoRecordsFound":"Khng tm thy bn ghi","SearchTree":"Tm kim cy","Clear":"Xa","DrillDown":"Truy su xung","Required":"Tr?ng ny l bt buc","Available":"Sn c:","Add":"Thm","MoveDown":"Di chuyn xung","MoveUp":"Di chuyn ln","Remove":"Loi b?","LastYear":"Nm ngoi","NextMonth":"Thng sau","NextWeek":"Tun sau","NextYear":"Nm sau","OneMonthAgo":"Mt thng trc","OneWeekAgo":"Mt tun trc","SixMonthsAgo":"Su thng trc","Time":"Th?i gian","CannotBeSelected":"Khng ch?n c hng ny.","ResetToDefault":"?t li v? b tr mc nh","CloseOtherTabs":"?ng cc tab khc","EmailValidation":"Hy nhp a ch e-mail hp l","UrlValidation":"Hy nhp URL hp l","EndofResults":"Cui kt qu","More":"Thm...","RecordsPerPage":"S bn ghi mi trang","Maximize":"Ti a ha","Minimize":"Gim thiu"}
});

}( this ));
/*
* Globalize Culture zh-CN
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "zh-CN", "default", {
	name: "zh-CN",
	englishName: "Chinese (Simplified, PRC)",
	nativeName: "(?)",
	language: "zh-CHS",
	numberFormat: {
		NaN: "?",
		negativeInfinity: "",
		positiveInfinity: "",
		percent: {
			pattern: ["-n%","n%"]
		},
		currency: {
			pattern: ["$-n","$n"],
			symbol: ""
		}
	},
	calendars: {
		standard: {
			days: {
				names: ["","","","","","",""],
				namesAbbr: ["","","","","","",""],
				namesShort: ["","","","","","",""]
			},
			months: {
				names: ["","","","","","","","","?","??","??","??",""],
				namesAbbr: ["","","","","","","","","?","??","??","??",""]
			},
			AM: ["?","?","?"],
			PM: ["?","?","?"],
			eras: [{"name":"","start":null,"offset":0}],
			patterns: {
				d: "yyyy/M/d",
				D: "yyyy''M''d''",
				t: "H:mm",
				T: "H:mm:ss",
				f: "yyyy''M''d'' H:mm",
				F: "yyyy''M''d'' H:mm:ss",
				M: "M''d''",
				Y: "yyyy''M''"
			}
		}
	},
	messages: {"AdditionalHelp":"","AddNewTab":"?","Alerts":"","ApplyFilter":"","Approve":"","Attachments":"","Back":"?","Basic":"","Between":"","Book":"","Cancel":"?","Checked":"","ClearFilter":"","Close":"","CloseCancelChanges":"?","CloseSaveChanges":"?","CloseTab":"?","ColumnPersonalization":"","Comments":"","Confirmation":"","Contains":"?","CreateTab":"?","Cut":"","Delete":"","DiscardUndo":"/","DisplayDropDownList":"","Displaying":": ","DocWord":"","DoesNotContain":"??","DoesNotEndWith":"??","DoesNotEqual":"?","DoesNotStartWith":"?","Download":"","Duplicate":"?","Edit":"","EitherSelectedorNotSelected":"?","Email":"?","EndsWith":"?","EqualsStr":"","ExpandCollapse":"/?","ExportFailed":"","ExportToExcel":" Excel","FileInUse":"","FileInUseDetail":"???","Filter":"","FilterMenu":"??","FilterOptions":"","FilterWithinResults":"","First":"","FirstView":"","Folder":"","ForgotPassword":"??","Forward":"?","GetMoreRows":"?","GreaterThan":"","GreaterThanOrEquals":"","GridSettings":"","GroupSelection":"","Help":"","HideColumn":"??","IsEmpty":"","IsNotEmpty":"?","Last":"?","LastView":"?","LaunchActivate":"?/","LessThan":"?","LessThanOrEquals":"?","Links":"","ListTabs":"?","LoadingItem":" ","Maintenance":"","Menu":"??","New":"","Next":"","NextView":"","No":"?","NotChecked":"","Notes":"","NotSelected":"","Of":" / ","Ok":"","Open":"","Password":"?","Paste":"","Phone":"?","PleaseWait":"?","Previous":"","PreviousView":"","Print":"?","Queries":"","Redo":"??","Refresh":"","Reject":"?","RememberMe":"?","Reports":"","Reset":"?","Review":"?","RunFilter":"?","RunJob":"?","Save":"?","SaveBeforeClosing":"??","SavedFilters":"?","SaveSubmit":"?/??","ScreenDesign":"?","Search":"?","SelectContents":"","SelectDate":"","SelectDeselect":"/","Selected":": ","ServerName":"???","Settings":"","ShowFilterRow":"","SignIn":"","SortAscending":"???","SortDescending":"???","Spreadsheet":"?","StartsWith":"","StatusIndicator":"?","Tasks":"","Today":"","Translate":"","UserID":" ID","Utilities":"","Yes":"","Page":"","Rows":"","ShowingAll":"","SessionNavigation":"?","ListAllMenuItems":"??","NoRecordsFound":"","SearchTree":"?","Clear":"","DrillDown":"","Required":"?","Available":"?:","Add":"","MoveDown":"","MoveUp":"","Remove":"","LastYear":"","NextMonth":"","NextWeek":"","NextYear":"","OneMonthAgo":"?","OneWeekAgo":"?","SixMonthsAgo":"??","Time":"","CannotBeSelected":"?","ResetToDefault":"?","CloseOtherTabs":"?","EmailValidation":"??","UrlValidation":" URL","EndofResults":"","More":"...","RecordsPerPage":"?","Maximize":"","Minimize":"?","CloseAllTabs":"?","QuickDates":"","Finish":"?","SetTextColor":"","AttachmentRules":"","AutoRefresh":"","BarChart":"?","CopyMail":"???","CopyUrl":"? URL","DistributeHorizontally":"","ExpandAll":"","Generate":"?","GenerateScript":"?","NoAttachments":"","PieChart":"","QuickAccess":"","RestoreUser":"","SaveConsolidate":"???","Screen Design":"?","SelectAll":"","SpellCheck":"","SubmitForApproval":"??","TopDownSpread":"","Timezone":"","Loading":"...","NewNode":""}
});

}( this ));
/*
* Globalize Culture zh-TW
*
* http://github.com/jquery/globalize
*
* Copyright Software Freedom Conservancy, Inc.
* Dual licensed under the MIT or GPL Version 2 licenses.
* http://jquery.org/license
*
* This file was generated by the Globalize Culture Generator
* Translation: bugs found in this file need to be fixed in the generator
*/

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined"
	&& typeof exports !== "undefined"
	&& typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "zh-TW", "default", {
	name: "zh-TW",
	englishName: "Chinese (Traditional, Taiwan)",
	nativeName: "(??)",
	language: "zh-CHT",
	numberFormat: {
		NaN: "?",
		negativeInfinity: "",
		positiveInfinity: "",
		percent: {
			pattern: ["-n%","n%"]
		},
		currency: {
			pattern: ["-$n","$n"],
			symbol: "NT$"
		}
	},
	calendars: {
		standard: {
			days: {
				names: ["","","","","","",""],
				namesAbbr: ["","","","","","",""],
				namesShort: ["","","","","","",""]
			},
			months: {
				names: ["","","","","","","","","?","??","??","??",""],
				namesAbbr: ["","","","","","","","","?","??","??","??",""]
			},
			AM: ["?","?","?"],
			PM: ["?","?","?"],
			eras: [{"name":"","start":null,"offset":0}],
			patterns: {
				d: "yyyy/M/d",
				D: "yyyy''M''d''",
				t: "tt hh:mm",
				T: "tt hh:mm:ss",
				f: "yyyy''M''d'' tt hh:mm",
				F: "yyyy''M''d'' tt hh:mm:ss",
				M: "M''d''",
				Y: "yyyy''M''"
			}
		},
		Taiwan: {
			name: "Taiwan",
			days: {
				names: ["","","","","","",""],
				namesAbbr: ["","","","","","",""],
				namesShort: ["","","","","","",""]
			},
			months: {
				names: ["","","","","","","","","?","??","??","??",""],
				namesAbbr: ["","","","","","","","","?","??","??","??",""]
			},
			AM: ["?","?","?"],
			PM: ["?","?","?"],
			eras: [{"name":"","start":null,"offset":1911}],
			twoDigitYearMax: 99,
			patterns: {
				d: "yyyy/M/d",
				D: "yyyy''M''d''",
				t: "tt hh:mm",
				T: "tt hh:mm:ss",
				f: "yyyy''M''d'' tt hh:mm",
				F: "yyyy''M''d'' tt hh:mm:ss",
				M: "M''d''",
				Y: "yyyy''M''"
			}
		}
	},
	messages: {"AdditionalHelp":"","AddNewTab":"??","Alerts":"","ApplyFilter":"?","Approve":"","Attachments":"","Back":"","Basic":"","Between":"","Book":"","Cancel":"?","Checked":"?","ClearFilter":"?","Close":"","CloseCancelChanges":"?","CloseSaveChanges":"?","CloseTab":"??","ColumnPersonalization":"","Comments":"","Confirmation":"?","Contains":"?","CreateTab":"??","Cut":"","Delete":"","DiscardUndo":"/","DisplayDropDownList":"","Displaying":": ","DocWord":"","DoesNotContain":"??","DoesNotEndWith":"???","DoesNotEqual":"?","DoesNotStartWith":"?","Download":"","Duplicate":"","Edit":"","EitherSelectedorNotSelected":"???","Email":"?","EndsWith":"??","EqualsStr":"","ExpandCollapse":"/","ExportFailed":"","ExportToExcel":" Excel","FileInUse":"","FileInUseDetail":"???","Filter":"?","FilterMenu":"??","FilterOptions":"??","FilterWithinResults":"??","First":"","FirstView":"","Folder":"","ForgotPassword":"?","Forward":"?","GetMoreRows":"??","GreaterThan":"","GreaterThanOrEquals":"","GridSettings":"","GroupSelection":"?","Help":"","HideColumn":"?","IsEmpty":"","IsNotEmpty":"?","Last":"","LastView":"","LaunchActivate":"/","LessThan":"?","LessThanOrEquals":"?","Links":"?","ListTabs":"??","LoadingItem":" ","Maintenance":"","Menu":"?","New":"","Next":"","NextView":"","No":"?","NotChecked":"?","Notes":"","NotSelected":"?","Of":" / ","Ok":"","Open":"","Password":"","Paste":"","Phone":"","PleaseWait":"?","Previous":"","PreviousView":"","Print":"?","Queries":"","Redo":"??","Refresh":"","Reject":"","RememberMe":"?","Reports":"","Reset":"?","Review":"","RunFilter":"??","RunJob":"?","Save":"?","SaveBeforeClosing":"?","SavedFilters":"??","SaveSubmit":"?/??","ScreenDesign":"?","Search":"?","SelectContents":"?","SelectDate":"?","SelectDeselect":"?/?","Selected":"?: ","ServerName":"???","Settings":"","ShowFilterRow":"?","SignIn":"","SortAscending":"???","SortDescending":"???","Spreadsheet":"?","StartsWith":"","StatusIndicator":"","Tasks":"","Today":"","Translate":"","UserID":" ID","Utilities":"","Yes":"","Page":"","Rows":"","ShowingAll":"","SessionNavigation":"","ListAllMenuItems":"?","NoRecordsFound":"","SearchTree":"?","Clear":"","DrillDown":"","Required":"","Available":"?:","Add":"","MoveDown":"","MoveUp":"","Remove":"","LastYear":"","NextMonth":"","NextWeek":"","NextYear":"","OneMonthAgo":"?","OneWeekAgo":"?","SixMonthsAgo":"??","Time":"","CannotBeSelected":"??","ResetToDefault":"??","CloseOtherTabs":"??","String2":"??","Maximize":"","Minimize":"?"}
});

}( this ));
